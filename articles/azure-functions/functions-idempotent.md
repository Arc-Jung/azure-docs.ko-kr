---
title: 동일한 입력에 대한 Azure 함수 디자인
description: azure 함수를 idempotent로 빌드
author: craigshoemaker
ms.author: cshoe
ms.date: 9/12/2019
ms.topic: article
ms.openlocfilehash: 15af60ac5a862e6fb20e65ba6fbb92482420b7c0
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/27/2020
ms.locfileid: "74226868"
---
# <a name="designing-azure-functions-for-identical-input"></a>동일한 입력에 대한 Azure 함수 디자인

이벤트 기반 및 메시지 기반 아키텍처의 현실은 데이터 무결성과 시스템 안정성을 유지하면서 동일한 요청을 수락할 필요성을 규정합니다.

설명하기 위해 엘리베이터 호출 버튼을 고려하십시오. 버튼을 누르면 불이 켜지고 엘리베이터가 바닥으로 전송됩니다. 몇 분 후, 다른 사람이 로비에 여러분과 합류합니다. 이 사람은 미소를 지으며 조명 버튼을 두 번째로 누릅니다. 엘리베이터를 호출하는 명령이 idempotent 것을 생각 나게하는 것처럼 당신은 다시 미소와 자신에게 웃음.

엘리베이터 호출 버튼을 두 번째, 세 번째 또는 네 번째 시간을 누르면 최종 결과에 아무런 영향을 미치지 않습니다. 버튼을 누르면 횟수에 관계없이 엘리베이터가 바닥으로 전송됩니다. 엘리베이터와 같은 Idempotent 시스템은 동일한 명령이 몇 번이나 발급되더라도 동일한 결과를 초래합니다.

응용 프로그램을 빌드할 때 다음 시나리오를 고려하십시오.

- 인벤토리 관리 응용 프로그램에서 동일한 제품을 두 번 이상 삭제하려고 하면 어떻게 됩니까?
- 동일한 사람에 대한 직원 레코드를 만드는 요청이 두 개 이상 있는 경우 인적 자원 응용 프로그램은 어떻게 행동합니까?
- 은행 앱이 동일한 인출요청을 100건 받으면 돈은 어디로 갈까요?

함수에 대한 요청이 동일한 명령을 수신할 수 있는 많은 컨텍스트가 있습니다. 몇 가지 상황은 다음과 같습니다.

- 동일한 요청을 여러 번 보내는 정책 다시 시도
- 캐시된 명령이 응용 프로그램에 재생됩니다.
- 동일한 여러 요청을 보내는 응용 프로그램 오류

데이터 무결성 및 시스템 상태를 보호하기 위해 idempotent 응용 프로그램에는 다음 동작이 포함될 수 있는 논리가 포함되어 있습니다.

- 삭제를 실행하기 전에 데이터의 존재 여부를 확인
- 만들기 작업을 실행하기 전에 데이터가 이미 있는지 확인
- 데이터의 최종 일관성을 만드는 조정 논리
- 동시성 컨트롤
- 중복 감지
- 데이터 새로 고름 검증
- 입력 데이터를 확인하는 가드 논리

궁극적으로 idempotency는 주어진 작업이 가능하고 한 번만 실행되도록 함으로써 달성됩니다.
