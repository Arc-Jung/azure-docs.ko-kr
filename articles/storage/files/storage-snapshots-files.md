---
title: "Azure 파일 공유 스냅숏(미리 보기) | Microsoft Docs"
description: "Azure 파일 공유 스냅숏은 특정 시점에 생성된 Azure 파일 공유의 읽기 전용 버전입니다. 공유 스냅숏이 생성된 후에는 읽거나 복사하거나 삭제할 수 있지만 수정할 수는 없습니다. 공유 스냅숏을 사용하면 특정 시점에서 표시된 대로 공유를 백업할 수 있습니다."
services: storage
documentationcenter: .net
author: renash
manager: aungoo
editor: tysonn
ms.assetid: edabe3ee-688b-41e0-b34f-613ac9c3fdfd
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2017
ms.author: renash
ms.openlocfilehash: 70b7fec318b527c6c67bd281892c10814712bbc6
ms.sourcegitcommit: 51ea178c8205726e8772f8c6f53637b0d43259c6
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/11/2017
---
# <a name="azure-files-share-snapshot-preview-overview"></a>Azure 파일 공유 스냅숏(미리 보기) 개요
Azure 파일은 파일 공유의 공유 스냅숏을 생성하는 기능을 제공합니다. 공유 스냅숏(미리 보기)은 특정 시점의 공유 상태를 캡처합니다. 이 문서에서는 공유 스냅숏이 제공하는 기능 및 사용자 지정 사용 사례에 이를 이용할 수 있는 방법을 설명합니다.


## <a name="when-to-use-share-snapshots"></a>공유 스냅숏을 사용하는 경우

### <a name="protection-against-application-error-and-data-corruption"></a>응용 프로그램 오류 및 데이터 손상으로부터 보호
-------------------------------------------------------------------------

Azure 파일 공유를 사용하는 응용 프로그램은 쓰기, 읽기, 저장, 전송 또는 처리 등 다양한 작업을 수행합니다. 응용 프로그램이 잘못 구성되거나 의도하지 않은 버그가 도입되어 일부 블록을 실수로 덮어쓰거나 손상시킬 수 있습니다. 이러한 시나리오를 방지하기 위해 새 응용 프로그램 코드를 배포하기 전에 공유 스냅숏을 생성하고 새 배포에 버그 또는 응용 프로그램 오류가 도입된 경우 해당 파일 공유에 상주하는 데이터의 이전 버전으로 돌아갈 수 있습니다. 

### <a name="protection-against-accidental-deletions-or-unintended-changes"></a>실수로 삭제 또는 의도하지 않은 변경 방지
----------------------------------------------------------------------------------------------

사용자가 파일 공유에 상주하는 텍스트 파일에서 작업하는 경우를 생각해 보겠습니다. 텍스트 파일을 닫은 후에는 변경 내용을 취소할 수 없게 됩니다. 이러한 경우 파일의 이전 버전을 복구해야 합니다. 공유 스냅숏을 사용하면 파일을 실수로 이름 변경하거나 삭제한 경우 해당 파일의 이전 버전을 복구할 수 있습니다.

### <a name="general-backup-purposes"></a>일반 백업 목적
---------------------------

Azure 파일 공유를 생성한 후 주기적으로 Azure 파일 공유의 공유 스냅숏을 생성하여 데이터 백업에 사용할 수 있습니다. 주기적으로 생성되는 스냅숏을 공유하면 미래의 감사 요구 사항 또는 재해 복구에 사용할 수 있는 데이터의 이전 버전을 유지할 수 있습니다.

## <a name="share-snapshot-capabilities"></a>공유 스냅숏 기능

공유 스냅숏은 데이터의 특정 시점 읽기 전용 복사본입니다. REST API를 사용하여 스냅숏을 만들고 삭제 및 관리할 수 있습니다. 클라이언트 라이브러리, CLI 및 Azure Portal에서도 같은 기능을 사용할 수 있습니다. 공유 스냅숏용 Powershell 통합도 곧 출시될 예정입니다. REST API 및 SMB 둘 다를 사용하여 공유의 스냅숏을 볼 수 있습니다. 고객은 디렉터리 또는 파일의 버전 목록을 검색할 수 있으며 특정 버전을 드라이브로 직접 탑재할 수도 있습니다. 공유 스냅숏이 생성된 후에는 읽거나 복사하거나 삭제할 수 있지만 수정할 수는 없습니다. 전체 공유 스냅숏을 다른 저장소 계정에 복사할 수 없으며 azcopy 또는 다른 복사 메커니즘을 사용하여 파일별로 복사해야 합니다.

공유 스냅숏 기능은 파일 공유 수준에서 제공되는 반면에, 검색은 개별 파일을 복원할 수 있도록 개별 파일 수준에서 제공됩니다. SMB, REST API, 포털, 클라이언트 라이브러리 또는 PowerShell/CLI 툴링을 사용하여 전체 파일 공유를 복원할 수 있습니다.

파일 공유의 공유 스냅숏은 공유 URI가 공유 스냅숏이 생성된 시간을 나타내기 위해 공유 URI에 추가된 **DateTime** 값을 포함한다는 것을 제외하고 해당 기본 파일 공유와 같습니다. 예를 들어 파일 공유 URI가 http://storagesample.core.file.windows.net/myshare인 경우 공유 스냅숏 URI는 다음과 유사합니다.
```
http://storagesample.core.file.windows.net/myshare?snapshot=2011-03-09T01:42:34.9360000Z.
```

공유 스냅숏은 명시적으로 삭제하기 전까지 유지됩니다. 공유 스냅숏은 해당 기본 파일 공유보다 수명이 길 수 없습니다. 기본 파일 공유와 연결된 스냅숏을 열거하여 현재 스냅숏을 추적할 수 있습니다. 파일 공유의 공유 스냅숏을 생성하면 공유의 시스템 속성에 상주하는 파일이 같은 값을 가진 공유 스냅숏에 복사됩니다. 만들 때 공유 스냅숏에 대한 별도의 메타데이터를 지정하지 않으면 기본 파일 및 파일 공유의 메타데이터도 공유 스냅숏에 복사됩니다.

공유 스냅숏을 포함한 공유는 먼저 해당 공유 스냅숏을 모두 삭제하지 않으면 삭제할 수 없습니다.


## <a name="share-snapshot-space-usage"></a>공유 스냅숏의 공간 사용량 

공유 스냅숏은 기본적으로 증분식이므로 최근 공유 스냅숏 이후 변경된 데이터만 저장됩니다. 따라서 공유 스냅숏을 생성하는 데 필요한 시간이 최소화되어 저장소 비용이 절약됩니다. 개체 또는 속성에 쓰기 작업 또는 메타데이터 업데이트 작업은 "변경된 내용"에 대해 계산되어 공유 스냅숏에 저장됩니다. 

공간을 절약하려면 특정 기간 동안 변동이 가장 큰 공유 스냅숏을 삭제할 수 있습니다.

공유 스냅숏은 증분식으로 저장되지만 공유 스냅숏 삭제 프로세스는 최근 공유 스냅숏만 보존하면 공유를 복원할 수 있도록 설계되어 있습니다. 공유 스냅숏을 삭제하면 해당 공유 스냅숏에 고유한 데이터만 제거됩니다. 활성 스냅숏은 데이터를 찾아보고 데이터를 (공유 스냅숏이 생성된 시간부터) 원래 또는 대체 위치에 복원하는 데 필요한 모든 정보를 포함합니다. 복원은 항목 수준에서 수행할 수 있습니다.

스냅숏은 5 TB 공유 한계에 대해 계산되지 않습니다. 총 공간 중 공유 스냅숏이 차지하는 양에는 제한이 없습니다. 다만 저장소 계정 제한은 여전히 적용됩니다.

## <a name="limits"></a>제한

Azure 파일에서 금일에 대해 허용하는 최대 공유 스냅숏 수는 200개입니다. 공유 스냅숏이 200개를 넘는 경우 새 공유 스냅숏을 생성하려면 사용자가 이전 공유 스냅숏을 삭제해야 합니다. 공유 스냅숏을 생성하기 위한 동시 호출에는 제한이 없습니다.
특정 파일 공유의 공유 스냅숏이 사용할 수 있는 공간의 양에는 제한이 없습니다. 

## <a name="copy-data-back-to-a-share-from-share-snapshot"></a>공유 스냅숏에서 공유로 데이터 다시 복사

파일 및 공유 스냅숏과 관련된 복사 작업에는 다음 규칙이 적용됩니다.

파일 공유 스냅숏의 개별 파일을 해당 기본 공유 또는 다른 위치에 덮어써서 복사할 수 있습니다. 공유 스냅숏에서 파일별로 복사하여 한 파일의 이전 버전을 복원하거나 전체 파일 공유를 복원할 수 있습니다. 공유 스냅숏은 기본 공유로 승격되지 않습니다. 공유 스냅숏은 복사 후 그대로 유지되지만 기본 파일 공유는 공유 스냅숏에 사용할 수 있는 데이터 복사본으로 덮어씁니다. 모든 복원된 파일은 "변경된 내용"에 대해 계산합니다.

공유 스냅숏의 파일을 다른 이름으로 대상에 복사할 수 있습니다. 그 결과 생성되는 대상 파일은 공유 스냅숏이 아닌 쓰기 가능한 파일입니다.

대상 파일을 복사본으로 덮어쓸 때 원래 대상 파일과 연결된 공유 스냅숏은 그대로 유지됩니다.

## <a name="general-best-practices"></a>일반 모범 사례 

Azure에서 인프라를 실행할 때 데이터 복구를 위해 가능하면 언제나 백업을 자동화하십시오. 자동화된 작업은 수동 프로세스보다 더 안정적이므로 데이터 보호 및 복구 기능을 개선하는 데 도움이 됩니다. 자동화를 위해 REST API, 클라이언트 SDK 또는 스크립팅을 사용할 수 있습니다.

불필요한 공유 스냅숏 비용의 발생을 방지하지 위해 공유 스냅숏 스케줄러를 배포하기 전에 공유 스냅숏 빈도 및 보존 설정을 신중히 고려하십시오.

공유 스냅숏은 파일 수준 보호만 제공하며 실수에 의한 파일 공유 또는 저장소 계정 삭제는 공유 스냅숏에 의해 보호되지 않습니다. 실수에 의한 저장소 계정 삭제를 방지하기 위해 저장소 계정 또는 리소스 그룹을 잠글 수 있습니다.

## <a name="next-steps"></a>다음 단계
* [Azure 파일 공유 스냅숏 작업](storage-how-to-use-files-snapshots.md)
* [공유 스냅숏 FAQ](storage-files-faq.md)

