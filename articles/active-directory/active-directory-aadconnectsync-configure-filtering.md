<properties
	pageTitle="Azure AD Connect 동기화 구성 필터링"
	description="Azure AD Connect 동기화에서 필터링을 구성하는 방법을 설명합니다."
	services="active-directory"
	documentationCenter=""
	authors="markusvi"
	manager="swadhwa"
	editor=""/>

<tags
	ms.service="active-directory"
	ms.workload="identity"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="07/27/2015"
	ms.author="markusvi"/>


# Azure AD Connect 동기화: 필터링 구성

Azure AD Connect 동기화에서 언제든지 필터링을 사용할 수 있습니다. 디렉터리 동기화의 기본 구성을 이미 실행하고 필터링을 구성하는 경우, 필터링된 개체는 Azure AD에 더 이상 동기화되지 않습니다. 결과적으로 Azure AD에서 이전에 동기화되었지만 그 후에 필터링된 개체는 Azure AD에서 삭제됩니다. 필터링 오류로 인해 개체가 의도치 않게 삭제된 경우에 필터링 구성을 제거하고 Azure AD에 개체를 다시 만들 수 있으며 그런 다음 디렉터리를 다시 동기화합니다.

> [AZURE.IMPORTANT]Microsoft는 공식적으로 문서화된 작업 외의 Azure AD Connect 동기화에 대한 수정 또는 작업을 지원하지 않습니다. 이러한 작업은 Azure AD Connect 동기화의 불일치 또는 지원되지 않는 상태를 발생시킬 수 있으며 결과적으로 Microsoft가 해당 배포에 대해 기술 지원을 제공할 수 없습니다.
 
아웃바운드 특성 기반 필터링을 제외하고 Azure AD Connect를 최신 버전으로 업그레이드하거나 설치할 때 그 구성은 유지됩니다. 언제나 가장 좋은 방법은 첫 번째 동기화 주기가 실행되기 전에 최신 버전으로 업그레이드한 후 구성이 의도치 않게 변경되지 않았는지 확인하는 것입니다.


## 필터링 옵션

> [AZURE.NOTE]이 항목에서는 원본 AD가 Active Directory 도메인 서비스 커넥터에 대한 이름으로 사용됩니다. 여러 포리스트가 있는 경우 각 포리스트 당 하나의 커넥터를 가지게 되며 구성은 각 포리스트마다 반복되어야 합니다.
 
다음 세 가지 필터링 구성 형식을 디렉터리 동기화 도구에 적용할 수 있습니다.

- **도메인 기반**: 이 필터링 형식을 사용하여 Azure AD Connect 동기화에 있는 SourceAD 커넥터의 속성을 관리할 수 있습니다. 이 형식을 사용하여 Azure AD로 동기화할 수 있는 도메인을 선택할 수 있습니다.

- **조직 구성 단위 기반 필터링 구성**: 이 필터링 형식을 사용하여 Azure AD Connect 동기화에 있는 SourceAD 커넥터의 속성을 관리할 수 있습니다. 이 필터링 형식을 사용하여 Azure AD로 동기화할 수 있는 OU를 선택할 수 있습니다.

- **특성 기반**: 이 필터링 메서드를 사용하여 특성 기반 필터를 지정할 수 있습니다. 이를 통해 클라우드로 동기화할 개체를 제어할 수 있습니다.

## 도메인 기반 필터링 구성

이 섹션에서는 도메인 필터를 구성하기 위해 수행해야 하는 단계를 제공합니다.


> [AZURE.NOTE]도메인 필터를 수정한 경우 실행 프로필도 업데이트해야 합니다.
 

**도메인 필터를 설정하려면 다음 단계를 수행합니다.**

1. **ADSyncAdmins** 보안 그룹의 멤버인 계정을 사용하여 Azure AD Connect 동기화를 실행하는 컴퓨터에 로그온 합니다.

2. **시작**에서 **동기화 서비스**를 탭 또는 클릭하여 **동기화 서비스 관리자**를 엽니다. <br>

3. 커넥터 보기를 열려면 **도구** 메뉴에서 **커넥터**를 클릭합니다.

4. **커넥터** 목록에서 **Active Directory 도메인 서비스**를 **형식**으로 가지고 있는 커넥터를 선택합니다.

5. **속성** 대화 상자를 열려면 **작업** 메뉴에서 **속성**을 클릭합니다.

6. **디렉터리 파티션 구성**을 클릭합니다.

7. **디렉터리 파티션 선택** 목록에서 동기화하려는 파티션만 선택되어 있는지 확인합니다.<br>>[AZURE.Note]동기화 프로세스에서 도메인을 제거하려면 해당 도메인의 확인란 선택을 해제합니다.

8. **속성** 대화 상자를 닫으려면 **확인**을 클릭합니다.


도메인 필터를 업데이트한 경우 다음의 실행 프로필도 업데이트해야 합니다.

- 전체 가져오기
- 전체 동기화
- 델타 가져오기
- 델타 동기화
- 내보내기


디렉터리 파티션 목록에서 파티션을 제거한 경우에 해당 파티션을 참조하는 모든 실행 프로필 단계도 제거되었는지 확인해야 합니다.

**실행 프로필에서 단계를 제거하려면 다음 단계를 수행합니다.**

1. **커넥터** 목록에서 **Active Directory 도메인 서비스**를 **형식**으로 가지고 있는 커넥터를 선택합니다.

2. 대화 상자에 대한 **실행 프로필 구성**을 열려면 **작업** 메뉴에서 **실행 프로필 구성**을 클릭합니다.

3. **커넥터 실행 프로필** 목록에서 구성하려는 실행 프로필을 선택합니다

4. 단계 세부 정보 목록에 있는 각 단계에서는 다음 단계를 수행합니다.

     4\.1. 필요한 경우 단계 세부 정보를 확장하는 단계를 클릭합니다.

     4\.2. **파티션** 특성의 **값**이 GUID이면, 삭제 단계를 클릭합니다.

5. 대화 상자에 대한 **실행 프로필 구성**을 닫으려면**확인**을 클릭합니다.

파티션을 디렉터리 파티션 목록에 추가한 경우 파티션에 대한 실행 프로필 단계가 위의 목록에 있는 각 실행 프로필에서 사용 가능한지 확인해야 합니다.

**실행 프로필에서 단계를 추가하려면 다음 단계를 수행합니다.**

1. **커넥터** 목록에서 **Active Directory 도메인 서비스**를 **형식**으로 가지고 있는 커넥터를 선택합니다.

2. 대화 상자에 대한 **실행 프로필 구성**을 열려면 **작업** 메뉴에서 **실행 프로필 구성**을 클릭합니다.

3. **커넥터 실행 프로필** 목록에서 구성하려는 실행 프로필을 선택합니다

4. **실행 프로필 구성** 대화 상자를 열려면 **새 단계**를 클릭합니다.

5. 단계 형식 목록에 있는 **구성 단계** 페이지에서 단계 형식을 선택하고 **다음**을 클릭합니다.

6. **파티션** 목록에 있는 **커넥터 구성** 페이지에서 도메인 필터에 추가한 파티션의 이름을 선택합니다.

7. **실행 프로필 구성** 대화 상자를 닫으려면 **마침**을 클릭합니다.

8. 대화 상자에 대한 **실행 프로필 구성**을 닫으려면 **확인**을 클릭합니다.

 

## 조직 구성 단위 기반 필터링 구성

**조직 구성 단위 기반 필터링을 구성하려면 다음 단계를 수행합니다.**

1. **ADSyncAdmins** 보안 그룹의 멤버인 계정을 사용하여 Azure AD Connect 동기화를 실행하는 컴퓨터에 로그온 합니다.

2. **시작**에서 **동기화 서비스**를 탭 또는 클릭하여 **동기화 서비스 관리자**를 엽니다.<br>

3. **동기화 서비스 관리자**에서 **커넥터**를 클릭하고 **SourceAD**를 두 번 클릭합니다.

4. **디렉터리 파티션 구성**을 클릭하고 구성하려는 도메인을 선택한 후 **컨테이너**를 클릭합니다.

5. 메시지가 표시되면 온-프레미스 Active Directory 포리스트의 도메인 자격 증명을 입력 합니다.<br>>[AZURE.NOTE]자격 증명 대화 상자가 나타나면 가져오기 및 AD DS에 내보내기에 사용된 계정이 표시됩니다. 계정에 대한 암호를 모르는 경우 다른 계정을 입력해 사용할 수 있습니다. 사용하는 계정은 현재 구성 중인 도메인에 대한 읽기 사용 권한을 가지고 있어야 합니다.

6. **컨테이너 선택** 대화 상자에서 클라우드 디렉터리에 동기화하지 않을 OU의 선택을 해제하고 **확인**을 클릭합니다.

7. **SourceAD 속성** 페이지에서 **확인**을 클릭합니다.

8. 다음 단계를 완료하여 전체 가져오기 및 델타 동기화를 실행합니다.

     8\.1. 커넥터 목록에서 **SourceAD**를 선택합니다.

     8\.2. **커넥터 실행** 대화 상자를 열려면 **작업** 메뉴에서 **실행**을 선택합니다.

     8\.3. **실행 프로필**목록에서 **전체 가져오기**를 선택한 다음 실행 프로필이 완료될 때까지 기다립니다.

     8\.4. **커넥터 실행** 대화 상자를 열려면 **작업** 메뉴에서 **실행**을 선택합니다.

     8\.5. **실행 프로필**목록에서 **델타 동기화**를 선택한 다음 실행 프로필이 완료될 때까지 기다립니다.




## 특성 기반 필터링 구성

특성을 기반으로 한 필터링을 구성하는 방법에는 여러 가지가 있습니다. 구성 설정은 최신 버전으로 업그레이드된 이후에도 유지되기 때문에, AD에서부터 인바운드하는 구성이 권장됩니다. AAD로 아웃바운드하는 구성이 지원되지만 이 설정은 최신 버전으로 업그레이드된 후에는 유지되지 않으며 필터링을 결정하기 위해 메타 버스에서 결합된 개체를 살펴 보아야 할 때에만 사용되어야 합니다.

### 인바운드 필터링

인바운드 기반 필터링은 AAD로 가는 개체들이 값을 설정하지 않은 메타 버스 특성 cloudFiltered와 “사용자” 또는 “연락처”로 설정된 메타 버스 특성 sourceObjectType을 가진 기본 구성을 활용합니다.

개체가 Azure AD로 동기화되지 않고 다른 경우에 비어있는 상태로 유지되어야 할 경우 특성 cloudFiltered는 True로 설정되어야 합니다. 이 메서드는 개체를 살펴보고 개체를 동기화하고 싶지 않을 때 (음성 필터링) 사용됩니다.

다음 예제에서는 extensionAttribute15가 NoSync의 값을 가진 모든 사용자를 필터링합니다.

1. ADSyincAdmins 보안 그룹의 멤버인 계정을 사용하여 Azure AD Connect 동기화를 실행하는 컴퓨터에 로그온 합니다.
2. **시작 메뉴**에서 **동기화 규칙 편집기**를 엽니다.
3. **인바운드**가 선택되어 있는지 확인하고 **새 규칙 추가**를 클릭합니다.
4. 규칙에 “\*In from AD - User DoNotSyncFilter\*”와 같은 설명이 포함된 이름을 붙이고 **사용자**는 **CS 개체 형식**으로, **사람**은 **MV 개체 형식**으로 올바른 포리스트를 선택합니다. **링크 형식**으로 **조인**을 선택하고 우선 순위 형식에서 현재 다른 동기화 규칙에서 사용하지 않는 값 (예: 50)을 선택한 후 **다음**을 클릭합니다.
5. **범위 지정 필터**에서 **그룹 추가**를 클릭하고 **절 추가**를 클릭한 후 특성에서 **ExtensionAttribute15**를 선택합니다. 연산자가 값 상자의 NoSync 값에서 **같음** 및 **형식**으로 설정되었는지 확인합니다. **다음**을 클릭합니다.
6. **조인**을 비워두고 **다음**을 클릭합니다.
7. **변환 추가**를 클릭하고 **FlowType**을 **상수**로 선택한 후 대상 특성 cloudFiltered를 선택하고 원본 텍스트 상자에 True를 입력합니다. 추가를 클릭하여 규칙을 저장합니다.
8. 전체 동기화 수행 방법: **커넥터** 탭에서 **SourceAD**를 마우스 오른쪽 단추로 클릭하고 **실행**, **전체 동기화**, **확인**을 차례로 클릭합니다. 


특성 **sourceObjectType**는 특성이 **사용자** 또는 **연락처** 값을 각각 가지고 있으면 **사용자** 또는 **연락처**를 Azure AD에 프로비전합니다. 기본보다 높은 우선 순위로 동기화 규칙을 만들어 기본 동작을 재정의 할 수 있습니다. 또한 이 메서드는 양성 및 음성 규칙을 표현하는 기회를 제공합니다.

다음 예제에서는 부서 특성이 “\*Sales\*”이거나 비어있는 경우에만 사용자를 동기화합니다.

1. ADSyincAdmins 보안 그룹의 멤버인 계정을 사용하여 Azure AD Connect 동기화를 실행하는 컴퓨터에 로그온 합니다.
2. **시작 메뉴**에서 **동기화 규칙 편집기**를 엽니다.
3. **인바운드**가 선택되어 있는지 확인한 후 **새 규칙 추가**를 클릭합니다.
4. 규칙에 설명이 포함된 이름 (예: “\*In from AD – User DoNotSyncFilter\*”)을 붙이고 **사용자**는 **CS 개체 형식**으로, **사람**은 **MV 개체 형식**으로 올바른 포리스트를 선택합니다. **링크 형식**으로 **조인**을 선택하고 **우선 순위 형식**에서 현재 다른 동기와 규칙에서 사용하지 않는 값 (예: 60)을 선택합니다. **다음**을 클릭합니다.
5. **범위 지정 필터**와 **조인 규칙**을 비워두고 **다음**을 두 번 클릭합니다.
6. **변환 추가**를 클릭하고 **FlowType**을 **식** 으로 선택한 후 **대상 특성**을 **sourceObjectType**으로 선택합니다. **원본** 형식에서 다음의 식을 입력합니다.<br>`IIF(IsNullOrEmpty([department]),NULL,IIF([department]<>”Sales”,”DoNotSync”,NULL))`
7. 추가를 클릭하여 규칙을 저장합니다.
8. 전체 동기화 수행 방법: **커넥터** 탭에서 **SourceAD**를 마우스 오른쪽 단추로 클릭하고 **실행**, **전체 동기화**, **확인**을 차례로 클릭합니다. 그 결과는 다음과 같습니다.<br>

> [AZURE.NOTE]어떤 개체가 AAD에 동기화되기를 원하는지 결정하기 위하여 cloudFiltered 와 sourceObjectType을 함께 사용한 것을 참고하십시오.
 
식을 사용하여 매우 강력한 필터링 옵션을 갖게 됩니다. 위의 식에서 부서가 Sales이고 나타나지 않을 때 리터럴 NULL을 제공한 것을 참고하십시오. 이는 이 특성이 값을 가져오지 않았고 기본 규칙이 평가된다는 것을 나타냅니다. 이렇게 하여 Azure AD에 만들어야 하는 **사용자** 또는 **연락처**인지 확인할 수 있습니다.


## 아웃바운드 기반 필터링

일부 경우는 개체가 메타 버스에 연결한 후에만 필터링을 할 필요가 있습니다. 예를 들어 개체가 동기화되었는지 확인하기 위해 리소스 포리스트에서 메일 특성을 살펴보아야 하거나 계정 포리스트에서 userPrincipalName 특성을 살펴보아야 할 경우가 있을 수 있습니다. 이러한 경우 아웃바운드 규칙에서 필터를 만듭니다.

> [AZURE.NOTE]이 메서드는 기본 동기화 규칙에 대한 변경을 필요로 합니다. 동기화 규칙의 범위 변경이 지원되지만 Azure AD Connect를 최신 버전으로 업그레이드한 후에는 변경 사항이 유지되지 않을 수도 있습니다. 아웃바운드 기반 필터링을 사용하는 경우 만들어야 할 변경의 참고를 만들고 업그레이드 후에는 필터링이 여전히 있는지 확인한 후 필요한 경우에는 다시 적용합니다.
 

이 예제에서는 메일과 userPrincipalName이 @contoso.com으로 끝나는 사용자만 동기화하도록 필터링을 변경합니다.

1. ADSyincAdmins 보안 그룹의 멤버인 계정을 사용하여 Azure AD Connect 동기화를 실행하는 컴퓨터에 로그온 합니다.
2. 시작 메뉴에서 동기화 규칙 편집기를 찾아 엽니다.
3. 규칙 형식에서 아웃바운드를 클릭합니다.
4. Out to AAD – User Join이라는 규칙을 찾습니다. 편집을 클릭합니다.
5. 왼쪽의 탐색창에서 범위 지정 필터를 클릭합니다. 절 추가를 클릭하고 특성은 메일, 연산자는 ENDSWITH, 값 형식은 @contoso.com으로 선택합니다. 절 추가를 클릭하고 특성은 userPrincipalName, 연산자는 ENDSWITH, 값 형식은 @contoso.com으로 선택합니다.
6. 저장을 클릭합니다.
7. 전체 동기화 수행 방법: 커넥터 탭에서 SourceAD를 마우스 오른쪽 단추로 클릭하고 실행, 전체 동기화, 확인을 차례로 클릭합니다.



## 추가 리소스

* [Azure AD Connect Sync: 사용자 지정 동기화 옵션](active-directory-aadconnectsync-whatis.md)
* [Azure Active Directory와 온-프레미스 ID 통합](active-directory-aadconnect.md)

 

<!---HONumber=July15_HO5-->