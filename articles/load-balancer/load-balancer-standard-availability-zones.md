---
title: Azure 표준 Load Balancer 및 가용성 영역
titleSuffix: Azure Load Balancer
description: 이 학습 경로를 사용 하 여 Azure 표준 Load Balancer 및 가용성 영역를 시작 합니다.
services: load-balancer
documentationcenter: na
author: asudbring
ms.custom: seodec18
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/07/2020
ms.author: allensu
ms.openlocfilehash: 541aa7da3e804931c1793e455bcbfca83c809dae
ms.sourcegitcommit: 5d7f8c57eaae91f7d9cf1f4da059006521ed4f9f
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/10/2020
ms.locfileid: "89669176"
---
# <a name="standard-load-balancer-and-availability-zones"></a>표준 Load Balancer 및 가용성 영역

Azure 표준 Load Balancer는 가용성 영역 시나리오를 지원 합니다. 표준 부하 분산 장치를 사용 하 여 리소스를에 맞추고 영역 간 배포를 통해 시나리오 전체의 가용성을 높일 수 있습니다. 가용성 영역은 표준 부하 분산 장치와 함께 다양 한 시나리오를 만들 수 있는 광범위 하 고 유연한 기능 집합입니다.  이러한 [개념](#concepts)과 기본 시나리오 [디자인 지침](#design)을 이해하려면 이 문서를 검토하세요.

## <a name="availability-zones-concepts-applied-to-load-balancer"></a><a name="concepts"></a> Load Balancer에 적용된 가용성 영역 개념

부하 분산 장치는 해당 구성 요소에서 영역 구성을 상속 합니다. 

* 프런트 엔드
* 규칙
* 백 엔드 풀 정의

가용성 영역의 컨텍스트에서 부하 분산 장치 규칙의 동작 및 속성은 영역 중복 또는 영역으로 설명 됩니다.  부하 분산 장치의 컨텍스트에서 영역 중복은 항상 **여러 영역** 을 의미 하 고 영역에는 서비스를 **단일 영역**으로 격리 하는 것을 의미 합니다. Azure Load Balancer에는 공용 및 내부 라는 두 가지 형식이 있습니다. 두 가지 유형의 부하 분산 장치는 영역 중복성 및 영역 배포를 지원 합니다.  두 부하 분산 장치 유형 모두 필요에 따라 영역 간에 트래픽을 보낼 수 있습니다.

## <a name="frontend"></a>프런트 엔드

부하 분산 장치 프런트 엔드는 가상 네트워크의 서브넷 내에서 공용 IP 주소 또는 개인 IP 주소를 참조 하는 프런트 엔드 IP 구성입니다. 서비스가 노출되는 부하 분산된 엔드포인트를 형성합니다.

부하 분산 장치 리소스는 영역 중복 및 영역 중복 프런트 엔드 포함 된 규칙을 동시에 포함할 수 있습니다. 공용 또는 개인 IP가 영역에 대해 보장 되는 경우 영역 조건을 (또는 부족)가 변경할 수 되지 않습니다. 공용 또는 개인 IP 주소 프런트 엔드의 영역 조건을를 변경 하거나 생략 하려면 적절 한 영역에 IP를 다시 만듭니다. 

가용성 영역은 여러 프런트 엔드에 대 한 제약 조건을 변경 하지 않습니다. 이 기능에 대 한 자세한 내용은 [Load Balancer에 대 한 여러 프런트 엔드을](load-balancer-multivip-overview.md) 검토 합니다.

### <a name="zone-redundant"></a>영역 중복 

가용성 영역이 있는 지역에서 표준 부하 분산 장치 프런트 엔드는 영역 중복 될 수 있습니다. 여러 영역은 지역에서 인바운드 또는 아웃 바운드를 제공할 수 있습니다. 이 트래픽은 단일 IP 주소에 의해 제공 됩니다. DNS 중복 구성표는 필요하지 않습니다. 

단일 프런트 엔드 IP 주소는 영역 실패 후에도 유지 됩니다. 프런트 엔드 IP를 사용 하 여 영역에 관계 없이 모든 (영향을 받지 않는) 백 엔드 풀 구성원에 연결할 수 있습니다. 하나 이상의 가용성 영역이 실패할 수 있으며, 지역에서 한 영역이 정상으로 유지 되는 한 데이터 경로가 생존 합니다. 

프런트 엔드의 IP 주소는 여러 가용성 영역에서 여러 독립 인프라 배포에 의해 동시에 처리 됩니다. 재시도 또는 재설정는 영역 실패의 영향을 받지 않는 다른 영역에서 성공 합니다. 

<p align="center">
  <img src="./media/az-zonal/zone-redundant-lb-1.svg" alt="Figure depicts a zone-redundant standard load balancer directing traffic in three different zones to three different subnets in a zone redundant configuration." width="512" title="Virtual Network NAT">
</p>

*그림: 영역 중복 부하 분산 장치*

### <a name="zonal"></a>횡단면

*영역 프런트 엔드*라고 하는 단일 영역에 대한 프런트 엔드를 보장하도록 선택할 수 있습니다.  이 시나리오는 모든 인바운드 또는 아웃 바운드 흐름이 한 지역의 단일 영역에서 처리 됨을 의미 합니다.  프런트 엔드는 영역의 상태와 수명을 공유합니다.  데이터 경로는 보장된 영역 이외의 영역에서 오류가 발생해도 영향을 받지 않습니다. 영역 프런트 엔드를 사용하여 가용성 영역별 IP 주소를 공개할 수 있습니다.  

또한 각 영역 내의 부하 분산 된 끝점에 대해 영역 프런트 엔드를 직접 사용 하는 것이 지원 됩니다. 이 구성을 사용 하 여 각 영역을 개별적으로 모니터링 하기 위해 부하 분산 된 영역 당 끝점을 노출할 수 있습니다. 공용 끝점의 경우 [Traffic Manager](../traffic-manager/traffic-manager-overview.md) 와 같은 dns 부하 분산 제품과 통합 하 고 단일 dns 이름을 사용할 수 있습니다.


<p align="center">
  <img src="./media/az-zonal/zonal-lb-1.svg" alt="Figure depicts three zonal standard load balancers each directing traffic in a zone to three different subnets in a zonal configuration." width="512" title="Virtual Network NAT">
</p>

*그림: 영역 부하 분산 장치*

이러한 개념(동일한 백 엔드에 대한 영역 중복 및 영역)을 혼합하려면 [Azure Load Balancer의 다중 프런트 엔드](load-balancer-multivip-overview.md)를 검토하세요.

공용 부하 분산 장치 프런트 엔드의 경우 공용 IP에 **영역** 매개 변수를 추가 합니다. 이 공용 IP는 해당 규칙에서 사용 하는 프런트 엔드 IP 구성에서 참조 됩니다.

내부 부하 분산 장치 프런트 엔드의 경우 내부 부하 분산 장치 프런트 엔드 IP 구성에 **zones** 매개 변수를 추가 합니다. 영역 프런트 엔드는 서브넷의 IP 주소를 특정 영역으로 보장 합니다.

## <a name="backend"></a>백 엔드

Azure Load Balancer은 가상 머신 인스턴스에서 작동 합니다. 이러한 인스턴스는 독립 실행형, 가용성 집합 또는 가상 머신 확장 집합 일 수 있습니다. 단일 가상 네트워크의 모든 가상 머신은 백 엔드 풀의 일부가 될 수 있으며,이는 가상 머신이 보장 되는 영역입니다.

프런트 엔드 및 백 엔드를 단일 영역으로 정렬 하 고 보장 하려면 동일한 영역 내에 있는 가상 컴퓨터를 해당 백 엔드 풀에 추가 합니다.

여러 영역에서 가상 컴퓨터를 처리 하려면 여러 영역의 가상 컴퓨터를 동일한 백 엔드 풀에 저장 합니다. 

Virtual machine scale sets를 사용 하는 경우 하나 이상의 가상 머신 확장 집합을 동일한 백 엔드 풀에 저장 합니다. 크기 집합은 단일 또는 여러 영역에 있을 수 있습니다.

## <a name="outbound-connections"></a>아웃바운드 연결

영역 중복 및 영역은 [아웃 바운드 연결](load-balancer-outbound-connections.md)에 적용 됩니다. 아웃 바운드 연결에 사용 되는 영역 중복 공용 IP 주소는 모든 영역에서 제공 됩니다. 영역 공용 IP 주소는이 보장 된 영역 에서만 제공 됩니다. 

아웃 바운드 연결 SNAT 포트 할당은 영역 오류에 남아 있으며, 시나리오는 영역 실패의 영향을 받지 않는 경우 아웃 바운드 SNAT 연결을 계속 제공 합니다. 영역 오류에는 영향을 받는 영역에서 트래픽을 처리 한 경우 영역 중복 시나리오에 대 한 연결을 다시 설정 해야 할 수 있습니다. 영향을 받는 영역 이외의 영역에 있는 흐름은 영향을 받지 않습니다.

SNAT 포트 미리 할당 알고리즘은 가용성 영역을 사용 하거나 사용 하지 않는 상태와 동일 합니다.

## <a name="health-probes"></a>상태 프로브

기존 상태 프로브 정의는 가용성 영역이 없는 그대로 남아 있습니다. 그러나 인프라 수준에서 상태 모델을 확장 했습니다. 

영역 중복 프런트 엔드를 사용 하는 경우 부하 분산 장치는 내부 상태 검사를 확장 합니다. 부하 분산 장치는 각 영역에서 가상 컴퓨터의 가용성을 독립적으로 검색 하 고 개입 없이 실패 한 영역에서 경로를 종료 합니다.  

이 VM에 연결할 수 있는 다른 영역은 해당 프런트 엔드에서 VM을 계속 처리할 수 있습니다. 오류 이벤트가 발생 하는 동안 각 영역에는 서비스의 전반적인 상태를 보호 하는 동안 새 흐름의 여러 배포가 있을 수 있습니다.

## <a name="design-considerations"></a><a name="design"></a> 디자인 고려 사항

부하 분산 장치는 가용성 영역의 맥락에서 유연 합니다. 영역에 맞추거나 각 규칙에 대해 영역 중복으로 선택할 수 있습니다. 가용성 증가는 복잡성이 증가 하는 가격으로 제공 될 수 있습니다. 최적 성능을 위한 가용성을 설계 합니다.

### <a name="zone-redundancy"></a>영역-중복성

Load Balancer를 사용하면 단일 IP를 영역 중복 프런트 엔드로 간단하게 만들 수 있습니다. 영역 중복 IP 주소는 모든 영역에서 영역 리소스를 제공할 수 있습니다.  영역 내에서 한 영역이 정상 상태로 유지 되는 한 하나 이상의 영역 오류에 IP가 남아 있을 수 있습니다.  대신 영역 프런트 엔드는 단일 영역에 대 한 서비스를 줄이고 해당 영역에 대 한 공유를 공유 하는 것입니다.

영역 중복성은 비충돌 데이터 경로 또는 제어 평면을 의미 하지 않습니다. 데이터 평면입니다. 영역 중복 흐름은 모든 영역을 사용할 수 있으며, 고객의 흐름에서는 한 지역의 모든 정상 영역을 사용합니다. 영역 오류에서 정상 영역을 사용 하는 트래픽 흐름은 영향을 받지 않습니다. 

영역 장애 시 영역을 사용 하는 트래픽 흐름에 영향을 줄 수 있지만 응용 프로그램을 복구할 수 있습니다. Azure가 영역 장애를 수렴 했을 때 재전송 시 해당 지역 내의 정상 영역에서 트래픽이 계속 됩니다.

### <a name="cross-zone-boundaries"></a><a name="xzonedesign"></a> 영역 간 경계

서비스가 영역을 벗어날 때마다 한 영역은 아니지만 여러 영역을 포함 하는 위치를 공유 한다는 것을 이해 하는 것이 중요 합니다. 따라서 서비스는 비-영역 배포에 대 한 가용성을 얻지 못할 수 있습니다.

가용성 영역을 사용할 때 가용성 향상을 무효화 하는 의도 하지 않은 영역 간 종속성이 도입 되지 않도록 합니다. 응용 프로그램에 중요 한 구성 요소가 여러 개 있는 경우 영역에 오류가 발생 하는 경우 유지를 확인 합니다.

응용 프로그램에 대 한 단일 중요 한 구성 요소는 남아 있는 영역 이외의 영역에만 있는 경우 전체 응용 프로그램에 영향을 줄 수 있습니다. 영역 복원 및 응용 프로그램의 수렴 방식을 고려 합니다. 응용 프로그램의 일부 오류에 대 한 응답을 이해 합니다. 주요 점수를 검토 하 고 특정 시나리오를 고려 하 여 질문에 사용 합니다.

- 응용 프로그램에 다음 두 가지 구성 요소가 있는 경우:

    * IP 주소
    * 관리 디스크를 사용 하는 가상 머신

영역 1 및 영역 2에서 구성 됩니다. 영역 1이 실패 하면 서비스는 존속 되지 않습니다. 잠재적으로 위험한 오류 모드를 생성 하 고 있음을 완전히 이해 하지 않는 한 영역 시나리오와 영역을 교차 하지 마세요. 이 시나리오에서는 유연성을 제공할 수 있습니다.

- 응용 프로그램에 다음 두 가지 구성 요소가 있는 경우:

    * IP 주소
    * 관리 디스크를 사용 하는 가상 머신

영역 중복 및 영역 1로 구성 됩니다. 영역 1이 실패 하지 않는 한 서비스는 영역 2, 영역 3 또는 둘 다의 영역 오류에 계속 남아 있습니다. 하지만 관찰 중인 모든 사용자가 프런트 엔드의 연결 인 경우 서비스의 상태에 대 한 이유를 제공 하는 기능이 손실 됩니다.  더 광범위한 상태 및 용량 모델을 개발하는 것이 좋습니다.  영역 중복 및 영역 개념을 함께 사용하여 통찰력과 관리 효율성을 확장할 수 있습니다.

- 응용 프로그램에 다음 두 가지 구성 요소가 있는 경우:

    * 영역 중복 부하 분산 장치 프런트 엔드
    * 세 영역에서 영역 간 가상 머신 확장 집합

실패의 영향을 받지 않는 영역의 리소스는 사용할 수 있습니다. 서비스 용량이 오류 중에 저하 될 수 있습니다. 인프라 측면에서 볼 때 배포에 하나 이상의 영역 오류가 남아 있을 수 있습니다. 이 시나리오는 다음과 같은 질문을 발생 시킵니다.

  - 응용 프로그램이 오류 및 성능 저하에 어떻게 대응 하는지 이해 하나요?
  - 필요한 경우 지역 쌍에 장애 조치를 강제로 적용하기 위해 서비스에 세이프가드가 필요합니까?
  - 이러한 시나리오는 어떻게 모니터링, 검색 및 완화합니까? 표준 부하 분산 장치 진단을 사용 하 여 서비스 성능 모니터링을 강화할 수 있습니다. 사용 가능한 항목과 확대 해야 할 수 있는 항목을 고려 합니다.

- 영역은 오류를 더 쉽게 이해하고 포함하도록 만들 수 있습니다. 시간 제한, 다시 시도 및 백오프 알고리즘이 발생 하는 경우 영역 오류는 다른 오류와 다르지 않습니다. Azure Load Balancer는 영역 중복 경로를 제공 합니다. 부하 분산 장치는 패킷 수준에서 실시간으로 신속 하 게 복구를 시도 합니다. 장애 하기 시작 하면 중에는 재전송이 발생 하거나 재설정이 수 있습니다. 응용 프로그램의 복사본이 오류를 파악 하는 것이 중요 합니다. 부하 분산 체계가 계속 유지 되지만 다음 질문에 대 한 계획을 세워야 합니다.

  - 영역에 오류가 발생 하면 서비스에서이 오류를 이해 하 고 상태를 잃어 버렸습니다. 어떻게 복구 하나요?
  - 영역이 반환되면 애플리케이션에서 안전하게 수렴하는 방법을 이해하고 있습니까?

[Azure 클라우드 디자인 패턴](https://docs.microsoft.com/azure/architecture/patterns/) 을 검토 하 여 응용 프로그램의 복원 력을 오류 시나리오로 향상 시킵니다.

## <a name="next-steps"></a>다음 단계
- [가용성 영역](../availability-zones/az-overview.md) 에 대 한 자세한 정보
- [표준 Load Balancer](load-balancer-standard-overview.md) 에 대 한 자세한 정보
- [영역 프런트 엔드를 통해 표준 Load Balancer를 사용하여 영역 내에 VM을 부하 분산](load-balancer-standard-public-zonal-cli.md)하는 방법에 대해 알아보기
- [영역 중복 프런트 엔드를 통해 표준 Load Balancer를 사용하여 영역에서 VM을 부하 분산](load-balancer-standard-public-zone-redundant-cli.md)하는 방법에 대해 알아보기
- 응용 프로그램의 복원 력을 오류 시나리오로 개선 하기 위해 [Azure 클라우드 디자인 패턴](https://docs.microsoft.com/azure/architecture/patterns/) 에 대해 알아봅니다.
