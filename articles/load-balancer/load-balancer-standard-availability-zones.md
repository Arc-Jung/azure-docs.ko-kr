---
title: Azure 표준 Load Balancer 및 가용성 영역
titleSuffix: Azure Load Balancer
description: 이 학습 경로를 통해 Azure 표준 로드 밸러커 및 가용성 영역을 시작하십시오.
services: load-balancer
documentationcenter: na
author: asudbring
ms.custom: seodec18
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/07/2019
ms.author: allensu
ms.openlocfilehash: 5a65982c5c13eb4e4273efcfd8d14910b0f35572
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "78197150"
---
# <a name="standard-load-balancer-and-availability-zones"></a>표준 Load Balancer 및 가용성 영역

Azure 표준 로드 [밸러저는 가용성 영역](../availability-zones/az-overview.md) 시나리오를 지원합니다. 표준 로드 밸러블러를 사용하여 리소스를 영역과 정렬하고 영역 간에 배포하여 종단 간 시나리오에서 가용성을 최적화할 수 있습니다.  [가용성 영역,](../availability-zones/az-overview.md) 현재 가용성 영역을 지원하는 지역 및 기타 관련 개념 및 제품에 대한 지침을 보려면 가용성 영역을 검토합니다. 표준 로드 밸런서와 함께 가용성 영역은 다양한 시나리오를 만들 수 있는 광범위하고 유연한 기능 집합입니다.  이러한 [개념](#concepts)과 기본 시나리오 [디자인 지침](#design)을 이해하려면 이 문서를 검토하세요.

## <a name="availability-zones-concepts-applied-to-load-balancer"></a><a name="concepts"></a> Load Balancer에 적용된 가용성 영역 개념

Load Balancer 리소스 자체는 지역이며 영역이 될 수 없습니다. 구성할 수 있는 내용의 세분성은 프런트 엔드, 규칙 및 백 엔드 풀 정의의 각 구성에 의해 제한됩니다.
가용성 영역의 컨텍스트에서 로드 밸러터 규칙의 동작 및 속성은 영역 중복 또는 영역으로 설명됩니다.  영역 중복 및 구역은 속성의 영역 조건(zonality)을 나타냅니다.  로드 밸러블러의 컨텍스트에서 영역 중복은 항상 *여러 영역을* 의미하며 영역은 *서비스를 단일 영역으로*격리하는 것을 의미합니다.
공용 및 내부 Load Balancer 모두는 영역 중복 시나리오 및 영역 시나리오를 지원하며, 필요에 따라 둘 다 영역을 통해 트래픽을 보낼 수 있습니다(*영역 간 부하 분산*). 

### <a name="frontend"></a>프런트 엔드

로드 밸런서 프런트 엔드는 공용 IP 주소 리소스 또는 가상 네트워크 리소스의 서브넷 내의 개인 IP 주소를 참조하는 프런트 엔드 IP 구성입니다.  서비스가 노출되는 부하 분산된 엔드포인트를 형성합니다.
로드 밸러서 리소스에는 영역 및 영역 중복 프런트엔드가 동시에 있는 규칙이 포함될 수 있습니다. 공용 IP 리소스 또는 개인 IP 주소가 영역에 보장된 경우 영역(또는 부족)은 변경할 수 없습니다.  공용 IP 또는 개인 IP 주소 프런트 엔드의 영역을 변경하거나 생략하려면 해당 영역에서 공용 IP를 다시 만들어야 합니다.  가용성 영역은 여러 프런트 엔드에 대한 제약 조건을 변경하지 않으며, 이 기능에 대한 자세한 내용은 [로드 밸러저에 대한 여러 프런트 엔드를](load-balancer-multivip-overview.md) 검토합니다.

#### <a name="zone-redundant"></a>영역 중복 

가용성 영역이 있는 리전에서표준 로드 밸러서 프런트 엔드는 영역 중복될 수 있습니다.  영역 중복은 모든 인바운드 또는 아웃바운드 흐름이 단일 IP 주소를 사용하여 동시에 리전의 여러 가용성 영역에서 제공된다는 것을 의미합니다. DNS 중복 구성표는 필요하지 않습니다. 단일 프런트 엔드 IP 주소는 영역 실패에서 살아남을 수 있으며 영역에 관계없이 모든(영향을 미치지 않는) 백 엔드 풀 멤버에 도달하는 데 사용할 수 있습니다. 하나 이상의 가용성 영역이 실패할 수 있으며 이 지역의 한 영역이 정상상태로 유지되는 한 데이터 경로가 유지됩니다. 프런트 엔드의 단일 IP 주소는 여러 가용성 영역에서 여러 개의 독립적인 인프라 배포에 의해 동시에 제공됩니다.  이는 무적 데이터 경로를 의미하지는 않지만 재시도 또는 재구축은 영역 오류의 영향을 받지 않는 다른 영역에서 성공합니다.   

#### <a name="optional-zone-isolation"></a>옵션 영역 격리

*영역 프런트 엔드*라고 하는 단일 영역에 대한 프런트 엔드를 보장하도록 선택할 수 있습니다.  즉, 모든 인바운드 또는 아웃바운드 흐름이 한 지역의 단일 영역에서 처리됩니다.  프런트 엔드는 영역의 상태와 수명을 공유합니다.  데이터 경로는 보장된 영역 이외의 영역에서 오류가 발생해도 영향을 받지 않습니다. 영역 프런트 엔드를 사용하여 가용성 영역별 IP 주소를 공개할 수 있습니다.  

또한 각 영역 내의 부하 분산 끝점에 구역 프런트 엔드를 직접 사용할 수 있습니다. 또한 이를 통해 부하 분산된 영역별 엔드포인트를 공개하여 각 영역을 개별적으로 모니터링할 수도 있습니다.  또는 공용 끝점의 경우 [트래픽 관리자와](../traffic-manager/traffic-manager-overview.md) 같은 DNS 로드 밸런싱 제품과 통합하고 단일 DNS 이름을 사용할 수 있습니다. 그러면 클라이언트가 이 DNS 이름으로 여러 구역 IP 주소로 확인합니다.  

이러한 개념(동일한 백 엔드에 대한 영역 중복 및 영역)을 혼합하려면 [Azure Load Balancer의 다중 프런트 엔드](load-balancer-multivip-overview.md)를 검토하세요.

공용 로드 밸런서 프런트 엔드의 경우 해당 규칙에서 사용하는 프런트 엔드 IP 구성에서 참조하는 공용 IP 리소스에 *영역* 매개 변수를 추가합니다.

내부 Load Balancer 프런트 엔드의 경우 내부 Load Balancer 프런트 엔드 IP 구성에 *zones* 매개 변수를 추가합니다. 영역 프런트 엔드는 Load Balancer에서 특정 영역에 대한 서브넷의 IP 주소를 보장하도록 합니다.

### <a name="cross-zone-load-balancing"></a>영역 간 부하 분산

영역 간 부하 분산은 Load Balancer에서 모든 영역의 백 엔드 엔드포인트에 연결하는 기능이며 프런트 엔드 및 해당 영역 조건과는 별개입니다.  모든 부하 분산 규칙은 가용성 영역 또는 지역 인스턴스에서 백 엔드 인스턴스를 대상으로 할 수 있습니다.

가용성 영역 개념을 나타내는 방식으로 시나리오를 구성하기 위해 주의를 기울여야 합니다. 예를 들어 단일 영역 또는 여러 영역 내에서 가상 시스템 배포를 보장하고 영역 프런트 엔드 및 영역 백 엔드 리소스를 동일한 영역에 정렬해야 합니다.  영역 리소스만 사용하여 가용성 영역을 교차하는 경우 시나리오가 작동하지만 가용성 영역과 관련하여 명확한 실패 모드가 없을 수 있습니다. 

### <a name="backend"></a>백 엔드

로드 밸러블러는 가상 시스템 인스턴스와 함께 작동합니다.  독립 실행형, 가용성 집합 또는 가상 시스템 크기 집합일 수 있습니다.  단일 가상 네트워크의 모든 가상 시스템 인스턴스는 영역에 보장되었는지 또는 어떤 영역이 보장되었는지여부에 관계없이 백 엔드 풀의 일부가 될 수 있습니다.

프런트 엔드와 백 엔드를 단일 영역으로 정렬하고 보장하려면 동일한 영역 내에 가상 컴퓨터를 각 백 엔드 풀에만 배치합니다.

여러 영역에서 가상 시스템을 처리하려면 여러 영역의 가상 컴퓨터를 동일한 백 엔드 풀에 배치하기만 하면 됩니다.  가상 머신 확장 집합을 사용할 때 하나 이상의 가상 머신 확장 집합을 동일한 백 엔드 풀에 배치할 수 있습니다.  또한 각 가상 머신 확장 집합은 하나 또는 여러 영역에 있을 수 있습니다.

### <a name="outbound-connections"></a>아웃바운드 연결

아웃바운드 [연결에](load-balancer-outbound-connections.md)동일한 영역 중복 및 구역 속성이 적용됩니다.  아웃바운드 연결에 사용되는 영역 중복 공용 IP 주소는 모든 영역에서 제공됩니다. 영역 공용 IP 주소는 보장되는 영역에서만 제공됩니다.  아웃바운드 연결 SNAT 포트 할당은 영역 오류에서 살아남으며 시나리오는 영역 오류의 영향을 받지 않는 경우 아웃바운드 SNAT 연결을 계속 제공합니다.  영향을 받는 영역에서 흐름을 제공한 경우 전송또는 영역 중복 시나리오에 대해 연결을 다시 설정해야 할 수 있습니다.  영향을 받는 영역 이외의 영역의 흐름은 영향을 받지 않습니다.

SNAT 포트 사전 할당 알고리즘은 가용성 영역의 유무에 관계없이 동일합니다.

### <a name="health-probes"></a>상태 프로브

기존 상태 프로브 정의는 가용성 영역이 없는 상태로 유지됩니다.  그러나 인프라 수준에서 상태 모델을 확장했습니다. 

영역 중복 프런트 엔드를 사용하는 경우 Load Balancer는 내부 상태 모델을 확장하여 각 가용성 영역에서 가상 시스템의 도달 가능성을 독립적으로 조사하고 고객의 개입 없이 실패했을 수 있는 영역 의 경로를 종료합니다.  한 영역의 Load Balancer 인프라에서 다른 영역의 가상 시스템에 지정된 경로를 사용할 수 없는 경우 Load Balancer는 이 오류를 감지하고 방지할 수 있습니다. 이 VM에 연결할 수 있는 다른 영역은 해당 프런트 엔드에서 VM을 계속 처리할 수 있습니다.  따라서 오류 이벤트 중에 각 영역이 새 흐름의 분포가 약간 다를 수 있으며 종단 간 서비스의 전반적인 상태를 보호할 수 있습니다.

## <a name="design-considerations"></a><a name="design"></a>설계 고려 사항

로드 밸러블러는 가용성 영역의 컨텍스트에서 의도적으로 유연합니다. 영역에 정렬하도록 선택하거나 각 규칙에 대해 영역 중복하도록 선택할 수 있습니다.  가용성이 증가하면 복잡성이 증가할 수 있으며, 최적의 성능에 맞게 가용성을 설계해야 합니다.  몇 가지 중요한 디자인 고려 사항에 대해 살펴보겠습니다.

### <a name="automatic-zone-redundancy"></a>자동 영역 중복

Load Balancer를 사용하면 단일 IP를 영역 중복 프런트 엔드로 간단하게 만들 수 있습니다. 영역 중복 IP 주소는 모든 영역에서 영역 리소스를 안전하게 처리할 수 있으며, 지역 내에서 하나의 영역이 정상 상태로 유지되는 동안 하나 이상의 영역 오류에서 존속할 수 있습니다. 반대로, 영역 프런트 엔드는 서비스를 단일 영역으로 축소하고 각 영역과 수명을 공유합니다.

영역 중복은 명시적으로 데이터 평면이며, 비충돌 데이터 경로 또는 제어 평면을 의미하지 않습니다. 영역 중복 흐름은 모든 영역을 사용할 수 있으며, 고객의 흐름에서는 한 지역의 모든 정상 영역을 사용합니다. 영역 오류가 발생하는 경우 해당 시점에서 정상 영역을 사용하는 트래픽 흐름은 영향을 받지 않습니다.  영역 오류가 발생할 때 영역을 사용하는 트래픽 흐름이 영향을 받을 수 있지만 응용 프로그램은 복구할 수 있습니다. 이러한 흐름은 Azure가 영역 실패를 중심으로 수렴되면 다시 전송또는 다시 설치할 때 영역 내의 나머지 정상 영역에서 계속 될 수 있습니다.

### <a name="cross-zone-boundaries"></a><a name="xzonedesign"></a> 영역 간 경계

엔드투엔드 서비스가 영역을 교차할 때마다 하나의 영역이 아니라 잠재적으로 여러 영역과 수명을 공유한다는 것을 이해하는 것이 중요합니다.  결과적으로 엔드투엔드 서비스에서 비영역 배포를 통해 가용성을 얻지 못할 수 있습니다.

가용성 영역을 사용할 때 가용성 이득을 무효화하는 의도하지 않은 교차 영역 종속성이 발생하지 않도록 합니다.  애플리케이션이 여러 구성 요소로 구성되어 있고 영역 오류에 대한 복원력을 유지하려는 경우 영역 오류 발생 시 충분한 주요 구성 요소가 존속되도록 주의해야 합니다.  예를 들어 애플리케이션의 중요한 단일 구성 요소가 존속된 영역이 아닌 다른 영역에만 있는 경우 전체 애플리케이션에 영향을 줄 수 있습니다.  또한 영역 복원 및 애플리케이션에서 수렴하는 방법도 고려해야 합니다. 응용 프로그램의 일부 오류와 관련하여 응용 프로그램이 어떻게 발생하는지 이해해야 합니다. 몇 가지 핵심 요점을 검토하고 질문에 대한 영감으로 사용하여 특정 시나리오에 대해 충분히 생각해 보겠습니다.

- 응용 프로그램에 IP 주소와 관리 디스크가 있는 가상 컴퓨터와 같은 두 개의 구성 요소가 있고 영역 1과 영역 2에서 보장되는 경우 영역 1이 실패하면 영역 1이 실패할 때 종단 간 서비스가 유지되지 않습니다.  잠재적으로 위험한 고장 모드를 만들고 있다는 것을 완전히 이해하지 못한다면 구역 시나리오를 교차하지 마십시오.  이 시나리오는 유연성을 제공할 수 있습니다.

- 응용 프로그램에 IP 주소와 관리 디스크가 있는 가상 컴퓨터와 같은 두 개의 구성 요소가 있고 각각 영역 중복 및 영역 1이 보장되는 경우 종단 간 서비스는 영역 2, 영역 3 또는 영역 1이 실패하지 않는 한 영역 실패에서 살아남을 수 있습니다.  그러나 프런트 엔드의 연결을 관찰하는 경우 서비스의 상태에 대한 이유를 추론할 수 있는 일부 기능이 손실됩니다.  더 광범위한 상태 및 용량 모델을 개발하는 것이 좋습니다.  영역 중복 및 영역 개념을 함께 사용하여 통찰력과 관리 효율성을 확장할 수 있습니다.

- 애플리케이션에 두 가지 구성 요소(예: 영역 중복 Load Balancer 프런트 엔드 및 세 개 영역에 있는 영역 간 가상 머신 확장 집합)가 있는 경우, 오류의 영향을 받지 않는 영역의 리소스를 사용할 수 있지만 영역 오류 발생 시 엔드투엔드 서비스 용량은 감소할 수 있습니다. 인프라 관점에서 볼 때 배포는 하나 이상의 영역 오류에서 존속될 수 있으며, 다음과 같은 질문이 제기됩니다.
  - 애플리케이션에서 이러한 오류 및 용량 저하에 대한 이유를 추론하는 방법을 이해하고 있습니까?
  - 필요한 경우 지역 쌍에 장애 조치를 강제로 적용하기 위해 서비스에 세이프가드가 필요합니까?
  - 이러한 시나리오는 어떻게 모니터링, 검색 및 완화합니까? 표준 Load Balancer 진단을 사용하여 엔드투엔드 서비스 성능의 모니터링을 보강할 수 있습니다. 전체적인 그림에서 사용 가능한 항목과 보강해야 하는 항목을 고려하세요.

- 영역은 오류를 더 쉽게 이해하고 포함하도록 만들 수 있습니다.  그러나 시간 제한, 재시도 및 백오프 알고리즘과 같은 개념에 있어 영역 오류는 다른 오류와 차이가 없습니다. Azure Load Balancer는 영역 중복 경로를 제공하고 패킷 수준에서 실시간으로 신속하게 복구하려고 하지만, 오류가 발생하는 동안 재전송 또는 재설정이 발생할 수 있으며 애플리케이션에서 이 오류에 대응하는 방법을 이해해야 합니다. 부하 분산 체계는 유지되지만 다음 질문에 대한 계획이 필요합니다.
  - 영역에 오류가 발생하면 엔드투엔드 서비스에서 이를 이해하고, 상태가 손실되면 어떻게 복구하나요?
  - 영역이 반환되면 애플리케이션에서 안전하게 수렴하는 방법을 이해하고 있습니까?

[Azure 클라우드 디자인 패턴을](https://docs.microsoft.com/azure/architecture/patterns/) 검토하여 실패 시나리오에 대한 응용 프로그램의 복원력을 개선합니다.

## <a name="next-steps"></a>다음 단계
- [가용성 영역에](../availability-zones/az-overview.md) 대해 자세히 알아보기
- [표준 부하 밸워서에](load-balancer-standard-overview.md) 대해 자세히 알아보기
- [영역 프런트 엔드를 통해 표준 Load Balancer를 사용하여 영역 내에 VM을 부하 분산](load-balancer-standard-public-zonal-cli.md)하는 방법에 대해 알아보기
- [영역 중복 프런트 엔드를 통해 표준 Load Balancer를 사용하여 영역에서 VM을 부하 분산](load-balancer-standard-public-zone-redundant-cli.md)하는 방법에 대해 알아보기
- Azure [클라우드 디자인 패턴에](https://docs.microsoft.com/azure/architecture/patterns/) 대해 알아서 응용 프로그램의 실패 시나리오 복원력을 개선합니다.
