<properties title="How to create a hybrid deployment of RemoteApp" pageTitle="How to create a hybrid deployment of RemoteApp" description="Learn how to create a deployment of RemoteApp that connects to your internal network." metaKeywords="" services="" solutions="" documentationCenter="" authors="elizapo"  />

<tags ms.service="remoteapp" ms.workload="tbd" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="01/01/1900" ms.author="elizapo" />

# RemoteApp의 하이브리드 배포를 만드는 방법

다음과 같은 두 가지 종류의 RemoteApp 배포가 있습니다.

-   클라우드: 완벽히 Azure에서 상주하며 Azure 관리 포털의 **빠른 만들기** 옵션을 사용하여 생성됩니다.
-   하이브리드: 온-프레미스 액세스를 위한 가상 네트워크를 포함하며 관리 포털의 **VPN으로 만들기** 옵션을 사용하여 생성됩니다.

이 자습서에서는 하이브리드 배포를 만드는 프로세스를 단계별로 안내합니다. 이 프로세스는 다음 7개의 단계로 구성됩니다.

1.  RemoteApp 템플릿 이미지를 만듭니다.
2.  RemoteApp 서비스를 만듭니다.
3.  가상 네트워크에 연결합니다.
4.  템플릿 이미지를 연결합니다.
5.  디렉터리 동기화를 구성합니다. 이 작업은 RemoteApp에서 온-프레미스 Active Directory에서 Azure Active Directory 테넌트로 사용자, 그룹, 연락처 및 암호를 동기화하는 데 필요합니다.
6.  RemoteApp 프로그램을 게시합니다.
7.  사용자 액세스를 구성합니다.

**시작하기 전에**

서비스를 만들기 전에 다음을 수행해야 합니다.

-   [필요한 업데이트][필요한 업데이트]를 설치하여 Azure RemoteApp의 성능을 개선합니다.
-   [RemoteApp의 미리 보기][RemoteApp의 미리 보기]에 등록합니다.
-   RemoteApp 서비스 계정으로 사용할 Active Directory의 사용자 계정을 만듭니다. 이 계정의 권한은 도메인에 컴퓨터를 가입시킬 수 있는 권한만으로 제한합니다.
-   온-프레미스 네트워크에 대한 IP 주소 정보 및 VPN 장치 정보를 수집합니다.
-   [Azure PowerShell][Azure PowerShell] 모듈을 설치합니다.
-   액세스 권한을 부여할 사용자 및 그룹에 대한 정보를 수집합니다. 이 정보는 사용자 또는 그룹의 Microsoft 계정 정보나 Active Directory 조직 계정 정보가 될 수 있습니다.

## **1단계: 템플릿 이미지 만들기**

Azure RemoteApp은 Windows Server 2012 R2 템플릿 이미지를 사용하여 사용자와 공유할 모든 프로그램을 호스트합니다. 사용자 지정 RemoteApp 템플릿 이미지를 만들려면 기존 이미지에서 시작하거나 새 이미지를 만듭니다. Azure RemoteApp과 사용하기 위해 업로드할 수 있는 이미지의 요구 사항은 다음과 같습니다.

-   VHD 파일에 있어야 합니다. VHDX 파일은 현재 지원되지 않습니다.
-   VHD는 고정 크기이거나 동적으로 확장될 수 있습니다. 고정 크기의 VHD 파일보다 Azure에 업로드하는 시간이 짧으므로 동적으로 확장되는 VHD가 권장됩니다.
-   디스크는 MBR(마스터 부트 레코드) 파티션 스타일을 사용하여 초기화해야 합니다. GPT(GUID 파티션 테이블) 파티션 스타일은 지원되지 않습니다.
-   VHD는 Windows Server 2012 R2의 단일 설치를 포함해야 합니다. 여러 볼륨을 포함할 수 있지만 한 볼륨만 Windows의 설치를 포함합니다.
-   RDSH(원격 데스크톱 세션 호스트) 역할 및 데스크톱 경험 기능을 설치해야 합니다.
-   EFS(파일 시스템 암호화)를 사용하지 않도록 설정해야 합니다.
-   이미지에 **/oobe /generalize /shutdown** 매개 변수를 사용하여 sysprep을 실행해야 합니다. **/mode:vm** 매개 변수는 사용하지 마세요.

처음부터 새 템플릿 이미지를 만들려면

1.  Windows Server 2012 R2 DVD 또는 ISO 이미지를 찾습니다.
2.  VHD 파일을 만듭니다.
3.  Windows Server 2012 R2를 설치합니다.
4.  RDSH(원격 데스크톱 세션 호스트) 역할 및 데스크톱 경험 기능을 설치합니다.
5.  응용 프로그램에 필요한 추가 기능을 설치합니다.
6.  응용 프로그램을 설치하고 구성합니다.
7.  응용 프로그램에 필요한 추가 Windows 구성을 수행합니다.
8.  EFS(파일 시스템 암호화)를 사용하지 않도록 설정합니다.
9.  이미지에 sysprep을 실행합니다.

새 이미지를 만드는 자세한 단계는 다음과 같습니다.

1.  Windows Server 2012 R2 DVD 또는 ISO 이미지를 찾습니다.
2.  디스크 관리를 사용하여 VHD 파일을 만듭니다.

    1.  디스크 관리(diskmgmt.msc)를 실행합니다.
    2.  40GB 크기의 동적으로 확장되는 VHD를 만듭니다. Windows, 응용 프로그램 및 사용자 지정에 필요한 공간의 양을 예상합니다. RDSH 역할 및 데스크톱 경험 기능이 설치된 Windows Server를 사용하려면 약 10GB의 공간이 필요합니다.

        1.  **작업 \> VHD 만들기**를 클릭합니다.
        2.  위치, 크기 및 VHD 형식을 지정합니다. **동적 확장**을 선택한 다음 **확인**을 클릭합니다.

            그러면 몇 초 정도 실행됩니다. VHD 만들기가 완료되면 디스크 관리 콘솔에 "초기화 안 됨" 상태의 드라이브 문자가 없는 새로운 디스크가 표시됩니다.

        -   디스크(할당되지 않은 공간이 아닌)를 마우스 오른쪽 단추로 클릭한 다음 **디스크 초기화**를 클릭합니다. **MBR**(마스터 부트 레코드)을 파티션 스타일로 선택한 다음 **확인**을 클릭합니다.
        -   새 볼륨 만들기: 할당되지 않은 공간을 마우스 오른쪽 단추로 클릭한 다음 **새 단순 볼륨**을 클릭합니다. 마법사의 기본값을 그대로 사용하지만 템플릿 이미지를 업로드할 때 잠재적인 문제를 피할 수 있도록 드라이브 문자를 할당해야 합니다.
        -   디스크를 마우스 오른쪽 단추로 클릭한 다음 **VHD 분리**를 클릭합니다.

3.  Windows Server 2012 R2 설치:

    1.  새 가상 컴퓨터를 만듭니다. Hyper-V 관리자 또는 클라이언트 Hyper-V에서 새 가상 컴퓨터 마법사를 사용합니다.
        1.  가상 하드 디스크 연결 페이지에서 **기존 가상 하드 디스크 사용**을 선택하고 이전 단계에서 만든 VHD로 이동합니다.
        2.  설치 옵션 페이지에서 **부팅 CD/DVD-ROM에서 운영 체제 설치**를 선택한 다음 Windows Server 2012 R2 설치 미디어의 위치를 선택합니다.
        3.  마법사에서 Windows 및 응용 프로그램을 설치하는 데 필요한 다른 옵션을 선택합니다. 마법사를 마칩니다.
    2.  마법사를 마친 후 VM의 설정을 편집하고 Windows 및 프로그램을 설치하는 데 필요한 변경(예: 가상 프로세서)을 수행한 다음 **확인**을 클릭합니다.
    3.  VM에 연결하고 Windows Server 2012 R2를 설치합니다.
4.  다음과 같이 RDSH(원격 데스크톱 세션 호스트) 역할 및 데스크톱 경험 기능을 설치합니다.
    1.  서버 관리자를 실행합니다.
    2.  시작 화면 또는 **관리** 메뉴에서 **역할 및 기능 추가**를 클릭합니다.
    3.  시작하기 전에 페이지에서 **다음**을 클릭합니다.
    4.  **역할 기반 또는 기능 기반 설치**를 선택하고 **다음**을 클릭합니다.
    5.  목록에서 로컬 컴퓨터를 선택하고 **다음**을 클릭합니다.
    6.  **원격 데스크톱 서비스**를 선택하고 **다음**을 클릭합니다.
    7.  **사용자 인터페이스 및 인프라**를 확장하고 **데스크톱 경험**을 선택합니다.
    8.  **기능 추가**를 클릭하고 **다음**을 클릭합니다.
    9.  원격 데스크톱 서비스 페이지에서 **다음**을 클릭합니다.
    10. **원격 데스크톱 세션 호스트**를 클릭합니다.
    11. **기능 추가**를 클릭하고 **다음**을 클릭합니다.
    12. 설치 선택 확인 페이지에서 **필요한 경우 자동으로 대상 서버 다시 시작**을 선택한 다음, 다시 시작 경고에서 **예**를 클릭합니다.
    13. **Install**을 클릭합니다. 컴퓨터가 다시 시작됩니다.

5.  .NET Framework 3.5와 같은 응용 프로그램에 필요한 추가 기능을 설치합니다. 이 기능을 설치하려면 역할 및 기능 추가 마법사를 실행합니다.
6.   RemoteApp을 통해 게시할 프로그램 및 응용 프로그램을 설치하고 구성합니다.

    **중요:** 응용 프로그램을 설치하기 전에 RDSH 역할을 설치하여 RemoteApp에 이미지를 업로드하기 전에 응용 프로그램 호환성 문제가 검색되는지 확인하는 것이 좋습니다.

7.  응용 프로그램에 필요한 추가 Windows 구성을 수행합니다.
8.  EFS(파일 시스템 암호화)를 사용하지 않도록 설정합니다. 관리자 권한 명령 창에서 다음 명령을 실행합니다.

        Fsutil behavior set disableencryption 1

    또는 레지스트리에서 다음 DWORD 값을 설정하거나 추가할 수 있습니다.

        HKLM\System\CurrentControlSet\Control\FileSystem\NtfsDisableEncryption = 1

9.  **Azure 가상 컴퓨터** 내에 이미지를 빌드하는 경우 **\\Windows\\Panther\\Unattend.xml** 파일이 사용되는 업로드 스크립트가 작동되지 않도록 하므로 이 파일을 삭제하거나 이름을 바꾸어야 합니다.
10. 이미지에 sysprep을 실행합니다. 관리자 권한 명령 프롬프트에서 다음 명령을 실행합니다.

    **C:\\Windows\\System32\\sysprep\\sysprep.exe /generalize /oobe /shutdown**

    **참고:** 가상 컴퓨터라도 SYSPREP 명령의 **/mode:vm** 스위치를 사용하지 마세요.

## **2단계: RemoteApp 서비스 만들기**

1.  [Azure 관리 포털][Azure 관리 포털]에서, RemoteApp 페이지로 이동합니다.
2.  **새로 만들기 \> VPN으로 만들기**를 클릭합니다.
3.  서비스의 이름을 입력하고 **RemoteApp 서비스 만들기**를 클릭합니다.

RemoteApp 서비스를 만든 후 RemoteApp **빠른 시작** 페이지로 이동하여 설정 단계를 진행합니다.

## **3단계: 가상 네트워크에 연결**

가상 네트워크를 사용하여 사용자는 RemoteApp 원격 리소스를 통해 로컬 네트워크의 데이터에 액세스할 수 있습니다. 가상 네트워크 링크를 구성할 수 있는 단계는 다음과 같이 4가지입니다.

1.  빠른 시작 페이지에서 **RemoteApp 가상 네트워크 연결**을 클릭합니다.
2.  새로운 가상 네트워크를 만들지 아니면 기존 네트워크를 사용할지 여부를 선택합니다. 이 자습서에서는 새 네트워크를 만듭니다.
3.  새로운 네트워크에 대한 다음 정보를 제공합니다.

    -   이름
    -   가상 네트워크 주소 공간
    -   로컬 주소 공간
    -   DNS 서버 IP 주소
    -   VPN IP 주소

    자세한 내용은 [관리 포털에서 사이트 간 VPN 구성][관리 포털에서 사이트 간 VPN 구성]을 참조하세요.

4.  그런 다음 빠른 시작 페이지로 돌아가서 **스크립트 가져오기**를 클릭하여 스크립트를 다운로드해서 방금 만든 가상 네트워크에 연결할 VPN 장치를 구성합니다. VPN 장치에 대한 다음 정보가 필요합니다.

    -   공급업체
    -   플랫폼
    -   운영 체제

    스크립트를 저장하고 VPN 장치에서 실행합니다.

    **참고:** 이 스크립트를 실행한 후 가상 네트워크는 준비 상태로 전환되며 대략 5-7분이 소요될 수 있습니다. 네트워크가 준비될 때까지 네트워크를 사용할 수 없습니다.

5.  마지막으로 빠른 시작 페이지에서 다시 **로컬 도메인 가입**을 클릭합니다. 로컬 Active Directory 도메인에 RemoteApp 서비스 계정을 추가합니다. 도메인 이름, 조직 구성 단위, 서비스 계정 사용자 이름 및 암호가 필요합니다.

## **4단계: RemoteApp 템플릿 이미지에 연결**

RemoteApp 템플릿 이미지에는 사용자와 공유할 프로그램이 포함됩니다. 1단계에서 만든 새 템플릿 이미지를 업로드하거나 기존 이미지(이미 Azure에 업로드된 이미지)에 연결할 수 있습니다.

새 이미지를 업로드하는 경우 이름을 입력하고 이미지의 위치를 선택해야 합니다. 마법사의 다음 페이지에는 PowerShell cmdlet 집합이 표시됩니다. 관리자 권한 Azure PowerShell 프롬프트에서 이러한 cmdlet을 복사하고 실행하여 지정된 이미지를 업로드합니다.

기존 템플릿 이미지에 연결하는 경우 단지 이미지 이름, 위치 및 연결된 Azure 구독을 지정하기만 하면 됩니다.

## **5단계: Active Directory 디렉터리 동기화 구성**

RemoteApp에서는 사용자, 그룹, 연락처 및 암호를 Azure Active Directory 테넌트로 동기화하기 위해 Azure Active Directory와 온-프레미스 Active Directory 간의 디렉터리 동기화가 필요합니다. 계획 정보 및 자세한 단계에 대해서는 [디렉터리 동기화 로드맵][디렉터리 동기화 로드맵]을 참조하세요.

## **6단계: RemoteApp 프로그램 게시**

RemoteApp 프로그램은 사용자에게 제공하는 앱 또는 프로그램입니다. 이 프로그램은 서비스를 위해 업로드하는 템플릿 이미지에 있습니다. 사용자가 RemoteApp 프로그램에 액세스할 때 프로그램이 로컬 환경에서 실행하는 것처럼 보이지만 실제로는 Azure에서 실행됩니다.

사용자가 RemoteApp 프로그램에 액세스할 수 있으려면 최종 사용자 피드에 사용자가 Azure 포털을 통해 액세스할 수 있는 프로그램 목록을 게시해야 합니다.

RemoteApp 서비스에 여러 프로그램을 게시할 수 있습니다. RemoteApp 프로그램 페이지에서 **게시**를 클릭하여 프로그램을 추가합니다. 템플릿 이미지의 시작 메뉴에서 또는 프로그램의 템플릿 이미지에 경로를 지정하여 게시할 수 있습니다. 시작 메뉴에서 추가하도록 선택하는 경우 게시할 프로그램을 선택합니다. 프로그램의 경로를 제공하도록 선택한 경우 프로그램의 이름 및 템플릿 이미지에서 프로그램이 설치되는 경로를 입력합니다.

## **7단계: 사용자 액세스 구성**

RemoteApp 서비스를 만들었으므로 원격 리소스를 사용할 수 있는 사용자 및 그룹을 추가해야 합니다. 액세스 권한을 제공하는 사용자 또는 그룹은 이 RemoteApp 서비스를 만드는 데 사용한 구독과 연결된 Active Directory 테넌트에 존재해야 합니다.

1.  빠른 시작 페이지에서 **사용자 액세스 구성**을 클릭합니다.
2.  액세스 권한을 부여할 Microsoft 계정이나 Active Directory의 조직 계정 또는 그룹 이름을 입력합니다.

    사용자의 경우 “<user@domain.com>” 형식을 사용해야 합니다. 그룹의 경우 그룹 이름을 입력합니다.

3.  사용자 또는 그룹이 확인되면 **저장**을 클릭합니다.

## 다음 단계

RemoteApp 하이브리드 배포를 만들고 배포했습니다. 다음 단계는 사용자가 원격 데스크톱 클라이언트를 다운로드하여 설치하도록 설정하는 것입니다. RemoteApp 빠른 시작 페이지에서 클라이언트의 URL을 찾을 수 있습니다. 그런 다음, 사용자가 Azure에 로그인하여 게시된 RemoteApp 프로그램에 액세스하도록 합니다.

  [필요한 업데이트]: http://support.microsoft.com/kb/2977219
  [RemoteApp의 미리 보기]: http://azure.microsoft.com/ko-kr/services/remoteapp/
  [Azure PowerShell]: http://azure.microsoft.com/ko-kr/documentation/articles/install-configure-powershell/
  [Azure 관리 포털]: http://manage.windowsazure.com
  [관리 포털에서 사이트 간 VPN 구성]: http://msdn.microsoft.com/library/azure/dn133795.aspx
  [디렉터리 동기화 로드맵]: http://msdn.microsoft.com//library/azure/hh967642.aspx
