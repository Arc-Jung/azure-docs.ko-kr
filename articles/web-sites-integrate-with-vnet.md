<properties 
	pageTitle="Azure 가상 네트워크에 웹 앱 통합" 
	description="신규 또는 기존 Azure 가상 네트워크에 Azure 앱 서비스의 Azure 웹 앱을 연결하는 방법을 보여 줍니다." 
	services="app-service\web" 
	documentationCenter="" 
	authors="cephalin" 
	manager="wpickett" 
	editor=""/>

<tags 
	ms.service="app-service-web" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/24/2015" 
	ms.author="cephalin"/>

# Azure 가상 네트워크에 웹 앱 통합 #
이 문서에서는 가상 네트워크 통합 미리 보기 기능 및 [Azure 앱 서비스](http://go.microsoft.com/fwlink/?LinkId=529714)에서 해당 기능을 설정하는 방법을 설명합니다.  Azure 가상 네트워크에 대해 잘 모르는 사용자를 위해 설명하자면 Azure 가상 네트워크는 Azure 및 온-프레미스 리소스를 사용하여 하이브리드 솔루션을 빌드하는 데 사용할 수 있는 기능입니다.  

이 통합 기능을 사용하여 웹 앱에서 가상 네트워크의 리소스에 액세스할 수 있지만, 가상 네트워크에서 웹 앱에 액세스할 수 있는 권한이 부여되지는 않습니다.  표준 시나리오로는 웹 앱이 가상 네트워크 또는 자체 데이터 센터의 가상 컴퓨터에서 실행 중인 데이터베이스나 웹 서비스에 액세스해야 하는 경우 등이 있습니다.  이 기능을 통해 드라이브를 탑재할 수는 없으며,  현재는 가상 네트워크 내 인증 시스템과의 통합도 지원되지 않습니다.  이 기능은 현재 미리 보기 상태이므로 GA 이전에 계속 개선될 예정입니다.

Azure 가상 네트워크에 대한 자세한 내용은 Azure 가상 네트워크의 사용 사례와 이점에 대해 소개하는 가상 네트워크 개요를 참조하세요.

## 시작 ##
웹 앱을 가상 네트워크에 연결하기 전에 다음의 몇 가지 사항에 유의해야 합니다.

1.	웹 앱은 '표준' 가격 책정 계층의 앱 서비스 계획에서 실행되는 경우에만 가상 네트워크에 연결할 수 있습니다.  무료, 공유 및 기본 계획이 적용되는 웹 앱은 가상 네트워크에 연결할 수 없습니다.
2.	대상 가상 네트워크가 이미 있는 경우 동적 라우팅 게이트웨이와의 지점 및 사이트 간 연결을 사용하도록 설정해야 해당 가상 네트워크를 웹 앱에 연결할 수 있습니다.  게이트웨이가 정적 라우팅을 사용하도록 구성된 경우에는 지점 및 사이트 간 VPN(가상 사설망)을 사용하도록 설정할 수 없습니다.
3.	앱 서비스 계획에는 네트워크를 5개까지만 구성할 수 있습니다.  웹 앱은 한 번에 하나의 네트워크에만 연결할 수 있습니다.  같은 앱 서비스 계획에 포함된 여러 웹 앱에서 이러한 5개의 네트워크를 사용할 수 있습니다.  

새 가상 네트워크나 기존 가상 네트워크에 연결할 수 있습니다.  새 가상 네트워크를 만들면 게이트웨이가 자동으로 미리 구성됩니다.  새 가상 네트워크를 만들고 구성하려면 몇 분 정도 걸릴 수 있습니다.  

웹 앱이 표준 앱 서비스 계획에 속하지 않는 경우 UI에 해당 내용이 표시되며, 원하는 가격 책정 계층을 업그레이드하여 액세스할 수 있습니다.

![](./media/web-sites-integrate-with-vnet/upgrade-to-standard.png) 

## 시스템 작동 방식 ##
이 기능은 백그라운드에서 지점 및 사이트 간 VPN 기술을 사용하여 웹 앱을 가상 네트워크에 연결합니다.  Azure 앱 서비스의 웹 앱에는 가상 컴퓨터로 완료되었을 때 가상 네트워크에서 직접 웹 앱 프로비전을 할 수 없게 하는 멀티 테넌트 시스템 아키텍처가 있습니다.  지점 및 사이트 간 기술을 기반으로 시스템을 구축함으로써 네트워크 액세스는 웹 앱을 호스트하는 가상 컴퓨터로 제한됩니다.  또한 해당 웹 앱 호스트에서도 네트워크 액세스가 추가로 제한되므로 웹 앱은 액세스 가능하도록 구성된 네트워크에만 액세스할 수 있습니다.  

이처럼 필요한 웹 앱에만 액세스 권한을 제공하여 네트워크를 보호하려면 특정 작업을 수행해야 하는데, 이 경우 SMB 연결을 만들 수가 없습니다.  원격 리소스에 액세스할 수는 있지만 원격 드라이브를 탑재할 수는 없습니다.

![](./media/web-sites-integrate-with-vnet/how-it-works.png)
 
가상 네트워크로 DNS 서버를 구성하지 않은 경우에는 IP 주소를 사용해야 합니다.  방화벽을 통해 원하는 끝점에 대한 포트를 표시해야 합니다.  현재는 원하는 끝점을 호출하는 웹 작업이나 웹 앱을 사용하는 방법을 통해서만 연결을 테스트할 수 있습니다.  ping 또는 nslookup과 같은 도구는 현재 Kudu 콘솔에서 작동하지 않습니다.  이 부분은 곧 개선될 예정입니다.  

## 기존 네트워크에 연결 ##
가상 네트워크에 웹 앱을 연결하려면 웹 앱의 블레이드로 이동하여 네트워킹 세션에서 가상 네트워크 타일을 클릭하고 기존 네트워크 중 하나를 선택합니다.

![](./media/web-sites-integrate-with-vnet/connect-to-existing-vnet.png)
 
네트워크에 대한 연결을 설정하는 구독 내 첫 번째 웹 앱의 경우 가상 네트워크에 인증을 하기 위한 인증서가 생성됩니다.  인증서를 확인하려면 [Azure 포털](http://go.microsoft.com/fwlink/?LinkId=529715)에서 가상 네트워크로 이동하여 네트워크를 선택하고 인증서 탭을 선택합니다.  

위의 그림에서 cantConnectVnet 네트워크는 회색으로 표시되어 선택할 수 없는 상태입니다.  네트워크가 이와 같이 표시되는 이유는 두 가지뿐입니다.  네트워크에서 지점 및 사이트 간 VPN을 사용하도록 설정하지 않았거나 가상 네트워크에서 동적 라우팅 게이트웨이를 프로비전하지 않은 것입니다.  이 두 조건을 모두 충족하면 웹 앱과 통합할 가상 네트워크를 선택할 수 있습니다.

## 새 가상 네트워크를 만든 다음 연결 ##
기존 가상 네트워크에 연결할 수 있을 뿐 아니라 Azure 포털 UI에서 새 가상 네트워크를 만든 다음 자동으로 해당 가상 네트워크에 연결할 수도 있습니다.  이렇게 하려면 같은 경로를 따라 가상 네트워크 UI로 이동한 다음 새 가상 네트워크 만들기를 선택합니다.  그러면 열리는 UI에서 네트워크 이름과 주소 공간을 지정하고 가상 네트워크에서 사용할 DNS 서버의 주소를 설정할 수 있습니다.

![](./media/web-sites-integrate-with-vnet/create-new-vnet.png)
 
구성된 게이트웨이를 사용하여 새 가상 네트워크를 만드는 작업을 완료하려면 최대 30분이 걸릴 수 있습니다.  이 시간 동안 UI에는 해당 작업이 계속 진행 중임을 확인할 수 있도록 다음 메시지가 표시됩니다.

![](./media/web-sites-integrate-with-vnet/new-vnet-progress.png)

네트워크가 웹 앱에 연결되고 나면 웹 앱은 TCP 또는 UDP를 통해 해당 가상 네트워크의 리소스에 액세스할 수 있게 됩니다.  가상 네트워크에 대한 사이트 간 VPN을 통해 사용할 수 있는 온-프레미스 시스템의 리소스에 액세스하려면 네트워크에서 가상 네트워크에 구성된 지점 및 사이트 간 주소로 트래픽이 이동할 수 있도록 회사 네트워크에 경로를 추가해야 합니다.

통합을 완료하고 나면 연결에 대한 기본적인 정보가 Azure 포털에 표시됩니다. 또한 포털을 통해 네트워크에서 웹 앱의 연결을 끊을 수 있으며 연결을 인증하는 데 사용한 인증서를 동기화할 수도 있습니다.  인증서가 만료되거나 해지된 경우에는 동기화를 수행해야 할 수 있습니다.  

![](./media/web-sites-integrate-with-vnet/vnet-status-portal.png)

##가상 네트워크 연결 관리##
앱 서비스 계획의 블레이드를 방문하면 앱 서비스 계획에서 현재 웹 앱에 연결된 모든 가상 네트워크의 목록을 확인할 수 있습니다.   'Standard' 앱 서비스 계획에서는 네트워크를 5개까지 연결할 수 있습니다.

앱 서비스 계획을 무료, 공유, 기본 등의 하위 계획으로 조정하는 경우에는 해당 계획의 웹 앱에서 사용하는 가상 네트워크 연결을 사용할 수 없게 됩니다.  계획을 다시 표준 계획으로 조정하면 해당 네트워크 연결이 다시 설정됩니다.

현재는 Azure에서 기존 가상 컴퓨터를 가져와 가상 네트워크로 이동할 수 없습니다.  가상 컴퓨터는 만드는 동안 해당 가상 네트워크에 프로비전되어야 합니다.  

## 온-프레미스 리소스 액세스 ##
사이트 간 VPN을 사용하여 구성된 가상 네트워크로 작업할 때는 웹 앱에서 온-프레미스 리소스에 대한 액세스 권한을 제공하기 위해 추가 단계를 수행해야 합니다.  즉, 네트워크에서 가상 네트워크에 구성된 지점 및 사이트 간 주소로 트래픽이 이동할 수 있도록 온-프레미스 네트워크에 경로를 추가해야 합니다.  지점 및 사이트 간 연결용 IP 범위를 확인하려면 아래 그림과 같이 Azure 포털의 네트워크 영역으로 이동합니다.

![](./media/web-sites-integrate-with-vnet/vpn-to-onpremise.png)

## 인증서 ##
가상 네트워크와의 보안 연결을 설정하기 위해 인증서가 교환됩니다.  아래와 같이 현재 네트워크 포털에서 웹 앱이 생성하는 공용 인증서의 지문을 확인할 수 있습니다.  

![](./media/web-sites-integrate-with-vnet/vpn-to-onpremise-certificate.png)

인증서를 네트워크 포털에서 실수로 삭제하는 등의 이유로 인해 인증서가 동기화되지 않으면 연결이 끊깁니다.  이러한 문제를 해결할 수 있도록 웹 앱의 가상 네트워크 UI에는 연결을 다시 설정하는 연결 동기화 작업이 있습니다.

DNS를 가상 네트워크에 추가하거나 사이트 간 VPN을 네트워크에 추가하는 경우에도 이 작업을 사용해야 합니다.  

![](./media/web-sites-integrate-with-vnet/vnet-sync-connection.png)

## 하이브리드 연결과의 비교/대조 ##
웹 앱에서는 가상 네트워크 통합과 다소 비슷한 하이브리드 연결이라는 기능도 제공합니다.  일부 사용 사례가 동일하기는 하지만 한 기능을 다른 기능 대신 사용할 수는 없습니다.  하이브리드 연결을 사용하면 혼합 네트워크에서 여러 응용 프로그램 끝점에 대한 연결을 설정할 수 있습니다.  반면 가상 네트워크 기능은 웹 앱을 가상 네트워크에 연결하며, 이 가상 네트워크를 온-프레미스 네트워크에 연결할 수 있습니다.  리소스가 모두 해당 네트워크의 범위 내에 있는 경우에는 이 기능이 매우 효율적입니다.  

또 다른 차이점은 하이브리드 연결의 경우 릴레이 에이전트를 설치해야 작동한다는 점입니다.  이 에이전트는 Windows Server 인스턴스에서 실행해야 합니다.  가상 네트워크 기능의 경우 설치해야 하는 항목이 없으며, 호스팅 운영 체제에 관계없이 원격 리소스에 액세스하도록 설정할 수 있습니다.  

또한 현재 두 기능의 가격 책정 계층도 서로 다릅니다.  그 이유는 최저가형 수준에서는 하이브리드 연결 기능이 개발/테스트 시나리오에 사용할 때 매우 유용하며 소수의 끝점에 대한 액세스 권한만 제공되기 때문입니다.  반면 가상 네트워크 기능은 VNET 내부의 모든 항목 또는 VNET에 연결된 모든 항목에 대한 액세스 권한을 제공합니다.  

>[AZURE.NOTE] Azure 계정을 등록하기 전에 Azure 앱 서비스를 시작하려면 [앱 서비스 사용](http://go.microsoft.com/fwlink/?LinkId=523751)으로 이동합니다. 앱 서비스에서는 단기 시작 웹 앱을 즉시 만들 수 있습니다. 신용 카드는 필요하지 않으며 약정도 필요하지 않습니다.

## 변경 내용
* 웹 사이트에서 앱 서비스로의 변경에 대한 가이드는 다음을 참조: [Azure 앱 서비스 및 기존 Azure 서비스에 대한 영향](http://go.microsoft.com/fwlink/?LinkId=529714)
* 이전 포털에서 새 포털로의 변경에 대한 가이드는 다음을 참조: [미리 보기 포털 탐색에 대한 참조](http://go.microsoft.com/fwlink/?LinkId=529715)

<!--HONumber=49-->