---
title: SQL 취약성 평가 규칙 참조 가이드
description: SQL Server, Azure SQL Database, Azure SQL Managed Instance 및 Azure Synapse 분석에 대 한 규칙 제목 및 설명 목록
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.topic: reference
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 12/14/2020
ms.openlocfilehash: ba6a3313707ca0124c9880a66376ea7a4d9977c1
ms.sourcegitcommit: 8245325f9170371e08bbc66da7a6c292bbbd94cc
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/07/2021
ms.locfileid: "99806327"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>SQL 취약성 평가 규칙 참조 가이드
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

이 문서에는 보안 취약성에 플래그를 지정 하 고 잘못 된 구성, 과도 한 권한 및 보호 되지 않는 중요 데이터와 같은 모범 사례의 차이를 강조 표시 하는 데 사용 되는 기본 제공 규칙 집합이 나열 되어 있습니다. 규칙은 Microsoft의 모범 사례를 기반으로 하며 데이터베이스와 중요 한 데이터에 가장 큰 위험을 제시 하는 보안 문제에 중점을 둡니다. 데이터베이스 수준 문제뿐 아니라 서버 방화벽 설정 및 서버 수준 권한과 같은 서버 수준 보안 문제도 다룹니다. 또한 이러한 규칙은 규정 준수 표준을 충족하는 다양한 규정 본문의 여러 요구 사항을 나타냅니다.

데이터베이스 검색에 표시 되는 규칙은 검색 된 SQL 버전 및 플랫폼에 따라 달라 집니다. 

Azure에서 취약성 평가를 구현 하는 방법에 대 한 자세한 내용은 [취약성 평가 구현](./sql-vulnerability-assessment.md#configure-vulnerability-assessment)을 참조 하세요.

이러한 규칙의 변경 내용 목록은 [SQL 취약성 평가 규칙 변경 로그](sql-database-vulnerability-assessment-rules-changelog.md)를 참조 하세요.

## <a name="rule-categories"></a>규칙 범주

SQL 취약성 평가 규칙에는 다음 섹션에 나와 있는 5 가지 범주가 있습니다.

- [인증 및 권한 부여](#authentication-and-authorization)
- [감사 및 로깅](#auditing-and-logging)
- [데이터 보호](#data-protection)
- [설치 업데이트 및 패치](#installation-updates-and-patches)
- [노출 영역 축소](#surface-area-reduction)

<sup>1</sup> **SQL Server 2012 +** 는 SQL Server 2012 이상 버전을 모두 나타냅니다.

<sup>2</sup> **SQL Server 2017 +** 는 SQL Server 2017 이상 버전을 모두 나타냅니다.

<sup>3</sup> **SQL Server 2016 +** 는 SQL Server 2016 이상의 모든 버전을 참조 합니다.

## <a name="authentication-and-authorization"></a>인증 및 권한 부여

|규칙 ID  |규칙 제목   |규칙 심각도  |규칙 설명  |플랫폼  |
|---------|---------|---------|---------|---------|
| VA1017     |모든 사용자 (dbo 제외)의 xp_cmdshell에 대 한 실행 권한을 취소 해야 합니다.          |높음         |Xp_cmdshell 확장 저장 프로시저는 Windows 명령 셸을 생성 하 고 실행을 위해 문자열을 전달 합니다. 이 규칙은 sysadmin 서버 역할의 멤버와 같은 CONTROL SERVER 권한이 있는 사용자 이외의 사용자에 게 xp_cmdshell 확장 저장 프로시저를 실행할 수 있는 권한이 없는지 확인 합니다.         |<nobr>SQL Server 2012 +<sup>1</sup><nobr/>         |
|VA1020     |데이터베이스 사용자 게스트는 역할의 구성원이 아니어야 합니다.          |높음         |게스트 사용자는 특정 데이터베이스 사용자에 매핑되지 않은 로그인을 위해 데이터베이스에 대 한 액세스를 허용 합니다. 이 규칙은 게스트 사용자에 게 데이터베이스 역할이 할당 되지 않았는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1042     |, 및를 제외 하 고 모든 데이터베이스에 대해 데이터베이스 소유권 체인을 사용 하지 않도록 설정 해야 합니다. `master` `msdb``tempdb`          |높음         |데이터베이스 간 소유권 체인은 데이터베이스 경계를 넘지 않는다는 점을 제외 하 고 소유권 체인의 확장입니다. 이 규칙은, 및를 제외 하 고 모든 데이터베이스에 대해이 옵션을 사용할 수 없는지 검사 `master` `msdb` `tempdb` 합니다. `master`, `msdb` 및의 경우 `tempdb` 데이터베이스 간 소유권 체인은 기본적으로 사용 하도록 설정 됩니다.        |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1043     |주 게스트는 사용자 데이터베이스에 액세스할 수 없습니다.          |중간         |게스트 사용자는 특정 데이터베이스 사용자에 매핑되지 않은 로그인을 위해 데이터베이스에 대 한 액세스를 허용 합니다. 이 규칙은 게스트 사용자가 데이터베이스에 연결할 수 없는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance        |
|VA1046     |모든 SQL 로그인에 대해 CHECK_POLICY를 사용 하도록 설정 해야 합니다.          |낮음         |CHECK_POLICY 옵션을 사용 하면 도메인 정책에 대해 SQL 로그인을 확인할 수 있습니다. 이 규칙은 모든 SQL 로그인에 대해 CHECK_POLICY 옵션이 사용 되는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1047     |모든 SQL 로그인에 대해 암호 만료 확인을 사용 하도록 설정 해야 합니다.          |낮음         |암호 만료 정책을 사용하여 암호의 수명을 관리합니다. SQL Server에서 암호 만료 정책을 적용 하면 사용자에 게 이전 암호를 변경 하 라는 메시지가 나타나고 만료 된 암호를 가진 계정은 사용 하지 않도록 설정 됩니다. 이 규칙은 모든 SQL 로그인에 대해 암호 만료 정책이 사용 되는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1048     |데이터베이스 보안 주체를 계정에 매핑할 수 없습니다. `sa`          |높음         |공격자가 계정에 매핑되는 데이터베이스 보안 주체를 `sa` 활용 하 여 권한을 상승 시킬 수 있습니다. `sysadmin`         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1052     |서버 로그인으로 BUILTIN\Administrators 제거          |낮음         |BUILTIN\Administrators 그룹에는 Windows 로컬 관리자 그룹이 포함 됩니다. 이전 버전의 Microsoft SQL Server이 그룹에는 기본적으로 관리자 권한이 있습니다. 이 규칙은 SQL Server에서이 그룹이 제거 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1053     |기본 이름의 계정을 `sa` 바꾸거나 사용 하지 않도록 설정 해야 합니다.          |낮음         |`sa` 는 보안 주체 ID가 1 인 잘 알려진 계정입니다. 이 규칙은 `sa` 계정의 이름을 바꾸거나 사용 하지 않도록 설정 했는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1054     |개체 또는 열에 대 한 공용 역할에는 과도 한 사용 권한을 부여 하면 안 됩니다.          |낮음         |모든 SQL Server 로그인은 public 서버 역할에 속합니다. 서버 보안 주체에 게 보안 개체에 대 한 특정 사용 권한이 부여 되지 않았거나 거부 된 경우 사용자는 해당 개체에 대해 public으로 부여 된 사용 권한을 상속 받습니다. 이 규칙은 모든 사용자가 PUBLIC 역할을 통해 액세스할 수 있는 모든 보안 개체 또는 열 목록을 표시 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1058     |`sa` 로그인을 사용 하지 않도록 설정 해야 합니다.          |높음         |`sa` 는 보안 주체 ID가 1 인 잘 알려진 계정입니다. 이 규칙은 `sa` 계정이 사용 하지 않도록 설정 되었는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1059     |xp_cmdshell 사용 하지 않도록 설정 해야 합니다.          |높음         |xp_cmdshell Windows 명령 셸을 생성 하 고 실행을 위해 문자열을 전달 합니다. 이 규칙은 xp_cmdshell 사용 하지 않도록 설정 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1067     |데이터베이스 메일 XPs를 사용 하지 않는 경우 사용 하지 않도록 설정 해야 합니다.          |중간         |이 규칙은 데이터베이스 메일 프로필이 구성 되지 않은 경우 데이터베이스 메일 사용 하지 않도록 설정 되어 있는지 검사 합니다. 데이터베이스 메일은 SQL Server 데이터베이스 엔진에서 전자 메일 메시지를 보내는 데 사용할 수 있으며 기본적으로 사용 하지 않도록 설정 되어 있습니다. 이 기능을 사용 하지 않는 경우 노출 영역을 줄이기 위해 사용 하지 않도록 설정 하는 것이 좋습니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1068     |서버 권한은 보안 주체에 직접 부여 되어서는 안 됩니다.          |낮음         |서버 수준 사용 권한은 서버 수준 개체와 연결 되어 개체에 대 한 액세스 권한을 얻을 수 있는 사용자를 제어 합니다. 이 규칙은 로그인에 직접 부여 된 서버 수준 권한이 없는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1070     |데이터베이스 사용자는 서버 로그인과 동일한 이름을 공유 하지 않아야 합니다.          |낮음         |데이터베이스 사용자는 서버 로그인과 동일한 이름을 공유할 수 있습니다. 이 규칙은 해당 사용자가 없는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1072     |인증 모드는 Windows 인증 이어야 합니다.          |중간         |Windows 인증 모드와 혼합 모드의 두 가지 인증 모드를 사용할 수 있습니다. 혼합 모드는 SQL Server Windows 인증 및 SQL Server 인증을 모두 사용할 수 있음을 의미 합니다. 이 규칙은 인증 모드가 Windows 인증으로 설정 되어 있는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1094     |데이터베이스 권한은 보안 주체에 직접 부여 되지 않아야 합니다.          |낮음         |사용 권한은 개체에 대 한 액세스 권한을 얻을 수 있는 사용자를 제어 하기 위해 보안 개체와 연결 된 규칙입니다. 이 규칙은 사용자에 게 직접 부여 된 DB 권한이 없는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1095     |PUBLIC 역할에는 과도 한 사용 권한을 부여 하면 안 됩니다.          |중간         |모든 SQL Server 로그인은 public 서버 역할에 속합니다. 서버 보안 주체에 게 보안 개체에 대 한 특정 사용 권한이 부여 되지 않았거나 거부 된 경우 사용자는 해당 개체에 대해 public으로 부여 된 사용 권한을 상속 받습니다. 그러면 PUBLIC 역할에 부여 된 모든 사용 권한의 목록이 표시 됩니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1096     |데이터베이스에서 주 게스트에 게 권한을 부여 해서는 안 됩니다.          |낮음         |각 데이터베이스에는 GUEST 라는 사용자가 포함 되어 있습니다. 게스트에 부여 된 권한은 데이터베이스에 대 한 액세스 권한이 있지만 데이터베이스에 사용자 계정이 없는 사용자가 상속 합니다. 이 규칙은 게스트 사용자에 게 모든 권한이 취소 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1097     |주 게스트는 개체 또는 열에 대 한 사용 권한을 부여 해서는 안 됩니다.          |낮음         |각 데이터베이스에는 GUEST 라는 사용자가 포함 되어 있습니다. 게스트에 부여 된 권한은 데이터베이스에 대 한 액세스 권한이 있지만 데이터베이스에 사용자 계정이 없는 사용자가 상속 합니다. 이 규칙은 게스트 사용자에 게 모든 권한이 취소 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1099     |게스트 사용자에 게 보안 개체 데이터베이스에 대 한 사용 권한을 부여 해서는 안 됩니다.          |낮음         |각 데이터베이스에는 GUEST 라는 사용자가 포함 되어 있습니다. 게스트에 부여 된 권한은 데이터베이스에 대 한 액세스 권한이 있지만 데이터베이스에 사용자 계정이 없는 사용자가 상속 합니다. 이 규칙은 게스트 사용자에 게 모든 권한이 취소 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1246     |응용 프로그램 역할을 사용 하면 안 됩니다.          |낮음         |응용 프로그램 역할은 응용 프로그램이 사용자와 같은 자체 사용 권한으로 실행 될 수 있도록 하는 데이터베이스 보안 주체입니다. 응용 프로그램 역할을 사용 하면 특정 응용 프로그램을 통해 연결 하는 사용자만 특정 데이터에 액세스할 수 있습니다. 응용 프로그램 역할은 암호 기반 (일반적으로 하드 코딩 하는 응용 프로그램) 이며, 암호 추측을 통해 데이터베이스를 앱 역할 가장에 노출 하는 사용 권한이 없습니다. 이 규칙은 데이터베이스에 정의 된 응용 프로그램 역할이 없는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database         |
|VA1248     |사용자 정의 데이터베이스 역할은 고정 역할의 멤버가 아니어야 합니다.          |중간         |데이터베이스에서 사용 권한을 쉽게 관리 하기 위해 다른 보안 주체를 그룹화 하는 보안 주체 역할을 하는 여러 역할 SQL Server 제공 합니다. 이러한 작업은 Microsoft Windows 운영 체제의 그룹과 유사 합니다. 데이터베이스 계정 및 기타 SQL Server 역할은 데이터베이스 수준 역할에 추가할 수 있습니다. 고정 데이터베이스 역할의 각 멤버는 같은 역할에 다른 사용자를 추가할 수 있습니다. 이 규칙은 사용자 정의 역할이 고정 역할의 멤버가 아닌지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1267     |포함 된 사용자는 Windows 인증을 사용 해야 합니다.          |중간         |포함 된 사용자는 데이터베이스에 존재 하며 로그인 매핑을 요구 하지 않는 사용자입니다. 이 규칙은 포함 된 사용자가 Windows 인증을 사용 하는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1280     |Public에 부여 된 서버 사용 권한은 최소화 되어야 합니다.          |중간         |모든 SQL Server 로그인은 public 서버 역할에 속합니다. 서버 보안 주체에 게 보안 개체에 대 한 특정 사용 권한이 부여 되지 않았거나 거부 된 경우 사용자는 해당 개체에 대해 public으로 부여 된 사용 권한을 상속 받습니다. 이 규칙은 public에 부여 된 서버 권한이 최소화 되어 있는지 검사 합니다.          |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1282     |고아 역할은 제거 해야 합니다.          |낮음         |고아 역할은 멤버가 없는 사용자 정의 역할입니다. 분리 된 역할은 시스템에 필요 하지 않으므로 제거 합니다. 이 규칙은 고아 역할이 있는지 여부를 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2020     |최소한의 보안 주체 집합에 ALTER 또는 ALTER ANY USER 데이터베이스 범위 권한을 부여 해야 합니다.          |높음         |SQL Server 모든 보안 개체에는 보안 주체에 게 부여할 수 있는 사용 권한이 연결 되어 있습니다. 사용 권한은 서버 수준 (로그인 및 서버 역할에 할당 됨) 또는 데이터베이스 수준 (데이터베이스 사용자 및 데이터베이스 역할에 할당 됨)에서 범위를 지정할 수 있습니다. 이러한 규칙은 최소한의 보안 주체 집합만 ALTER 또는 ALTER ANY USER 데이터베이스 범위 권한을 부여 하는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2033     |최소한의 보안 주체 집합에 개체 또는 열에 대 한 데이터베이스 범위 실행 권한을 부여 해야 합니다.          |낮음         |이 규칙은 최소한의 보안 주체 집합에이 권한이 부여 되도록 개체 또는 열에 대 한 EXECUTE 권한이 부여 된 보안 주체를 확인 합니다. SQL Server 모든 보안 개체에는 보안 주체에 게 부여할 수 있는 사용 권한이 연결 되어 있습니다. 사용 권한은 서버 수준 (로그인 및 서버 역할에 할당 됨) 또는 데이터베이스 수준 (데이터베이스 사용자, 데이터베이스 역할 또는 응용 프로그램 역할에 할당 됨)에서 범위를 지정할 수 있습니다. 실행 권한은 계산 열에 사용할 수 있는 저장 프로시저와 스칼라 함수 모두에 적용 됩니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2103     |확장 저장 프로시저에 대 한 불필요 한 실행 권한은 취소 되어야 합니다.          |중간         |확장 저장 프로시저는 SQL Server 인스턴스가 동적으로 로드 및 실행할 수 있는 Dll입니다. SQL Server는 시스템 Dll과의 상호 작용을 허용 하는 여러 확장 저장 프로시저와 함께 패키지 됩니다. 이 규칙은 확장 저장 프로시저에 대 한 불필요 한 실행 권한이 취소 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2107     |최소한의 보안 주체 집합이 고정 Azure SQL DB master 데이터베이스 역할의 구성원 이어야 합니다.          |높음         |SQL Database은 master 데이터베이스에서 데이터베이스를 만들거나 로그인을 관리 하는 권한을 부여 하는 사용자 계정을 추가할 수 있는 두 가지 제한 된 관리 역할을 제공 합니다. 이 규칙은 최소한의 보안 주체 집합이 이러한 관리 역할의 멤버 인지 확인 합니다.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2108     |최소한의 보안 주체 집합은 고정 된 높은 영향 데이터베이스 역할의 멤버 여야 합니다.          |높음         |SQL Server 사용 권한을 관리 하는 데 도움이 되는 역할을 제공 합니다. 역할은 다른 보안 주체를 그룹화 하는 보안 주체입니다. 데이터베이스 수준 역할은 데이터베이스 전체에서 사용 권한 범위에 있습니다. 이 규칙은 최소한의 보안 주체 집합이 고정 데이터베이스 역할의 멤버 인지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2109     |최소한의 보안 주체 집합은 고정 된 낮은 영향 데이터베이스 역할의 구성원 이어야 합니다.          |낮음         |SQL Server 사용 권한을 관리 하는 데 도움이 되는 역할을 제공 합니다. 역할은 다른 보안 주체를 그룹화 하는 보안 주체입니다. 데이터베이스 수준 역할은 데이터베이스 전체에서 사용 권한 범위에 있습니다. 이 규칙은 최소한의 보안 주체 집합이 고정 데이터베이스 역할의 멤버 인지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2110     |레지스트리에 액세스할 수 있는 실행 권한이 취소 되어야 합니다.          |높음         |레지스트리 확장 저장 프로시저를 사용 하면 Microsoft SQL Server 레지스트리에서 값과 키를 읽고 쓸 수 있습니다. 엔터프라이즈 관리자가 서버를 구성 하는 데 사용 됩니다. 이 규칙은 레지스트리 확장 저장 프로시저를 실행 하는 데 필요한 권한이 dbo가 아닌 모든 사용자 로부터 철회 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2113     |DTS (데이터 변환 서비스) 권한은 SSIS 역할에만 부여 해야 합니다.          |중간         |DTS (데이터 변환 서비스)는 데이터베이스에 대 한 추출, 변환 및 로드 작업을 자동화 하는 데 사용할 수 있는 개체 및 유틸리티 집합입니다. 개체는 DTS 패키지 및 해당 구성 요소 이며, 유틸리티를 DTS 도구 라고 합니다. 이 규칙은 SSIS 역할만 DTS 시스템 저장 프로시저를 사용할 수 있는 권한을 부여 하 고, DTS 시스템 저장 프로시저를 사용 하는 공용 역할에 대 한 사용 권한은 취소 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2114     |최소한의 보안 주체 집합이 높은 영향의 고정 서버 역할의 멤버 여야 합니다.          |높음         |SQL Server는 권한을 관리 하는 데 도움이 되는 역할을 제공 합니다. 역할은 다른 보안 주체를 그룹화 하는 보안 주체입니다. 서버 수준 역할은 사용 권한 범위에서 서버 전체에 해당 합니다. 이 규칙은 최소한의 보안 주체 집합이 고정 서버 역할의 멤버 인지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2129     |서명 된 모듈의 변경 내용에 대 한 권한이 있어야 합니다.          |높음         |인증서 나 비대칭 키를 사용 하 여 저장 프로시저, 함수 또는 트리거에 서명할 수 있습니다. 이 기능은 권한을 소유권 체인을 통해 상속할 수 없거나 동적 SQL과 같이 소유권 체인이 끊어진 시나리오를 위해 디자인되었습니다. 이 규칙은 서명 된 모듈에 대 한 변경 내용이 있는지 확인 합니다 .이는 악의적인 사용을 나타낼 수 있습니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Database<br/><br/>SQL Managed Instance         |
|VA2130     |데이터베이스에 대 한 액세스 권한이 있는 모든 사용자 추적          |낮음         |이 검사는 데이터베이스에 액세스할 수 있는 모든 사용자를 추적 합니다. 이러한 사용자에 게 조직의 현재 역할에 따라 권한이 부여 되었는지 확인 합니다.         |<nobr>SQL 데이터베이스<nobr/><br/><br/>Azure Synapse         |

## <a name="auditing-and-logging"></a>감사 및 로깅

|규칙 ID  |규칙 제목  |규칙 심각도  |규칙 설명  |플랫폼  |
|---------|---------|---------|---------|---------|
|VA1045     |기본 추적을 사용 하도록 설정 해야 합니다.          |중간         |기본 추적 기능은 데이터베이스 관리자가 처음 문제 발생 시 문제 진단에 필요한 로그 데이터를 가지고 있는지 확인하여 문제를 해결하도록 도와 줍니다. 이 규칙은 기본 추적이 사용 되는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1091     |' 로그인 감사 '가 로그인을 추적 하도록 설정 된 경우 성공한 로그인 시도와 실패 한 로그인 시도의 감사 (기본 추적)를 사용 하도록 설정 해야 합니다.          |낮음         |로그인 감사 구성을 SQL Server 관리자는 SQL Server 인스턴스에 로그인 하는 사용자를 추적할 수 있습니다. 사용자가 ' 로그인 감사 '를 사용 하 여 SQL Server 인스턴스에 로그인 하는 사용자를 추적 하도록 선택 하는 경우 성공 및 실패 한 로그인 시도에 모두 사용 하도록 설정 하는 것이 중요 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1093     |오류 로그의 최대 개수는 12 자 이상 이어야 합니다.          |낮음         |각 SQL Server 오류 로그에는 SQL Server를 마지막으로 다시 시작한 이후 또는 마지막으로 오류 로그를 재활용 했을 때 발생 한 오류/오류와 관련 된 모든 정보가 표시 됩니다. 이 규칙은 최대 오류 로그 수가 12 개 이상 인지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1258     |데이터베이스 소유자가 필요 합니다.          |높음         |데이터베이스 소유자는 데이터베이스에서 모든 구성 및 유지 관리 작업을 수행할 수 있으며 SQL Server에서 데이터베이스를 삭제할 수도 있습니다. 추적 데이터베이스 소유자는 일부 보안 주체에 대해 과도 한 사용 권한을 방지 하는 것이 중요 합니다. 데이터베이스에 대해 예상 되는 데이터베이스 소유자를 정의 하는 기준선을 만듭니다. 이 규칙은 데이터베이스 소유자가 기준에 정의 되어 있는지 여부를 확인 합니다.         |<nobr>SQL Server 2016 +<sup>3</sup><nobr/><br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1264     |성공 및 실패 한 로그인 시도의 감사를 모두 사용 하도록 설정 해야 합니다.          |낮음         |감사 구성을 SQL Server 관리자는 사용자가 담당 하는 SQL Server 인스턴스에 로그인 하는 사용자를 추적할 수 있습니다. 이 규칙은 성공 및 실패 한 로그인 시도 모두에 감사를 사용할 수 있는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1265     |포함 된 DB 인증에 대 한 성공 및 실패 한 로그인 시도의 감사를 사용 하도록 설정 해야 합니다.          |중간         |SQL Server 감사 구성을 통해 관리자는 사용자가 담당 하는 인스턴스에 대 한 사용자 SQL Server 로깅을 추적할 수 있습니다. 이 규칙은 포함 된 DB 인증에 대 한 성공 및 실패 한 로그인 시도에 대해 감사가 사용 되는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1281     |사용자 정의 역할에 대 한 모든 멤버 자격이 의도 되어야 합니다.          |중간         |사용자 정의 역할은 사용 권한을 쉽게 관리 하기 위해 사용자가 정의 하는 보안 주체입니다. 과도 한 사용 권한을 방지 하려면 이러한 역할을 모니터링 하는 것이 중요 합니다. 각 사용자 정의 역할의 예상 멤버 자격을 정의 하는 기준선을 만듭니다. 이 규칙은 사용자 정의 역할에 대 한 모든 멤버 자격이 기준선에 정의 되어 있는지 여부를 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1283     |시스템에 활성 감사가 하나 이상 있어야 합니다.          |낮음         |SQL Server 데이터베이스 엔진 또는 개별 데이터베이스의 인스턴스를 감사하는 작업에는 데이터베이스 엔진에서 발생하는 이벤트를 추적하고 기록하는 작업이 포함됩니다. SQL Server Audit 개체는 사용자가 모니터링하려는 서버 또는 데이터베이스 수준 동작 및 동작 그룹에 대한 하나의 인스턴스를 수집합니다. 이 규칙은 시스템에 활성 감사가 하나 이상 있는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2061     |서버 수준에서 감사를 사용 하도록 설정 해야 합니다.          |높음         |Azure SQL Database 감사는 데이터베이스 이벤트를 추적 하 고 Azure 저장소 계정의 감사 로그에 기록 합니다. 감사를 통해 데이터베이스 작업을 이해 하 고 비즈니스 문제나 의심 스러운 보안 위반을 나타낼 수 있는 불일치 및 비정상을 파악할 수 있으며 규정 준수를 충족 하는 데 도움이 됩니다. 자세한 내용은 [AZURE SQL 감사](./auditing-overview.md)를 참조 하세요. 이 규칙은 감사가 사용 되는지 검사 합니다.         |<nobr/>SQL Database<br/><br/>Azure Synapse          |

## <a name="data-protection"></a>데이터 보호

|규칙 ID  |규칙 제목  |규칙 심각도  |규칙 설명  |플랫폼  |
|---------|---------|---------|---------|---------|
|VA1098     |기존 SSB 또는 미러링 끝점에는 AES 연결이 필요 합니다.          |높음         |Service Broker 및 미러링 끝점은 암호화 안 함을 포함 하 여 서로 다른 암호화 알고리즘을 지원 합니다. 이 규칙은 기존 끝점에서 AES 암호화가 필요한 지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1219     |투명 한 데이터 암호화를 사용 하도록 설정 해야 합니다.          |중간         |TDE (투명 한 데이터 암호화)는 응용 프로그램을 변경할 필요 없이 데이터베이스, 연결 된 백업 및 트랜잭션 로그 파일의 실시간 암호화 및 암호 해독을 수행 하 여 정보 공개 로부터 데이터베이스 파일을 보호 하는 데 도움이 됩니다. 이 규칙은 데이터베이스에서 TDE가 사용 하도록 설정 되어 있는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1220     |TDS를 사용 하 여 데이터베이스 통신은 TLS를 통해 보호 해야 합니다.          |높음         |Microsoft SQL Server는 SSL (SSL(Secure Sockets Layer)) 또는 TLS (전송 계층 보안)를 사용 하 여 네트워크를 통해 SQL Server 인스턴스와 클라이언트 응용 프로그램 간에 전송 되는 데이터를 암호화할 수 있습니다. 이 규칙은 SQL Server에 대 한 모든 연결이 TLS를 통해 암호화 되었는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1221     |데이터베이스 암호화 대칭 키는 AES 알고리즘을 사용 해야 합니다.          |높음         |SQL Server는 암호화 키를 사용 하 여 서버 데이터베이스에 저장 된 데이터 자격 증명과 연결 정보를 보호 합니다. SQL Server에는 대칭 및 비대칭의 두 가지 키가 있습니다. 이 규칙은 데이터베이스 암호화 대칭 키가 AES 알고리즘을 사용 하는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1222     |암호화 키 Cell-Level AES 알고리즘을 사용 해야 합니다.          |높음         |CLE (Cell-Level 암호화)를 사용 하 여 대칭 및 비대칭 키를 통해 데이터를 암호화할 수 있습니다. 이 규칙은 Cell-Level 암호화 대칭 키가 AES 알고리즘을 사용 하는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1223     |인증서 키는 2048 비트 이상을 사용 해야 합니다.          |높음         |인증서 키는 RSA 및 기타 암호화 알고리즘에서 데이터를 보호 하는 데 사용 됩니다. 이러한 키의 길이는 사용자의 데이터를 보호 하는 데 충분 해야 합니다. 이 규칙은 키의 길이가 모든 인증서에 대해 2048 비트 이상 인지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1224     |비대칭 키의 길이는 2048 비트 이상 이어야 합니다.          |높음         |데이터베이스 비대칭 키는 여러 암호화 알고리즘에서 사용 됩니다 .이 키는 암호화 된 데이터를 보호 하기에 충분 한 길이 여야 합니다 .이 규칙은 데이터베이스에 저장 된 모든 비대칭 키의 길이가 2048 비트 이상 인지 확인 합니다.         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>SQL Database         |
|VA1279     |TDS에 대해 강제 암호화를 사용 하도록 설정 해야 함          |높음         |데이터베이스 엔진에 대 한 암호화 적용 옵션을 사용 하는 경우 ' 연결 암호화 ' 옵션 (예: SSMS)의 선택 여부에 관계 없이 클라이언트와 서버 간의 모든 통신은 암호화 됩니다. 이 규칙은 암호화 강제 사용 옵션이 사용 되는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1288     |중요 한 데이터 열을 분류 해야 합니다.          |중간         |이 규칙은 검색 된 데이터베이스에 분류 되지 않은 잠재적으로 중요 한 데이터가 있는지 확인 합니다.         |<nobr/>SQL Database         |
|VA2060     |서버 수준에서 SQL 위협 감지를 사용 하도록 설정 해야 합니다.          |중간         |SQL 위협 검색은 SQL 삽입 공격 및 비정상적인 동작 패턴과 같은 데이터베이스에서 잠재적 취약성 및 비정상 활동을 검색 하는 보안 계층을 제공 합니다. 잠재적 위협이 감지 되 면 위협 검색은 전자 메일을 통해 실행 가능한 실시간 경고를 전송 하 고 특정 위협에 대 한 명확한 조사 및 수정 단계를 포함 하는 Azure Security Center 합니다. 자세한 내용은 [위협 감지 구성](./threat-detection-configure.md)을 참조 하세요. 이 검사는 SQL 위협 검색이 사용 되는지 확인 합니다.         |<nobr/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |

## <a name="installation-updates-and-patches"></a>설치 업데이트 및 패치

|규칙 ID  |규칙 제목  |규칙 심각도  |규칙 설명  |플랫폼  |
|---------|---------|---------|---------|---------|
| VA1018     |최신 업데이트를 설치 해야 합니다.          |높음         |Microsoft는 각 버전의 SQL Server에 대 한 CUs (누적 업데이트)를 주기적으로 릴리스 합니다. 이 규칙은 실행을 위해 문자열을 전달 하 여 사용 중인 SQL Server의 특정 버전에 대 한 최신 CU 설치 되었는지 검사 합니다. 이 규칙은 dbo를 제외한 모든 사용자에 게 xp_cmdshell 확장 저장 프로시저를 실행할 수 있는 권한이 없는지 검사 합니다. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>SQL Server 2017<br/>|
|VA2128     |SQL Server 2012 보다 낮은 SQL Server 버전에서는 취약성 평가가 지원 되지 않습니다.          |높음         |SQL Server에 대 한 취약성 평가 검사를 실행 하려면 서버를 SQL Server 2012 이상으로 업그레이드 해야 합니다. SQL Server 2008 R2이 하는 Microsoft에서 더 이상 지원 되지 않습니다. 자세한 내용은 <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>을 참조하세요.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |

## <a name="surface-area-reduction"></a>노출 영역 축소

|규칙 ID  |규칙 제목  |규칙 심각도  |규칙 설명  |플랫폼  |
|---------|---------|---------|---------|---------|
|VA1022     |임시 분산 쿼리를 사용 하지 않도록 설정 해야 합니다.          |중간         |임시 분산 쿼리는 및 함수를 사용 하 여 `OPENROWSET` `OPENDATASOURCE` OLE DB를 사용 하는 원격 데이터 원본에 연결 합니다. 이 규칙은 임시 분산 쿼리를 사용할 수 없는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1023     |CLR을 사용 하지 않도록 설정 해야 합니다.          |높음         |CLR을 사용 하면 관리 코드를에 호스트 하 고 Microsoft SQL Server 환경에서 실행할 수 있습니다. 이 규칙은 CLR이 사용 되지 않는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1026     |CLR을 사용 하지 않도록 설정 해야 합니다.          |중간         |CLR을 사용 하면 관리 코드를에 호스트 하 고 Microsoft SQL Server 환경에서 실행할 수 있습니다. CLR strict security는 안전 하 고 EXTERNAL_ACCESS 어셈블리가 안전 하지 않은 것으로 표시 된 것 처럼 처리 하 고, 마스터 데이터베이스에서 안전 하지 않은 어셈블리 권한이 부여 된 해당 로그인을 사용 하 여 모든 어셈블리를 인증서 또는 비대칭 키로 서명 해야 합니다. 이 규칙은 CLR이 사용 되지 않는지 검사 합니다.         |<nobr>SQL Server 2017 +<sup>2</sup><nobr/><br/><br/>SQL Managed Instance         |
|VA1027     |추적 되지 않은 신뢰할 수 있는 어셈블리는 제거 해야 합니다.          |높음         |UNSAFE로 표시 된 어셈블리는 마스터 데이터베이스에서 안전 하지 않은 어셈블리 권한이 부여 된 해당 로그인을 사용 하 여 인증서 또는 비대칭 키로 서명 해야 합니다. 신뢰할 수 있는 어셈블리는이 요구 사항을 무시할 수 있습니다.          |<nobr>SQL Server 2017 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1044     |특별히 필요한 경우가 아니면 원격 관리 연결을 사용 하지 않도록 설정 해야 합니다.          |중간         |이 규칙은 공격 노출 영역을 줄이기 위해 클러스터링에 사용 되지 않는 경우 원격 관리자 연결이 사용 하지 않도록 설정 되었는지 검사 합니다. SQL Server는 DAC (관리자 전용 연결)를 제공 합니다. DAC를 사용 하면 관리자가 실행 중인 서버에 액세스 하 여 진단 기능 또는 Transact-sql 문을 실행 하거나 서버에서 발생 하는 문제를 해결할 수 있으며 원격으로 사용 하도록 설정 된 경우 공격 대상이 됩니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1051     |모든 데이터베이스에서 AUTO_CLOSE를 사용 하지 않도록 설정 해야 합니다.          |중간         |AUTO_CLOSE 옵션은 마지막 사용자가 연결을 끊은 후 데이터베이스가 정상적으로 종료 되 고 리소스가 해제 되는지 여부를 지정 합니다. 이점에 관계 없이 데이터베이스를 적극적으로 열고 닫아서 서비스 거부를 유발할 수 있으므로이 기능을 사용 하지 않도록 설정 하는 것이 중요 합니다. 이 규칙은 현재 데이터베이스에서이 옵션을 사용할 수 없는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1066     |사용 하지 않는 service broker 끝점을 제거 해야 합니다.          |낮음         |Service Broker는 SQL Server에 대 한 큐와 신뢰할 수 있는 메시징을 제공 합니다. Service Broker는 단일 SQL Server 인스턴스를 사용 하는 응용 프로그램과 여러 인스턴스 간에 작업을 분산 하는 응용 프로그램에 사용 됩니다. Service Broker 엔드포인트는 전송 보안과 메시지 전달 옵션을 제공합니다. 이 규칙은 모든 service broker 끝점을 열거 합니다. 사용 되지 않는 것을 제거 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1071     |' 시작 저장 프로시저 검색 ' 옵션을 사용 하지 않도록 설정 해야 합니다.          |중간         |' 시작 프로시저 검색 '이 사용 하도록 설정 된 경우 서버에 정의 된 자동 실행 저장 프로시저를 모두 검색 하 고 실행 SQL Server. 이 옵션을 사용 하는 경우 서버에 정의 된 자동 실행 저장 프로시저를 모두 검색 하 여 실행 SQL Server. 이 규칙은이 옵션이 사용 되지 않는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1092     |SQL Server 인스턴스는 SQL Server Browser 서비스에서 보급할 수 없습니다.          |낮음         |SQL Server은 SQL Server Browser 서비스를 사용 하 여 컴퓨터에 설치 된 데이터베이스 엔진의 인스턴스를 열거 합니다. 이렇게 하면 클라이언트 응용 프로그램에서 서버를 검색 하 고 클라이언트가 같은 컴퓨터에 있는 데이터베이스 엔진의 여러 인스턴스를 구분할 수 있습니다. 이 규칙은 SQL 인스턴스가 숨겨지는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1102     |MSDB를 제외한 모든 데이터베이스에서 신뢰할 수 있는 비트를 사용 하지 않도록 설정 해야 합니다.          |높음         |신뢰할 수 있는 데이터베이스 속성은 인스턴스가 데이터베이스 및 그 내용을 트러스트 SQL Server 하는지 여부를 나타내는 데 사용 됩니다. 이 옵션을 사용 하는 경우 가장 컨텍스트를 사용 하는 데이터베이스 모듈 (예: 사용자 정의 함수 또는 저장 프로시저)이 데이터베이스 외부의 리소스에 액세스할 수 있습니다. 이 규칙은 MSDB를 제외한 모든 데이터베이스에서 신뢰 비트가 비활성화 되었는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1143     |정상적인 서비스 작업에는 ' dbo ' 사용자를 사용할 수 없습니다.          |중간         |' Dbo ' 또는 데이터베이스 소유자는 데이터베이스의 모든 작업을 수행할 수 있는 묵시적 권한이 있는 사용자 계정입니다. Sysadmin 고정 서버 역할의 멤버는 자동으로 dbo에 매핑됩니다. 이 규칙은 dbo가이 데이터베이스에 액세스할 수 있는 유일한 계정이 아닌지 확인 합니다. 새로 만든 정리 된 데이터베이스에서는 추가 역할을 만들 때까지이 규칙이 실패 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1144     |Model 데이터베이스는 ' dbo '로만 액세스할 수 있습니다.          |중간         |Model 데이터베이스는 SQL Server 인스턴스에 생성 된 모든 데이터베이스에 대 한 템플릿으로 사용 됩니다. 데이터베이스 크기 복구 모델 및 기타 데이터베이스 옵션과 같은 모델 데이터베이스에 대 한 수정 사항은 이후에 만들어진 모든 데이터베이스에 적용 됩니다. 이 규칙은 dbo가 model 데이터베이스에 액세스할 수 있는 유일한 계정 인지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1230     |Filestream을 사용 하지 않도록 설정 해야 합니다.          |높음         |FILESTREAM은 varbinary (max) BLOB (binary large object) 데이터를 파일 시스템의 파일로 저장 하 여 SQL Server 데이터베이스 엔진 NTFS 파일 시스템과 통합 합니다. Transact-sql 문은 FILESTREAM 데이터를 삽입, 업데이트, 쿼리, 검색 및 백업할 수 있습니다. SQL server에서 Filestream을 사용 하도록 설정 하면 추가 NTFS 스트리밍 API가 표시 되므로 공격 노출 영역이 늘어나고 악의적인 공격에 취약 하 게 됩니다. 이 규칙은 Filestream이 사용 되지 않는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1235     |' Replication Xp ' 서버 구성을 사용 하지 않도록 설정 해야 합니다.          |중간         |사용 되지 않는 서버 구성 ' 복제 Xp '를 사용 하지 않도록 설정 하 여 공격 노출 영역을 제한 합니다. 이것은 내부 전용 구성 설정입니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1244     |분리 된 사용자는 SQL server 데이터베이스에서 제거 해야 합니다.          |중간         |데이터베이스에는 있지만 해당 로그인이 master 데이터베이스에 없거나 외부 리소스 (예: Windows 사용자)에 있는 데이터베이스 사용자를 분리 된 사용자 라고 하며이를 제거 하거나 유효한 로그인에 다시 매핑해야 합니다. 이 규칙은 분리 된 사용자가 없는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1245     |Dbo 정보는 대상 DB와 마스터 간에 일치 해야 합니다.          |높음         |데이터베이스에 저장 된 메타 데이터 및 master DB에 저장 된 메타 데이터와 같은 데이터베이스의 dbo id에 대 한 중복 정보가 있습니다. 이 규칙은 대상 DB와 마스터 간에이 정보가 일치 하는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1247     |자동 시작으로 표시 되는 SPs가 없어야 합니다.          |높음         |' 시작 프로시저 검색 '으로 SQL Server 구성 된 경우 서버는 자동 시작으로 표시 된 저장 프로시저에 대해 마스터 DB를 검색 합니다. 이 규칙은 자동 시작으로 표시 된 SPs가 없는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/>         |
|VA1256     |사용자 CLR 어셈블리는 데이터베이스에서 정의 하면 안 됩니다.          |높음         |CLR 어셈블리는 SQL Server 프로세스에서 임의의 코드를 실행 하는 데 사용할 수 있습니다. 이 규칙은 데이터베이스에 사용자 정의 CLR 어셈블리가 없는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA1277     |Polybase 네트워크 암호화를 사용 하도록 설정 해야 합니다.          |높음         |PolyBase는 SQL Server 내에서 비관계형 및 관계형 데이터를 모두 액세스 하 고 결합 하는 기술입니다. Polybase 네트워크 암호화 옵션은 Polybase를 사용할 때 제어 및 데이터 채널을 암호화 하도록 SQL Server를 구성 합니다. 이 규칙은이 옵션이 사용 하도록 설정 되어 있는지 확인 합니다.         |<nobr>SQL Server 2016 이상<nobr/>         |
|VA1278     |외부 키 관리 공급자의 기준선 만들기          |중간         |SQL Server EKM (확장 가능 키 관리)을 사용 하면 타사 EKM/하드웨어 보안 모듈 (HSM) 공급 업체에서 해당 모듈을 SQL Server 등록할 수 있습니다. 등록 SQL Server 사용자는 EKM 모듈에 저장 된 암호화 키를 사용할 수 있습니다 .이 규칙은 시스템에서 사용 중인 EKM 공급자 목록을 표시 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2062     |데이터베이스 수준 방화벽 규칙은 과도 한 액세스 권한을 부여 해서는 안 됩니다.          |높음         |Azure SQL Database 수준 방화벽을 사용 하면 사용 권한이 있는 IP 주소를 지정할 때까지 데이터베이스에 대 한 모든 액세스를 방지 하 여 데이터를 보호할 수 있습니다. 데이터베이스 수준 방화벽 규칙은 각 요청의 원래 IP 주소에 따라 특정 데이터베이스에 대 한 액세스 권한을 부여 합니다. Master 및 사용자 데이터베이스에 대 한 데이터베이스 수준 방화벽 규칙은 Transact-sql을 통해서만 만들고 관리할 수 있습니다 (Azure Portal 또는 PowerShell을 사용 하 여 만들고 관리할 수 있는 서버 수준 방화벽 규칙과 달리). 자세한 내용은 [Azure SQL Database 및 Azure Synapse ANALYTICS IP 방화벽 규칙](./firewall-configure.md)을 참조 하세요. 이 검사는 데이터베이스 수준 방화벽 규칙이 255 이상의 IP 주소에 대 한 액세스를 허용 하지 않는지 확인 합니다.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2063     |서버 수준 방화벽 규칙은 과도 한 액세스 권한을 부여 해서는 안 됩니다.          |높음         |Azure SQL server 수준 방화벽을 사용 하면 권한이 있는 IP 주소를 지정할 때까지 데이터베이스에 대 한 모든 액세스를 차단 하 여 서버를 보호할 수 있습니다. 서버 수준 방화벽 규칙은 각 요청의 원래 IP 주소에 따라 서버에 속하는 모든 데이터베이스에 대 한 액세스 권한을 부여 합니다.  서버 수준 방화벽 규칙은 Transact-sql 뿐만 아니라 Azure Portal 또는 PowerShell을 통해서만 만들고 관리할 수 있습니다. 자세한 내용은 [Azure SQL Database 및 Azure Synapse ANALYTICS IP 방화벽 규칙](./firewall-configure.md)을 참조 하세요. 이 검사는 서버 수준 방화벽 규칙이 255 이상의 IP 주소에 대 한 액세스를 허용 하지 않는지 확인 합니다.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2064     |데이터베이스 수준 방화벽 규칙은 엄격 하 게 최소한으로 추적 하 고 유지 관리 해야 합니다.          |높음         |Azure SQL Database 수준 방화벽을 사용 하면 사용 권한이 있는 IP 주소를 지정할 때까지 데이터베이스에 대 한 모든 액세스를 방지 하 여 데이터를 보호할 수 있습니다. 데이터베이스 수준 방화벽 규칙은 각 요청의 원래 IP 주소에 따라 특정 데이터베이스에 대 한 액세스 권한을 부여 합니다. Master 및 사용자 데이터베이스에 대 한 데이터베이스 수준 방화벽 규칙은 Transact-sql을 통해서만 만들고 관리할 수 있습니다 (Azure Portal 또는 PowerShell을 사용 하 여 만들고 관리할 수 있는 서버 수준 방화벽 규칙과 달리). 자세한 내용은 [Azure SQL Database 및 Azure Synapse ANALYTICS IP 방화벽 규칙](./firewall-configure.md)을 참조 하세요. 이 검사는 모든 데이터베이스 수준 방화벽 규칙을 열거 하 여 변경 내용을 식별 하 고 해결할 수 있도록 합니다.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2065     |서버 수준 방화벽 규칙은 엄격한 최소 수준에서 추적 및 유지 관리 해야 합니다.          |높음         |Azure SQL server 수준 방화벽을 사용 하면 권한이 있는 IP 주소를 지정할 때까지 데이터베이스에 대 한 모든 액세스를 차단 하 여 데이터를 보호할 수 있습니다. 서버 수준 방화벽 규칙은 각 요청의 원래 IP 주소에 따라 서버에 속하는 모든 데이터베이스에 대 한 액세스 권한을 부여 합니다.  Transact-sql 뿐만 아니라 Azure Portal 또는 PowerShell을 통해 서버 수준 방화벽 규칙을 만들고 관리할 수 있습니다. 자세한 내용은 [Azure SQL Database 및 Azure Synapse ANALYTICS IP 방화벽 규칙](./firewall-configure.md)을 참조 하세요.  이 검사는 모든 서버 수준 방화벽 규칙을 열거 하 여 변경 내용을 식별 하 고 해결할 수 있도록 합니다.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2111     |예제 데이터베이스를 제거 해야 합니다.          |낮음         |Microsoft SQL Server는 여러 예제 데이터베이스와 함께 제공 됩니다. 이 규칙은 예제 데이터베이스가 제거 되었는지 여부를 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2120     |보안에 영향을 줄 수 있는 기능을 사용 하지 않도록 설정 해야 합니다.          |높음         |SQL Server은 다양 한 기능과 서비스를 제공할 수 있습니다. 기본적으로 제공 되는 일부 기능 및 서비스는 필요 하지 않을 수 있으며이를 사용 하도록 설정 하면 시스템 보안에 부정적인 영향을 줄 수 있습니다. 이 규칙은 이러한 기능을 사용할 수 없는지 검사 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2121     | ' OLE 자동화 프로시저 ' 기능을 사용 하지 않도록 설정 해야 합니다.         |높음         |SQL Server은 다양 한 기능과 서비스를 제공할 수 있습니다. 기본적으로 제공 되는 일부 기능 및 서비스는 필요 하지 않을 수 있으며이를 사용 하도록 설정 하면 시스템의 보안에 부정적인 영향을 줄 수 있습니다. OLE 자동화 프로시저 옵션은 Transact-sql 일괄 처리 내에서 OLE 자동화 개체를 인스턴스화할 수 있는지 여부를 제어 합니다. 이러한 확장 저장 프로시저는 SQL Server 사용자가 SQL Server 외부에서 함수를 실행할 수 있도록 합니다. 이점에 관계 없이 악용에도 사용할 수 있으며 대상 컴퓨터에서 파일을 공장 화 하는 데 널리 사용 되는 메커니즘 이라고 합니다. 이 도구에 대 한 대체 방법으로 PowerShell을 사용 하는 것이 좋습니다. 이 규칙은 ' OLE 자동화 프로시저 ' 기능이 사용 하지 않도록 설정 되어 있는지 검사 합니다.          |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2122     |' 사용자 옵션 ' 기능을 사용 하지 않도록 설정 해야 합니다.          |중간         |SQL Server은 다양 한 기능과 서비스를 제공할 수 있습니다. 기본적으로 제공 되는 일부 기능 및 서비스는 필요 하지 않을 수 있으며이를 사용 하도록 설정 하면 시스템 보안에 부정적인 영향을 줄 수 있습니다. 사용자 옵션은 모든 사용자에 대 한 전역 기본값을 지정 합니다. 기본 쿼리 처리 옵션 목록은 사용자의 작업 세션 기간에 대해 설정됩니다. 사용자 옵션을 사용 하면 서버의 기본 설정이 적절 하지 않은 경우 SET 옵션의 기본값을 변경할 수 있습니다. 이 규칙은 ' 사용자 옵션 ' 기능이 사용 하지 않도록 설정 되어 있는지 확인 합니다.         |<nobr>SQL Server 2012 이상<nobr/><br/><br/>SQL Managed Instance         |
|VA2126     |확장성-필요 하지 않은 경우 보안에 영향을 줄 수 있는 기능을 사용 하지 않도록 설정 해야 합니다.          |중간         |SQL Server는 다양 한 기능과 서비스를 제공 합니다. 기본적으로 제공 되는 일부 기능 및 서비스는 필요 하지 않을 수 있으며이를 사용 하도록 설정 하면 시스템의 보안에 부정적인 영향을 줄 수 있습니다. 이 규칙은 외부 데이터 원본에 대 한 데이터 추출을 허용 하는 구성과 특정 원격 언어 확장을 사용 하 여 스크립트를 실행할 수 없도록 설정 되었는지 검사 합니다.         |<nobr>SQL Server 2016 이상<nobr/>         |

## <a name="removed-rules"></a>제거 규칙

|규칙 ID  |규칙 제목  |
|---------|---------|
|VA1021     |전역 임시 저장 프로시저를 제거 해야 합니다.         |
|VA1024    |C2 감사 모드를 사용 하도록 설정 해야 합니다. |
|VA1069     |시스템 테이블 및 뷰에서 선택할 수 있는 권한은 비-sysadmins에서 해지 해야 합니다.         |
|VA1090    |모든 정부용 정부 (GOTS) 및 사용자 지정 저장 프로시저의 암호화 확인 |
|VA1103    |SAFE_ACCESS 권한이 있는 CLR만 사용 |
|VA1229     |레지스트리 및 SQL Server 구성의 Filestream 설정이 일치 해야 합니다.         |
|VA1231     |Filestream을 사용 하지 않도록 설정 해야 합니다 (SQL).         |
|VA1234     |Common Criteria 설정을 사용 하도록 설정 해야 합니다.         |
|VA1252     |서버 감사 사양을 통해 감사 및 중앙에서 관리 되는 이벤트의 목록입니다.         |
|VA1253     |서버 감사 사양을 통해 감사 및 중앙에서 관리 되는 DB 범위 이벤트의 목록         |
|VA1263     |시스템의 모든 활성 감사를 나열 합니다.         |
|VA1266     |모든 SQL 로그인에 대해 ' MUST_CHANGE ' 옵션을 설정 해야 합니다.         |
|VA1276     |에이전트 XPs 기능을 사용 하지 않도록 설정 해야 합니다.         |
|VA1286     |데이터베이스 권한은 보안 주체 (개체 또는 열)에 직접 부여 되어서는 안 됩니다.         |
|VA2000     |최소한의 보안 주체 집합에는 높은 영향을 주는 데이터베이스 범위 사용 권한이 부여 되어야 합니다.         |
|VA2001     |최소한의 보안 주체 집합은 개체 또는 열에 대해 높은 영향을 주는 데이터베이스 범위 사용 권한을 부여 해야 합니다.         |
|VA2002     |최소한의 보안 주체 집합은 다양 한 보안 개체에 대 한 높은 영향을 주는 데이터베이스 범위 사용 권한을 부여 해야 합니다.         |
|VA2010     |최소한의 보안 주체 집합에는 중간 영향 데이터베이스 범위 사용 권한을 부여 해야 합니다.         |
|VA2021     |최소한의 보안 주체 집합에 개체 또는 열에 대 한 데이터베이스 범위 ALTER 권한을 부여 해야 합니다.         |
|VA2022     |사용자의 최소 집합에는 다양 한 보안 개체에 대 한 데이터베이스 범위 ALTER 권한을 부여 해야 합니다.         |
|VA2030     |최소한의 보안 주체 집합에 데이터베이스 범위 SELECT 또는 EXECUTE 권한을 부여 해야 합니다.         |
|VA2031     |최소한의 보안 주체 집합에 데이터베이스 범위 SELECT를 부여 해야 합니다.          |
|VA2032     |최소한의 보안 주체 집합에는 스키마에 대 한 데이터베이스 범위 SELECT 또는 EXECUTE 권한이 부여 되어야 합니다.         |
|VA2034     |최소한의 보안 주체 집합에는 XML 스키마 컬렉션에 대 한 데이터베이스 범위 실행 권한이 부여 되어야 합니다.         |
|VA2040     |최소한의 보안 주체 집합은 낮은 영향 데이터베이스 범위 사용 권한을 부여 해야 합니다.         |
|VA2041     |최소한의 보안 주체 집합은 개체 또는 열에 대해 낮은 영향 데이터베이스 범위 사용 권한을 부여 해야 합니다.         |
|VA2042     |최소한의 보안 주체 집합에는 스키마에 대 한 낮은 영향 데이터베이스 범위 권한이 부여 되어야 합니다.         |
|VA2050     |최소한의 보안 주체 집합에 데이터베이스 범위 뷰 정의 사용 권한을 부여 해야 합니다.         |
|VA2051     |최소한의 보안 주체 집합에는 개체 또는 열에 대 한 데이터베이스 범위 뷰 정의 권한이 부여 되어야 합니다.         |
|VA2052     |여러 보안 개체에 대해 최소한의 보안 주체 집합에 데이터베이스 범위 뷰 정의 사용 권한을 부여 해야 합니다.         |
|VA2100     |최소한의 보안 주체 집합에는 높은 영향의 서버 범위 사용 권한이 부여 되어야 합니다.         |
|VA2101     |최소한의 보안 주체 집합에 보통 영향 서버 범위 사용 권한을 부여 해야 합니다.         |
|VA2102     |최소한의 보안 주체 집합은 낮은 영향의 서버 범위 사용 권한을 부여 해야 합니다.         |
|VA2104     |확장 저장 프로시저에 대 한 실행 권한은 PUBLIC에서 취소 해야 합니다.         |
|VA2105     |로그인 암호는 쉽게 추측할 수 없습니다.         |
|VA2112     |DTS (데이터 변환 서비스)에 대 한 PUBLIC의 사용 권한을 취소 해야 합니다.         |
|VA2115     |최소 보안 주체 집합은 보통 충격 고정 서버 역할의 멤버 여야 합니다.         |
|VA2123     |' 원격 액세스 ' 기능을 사용 하지 않도록 설정 해야 합니다.         |
|VA2127     |' 외부 스크립트 ' 기능을 사용 하지 않도록 설정 해야 합니다.         |

## <a name="next-steps"></a>다음 단계

- [취약성 평가](sql-vulnerability-assessment.md)
- [SQL 취약성 평가 규칙 변경 로그](sql-database-vulnerability-assessment-rules-changelog.md)
