---
title: SQL 취약성 평가
titleSuffix: Azure SQL Database & SQL Managed Instance & Azure Synapse Analytics
description: SQL 취약성 평가를 구성 하 고 Azure SQL Database, Azure SQL Managed Instance 및 Azure Synapse 분석에 대 한 평가 보고서를 해석 하는 방법에 대해 알아봅니다.
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.custom: sqldbrb=3
ms.devlang: ''
ms.topic: how-to
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 02/11/2021
tags: azure-synapse
ms.openlocfilehash: 1719c5a7112ee32f86d0593d274a59638cf81a0e
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/14/2021
ms.locfileid: "100376646"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>SQL 취약성 평가는 데이터베이스 취약성을 식별 하는 데 도움이 됩니다.
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

SQL 취약성 평가는 잠재적인 데이터베이스 취약성을 검색, 추적 및 수정할 수 있는 간편한 구성 서비스입니다. 이 도구를 사용하여 데이터베이스 보안을 사전에 강화하세요.

취약성 평가는 고급 SQL 보안 기능을 위한 통합 패키지인 [sql 용 Azure Defender](azure-defender-for-sql.md) 제공의 일부입니다. 취약성 평가는 SQL 포털의 중앙 Azure Defender를 통해 액세스 하 고 관리할 수 있습니다.

> [!NOTE]
> 취약점 평가는 Azure SQL Database, Azure SQL Managed Instance 및 Azure Synapse Analytics에 대해 지원 됩니다. Azure SQL Database, Azure SQL Managed Instance 및 Azure Synapse Analytics의 데이터베이스는이 문서의 나머지 부분에서 전체적으로 참조 되며 서버는 Azure SQL Database 및 Azure Synapse에 대 한 데이터베이스를 호스트 하는 [서버](logical-servers.md) 를 참조 합니다.

## <a name="what-is-sql-vulnerability-assessment"></a>SQL 취약성 평가 란?

SQL 취약성 평가는 보안 상태에 대 한 가시성을 제공 하는 서비스입니다. 취약성 평가에는 보안 문제를 해결 하 고 데이터베이스 보안을 향상 시키기 위한 조치 가능한 단계가 포함 됩니다. 이를 통해 변경 내용을 추적 하 고 SQL 보안 상태를 개선 하기 어려운 동적 데이터베이스 환경을 모니터링할 수 있습니다.

취약성 평가는 Azure SQL Database에 기본 제공 되는 검색 서비스입니다. 서비스는 보안 취약성에 플래그를 지정 하는 규칙의 기술 자료를 채택 합니다. 잘못 된 오류, 과도 한 권한 및 보호 되지 않는 중요 데이터와 같은 모범 사례의 차이를 강조 표시 합니다.

규칙은 Microsoft의 모범 사례를 기반으로 하며 데이터베이스와 중요 한 데이터에 가장 큰 위험을 제시 하는 보안 문제에 중점을 둡니다. 데이터베이스 수준 문제와 서버 수준 보안 문제 (예: 서버 방화벽 설정 및 서버 수준 권한)를 다룹니다.

검색 결과에는 각 문제를 해결하는 실행 가능한 단계가 포함되며 해당하는 경우 사용자 지정된 재구성 스크립트가 제공됩니다. 에 대해 허용 가능한 기준을 설정 하 여 사용자 환경에 대 한 평가 보고서를 사용자 지정할 수 있습니다.

- 권한 구성
- 기능 구성
- 데이터베이스 설정

## <a name="configure-vulnerability-assessment"></a>취약성 평가 구성

취약성 평가를 구성 하려면 다음 단계를 수행 합니다.

1. [Azure Portal](https://portal.azure.com)에서 AZURE SQL DATABASE, SQL Managed Instance 데이터베이스 또는 Azure Synapse에서 특정 리소스를 엽니다.

1. **보안** 제목 아래에서 **Security Center** 를 선택 합니다.

1. 링크에서 **구성** 을 선택 하 여 전체 서버 또는 관리 되는 인스턴스에 대해 Azure DEFENDER for SQL 설정 창을 엽니다.

    :::image type="content" source="media/sql-vulnerability-assessment/opening-sql-configuration.png" alt-text="Defender for SQL 구성 열기":::

    > [!NOTE]
    > SQL 취약성 평가를 위해서는 **sql 용 Azure Defender** 계획이 검색을 실행할 수 있어야 합니다. SQL 용 Azure Defender를 사용 하도록 설정 하는 방법에 대 한 자세한 내용은 [sql 용 Azure defender](azure-defender-for-sql.md)를 참조 하세요.

1. **서버 설정** 페이지에서 SQL 설정에 대 한 Azure Defender를 정의 합니다.

    :::image type="content" source="media/sql-vulnerability-assessment/sql-vulnerability-scan-settings.png" alt-text="SQL 취약성 평가 검사 구성":::

    1. 서버 또는 관리 되는 인스턴스의 모든 데이터베이스에 대 한 검사 결과가 저장 되는 저장소 계정을 구성 합니다. 스토리지 계정에 대한 자세한 내용은 [Azure Storage 계정 정보](../../storage/common/storage-account-create.md)를 참조하세요.

        > [!TIP]
        > 방화벽 및 Vnet의 취약성 평가 검사를 저장 하는 방법에 대 한 자세한 내용은 [저장소 취약성 평가 검사 결과, 방화벽 및 vnet 뒤에 액세스할 수 있는 저장소 계정](sql-database-vulnerability-assessment-storage.md)을 참조 하세요.

    1. 주 검색을 자동으로 실행 하 여 보안 구성을 검색 하지 않도록 취약성 평가를 구성 하려면 **정기적 되풀이 검색** 을 **켜기** 로 설정 합니다. 결과는 **검색 보고서 보내기** 에서 제공 하는 전자 메일 주소로 전송 됩니다. 또한 **관리자 및 구독 소유자에 게 전자 메일 알림을 보내도록** 설정 하 여 관리자 및 구독 소유자에 게 전자 메일 알림을 보낼 수 있습니다.

1. SQL 취약성 평가 검사를 요청 시 실행할 수도 있습니다.

    1. 리소스의 **Security Center** 페이지에서 **취약성 평가의 추가** 검색 결과 보기를 선택 하 여 이전 검색의 검색 결과에 액세스할 수 있습니다.

        :::image type="content" source="media/sql-vulnerability-assessment/view-additional-findings-link.png" alt-text="검사 결과 및 수동 검색 옵션 열기":::

    1. 요청 시 검색을 실행 하 여 데이터베이스에서 취약성을 검색 하려면 도구 모음에서 **검색** 을 선택 합니다.

        :::image type="content" source="media/sql-vulnerability-assessment/on-demand-vulnerability-scan.png" alt-text="검색을 선택 하 여 SQL 리소스의 주문형 취약성 평가 검사를 실행 합니다.":::


  > [!NOTE]
  > 검색 작업은 간단하며 안전합니다. 실행 하는 데 몇 초 정도 걸리며 완전히 읽기 전용입니다. 데이터베이스를 변경 하지 않습니다.

## <a name="remediate-vulnerabilities"></a>취약성 해결

취약성 검사가 완료 되 면 보고서가 Azure Portal에 표시 됩니다. 보고서는 다음을 제공 합니다.

- 보안 상태 개요
- 발견 된 문제 수
- 위험의 심각도 별 요약
- 추가 조사에 대 한 결과 목록

:::image type="content" source="media/sql-vulnerability-assessment/sample-sql-vulnerabilities-report.png" alt-text="SQL 취약성 평가 스캐너의 Sampl 검색 보고서":::

검색 된 취약성을 해결 하려면:

1. 결과를 검토 하 고 사용자 환경에 대 한 진정한 보안 문제에 대 한 보고서의 결과를 확인 합니다.

1. 실패 한 각 결과를 선택 하 여 해당 영향과 보안 검사에 실패 한 이유를 파악 합니다.

    > [!TIP]
    > 결과 정보 페이지에는 문제를 해결 하는 방법을 설명 하는 조치 가능한 재구성 정보가 포함 되어 있습니다.

    :::image type="content" source="media/sql-vulnerability-assessment/examining-vulnerability-findings.gif" alt-text="취약성 검사에서 발견 된 내용 검사":::

1. 평가 결과를 검토할 때 사용자 환경에서 특정 결과를 허용 가능한 *기준* 으로 표시할 수 있습니다. 기준은 기본적으로 결과를 보고 하는 방법을 사용자 지정 합니다. 후속 검색에서 기준과 일치 하는 결과가 pass로 간주 됩니다. 기준 보안 상태를 설정한 후에는 취약성 평가에서 기준의 편차만 보고 합니다. 이러한 방식으로 관련 문제에 집중할 수 있습니다.

    :::image type="content" source="media/sql-vulnerability-assessment/baseline-approval.png" alt-text="검색을 향후 검색을 위한 기준으로 승인":::

1. 기준을 변경 하는 경우 **검색** 단추를 사용 하 여 요청 시 검색을 실행 하 고 사용자 지정 된 보고서를 봅니다. 기준에 추가 된 모든 결과는 이제 초기 변경 내용으로 인해 전달 된 것과 함께 **전달** 된에 표시 됩니다.

    :::image type="content" source="media/sql-vulnerability-assessment/passed-per-custom-baseline.png" alt-text="사용자 지정 기준에 따라 통과 했음을 나타내는 통과 된 평가":::

이제 취약성 평가 검사를 사용 하 여 데이터베이스에 높은 수준의 보안을 유지 하 고 조직 정책을 충족 하는지 확인할 수 있습니다. 

## <a name="advanced-capabilities"></a>고급 기능

### <a name="export-an-assessment-report"></a>평가 보고서 내보내기

검색 결과에 대 한 다운로드 가능한 Excel 보고서를 만들려면 **검색 결과 내보내기** 를 선택 합니다. 이 보고서에는 평가 요약이 표시 되는 요약 탭이 포함 되어 있습니다. 보고서에는 실패 한 검사가 모두 포함 됩니다. 검색 결과의 전체 집합을 포함 하는 **결과** 탭도 포함 됩니다. 결과에는 실행 된 모든 검사와 각 검사에 대 한 결과 정보가 포함 됩니다.

### <a name="view-scan-history"></a>검색 기록 보기

이 데이터베이스에서 이전에 실행 한 모든 검색 기록을 보려면 취약성 평가 창에서 **검색 기록** 을 선택 합니다. 자세한 검색 결과를 보려면 목록에서 특정 검색을 선택합니다.

## <a name="manage-vulnerability-assessments-programmatically"></a>프로그래밍 방식으로 취약성 평가 관리

### <a name="using-azure-powershell"></a>Azure PowerShell 사용

[!INCLUDE [updated-for-az](../../../includes/updated-for-az.md)]
> [!IMPORTANT]
> PowerShell Azure Resource Manager 모듈은 계속 지원 되지만 모든 향후 개발은 Az. Sql 모듈에 대 한 것입니다. 이러한 cmdlet은 [AzureRM.Sql](/powershell/module/AzureRM.Sql/)을 참조하세요. Az 모듈 및 AzureRm 모듈의 명령에 대한 인수는 실질적으로 동일합니다.

Azure PowerShell cmdlet을 사용하여 취약성 평가를 프로그래밍 방식으로 관리할 수 있습니다. 지원되는 cmdlet은 다음과 같습니다.

| 링크로 서의 Cmdlet 이름 | 설명 |
| :-------------------- | :---------- |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | 취약성 평가 규칙 기준을 지웁니다.<br/>먼저이 cmdlet을 사용 하 여 선택을 취소 하기 전에 기준선을 설정 합니다. |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | 데이터베이스의 취약성 평가 설정을 지웁니다. |
| [Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | 관리 되는 데이터베이스의 취약성 평가 규칙 기준을 지웁니다.<br/>먼저이 cmdlet을 사용 하 여 선택을 취소 하기 전에 기준선을 설정 합니다. |
| [Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | 관리 되는 데이터베이스의 취약성 평가 설정을 지웁니다. |
| [Clear-AzSqlInstanceVulnerabilityAssessmentSetting](/powershell/module/az.sql/Clear-AzSqlInstanceVulnerabilityAssessmentSetting) | 관리 되는 인스턴스의 취약성 평가 설정을 지웁니다. |
| [변환-AzSqlDatabaseVulnerabilityAssessmentScan](/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | 데이터베이스의 취약성 평가 검사 결과를 Excel 파일로 변환 합니다. |
| [변환-AzSqlInstanceDatabaseVulnerabilityAssessmentScan](/powershell/module/az.sql/Convert-AzSqlInstanceDatabaseVulnerabilityAssessmentScan) | 관리 되는 데이터베이스의 취약성 평가 검사 결과를 Excel 파일로 변환 합니다. |
| [AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | 지정 된 규칙에 대 한 데이터베이스의 취약성 평가 규칙 기준을 가져옵니다. |
| [AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | 지정 된 규칙에 대 한 관리 되는 데이터베이스의 취약성 평가 규칙 기준을 가져옵니다. |
| [AzSqlDatabaseVulnerabilityAssessmentScanRecord](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | 지정 된 데이터베이스와 연결 된 모든 취약성 평가 검사 레코드를 가져옵니다. |
| [AzSqlInstanceDatabaseVulnerabilityAssessmentScanRecord](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentScanRecord) | 지정 된 관리 되는 데이터베이스와 연결 된 모든 취약성 평가 검사 레코드를 가져옵니다. |
| [AzSqlDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | 데이터베이스의 취약성 평가 설정을 반환 합니다. |
| [AzSqlInstanceDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | 관리 되는 데이터베이스의 취약성 평가 설정을 반환 합니다. |
| [AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | 취약성 평가 규칙 기준을 설정합니다. |
| [AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline](/powershell/module/az.sql/Set-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | 관리 되는 데이터베이스에 대 한 취약성 평가 규칙 기준을 설정 합니다. |
| [AzSqlDatabaseVulnerabilityAssessmentScan](/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | 데이터베이스에 대 한 취약성 평가 검사의 시작을 트리거합니다. |
| [AzSqlInstanceDatabaseVulnerabilityAssessmentScan](/powershell/module/az.sql/Start-AzSqlInstanceDatabaseVulnerabilityAssessmentScan) | 관리 되는 데이터베이스에 대 한 취약성 평가 검색의 시작을 트리거합니다. |
| [업데이트-AzSqlDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | 데이터베이스의 취약성 평가 설정을 업데이트 합니다. |
| [업데이트-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting](/powershell/module/az.sql/Update-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | 관리 되는 데이터베이스의 취약성 평가 설정을 업데이트 합니다. |
| [업데이트-AzSqlInstanceVulnerabilityAssessmentSetting](/powershell/module/az.sql/Update-AzSqlInstanceVulnerabilityAssessmentSetting) | 관리 되는 인스턴스의 취약성 평가 설정을 업데이트 합니다. |
| &nbsp; | &nbsp; |

스크립트 예제는 [AZURE SQL 취약성 평가 PowerShell 지원](/archive/blogs/sqlsecurity/azure-sql-vulnerability-assessment-now-with-powershell-support)을 참조 하세요.

### <a name="using-resource-manager-templates"></a>Resource Manager 템플릿 사용

Azure Resource Manager 템플릿을 사용 하 여 취약성 평가 기준을 구성 하려면 해당 `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` 유형을 사용 합니다.

기준을 추가 하기 전에를 사용 하도록 설정 했는지 확인 `vulnerabilityAssessments` 합니다.

다음은 데이터베이스에 대 한 기준 규칙 VA2065을 정의 하 `master` 고 `user` 리소스 관리자 템플릿에서 리소스로 데이터베이스를 VA1143 하는 예입니다.

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

`master`데이터베이스 및 데이터베이스의 경우 `user` 리소스 이름은 다음과 같이 다르게 정의 됩니다.

- Master 데이터베이스-"name": "[concat (parameters (' server_name '), '/', parameters (' database_name '), '/default/VA2065/<b>master</b>')]",
- 사용자 데이터베이스-"name": "[concat (parameters (' server_name '), '/', 매개 변수 (' database_name '), '/default/VA2065/<b>default</b>')]",

부울 형식을 true/false로 처리 하려면 이진 입력 (예: "1"/"0")을 사용 하 여 기준 결과를 설정 합니다.

```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>다음 단계  

- [Azure Defender for SQL](azure-defender-for-sql.md)에 대해 자세히 알아봅니다.
- [데이터 검색 및 분류](data-discovery-and-classification-overview.md)에 대해 자세히 알아보세요.
- [방화벽 및 vnet에서 액세스할 수 있는 저장소 계정에 취약성 평가 검사 결과를 저장 하는](sql-database-vulnerability-assessment-storage.md)방법에 대해 자세히 알아보세요.