---
title: Azure 전면 도어 표준/프리미엄의 원본 및 원본 그룹
description: 이 문서에서는 Azure Front 도어 구성에 있는 원본 및 원본 그룹을 설명 합니다.
services: frontdoor
author: duongau
ms.service: frontdoor
ms.topic: conceptual
ms.date: 02/18/2021
ms.author: duau
ms.openlocfilehash: 42a9a0ea23faa481140a46ec52b2214431dd723e
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/19/2021
ms.locfileid: "101100080"
---
# <a name="origin-and-origin-group-in-azure-front-door-standardpremium-preview"></a>Azure 전면 도어 표준/프리미엄 (미리 보기)의 원본 및 원본 그룹

> [!Note]
> 이 설명서는 Azure Front Door 표준/프리미엄(미리 보기)용입니다. Azure Front Door에 대한 정보를 찾고 있나요? [여기](../front-door-overview.md)에서 봅니다.

이 문서에서는 Azure Front 도어 Standard/Premium에서 웹 응용 프로그램 배포가 작동 하는 방법에 대 한 개념을 설명 합니다. 또한 Azure Front 도어 표준/프리미엄 구성에 있는 *원본* 및 *원본 그룹* 에 대해 알아봅니다.

> [!IMPORTANT]
> Azure 전면 도어 표준/프리미엄 (미리 보기)은 현재 공개 미리 보기로 제공 됩니다.
> 이 미리 보기 버전은 서비스 수준 계약 없이 제공되며 프로덕션 워크로드에는 사용하지 않는 것이 좋습니다. 특정 기능이 지원되지 않거나 기능이 제한될 수 있습니다.
> 자세한 내용은 [Microsoft Azure Preview에 대한 추가 사용 약관](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)을 참조하세요.

## <a name="origin"></a>원본

Azure 전면 도어 표준/프리미엄 원본은 클라이언트 요청을 처리 하는 응용 프로그램의 호스트 이름 또는 공용 IP를 나타냅니다. Azure Front 도어 Standard/Premium은 원본 그룹에서 Azure 및 비 Azure 리소스를 모두 지원 합니다. 응용 프로그램은 온-프레미스 데이터 센터 또는 다른 클라우드 공급자에서 호스팅될 수도 있습니다. 원본은 데이터베이스 계층 또는 저장소 계층과 혼동 해서는 안 됩니다. 원본은 응용 프로그램 백 엔드에 대 한 공용 끝점으로 표시 되어야 합니다. Azure Front 도어 표준/프리미엄 원본 그룹에 원본을 추가 하는 경우 다음 정보도 추가 해야 합니다.

* **원본 유형:** 추가 하려는 리소스의 형식입니다. 전면 도어는 App Service, 클라우드 서비스 또는 저장소에서 응용 프로그램 백 엔드의 자동 검색을 지원 합니다. Azure 또는 비 Azure 백 엔드에서 다른 리소스를 원하는 경우 **사용자 지정 호스트** 를 선택 합니다.

    >[!IMPORTANT]
    >구성 하는 동안 Api는 프런트 도어 환경에서 원본에 액세스할 수 없는 경우 유효성을 검사 하지 않습니다. 전면 도어가 원본에 도달할 수 있는지 확인 합니다.

* **구독 및 원본 호스트 이름:** 백 엔드 호스트 유형에 대 한 **사용자 지정 호스트** 를 선택 하지 않은 경우 적절 한 구독과 해당 백 엔드 호스트 이름을 선택 하 여 백 엔드를 선택 합니다.

* **원본 호스트 헤더:** 각 요청에 대해 백 엔드에 전송 된 호스트 헤더 값입니다. 자세한 내용은 [원본 호스트 헤더](#hostheader)를 참조 하세요.

* **우선 순위:** 모든 트래픽에 대 한 기본 원본을 사용 하려면 다른 원본에 우선 순위를 할당 합니다. 또한 기본 또는 백업 원본을 사용할 수 없는 경우 백업을 제공 합니다. 자세한 내용은 [우선 순위](#priority)를 참조 하세요.

* **가중치:** 서로 다른 원점에 가중치를 할당 하 여 원본 집합 간에 트래픽을 균등 하 게 또는 가중치 계수에 따라 분산 합니다. 자세한 내용은 [가중치](#weighted)를 참조 하세요.

### <a name="origin-host-header"></a><a name = "hostheader"></a>원본 호스트 헤더

Azure Front 도어 Standard/Premium에서 원본으로 전달 되는 요청은 원본에서 대상 리소스를 검색 하는 데 사용 하는 호스트 헤더 필드를 포함 합니다. 일반적으로이 필드의 값은 호스트 헤더와 포트가 있는 원본 URI에서 가져옵니다.

예를 들어에 대해 수행 된 요청에는 `www.contoso.com` 호스트 헤더가 있습니다 `www.contoso.com` . Azure Portal를 사용 하 여 원본을 구성 하는 경우이 필드의 기본값은 백 엔드의 호스트 이름입니다. 원본이 인 경우 `contoso-westus.azurewebsites.net` Azure Portal에서 원본 호스트 헤더에 대 한 채워집니다 값은가 됩니다 `contoso-westus.azurewebsites.net` . 그러나이 필드를 명시적으로 설정 하지 않고 Azure Resource Manager 템플릿 또는 다른 방법을 사용 하는 경우 전면 도어는 들어오는 호스트 이름을 호스트 헤더에 대 한 값으로 보냅니다. 에 대해 요청이 수행 되 `www.contoso.com` 고 원본에 `contoso-westus.azurewebsites.net` 빈 헤더 필드가 있는 경우 Front 도어가 호스트 헤더를로 설정 `www.contoso.com` 합니다.

대부분의 앱 백 엔드 (Azure Web Apps, Blob storage 및 Cloud Services)에서는 호스트 헤더가 백 엔드의 도메인과 일치 해야 합니다. 그러나 백엔드로 라우팅하는 프런트 엔드 호스트는와 같은 다른 호스트 이름을 사용 합니다 `www.contoso.net` .

원본에서 백 엔드 호스트 이름과 일치 하는 호스트 헤더를 요구 하는 경우 백 엔드 호스트 헤더에 백 엔드의 호스트 이름이 포함 되어 있는지 확인 합니다.

#### <a name="configuring-the-origin-host-header-for-the-origin"></a>원본에 대 한 원본 호스트 헤더 구성

원본 그룹 섹션의 원본에 대 한 **원본 호스트 헤더** 필드를 구성 하려면 다음을 수행 합니다.

1. 프런트 도어 리소스를 열고 원본을 구성할 원본 그룹을 선택 합니다.

2. 아직 수행 하지 않은 경우에는 원본을 추가 하 고 기존 항목을 편집 합니다.

3. 원본 호스트 헤더 필드를 사용자 지정 값으로 설정 하거나 비워 둡니다. 들어오는 요청에 대 한 호스트 이름이 호스트 헤더 값으로 사용 됩니다.

## <a name="origin-group"></a>원본 그룹

Azure Front 도어 Standard/Premium의 원본 그룹은 응용 프로그램에 대해 비슷한 트래픽을 받는 원본 집합을 참조 합니다. 즉, 동일한 트래픽을 수신 하 고 예상 된 동작으로 응답 하는 전 세계의 응용 프로그램 인스턴스를 논리적으로 그룹화 한 것입니다. 이러한 원본은 서로 다른 지역 또는 동일한 지역에 배포할 수 있습니다. 모든 원본은 활성/활성 배포 모드 이거나 활성/수동 구성으로 정의 될 수 있습니다.

원본 그룹은 상태 프로브를 통해 원본을 평가 하는 방법을 정의 합니다. 또한 부하 분산이 이러한 항목 간에 발생 하는 방식을 정의 합니다.

### <a name="health-probes"></a>상태 프로브

Azure Front 도어 Standard/Premium은 구성 된 각 원본에 주기적으로 HTTP/HTTPS 프로브 요청을 보냅니다. 프로브 요청은 최종 사용자 요청의 부하를 분산 하기 위해 각 원본의 근접성과 상태를 결정 합니다. 원본 그룹에 대 한 상태 프로브 설정은 앱 백 엔드의 상태를 폴링하는 방법을 정의 합니다. 다음 설정은 부하 분산 구성에 사용할 수 있습니다.

* **경로**: 원본 그룹의 모든 원본에 대 한 프로브 요청에 사용 되는 URL입니다. 예를 들어 원본 중 하나가이 `contoso-westus.azurewebsites.net` 고 경로가/probe/test.aspx로 설정 된 경우 프로토콜이 HTTP 인 것으로 가정 하는 프런트 도어 환경에서는로 상태 프로브 요청을 보냅니다 `http://contoso-westus.azurewebsites.net/probe/test.aspx` .

* **프로토콜**: HTTP 또는 HTTPS 프로토콜을 사용 하 여 Front 도어에서 원본으로 상태 프로브 요청을 보낼지 여부를 정의 합니다.

* **메서드**: 상태 프로브를 보내는 데 사용할 HTTP 메서드입니다. 옵션에는 GET 또는 HEAD (기본값)이 포함 됩니다.
    > [!NOTE]
    > 백 엔드에 대 한 부하와 비용을 낮추기 위해 전방 도어는 상태 프로브에 HEAD 요청을 사용 하도록 권장 합니다.

* **간격 (초)**: 원본에 대 한 상태 프로브의 빈도 또는 각 프런트 도어 환경에서 프로브를 전송 하는 간격을 정의 합니다.

    >[!NOTE]
    >더 빠른 장애 조치 (failover)를 위해 간격을 더 낮은 값으로 설정 합니다. 값이 낮을수록 백 엔드가 수신 하는 상태 프로브 볼륨이 높아집니다. 예를 들어, 간격이 30 초로 설정 된 경우 100 앞면 도어를 전역적으로 설정 하면 각 백 엔드는 분당 200 프로브 요청을 수신 합니다.

자세한 내용은 [상태 프로브](concept-health-probes.md)를 참조 하세요.

### <a name="load-balancing-settings"></a>부하 분산 설정

원본 그룹에 대 한 부하 분산 설정은 상태 프로브를 평가 하는 방법을 정의 합니다. 이러한 설정은 원본이 정상 인지 비정상 인지를 결정 합니다. 또한 원본 그룹의 서로 다른 원본 간에 트래픽 부하를 분산 하는 방법을 확인 합니다. 다음 설정은 부하 분산 구성에 사용할 수 있습니다.

* **샘플 크기:** 원본 상태 평가에 대해 고려해 야 하는 상태 프로브 샘플 수를 식별 합니다.

* **성공한 샘플 크기:** 앞에서 설명한 대로 샘플 크기를 정의 합니다. 원래 호출에 필요한 성공한 샘플 수는 정상입니다. 예를 들어, 전면 도어 상태 프로브 간격이 30 초이 고, 샘플 크기가 5이 고, 성공한 샘플 크기는 3 이라고 가정 합니다. 원본에 대 한 상태 프로브를 평가할 때마다 150 초 (5 x 30) 이상 지난 5 개 샘플을 살펴보겠습니다. 원본을 정상으로 선언 하려면 적어도 3 개의 성공한 프로브가 필요 합니다.

* **대기 시간 민감도 (추가 대기 시간):** Azure Front 도어 Standard/Premium에서 대기 시간 측정 민감도 범위 내에서 요청을 원본으로 보낼지 아니면 가장 가까운 백 엔드로 요청을 전송할지를 정의 합니다.

자세한 내용은 [최소 대기 시간 기반 라우팅 방법](#latency)을 참조 하세요.

## <a name="routing-methods"></a>라우팅 방법

Azure Front 도어 Standard/Premium은 다양 한 종류의 트래픽 라우팅 방법을 지원 하 여 HTTP/HTTPS 트래픽을 서로 다른 서비스 끝점으로 라우팅하는 방법을 결정 합니다. 클라이언트에서 전방 도어에 도달 하면 요청이 최상의 백 엔드 인스턴스로 전달 되도록 구성 된 라우팅 메서드가 적용 됩니다. 

Azure Front 도어 Standard/Premium에서 사용할 수 있는 네 가지 트래픽 라우팅 방법이 있습니다.

* **[대기 시간](#latency):** 대기 시간 기반 라우팅은 요청이 민감도 범위 내에서 허용 가능한 최저 대기 시간 백 엔드로 전송되도록 해줍니다. 기본적으로 사용자 요청은 네트워크 대기 시간과 관련 하 여 "가장 가까운" 백 엔드 집합으로 전송 됩니다.
* **[우선 순위](#priority):** 모든 트래픽을 처리 하도록 기본 백 엔드를 구성 하려는 경우 백 엔드에 우선 순위를 할당할 수 있습니다. 기본 백 엔드를 사용할 수 없게 되는 경우 보조 백 엔드는 백업이 될 수 있습니다.
* **[가중치](#weighted):** 백 엔드 집합 간에 트래픽을 분산 하려는 경우 백 엔드에 가중치를 할당할 수 있습니다. 균등 하 게 배포할지 아니면 가중치 계수에 따라 사용할지 여부입니다.

모든 Azure Front 도어 표준/프리미엄 구성에는 백 엔드 상태 모니터링 및 자동 인스턴트 글로벌 장애 조치 (failover)가 포함 됩니다. 자세한 내용은 [백 엔드 모니터링](concept-health-probes.md)을 참조 하세요. 프런트 도어는 단일 라우팅 메서드를 기반으로 하 여 작업할 수 있습니다. 그러나 응용 프로그램 요구 사항에 따라 여러 라우팅 메서드를 결합 하 여 최적의 라우팅 토폴로지를 구축할 수도 있습니다.

### <a name="lowest-latencies-based-traffic-routing"></a><a name = "latency"></a>최저 대기 시간 기반 트래픽 라우팅

전 세계적으로 둘 이상의 위치에 백 엔드를 배포 하면 최종 사용자에 게 ' 가장 가까운 ' 대상으로 트래픽을 라우팅하여 응용 프로그램의 응답성을 향상 시킬 수 있습니다. 프런트 도어 구성의 기본 트래픽 라우팅 메서드는 최종 사용자의 요청을 요청을 받은 프런트 도어 환경의 가장 가까운 백 엔드로 전달 합니다. Azure 전면 도어의 애니캐스트 아키텍처와 결합 된이 접근 방식은 각 최종 사용자의 위치에 따라 최대한의 개인 설정 된 성능을 제공 하도록 보장 합니다.

' 가장 가까운 ' 백 엔드는 지리적 거리를 기준으로 가장 가까운 것은 아닙니다. 대신, Front Door는 네트워크 대기 시간을 측정하여 가장 가까운 백 엔드를 결정합니다.

다음은 전체 의사 결정 흐름입니다.

| 사용할 수 있는 백 엔드 | 우선 순위 | 대기 시간 신호(상태 프로브 기반) | 가중치 |
|-------------| ----------- | ----------- | ----------- |
| 먼저 상태 프로브에 대해 사용 하도록 설정 되 고 정상 (200 OK)으로 반환 되는 모든 백 엔드를 선택 합니다. 6 개의 백 엔드가 A, B, C, D, E 및 F 인 경우, 그 중에 C가 비정상이 고 E가 비활성화 됩니다. 사용 가능한 백 엔드 목록은 A, B, D 및 F입니다.  | 그런 다음 사용 가능한 항목 사이에서 가장 높은 우선 순위 백 엔드가 선택 됩니다. 백 엔드 A, B, D의 우선 순위는 1이 고 백 엔드 F의 우선 순위는 2입니다. 그런 다음 선택한 백 엔드는 A, B, D가 됩니다.| 대기 시간 범위로 백 엔드를 선택합니다(최저 대기 시간 및 지정된 ms에서 대기 시간 민감도). 백 엔드 A가 15 인 경우 B는 30 밀리초이 고 60 D는 배치이 고, 시간은 30 밀리초이 고, d는 30 밀리초를 초과 하는 프런트 도어 환경에서 30 밀리초를 초과 하므로 가장 낮은 대기 시간 풀이 백 엔드 A와 B로 구성 됩니다. | 마지막으로, Front Door는 지정된 가중치 비율에서 최종 선택된 백 엔드 풀 중에서 트래픽을 라운드 로빈합니다. 예를 들어, 백 엔드 A의 가중치가 5이고 백 엔드 B의 가중치가 8인 경우 트래픽은 백 엔드 5와 8 사이에서 5:8 비율로 분산됩니다. |

>[!NOTE]
> 기본적으로, 대기 시간 민감도 속성은 0ms로 설정됩니다. 즉, 항상 요청을 사용 가능한 가장 빠른 백 엔드로 전달합니다.

### <a name="priority-based-traffic-routing"></a><a name = "priority"></a>우선 순위 기반 트래픽 라우팅

주 서버를 중단 하는 경우 둘 이상의 백업 서비스를 배포 하 여 조직에서 서비스에 대 한 고가용성을 제공 하려는 경우가 종종 있습니다. 업계 전체에서 이 토폴로지는 활성/대기 또는 활성/수동 배포 토폴로지라고 하기도 합니다. '우선 순위' 트래픽 라우팅 메서드를 사용하여 Azure 고객은 이러한 장애 조치(Failover) 패턴을 쉽게 구현할 수 있습니다.

기본 Front Door에는 우선 순위가 동등한 백 엔드 목록이 포함되어 있습니다. 기본적으로, Front Door는 최고 우선 순위 백 엔드(최저 우선 순위 값), 즉 기본 백 엔드 집합으로만 트래픽을 전송합니다. 기본 백 엔드를 사용할 수 없는 경우, 프런트 도어는 트래픽을 백 엔드의 보조 집합 (우선 순위에 대 한 두 번째로 낮은 값)으로 라우팅합니다. 기본 및 보조 백 엔드를 모두 사용할 수 없는 경우 트래픽은 세 번째로 이동 하는 방식으로 진행 됩니다. 백 엔드의 가용성은 구성된 상태(활성 또는 비활성화)과 상태 프로브의 결정에 따른 지속적인 백 엔드 상태에 기반합니다.

#### <a name="configuring-priority-for-backends"></a>백 엔드에 대한 우선 순위 구성

프런트 도어 구성의 백 엔드 풀에 있는 각 백 엔드에는 ' Priority ' 라는 속성이 있습니다 .이 속성은 1에서 5 사이의 숫자가 될 수 있습니다. Azure Front 도어를 사용 하면 각 백 엔드에 대해이 속성을 사용 하 여 백 엔드 우선 순위를 명시적으로 구성할 수 있습니다. 이 속성은 1에서 5 사이의 값입니다. 값이 낮을수록 더 높은 우선 순위를 나타냅니다. 백 엔드는 우선 순위 값을 공유할 수 있습니다.

### <a name="weighted-traffic-routing-method"></a><a name = "weighted"></a>가중 트래픽 라우팅 방법
'가중' 트래픽 라우팅 메서드를 사용하면 균등하게 트래픽을 분산하거나 미리 정의된 가중치를 사용할 수 있습니다.

가중 트래픽 라우팅 메서드에서는 백 엔드 풀의 Front Door 구성에서 각 백 엔드에 가중치를 할당할 수 있습니다. 가중치는 1에서 1000 사이의 정수입니다. 이 매개 변수는 기본 가중치인 '50'을 사용합니다.

허용 되는 대기 시간 민감도를 포함 하는 사용 가능한 백 엔드 목록을 사용 하면 트래픽이 지정 된 가중치 비율을 사용 하 여 라운드 로빈 메커니즘과 함께 배포 됩니다. 대기 시간 민감도를 0 밀리초로 설정 하면 네트워크 대기 시간이 동일한 두 개의 백 엔드가 있는 경우를 제외 하 고이 속성은 적용 되지 않습니다. 

가중 메서드를 사용하면 다음과 같은 몇 가지 유용한 시나리오를 사용할 수 있습니다.

* **점진적 응용 프로그램 업그레이드**: 새 백 엔드로 라우팅하는 트래픽의 비율을 제공 하 고, 다른 백 엔드와 동일 하 게 유지 하기 위해 시간 경과에 따라 점진적으로 트래픽을 증가 시킵니다.
* **Azure에 애플리케이션 마이그레이션**: Azure 및 외부 백 엔드로 백 엔드 풀을 만듭니다. 새 백 엔드를 선호하도록 백 엔드의 가중치를 조정합니다. 새 백 엔드를 비활성화하는 것으로 시작하여 최저 가중치를 할당하고 대부분 트래픽을 처리하는 수준까지 서서히 늘려 점진적으로 설정할 수 있습니다. 마지막으로 선호도가 낮은 백 엔드를 비활성화한 후 풀에서 이들을 제거합니다.  
* **추가 용량을 위한 클라우드 버스트**: Front Door 뒤에 두어 온-프레미스 배포를 클라우드로 신속하게 확장합니다. 클라우드에서 추가 용량이 필요한 경우 더 많은 백 엔드를 추가 또는 활성화하고 각 백 엔드로 분산되는 트래픽 비율을 지정할 수 있습니다.

## <a name="next-steps"></a>다음 단계

[전면 도어 표준/프리미엄을 만드는](create-front-door-portal.md) 방법을 알아봅니다.
