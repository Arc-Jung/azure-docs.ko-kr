---
title: Azure Front 도어 용 Azure 웹 응용 프로그램 방화벽 이란? (미리 보기)
description: Azure 프런트 도어 서비스용 Azure 웹 응용 프로그램 방화벽이 악의적인 공격 으로부터 웹 응용 프로그램을 보호 하는 방법을 알아봅니다.
services: frontdoor
documentationcenter: ''
author: KumudD
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/31/2019
ms.author: kumud
ms.reviewer: tyao
ms.openlocfilehash: 624a5af59a39cb0ebf647f549f3a40ed56f78b9e
ms.sourcegitcommit: d47a30e54c5c9e65255f7ef3f7194a07931c27df
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/29/2019
ms.locfileid: "73549239"
---
# <a name="what-is-azure-web-application-firewall-for-azure-front-door"></a>Azure Front 도어 용 Azure 웹 응용 프로그램 방화벽 이란?

Azure WAF(웹 애플리케이션 방화벽)는 Azure Front Door를 사용하여 전역적으로 제공되는 중앙 집중식 보호를 통해 웹 애플리케이션을 보호합니다. WAF는 일반적인 악용 및 취약성으로부터 웹 서비스를 방어하고, 사용자를 위해 서비스 고가용성을 유지하고, 규정 준수 요구 사항을 충족할 수 있도록 설계되었습니다.


웹 응용 프로그램은 서비스 거부, SQL 삽입 공격 및 사이트 간 스크립팅 공격과 같은 악의적인 공격의 대상이 점점 늘어나고 있습니다. 이러한 악의적인 공격으로 인해 서비스 중단 및 데이터가 손실 될 수 있으므로 웹 응용 프로그램 소유자에 게 심각한 위협이 발생할 수 있습니다.

애플리케이션 코드로 이러한 공격을 방어하기란 매우 어려울 수 있으며 애플리케이션 토폴로지의 여러 계층에서 엄격한 유지 관리, 패치 적용 및 모니터링이 필요할 수 있습니다. 중앙 집중식 웹 애플리케이션 방화벽을 통해 보안 관리가 훨씬 간단해지고 애플리케이션 관리자에게 위협 또는 침입으로부터 효과적인 보호를 제공합니다. 또한 WAF 솔루션은 각 개별 웹 응용 프로그램을 보호 하는 대신 중앙 위치에서 알려진 취약성을 패치 하 여 보안 위협에 더 빠르게 대응할 수 있습니다.

Front f의 WAF는 전역 및 중앙 집중화 된 솔루션입니다. 전 세계의 Azure 네트워크에 지 위치에 배포 되 고, Front 도어가 제공 하는 WAF 사용 웹 응용 프로그램에 대 한 모든 수신 요청이 네트워크에 지에서 검사 됩니다. 이를 통해 WAF는 가상 네트워크를 시작 하기 전에 공격 원본에 가까운 악의적인 공격을 방지 하 고 성능을 저하 시 키 지 않고 대규모 글로벌 보호 기능을 제공 합니다. WAF 정책은 구독의 모든 Front 도어 프로필에 쉽게 연결할 수 있으며, 몇 분 내에 새 규칙을 배포할 수 있으므로 변경 된 위협 패턴에 신속 하 게 대응할 수 있습니다.

![Azure 웹 응용 프로그램 방화벽](./media/waf-overview/web-application-firewall-overview.png)

Azure WAF는 Application Gateway 사용 하도록 설정할 수도 있습니다. 자세한 내용은 [웹 응용 프로그램 방화벽](../application-gateway/waf-overview.md)을 참조 하세요.

## <a name="waf-policy-and-rules"></a>WAF 정책 및 규칙

WAF 정책을 구성 하 고 보호를 위해 하나 이상의 전면 도어 프런트 엔드에 해당 정책을 연결할 수 있습니다. WAF 정책은 두 가지 유형의 보안 규칙으로 구성 됩니다.

- 고객이 작성 한 사용자 지정 규칙입니다.

- Azure에서 관리 하는 미리 구성 된 규칙 집합의 컬렉션인 관리 되는 규칙 집합입니다.

둘 다 있는 경우 관리 되는 규칙 집합의 규칙을 처리 하기 전에 사용자 지정 규칙이 처리 됩니다. 규칙은 일치 조건, 우선 순위 및 동작으로 구성 됩니다. 지원 되는 작업 유형은 ALLOW, BLOCK, LOG 및 REDIRECT입니다. 관리 되는 규칙과 사용자 지정 규칙을 결합 하 여 특정 응용 프로그램 보호 요구 사항을 충족 하는 완전히 사용자 지정 된 정책을 만들 수 있습니다.

정책 내의 규칙은 우선 순위가 지정 된 순서로 처리 됩니다. 우선 순위는 처리 되는 규칙의 순서를 정의 하는 고유한 정수입니다. 더 작은 정수 값은 높은 우선 순위를 나타내며 정수 값이 더 높은 규칙 보다 먼저 평가 됩니다. 규칙이 일치 하면 규칙에 정의 된 해당 작업이 요청에 적용 됩니다. 이러한 일치가 처리 되 면 우선 순위가 낮은 규칙은 더 이상 처리 되지 않습니다.

Front 도어가 제공 하는 웹 응용 프로그램에는 한 번에 하나의 WAF 정책만 연결 될 수 있습니다. 그러나 연결 된 WAF 정책을 사용 하지 않고 Front 도어 구성을 사용할 수 있습니다. WAF 정책이 있으면 전 세계의 보안 정책에서 일관성을 유지 하기 위해 모든에 지 위치에 복제 됩니다.

## <a name="waf-modes"></a>WAF 모드

WAF 정책은 다음 두 가지 모드에서 실행 되도록 구성할 수 있습니다.

- **검색 모드:** 검색 모드로 실행 하는 경우 WAF는 모니터 이외의 다른 작업을 수행 하지 않고, 요청 및 일치 하는 WAF 규칙을 WAF 로그에 기록 합니다. 프런트 도어에 대 한 로깅 진단 기능을 켤 수 있습니다. 포털을 사용 하는 경우 Azure Portal의 **진단** 섹션으로 이동 하 여이를 달성할 수 있습니다.

- **방지 모드:** 방지 모드에서 실행 되도록 구성 된 경우 WAF는 요청이 규칙과 일치 하는 경우 지정 된 작업을 수행 하 고, 일치 하는 항목이 발견 되 면 우선 순위가 낮은 추가 규칙이 평가 되지 않습니다. 일치 하는 모든 요청은 WAF 로그에도 기록 됩니다.

## <a name="waf-actions"></a>WAF 작업

WAF 고객은 요청이 규칙의 조건과 일치 하는 경우 작업 중 하나에서 실행 하도록 선택할 수 있습니다.

- **허용:**  요청은 WAF를 통과 하 고 백 엔드에 전달 됩니다. 더 낮은 우선 순위 규칙은이 요청을 차단할 수 없습니다.
- **차단:** 요청이 차단 되 고 WAF는 요청을 백 엔드에 전달 하지 않고 클라이언트에 응답을 보냅니다.
- **로그:**  요청은 WAF 로그에 기록 되 고 WAF는 우선 순위가 낮은 규칙을 계속 평가 합니다.
- **리디렉션:** WAF는 요청을 지정 된 URI로 리디렉션합니다. 지정 된 URI가 정책 수준 설정입니다. 구성 된 후에는 **리디렉션** 작업과 일치 하는 모든 요청이 해당 URI로 전송 됩니다.

## <a name="waf-rules"></a>WAF 규칙

WAF 정책은 고객 및 관리 되는 규칙 집합, Azure에서 관리 하는 미리 구성 된 규칙 집합으로 작성 된 두 가지 유형의 보안 규칙으로 구성 될 수 있습니다.

### <a name="custom-authored-rules"></a>사용자 지정 작성 규칙

다음과 같이 사용자 지정 규칙 WAF를 구성할 수 있습니다.

- **IP 허용 목록 및 차단 목록:** 클라이언트 IP 주소 또는 IP 주소 범위 목록을 기반으로 웹 응용 프로그램에 대 한 액세스를 제어 하도록 사용자 지정 규칙을 구성할 수 있습니다. IPv4 및 IPv6 주소 형식이 모두 지원 됩니다. 이 목록은 원본 IP가 목록의 IP와 일치 하는 요청을 차단 하거나 허용 하도록 구성할 수 있습니다. 클라이언트 IP 주소는 WAF와 다를 수 있습니다. 예를 들어 클라이언트가 프록시를 통해 WAF에 액세스 하는 경우에 해당 합니다. 클라이언트 IP 주소 (RemoteAddr) 또는 WAF (SocketAddr)에서 확인 된 IP 주소를 기반으로 [ip 제한 규칙](https://docs.microsoft.com/azure/frontdoor/waf-front-door-configure-ip-restriction) 을 만들 수 있습니다. SocketAddr IP 제한 규칙 구성은 현재 Powershell 및 Azure CLI를 사용 하 여 지원 됩니다.

- **지리적 기반 액세스 제어:** 클라이언트의 IP 주소와 연결 된 국가 코드를 기반으로 웹 응용 프로그램에 대 한 액세스를 제어 하도록 사용자 지정 규칙을 구성할 수 있습니다.

- **HTTP 매개 변수 기반 액세스 제어:** 쿼리 문자열, POST args, 요청 URI, 요청 헤더, 요청 본문 등의 문자열 일치 HTTP/HTTPS 요청 매개 변수를 기반으로 사용자 지정 규칙을 구성할 수 있습니다.

- **메서드 기반 액세스 제어 요청:** 요청에 대 한 HTTP 요청 메서드 (예: GET, PUT 또는 HEAD)를 기반으로 사용자 지정 규칙을 구성할 수 있습니다.

- **크기 제약 조건:** 쿼리 문자열, Uri 또는 요청 본문과 같은 요청의 특정 부분에 대 한 길이를 기준으로 사용자 지정 규칙을 구성할 수 있습니다.

- **요금 제한 규칙:** 요금 제어 규칙은 모든 클라이언트 IP에서 비정상적인 높은 트래픽을 제한 하는 것입니다. 1 분 동안 클라이언트 IP에서 허용 되는 웹 요청 수에 대 한 임계값을 구성할 수 있습니다. 요청 수가 업데이트 되는 동안 임계값을 초과 하는 추가 요청을 통해 가져올 수 있습니다. 요율 제한은 세부적인 요금 제어를 위해 HTTP (S) 매개 변수와 일치 하는 추가 일치 조건과 결합 될 수 있습니다.

### <a name="azure-managed-rule-sets"></a>Azure 관리 되는 규칙 집합

Azure 관리 되는 규칙 집합은 일반적인 보안 위협 집합에 대해 보호를 쉽게 배포할 수 있는 방법을 제공 합니다. 이러한 규칙 집합은 Azure에서 관리 되므로 새로운 공격 서명을 방지 하기 위해 필요에 따라 규칙을 업데이트 합니다. 공개 미리 보기에서 Azure 관리 기본 규칙 집합에는 다음 위협 범주에 대 한 규칙이 포함 됩니다.

- 사이트 간 스크립팅
- Java 공격
- 로컬 파일 포함
- PHP 삽입 공격
- 원격 명령 실행
- 원격 파일 포함
- 세션 고정
- SQL 삽입 공격 보호
- 프로토콜 공격자

새 공격 서명이 규칙 집합에 추가 되 면 기본 규칙 집합의 버전 번호가 증가 합니다.
기본 규칙 집합은 WAF 정책의 검색 모드에서 기본적으로 사용 하도록 설정 됩니다. 기본 규칙 집합 내에서 개별 규칙을 사용 하지 않도록 설정 하거나 사용 하도록 설정 하 여 응용 프로그램 요구 사항을 충족할 수 있습니다. 규칙에 따라 특정 작업 (허용/차단/리디렉션/로그)을 설정할 수도 있습니다. 기본 작업은 차단입니다. 또한 기본 규칙 집합에서 미리 구성 된 규칙을 무시 하려는 경우 동일한 WAF 정책에서 사용자 지정 규칙을 구성할 수 있습니다.
사용자 지정 규칙은 항상 기본 규칙 집합의 규칙을 평가 하기 전에 적용 됩니다. 요청이 사용자 지정 규칙과 일치 하는 경우 해당 규칙 작업이 적용 되 고 요청은 기본 규칙 집합의 추가 사용자 지정 규칙 또는 규칙을 호출 하지 않고 백 엔드에 전달 됩니다. 또한 WAF 정책에서 기본 규칙 집합을 제거 하는 옵션이 있습니다.


### <a name="bot-protection-rule-preview"></a>Bot 보호 규칙 (미리 보기)

WAF에 대해 관리 되는 봇 보호 규칙 집합을 사용 하도록 설정 하 여 알려진 bot 범주의 요청에 대 한 사용자 지정 작업을 수행할 수 있습니다.
지원 되는 봇 범주는 잘못 된 봇, 우수한 봇 및 알 수 없는 봇입니다. 잘못 된 봇 범주에서 한 규칙은 clieny 주소의 IP 평판을 기반으로 하는 악성 봇을 검색 합니다. IP 평판은 Microsoft 위협 인텔리전스 피드를 기반으로 합니다. [Intelligent Security Graph](https://www.microsoft.com/security/operations/intelligence) Microsoft 위협 인텔리전스를 구동 하 고 Azure Security Center를 비롯 한 여러 서비스에서 사용 됩니다. 또한 알려진 검색 엔진으로 간주 되는 요청도 악성으로 검색 됩니다.
훌륭한 봇은 seacrh 엔진의 유효성을 검사 합니다. 알 수 없는 범주는 요청은 봇으로 식별 되지만 알 수 없는 것으로 식별 됩니다. 사용자 지정 작업을 여러 종류의 봇에 대해 차단, 허용, 로그 또는 리디렉션으로 설정할 수 있습니다.

![Bot 보호 규칙 집합](./media/waf-front-door-configure-bot-protection/BotProtect2.png)

> [!IMPORTANT]
> Bot protection 규칙 집합은 현재 공개 미리 보기 상태 이며 미리 보기 서비스 수준 계약과 함께 제공 됩니다. 특정 기능이 지원되지 않거나 기능이 제한될 수 있습니다.  자세한 내용은 [Microsoft Azure 미리 보기에 대한 보충 사용 약관](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)을 참조하세요.

Bot Protection을 사용 하는 경우 bot 규칙과 일치 하는 들어오는 요청은 FrontdoorWebApplicationFirewallLog log에 기록 됩니다. 저장소 계정, 이벤트 허브 또는 log analytics에서 WAF 로그에 액세스할 수 있습니다. 

## <a name="configuration"></a>구성

모든 WAF 규칙 유형을 구성 및 배포 하는 것은 Azure Portal, REST Api, Azure Resource Manager 템플릿 및 Azure PowerShell를 사용 하 여 완벽 하 게 지원 됩니다.

## <a name="monitoring"></a>모니터링

전면 도어의 WAF 모니터링은 경고를 추적 하 고 트래픽 추세를 쉽게 모니터링 하기 위해 Azure Monitor와 통합 됩니다.

## <a name="next-steps"></a>다음 단계

- [Azure Portal를 사용 하 여 Front 문에 대해 WAF 정책을 구성](waf-front-door-create-portal.md) 하는 방법을 알아봅니다.
