---
title: Azure 랩 서비스(UI)의 템플릿 VM에 중첩가상화 활성화 | 마이크로 소프트 문서
description: 내부에 여러 VM이 있는 템플릿 VM을 만드는 방법에 대해 알아봅니다.  즉, Azure Lab 서비스의 템플릿 VM에서 중첩된 가상화를 사용하도록 설정합니다.
services: lab-services
author: emaher
ms.service: lab-services
ms.topic: article
ms.date: 1/23/2020
ms.author: enewman
ms.openlocfilehash: 10f8d2760474631fbcabac4d66139aedf4c7560c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "79503076"
---
# <a name="enable-nested-virtualization-on-a-template-virtual-machine-in-azure-lab-services-manually"></a>Azure Lab Services의 템플릿 가상 머신에서 중첩가상화를 수동으로 활성화

중첩된 가상화를 사용하면 랩의 템플릿 가상 시스템 내에서 다중 VM 환경을 만들 수 있습니다. 템플릿을 게시하면 랩의 각 사용자에게 여러 VM이 있는 가상 시스템이 설정됩니다.  중첩 된 가상화 및 Azure Lab 서비스에 대한 자세한 내용은 [Azure Lab Services의 템플릿 가상 컴퓨터에서 중첩 된 가상화 활성화를](how-to-enable-nested-virtualization-template-vm.md)참조하십시오.

이 문서에서는 Windows 역할 및 도구를 직접 사용하여 Azure Lab Services의 템플릿 컴퓨터에서 중첩된 가상화를 설정하는 방법을 설명합니다.  클래스가 중첩 된 가상화를 사용하도록 설정하는 데 필요한 몇 가지 사항이 있습니다.  아래 단계는 Hyper-V를 사용하여 랩 서비스 컴퓨터 템플릿을 수동으로 설정하는 방법을 설명합니다.  단계는 Windows 서버 2016 또는 Windows 서버 2019를 위한 것입니다.  

>[!IMPORTANT]
>랩을 만들 때 가상 컴퓨터 크기에 대해 **큰(중첩된 가상화)** 또는 **중간(중첩된 가상화)을** 선택합니다.  중첩된 가상화는 그렇지 않으면 작동하지 않습니다.  

## <a name="enable-hyper-v-role"></a>하이퍼-V 역할 사용

다음 단계에서는 서버 관리자 를 사용하여 Windows 서버에서 Hyper-V를 사용하도록 설정하는 데 필요한 작업에 대해 설명합니다.  설치가 성공하면 Hyper-V 관리자를 사용하여 클라이언트 가상 컴퓨터를 추가, 수정 및 삭제할 수 있습니다.

1. **서버 관리자에서**대시보드 페이지에서 **역할 및 기능 추가를**클릭합니다.
2. **시작하기 전** 페이지에서 **다음**을 클릭합니다.
3. 설치 **유형 선택** 페이지에서 역할 기반 또는 기능 기반 설치의 기본 선택을 유지한 다음 **다음을 클릭합니다.**
4. 대상 **서버 선택** 페이지에서 서버 풀에서 서버 선택을 선택합니다.   현재 서버가 이미 선택됩니다.  다음을 클릭합니다.
5. **서버 역할 선택** 페이지에서 **Hyper-V**를 선택합니다.  
6. **역할 및 기능 마법사 추가** 팝업이 나타납니다.  **관리 도구 포함(해당하는 경우)을**선택합니다.  피처 추가 버튼을 **클릭합니다.**
7. **서버 역할 선택** 페이지에서 **다음**을 클릭합니다.
8. **피처 선택 페이지에서**다음 을 **클릭합니다.**
9. **Hyper-V** 페이지에서 **다음**을 클릭합니다.
10. 가상 **스위치 만들기** 페이지에서 기본값을 수락하고 **다음**을 클릭합니다.
11. 가상 **컴퓨터 마이그레이션** 페이지에서 기본값을 수락하고 **다음**을 클릭합니다.
12. 기본 **저장소** 페이지에서 기본값을 수락하고 **다음**을 클릭합니다.
13. 설치 **선택 확인** 페이지에서 **필요한 경우 대상 서버를 자동으로 다시 시작을**선택합니다.
14. 역할 **및 기능 마법사 추가** 팝업이 나타나면 **예**.
15. **설치**를 클릭합니다.
16. 설치 **진행률** 페이지에서 Hyper-V 역할이 완료되었음을 나타낼 때까지 기다립니다.  설치 중에 기기가 다시 시작될 수 있습니다.
17. **닫기**를 클릭합니다.

## <a name="enable-dhcp-role"></a>DHCP 역할 사용

생성된 모든 Hyper-V 클라이언트 가상 머신에는 NAT 네트워크의 IP 주소가 필요합니다.  나중에 NAT 네트워크를 만듭니다.  IP 주소를 할당하는 한 가지 방법은 호스트(이 경우 랩 가상 컴퓨터 템플릿)를 DHCP 서버로 설정하는 것입니다.  다음은 DHCP 역할을 활성화하는 데 필요한 단계입니다.

1. **서버 관리자에서** **대시보드** 페이지에서 역할 및 **기능 추가를**클릭합니다.
2. **시작하기 전** 페이지에서 **다음**을 클릭합니다.
3. **설치 유형 선택** 페이지에서 **역할 기반 또는 기능 기반 설치**를 선택하고 **다음**을 클릭합니다.
4. 대상 **서버 선택** 페이지에서 서버 풀에서 현재 서버를 선택한 다음 **다음**을 클릭합니다.
5. 서버 **역할 선택** 페이지에서 **DHCP 서버를**선택합니다.  
6. **역할 및 기능 마법사 추가** 팝업이 나타납니다.  **관리 도구 포함(해당하는 경우)을**선택합니다.  **기능 추가**를 클릭합니다.

    >[!NOTE]
    >정적 IP 주소가 발견되지 않았다는 유효성 검사 오류가 표시될 수 있습니다.  이 경고는 시나리오에서 무시할 수 있습니다.

7. **서버 역할 선택** 페이지에서 **다음**을 클릭합니다.
8. **기능 선택** 페이지에서 **다음**을 클릭합니다.
9. **DHCP 서버** 페이지에서 **다음**을 클릭합니다.
10. **설치 선택 확인** 페이지에서 **설치**를 클릭합니다.
11. 설치 **진행률 페이지에서** DHCP 역할이 완료되었음을 나타낼 때까지 기다립니다.
12. 닫기를 클릭합니다.

## <a name="enable-routing-and-remote-access-role"></a>라우팅 및 원격 액세스 역할 사용

1. **서버 관리자에서** **대시보드** 페이지에서 역할 및 **기능 추가를**클릭합니다.
2. **시작하기 전** 페이지에서 **다음**을 클릭합니다.
3. **설치 유형 선택** 페이지에서 **역할 기반 또는 기능 기반 설치**를 선택하고 **다음**을 클릭합니다.
4. 대상 **서버 선택** 페이지에서 서버 풀에서 현재 서버를 선택한 다음 **다음**을 클릭합니다.
5. 서버 **역할 선택** 페이지에서 **원격 액세스**를 선택합니다. **확인**을 클릭합니다.
6. **기능 선택** 페이지에서 **다음**을 클릭합니다.
7. 원격 **액세스** 페이지에서 다음 을 **클릭합니다.**
8. 역할 **서비스** 페이지에서 **라우팅을**선택합니다.
9. **역할 및 기능 마법사 추가** 팝업이 나타납니다.  **관리 도구 포함(해당하는 경우)을**선택합니다.  **기능 추가**를 클릭합니다.
10. **다음**을 클릭합니다.
11. **웹 서버 역할(IIS)** 페이지에서 **다음**을 클릭합니다.
12. **역할 서비스 선택** 페이지에서 **다음**을 클릭합니다.
13. **설치 선택 확인** 페이지에서 **설치**를 클릭합니다.
14. 원격 액세스 역할이 완료되었음을 나타내기 위해 **설치 진행률** 페이지가 대기합니다.  
15. **닫기**를 클릭합니다.

## <a name="create-virtual-nat-network"></a>가상 NAT 네트워크 만들기

필요한 모든 역할이 설치되었으므로 이제 NAT 네트워크를 만들어야 합니다.  생성 프로세스에는 스위치와 NAT 네트워크 자체를 만드는 것이 포함됩니다.  NAT(네트워크 주소 변환) 네트워크는 인터넷에 연결할 수 있도록 개인 네트워크의 VM 그룹에 공용 IP 주소를 할당합니다.  이 경우 개인 VM 그룹은 중첩된 VM이 됩니다.  NAT 네트워크를 사용하면 중첩된 VM이 서로 통신할 수 있습니다. 스위치는 네트워크에서 트래픽 수신 및 라우팅을 처리하는 네트워크 장치입니다.

### <a name="create-a-new-virtual-switch"></a>새 가상 스위치 만들기

1. Windows 관리 도구에서 **하이퍼 V 관리자를** 엽니다.
2. 왼쪽 탐색 메뉴에서 현재 서버를 선택합니다.
3. **가상 스위치 관리자를 클릭합니다...** **하이퍼-V 관리자의**오른쪽에 있는 **작업** 메뉴에서 .
4. 가상 **스위치 관리자** 팝업에서 만들 스위치 유형에 대한 **내부를** 선택합니다.  **가상 스위치 만들기**를 클릭합니다.
5. 새로 만든 가상 스위치의 경우 이름을 기억에 남는 것으로 설정합니다.  이 예제에서는 'LabServicesSwitch'를 사용합니다.  **확인**을 클릭합니다.
6. 새 네트워크 어댑터가 만들어집니다.  이름은 'vEthernet (LabServicesSwitch)'와 유사합니다.  **제어판**열기를 확인하려면 **네트워크 및 인터넷을 클릭하고**네트워크 상태 및 작업 **보기를**클릭합니다.  왼쪽에서 **어댑터 변경 설정을**클릭합니다.

### <a name="create-a-nat-network"></a>NAT 네트워크 만들기

1. Windows 관리 도구에서 라우팅 및 원격 액세스 도구를 **엽니다.**
2. 왼쪽 탐색 페이지에서 로컬 서버를 선택합니다.
3. 작업**구성 및 라우팅 및 원격 액세스 사용**설정 **합니다.** -> 
4. **라우팅 및 원격 액세스 서버 설치 마법사가** 나타나면 다음 을 **클릭합니다.**
5. **구성** 페이지에서 **NAT(네트워크 주소 변환)** 구성을 선택합니다.  **다음**을 클릭합니다.

    >[!WARNING]
    >'VPN(가상 사설망) 액세스 및 NAT' 옵션을 선택하지 마십시오.

6. **NAT 인터넷 연결** 페이지에서 '이더넷'을 선택합니다.  하이퍼 V 관리자에서 만든 'vEthernet(LabServicesSwitch)' 연결을 선택하지 마십시오. **다음**을 클릭합니다.
7. 마법사의 마지막 페이지에서 **완료를** 클릭합니다.
8. 서비스 시작 대화 **상자가** 나타나면 **서비스 시작**을 클릭합니다.
9. 서비스가 시작될 때까지 기다립니다.

## <a name="update-network-adapter-settings"></a>네트워크 어댑터 설정 업데이트

네트워크 어댑터는 이전에 만든 NAT 네트워크의 기본 게이트웨이 IP에 사용되는 IP와 연결됩니다.  이 예제에서는 서브넷 마스크가 255.255.255.0인 192.168.0.1의 IP 주소를 만듭니다.  우리는 이전에 만든 가상 스위치를 사용합니다.

1. **제어판을**열고 **네트워크 및 인터넷을 클릭하고**네트워크 상태 및 작업 **보기를**클릭합니다.
2. 왼쪽에서 **어댑터 변경 설정을**클릭합니다.  
3. 네트워크 **연결** 창에서 'vEthernet(LabServicesSwitch)'을 두 번 클릭하여 **vEthernet(LabServicesSwitch) 상태** 세부 정보 대화 상자를 표시합니다.
4. **속성** 단추를 클릭합니다.
5. **인터넷 프로토콜 버전 4(TCP/IPv4)** 항목을 선택하고 **속성** 단추를 클릭합니다.
6. 인터넷 **프로토콜 버전 4(TCP/IPv4) 속성** 대화 상자에서 **다음 IP 주소 사용을**선택합니다.  IP 주소의 경우 192.168.0.1을 입력합니다. 서브넷 마스크의 경우 255.255.255.0을 입력합니다.  기본 게이트웨이를 비워 둡니다.  DNS 서버도 비워 둡니다.

    >[!NOTE]
    > 우리의 NAT 네트워크에 대한 우리의 범위는 CIDR 표기형, 192.168.0.0/24입니다.  이렇게 하면 192.168.0.1에서 192.168.0.254까지 사용 가능한 IP 주소범위가 만들어집니다.  관문에는 서브넷 범위의 첫 번째 IP 주소가 있습니다.

7. 확인을 클릭합니다.

## <a name="create-dhcp-scope"></a>DHCP 범위 만들기

다음 단계는 DHCP 범위를 추가하는 지침입니다.  이 문서에서 NAT 네트워크는 CIDR 표기법에서 192.168.0.0/24입니다.  이렇게 하면 192.168.0.1에서 192.168.0.254까지 사용 가능한 IP 주소범위가 만들어집니다.  생성된 범위는 이전에 이미 만든 IP 주소를 제외한 사용 가능한 주소 의 범위에 있어야 합니다.

1. **관리 도구를** 열고 **DHCP** 관리 도구를 엽니다.
2. **DHCP** 도구에서 현재 서버의 노드를 확장하고 **IPv4를**선택합니다.
3. 작업 메뉴에서 **새 범위를 선택합니다...**
4. 새 **범위 마법사가** 나타나면 **시작** 페이지에서 **다음을** 클릭합니다.
5. 범위 **이름** 페이지에서 'LabServicesDhcpScope' 또는 이름에 대해 기억에 남는 다른 것을 입력합니다.  **다음**을 클릭합니다.
6. IP **주소 범위** 페이지에서 다음 값을 입력합니다.

    - 시작 IP 주소의 경우 192.168.0.100
    - 최종 IP 주소의 경우 192.168.0.200
    - 길이용 24개
    - 서브넷 마스크의 경우 255.255.255.0

7. **다음**을 클릭합니다.
8. 제외 및 지연 추가 페이지에서 **다음**을 **클릭합니다.**
9. 임대 **기간** 페이지에서 **다음**을 클릭합니다.
10. **DHCP 옵션 구성** 페이지에서 **예, 이제 이러한 옵션을 구성할**수 있습니다. **다음**을 클릭합니다.
11. **라우터에서(기본 게이트웨이)**
12. 192.168.0.1을 추가합니다., 이미 수행하지 않은 경우. **다음**을 클릭합니다.
13. 도메인 **이름 및 DNS 서버** 페이지에서 아직 수행하지 않은 경우 168.63.129.16을 DNS 서버 IP 주소로 추가합니다.  168.63.129.16Azure 정적 DNS 서버의 IP 주소입니다. **다음**을 클릭합니다.
14. WINS 서버 페이지에서 **다음**을 **클릭합니다.**
15. 범위 **활성화** 페이지 중 하나인 **예, 이제 이 범위를 활성화하려면**을 선택합니다.  **다음**을 클릭합니다.
16. 새 **범위 마법사 완료** 페이지에서 **완료를**클릭합니다.

## <a name="conclusion"></a>결론

이제 템플릿 컴퓨터가 Hyper-V 가상 컴퓨터를 만들 준비가 되었습니다.   하이퍼-V 가상 컴퓨터를 만드는 방법에 대한 지침은 [하이퍼-V에서 가상 컴퓨터 만들기를](https://docs.microsoft.com/windows-server/virtualization/hyper-v/get-started/create-a-virtual-machine-in-hyper-v) 참조하십시오.  또한 사용 가능한 운영 체제 및 소프트웨어를 확인하려면 [Microsoft 평가 센터를](https://www.microsoft.com/evalcenter/) 참조하십시오.

## <a name="next-steps"></a>다음 단계

다음 단계는 랩을 설정하는 데 일반적입니다.

- [사용자 추가](tutorial-setup-classroom-lab.md#add-users-to-the-lab)
- [할당량 설정](how-to-configure-student-usage.md#set-quotas-for-users)
- [일정 설정](tutorial-setup-classroom-lab.md#set-a-schedule-for-the-lab)
- [학생에게 이메일 등록 링크](how-to-configure-student-usage.md#send-invitations-to-users)