---
title: 연결 아키텍처-Azure Database for PostgreSQL-단일 서버
description: Azure Database for PostgreSQL 단일 서버의 연결 아키텍처에 대해 설명 합니다.
author: mksuni
ms.author: sumuth
ms.service: postgresql
ms.topic: conceptual
ms.date: 05/23/2019
ms.openlocfilehash: 680908fdb2b7badcc1bbf713805b638213590877
ms.sourcegitcommit: 63d0621404375d4ac64055f1df4177dfad3d6de6
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/15/2020
ms.locfileid: "97508087"
---
# <a name="connectivity-architecture-in-azure-database-for-postgresql"></a>Azure Database for PostgreSQL의 연결 아키텍처
이 문서에서는 Azure Database for PostgreSQL 연결 아키텍처 뿐만 아니라 Azure 내부 및 외부의 클라이언트에서 Azure Database for PostgreSQL 데이터베이스 인스턴스로 트래픽이 전송 되는 방법에 대해 설명 합니다.

## <a name="connectivity-architecture"></a>연결 아키텍처
들어오는 연결을 클러스터에 있는 서버의 실제 위치로 라우팅하는 게이트웨이를 통해 Azure Database for PostgreSQL에 대 한 연결이 설정 됩니다. 다음 다이어그램은 트래픽 흐름을 보여 줍니다.

:::image type="content" source="./media/concepts-connectivity-architecture/connectivity-architecture-overview-proxy.png" alt-text="연결 아키텍처 개요":::


클라이언트가 데이터베이스에 연결 하면 서버에 대 한 연결 문자열은 게이트웨이 IP 주소로 확인 됩니다. 게이트웨이는 5432 포트에서 IP 주소를 수신 대기 합니다. 데이터베이스 클러스터 내에서 트래픽이 적절 한 Azure Database for PostgreSQL 전달 됩니다. 따라서 회사 네트워크에서와 같이 서버에 연결 하기 위해 **클라이언트 쪽 방화벽을 열어 아웃 바운드 트래픽이 게이트웨이에 도달할 수 있도록** 해야 합니다. 아래에서 지역별 게이트웨이에서 사용 하는 IP 주소의 전체 목록을 찾을 수 있습니다.

## <a name="azure-database-for-postgresql-gateway-ip-addresses"></a>게이트웨이 IP 주소 Azure Database for PostgreSQL

게이트웨이 서비스는 IP 주소 뒤에 있는 상태 비저장 계산 노드 그룹에서 호스트 되며, Azure Database for PostgreSQL 서버에 연결 하려고 할 때 클라이언트가 먼저 도달 하 게 됩니다. 

지속적인 서비스 유지 관리의 일환으로, 게이트웨이를 호스트 하는 계산 하드웨어를 주기적으로 새로 고쳐 가장 안전 하 고 성능이 뛰어난 환경을 제공 합니다. 게이트웨이 하드웨어를 새로 고치면 계산 노드의 새 링이 먼저 빌드됩니다. 이 새 링은 새로 생성 된 모든 Azure Database for PostgreSQL 서버에 대 한 트래픽을 처리 하며, 트래픽을 구분 하기 위해 동일한 지역에 있는 이전 게이트웨이 링과 다른 IP 주소를 갖게 됩니다. 새 링이 완전 하 게 작동 하면 기존 서버를 처리 하는 이전 게이트웨이 하드웨어는 서비스 해제에 대해 계획 됩니다. 게이트웨이 하드웨어의 서비스를 해제 하기 전에 서버를 실행 하 고 이전 게이트웨이 링에 연결 하는 고객은 메일을 통해, Azure Portal 그리고 사용자가 서비스를 해제 하기 전에 3 개월 전에 미리 알림 메시지를 받을 수 있습니다. 게이트웨이를 서비스 해제 하면 서버에 대 한 연결에 영향을 줄 수 있습니다. 

* 응용 프로그램의 연결 문자열에 게이트웨이 IP 주소를 하드 코딩 합니다. **권장 되지 않습니다**. 
* 아웃 바운드 트래픽이 새 게이트웨이 링에 도달할 수 있도록 클라이언트 쪽 방화벽에서 최신 게이트웨이 IP 주소를 업데이트 하지 않습니다.

다음 표에서는 모든 데이터 영역에 대 한 Azure Database for PostgreSQL 게이트웨이의 게이트웨이 IP 주소를 나열 합니다. 각 지역의 게이트웨이 IP 주소에 대 한 최신 정보는 아래 테이블에서 유지 관리 됩니다. 아래 표에서 열은 다음을 나타냅니다.

* **게이트웨이 IP 주소:** 이 열은 최신 하드웨어 세대에서 호스팅되는 게이트웨이의 현재 IP 주소를 나열 합니다. 새 서버를 프로 비전 하는 경우 클라이언트 쪽 방화벽을 열어이 열에 나열 된 IP 주소에 대 한 아웃 바운드 트래픽을 허용 하는 것이 좋습니다.
* **게이트웨이 IP 주소 (서비스 해제):** 이 열은 현재 서비스를 해제할 이전 하드웨어 세대에서 호스팅되는 게이트웨이의 IP 주소를 나열 합니다. 새 서버를 프로 비전 하는 경우 이러한 IP 주소를 무시할 수 있습니다. 기존 서버가 있는 경우 해당 IP 주소를 아직 서비스 해제 하지 않았으므로 방화벽에 대 한 아웃 바운드 규칙을 계속 유지 합니다. 이러한 IP 주소에 대 한 방화벽 규칙을 삭제 하면 연결 오류가 발생할 수 있습니다. 대신 서비스 해제에 대 한 알림을 받는 즉시 게이트웨이 IP 주소 열에 나열 된 새 IP 주소를 아웃 바운드 방화벽 규칙에 사전에 추가 해야 합니다. 이렇게 하면 서버가 최신 게이트웨이 하드웨어로 마이그레이션될 때 서버에 대 한 연결이 중단 되지 않습니다.
* **게이트웨이 IP 주소 (서비스 해제 됨):** 이 열에는 서비스 해제 되 고 더 이상 작동 하지 않는 게이트웨이 링의 IP 주소가 나열 됩니다. 아웃 바운드 방화벽 규칙에서 이러한 IP 주소를 안전 하 게 제거할 수 있습니다. 


| **영역 이름** | **게이트웨이 IP 주소** |**게이트웨이 IP 주소 (서비스 해제)** | **게이트웨이 IP 주소 (서비스 해제 됨)** |
|:----------------|:-------------------------|:-------------------------------------------|:------------------------------------------|
| 오스트레일리아 중부| 20.36.105.0  | | |
| 오스트레일리아 Central2     | 20.36.113.0  | | |
| 오스트레일리아 동부 | 13.75.149.87, 40.79.161.1     |  | |
| 오스트레일리아 동남부 |191.239.192.109, 13.73.109.251   |  | |
| 브라질 남부 |191.233.201.8, 191.233.200.16    |  | 104.41.11.5|
| 캐나다 중부 |40.85.224.249  | | |
| 캐나다 동부 | 40.86.226.166    | | |
| 미국 중부 | 23.99.160.139, 13.67.215.62, 52.182.136.37, 52.182.136.38     | | |
| 중국 동부 | 139.219.130.35    | | |
| 중국 동부 2 | 40.73.82.1  | | |
| 중국 북부 | 139.219.15.17    | | |
| 중국 북부 2 | 40.73.50.0     | | |
| 동아시아 | 191.234.2.139, 52.175.33.150, 13.75.33.20, 13.75.33.21     | | |
| 미국 동부 |40.71.8.203, 40.71.83.113 |40.121.158.30|191.238.6.43 |
| 미국 동부 2 |40.79.84.180, 191.239.224.107, 52.177.185.181, 40.70.144.38, 52.167.105.38  | | |
| 프랑스 중부 | 40.79.137.0, 40.79.129.1  | | |
| 프랑스 남부 | 40.79.177.0     | | |
| 독일 중부 | 51.4.144.100     | | |
| 독일 북동부 | 51.5.144.179  | | |
| 인도 중부 | 104.211.96.159     | | |
| 인도 남부 | 104.211.224.146  | | |
| 인도 서부 | 104.211.160.80    | | |
| 일본 동부 | 13.78.61.196, 191.237.240.43, 40.79.192.23 | | |
| 일본 서부 | 104.214.148.156, 191.238.68.11, 40.74.96.6, 40.74.96.7    | | |
| 한국 중부 | 52.231.32.42   | | |
| 한국 남부 | 52.231.200.86    | | |
| 미국 중북부 | 23.96.178.199, 23.98.55.75, 52.162.104.35, 52.162.104.36    | | |
| 북유럽 | 52.138.224.6, 52.138.224.7  |40.113.93.91 |191.235.193.75 |
| 남아프리카 북부  | 102.133.152.0    | | |
| 남아프리카 공화국 서부 | 102.133.24.0   | | |
| 미국 중남부 |104.214.16.39, 20.45.120.0  |13.66.62.124  |23.98.162.75 |
| 동남아시아 | 104.43.15.0, 23.100.117.95, 40.78.233.2, 23.98.80.12     | | |
| 아랍에미리트 중부 | 20.37.72.64  | | |
| 아랍에미리트 북부 | 65.52.248.0    | | |
| 영국 남부 | 51.140.184.11   | | |
| 영국 서부 | 51.141.8.11  | | |
| 미국 중서부 | 13.78.145.25     | | |
| 서유럽 |13.69.105.208,104.40.169.187 |40.68.37.158 | 191.237.232.75|
| 미국 서부 |13.86.216.212, 13.86.217.212 |104.42.238.205  | 23.99.34.75|
| 미국 서부 2 | 13.66.226.202  | | |
||||

## <a name="next-steps"></a>다음 단계

* [Azure Portal을 사용한 PostgreSQL용 Azure 데이터베이스 방화벽 규칙 만들기 및 관리](./howto-manage-firewall-using-portal.md)
* [Azure CLI를 사용한 PostgreSQL용 Azure 데이터베이스 방화벽 규칙 만들기 및 관리](./howto-manage-firewall-using-cli.md)
