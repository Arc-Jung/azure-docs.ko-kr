<properties
   pageTitle="트래픽 관리자 개요"
   description="이 문서에는 트래픽 관리자 기술 개요가 포함되어 있습니다."
   services="traffic-manager"
   documentationCenter="na"
   authors="joaoma"
   manager="adinah"
   editor="tysonn" />
<tags 
   ms.service="traffic-manager"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="03/23/2015"
   ms.author="joaoma" />

# 트래픽 관리자 개요

Microsoft Azure 트래픽 관리자를 통해 Azure 클라우드 서비스, 웹 사이트 및 기타 끝점을 포함하는 지정된 끝점으로의 사용자 트래픽 분산을 제어할 수 있습니다. 트래픽 관리자는 인터넷 리소스의 도메인 이름에 대한 DNS(Domain Name System) 쿼리에 지능형 정책 엔진을 적용하여 작동합니다. Azure 클라우드 서비스 또는 웹 사이트는 전 세계의 여러 데이터 센터에서 실행될 수 있습니다.

트래픽 관리자는 다음에 도움이 될 수 있습니다.

-**중요 응용 프로그램의 가용성 향상:** 트래픽 관리자를 통해 Azure에서 끝점을 모니터링하고 Azure 클라우드 서비스, Azure 웹 사이트 또는 기타 위치가 종료될 때 자동 장애 조치(Failover) 기능을 제공하여 중요 응용 프로그램의 가용성을 향상시킬 수 있습니다.

-**고성능 응용 프로그램의 응답성 향상:** Azure를 통해 전 세계에 있는 데이터 센터에서 클라우드 서비스나 웹 사이트를 실행할 수 있습니다. 트래픽 관리자는 최종 사용자를 클라이언트에서 네트워크 대기 시간이 가장 짧은 끝점으로 보내 응용 프로그램의 응답성 및 콘텐츠 배달 시간을 향상시킬 수 있습니다.

-**가동 중지 시간 없이 업그레이드 및 서비스 유지 관리 수행:** 트래픽 관리자는 하이브리드 클라우드 및 온-프레미스 배포에 대해 "클라우드로 버스트", "클라우드로 마이그레이션" 및 "클라우드로 장애 조치(Failover)"를 비롯한 확장 시나리오를 지원합니다. 계획된 유지 관리의 경우 트래픽 관리자에서 끝점을 사용하지 않도록 설정한 다음 끝점이 기존 연결의 서비스를 완료할 때까지 기다립니다. 끝점에 대한 트래픽이 더 이상 없으면 해당 끝점에서 서비스를 업데이트하고 테스트한 후 트래픽 관리자에서 다시 사용하도록 설정합니다. 이렇게 하면 클라이언트에 대한 가동 중지 시간 없이 서비스를 유지 관리 및 업그레이드하는 데 도움이 됩니다.

-**복잡한 대규모 배포를 위한 트래픽 분산:** 트래픽 관리자 프로필에 다른 트래픽 관리자 프로필이 끝점으로 포함될 수 있는 중첩된 트래픽 관리자 프로필을 사용하여 복잡한 대규모 배포에 맞춰 성능과 분산을 최적화하는 구성을 만들 수 있습니다. 자세한 내용은 [중첩된 프로필](#Nested)을 참조하세요.

## 트래픽 관리자 작동 방식

트래픽 관리자 프로필을 구성할 때 지정한 설정은 DNS 쿼리에 따라 요청을 서비스해야 하는 끝점을 결정하는 데 필요한 정보를 트래픽 관리자에게 제공합니다. 실제 끝점 트래픽이 트래픽 관리자를 통해 라우팅되지는 않습니다.

*그림 1*은 트래픽 관리자가 사용자를 끝점 집합 중 하나로 보내는 방법을 보여 줍니다. 그림 1의 숫자는 번호가 매겨진 아래 설명에 해당합니다.

![How Traffic Manager works](./media/traffic-manager/IC740854.jpg)

그림 1

1. **사용자 트래픽에서 회사 도메인 이름 확인:** 클라이언트가 회사 도메인 이름을 사용하여 정보를 요청합니다. 이는 DNS 이름을 IP 주소로 확인하기 위한 것입니다. 트래픽 관리자 외부에서 유지 관리되는 일반 인터넷 도메인 이름 등록을 통해 회사 도메인이 예약되어 있어야 합니다. 그림 1에서 예제 회사 도메인은 www.contoso.com입니다.
1. **회사 도메인 이름에서 트래픽 관리자 도메인 이름 확인:** 회사 도메인에 대한 DNS 리소스 레코드가 Azure 트래픽 관리자에서 유지 관리되는 트래픽 관리자 도메인 이름을 가리킵니다. 이를 위해 회사 도메인 이름을 트래픽 관리자 도메인 이름에 매핑하는 CNAME 리소스 레코드를 사용합니다. 예제에서 트래픽 관리자 도메인 이름은 contoso.trafficmanager.net입니다.
1. **트래픽 관리자 도메인 이름 및 프로필:** 트래픽 관리자 도메인 이름은 트래픽 관리자 프로필의 일부입니다. 사용자의 DNS 서버가 트래픽 관리자 도메인 이름(예제에서는 contoso.trafficmanager.net)에 대한 새 DNS 쿼리를 보내고 트래픽 관리자 DNS 이름 서버에 수신됩니다.
1. **트래픽 관리자 프로필 규칙 처리됨:** 트래픽 관리자가 지정된 부하 분산 방법과 모니터링 상태를 사용하여 요청을 서비스해야 하는 Azure 또는 기타 끝점을 결정합니다.
1. **끝점 도메인 이름이 사용자에게 전송됨:** 트래픽 관리자가 트래픽 관리자 도메인 이름을 끝점의 도메인 이름에 매핑하는 CNAME 레코드를 반환합니다. 사용자의 DNS 서버가 끝점 도메인 이름을 해당 IP 주소로 확인하고 사용자에게 보냅니다.
1. **사용자가 끝점을 호출함:** 사용자가 IP 주소를 사용하여 반환된 끝점을 직접 호출합니다.

회사 도메인과 확인된 IP 주소는 클라이언트 컴퓨터에 캐시되므로 로컬 DNS 캐시 항목이 만료될 때까지 사용자가 계속해서 선택한 끝점을 조작합니다. DNS 클라이언트는 TTL(Time-To-Live) 기간 동안 DNS 호스트 항목을 캐시한다는 것에 주의하세요. DNS 클라이언트 캐시에서 호스트 항목을 검색하는 경우 트래픽 관리자 프로필이 무시되며 TTL이 만료되기 전에 끝점을 사용할 수 없게 된 것처럼 연결 지연이 발생할 수 있습니다. 캐시에 있는 DNS 호스트 항목의 TTL이 만료된 후 클라이언트 컴퓨터가 회사 도메인 이름을 다시 확인해야 하는 경우 새 DNS 쿼리를 보냅니다. 적용된 부하 분산 방법과 요청 시 끝점의 상태에 따라 클라이언트 컴퓨터가 다른 끝점의 IP 주소를 받을 수도 있습니다.

## 트래픽 관리자 구현 방법


*그림 2*는 트래픽 관리자를 구현하는 데 필요한 단계를 순서대로 보여 줍니다. 트래픽 관리자 구성과 모범 사례를 완전히 이해하고 나면 이러한 단계를 약간 다른 순서로 수행할 수 있습니다. 그림 2의 숫자는 번호가 매겨진 아래 설명에 해당합니다.

![How to configure Traffic Manager](./media/traffic-manager/IC740855.jpg)

그림 2

1. **Azure 클라우드 서비스, Azure 웹 사이트 또는 기타 끝점을 프로덕션 환경에 배포합니다.** 트래픽 관리자 프로필을 만들 때 구독과 연결해야 합니다. 그런 다음 동일한 구독에 속하는 클라우드 서비스 및 표준 계층 웹 사이트에 대한 끝점을 프로덕션에 추가합니다. 끝점이 스테이징 상태이고 Azure 프로덕션 환경에 없거나 동일한 구독에 없는 경우 외부 끝점으로 추가할 수 있습니다. 클라우드 서비스에 대한 자세한 내용은 [클라우드 서비스](http://go.microsoft.com/fwlink/p/?LinkId=314074)를 참조하세요. 웹 사이트에 대한 자세한 내용은 [웹 사이트](http://go.microsoft.com/fwlink/p/?LinkId=393327)를 참조하세요.
1. **트래픽 관리자 도메인의 이름을 결정합니다.** 고유한 접두사가 있는 도메인 이름을 고려합니다. 도메인의 뒷부분인 trafficmanager.net은 고정됩니다. 자세한 내용은 [모범 사례]를 참조하세요(#bkmk_TrafficManagerBestPracticesProfile).
1. **사용할 모니터링 구성을 결정합니다.** 트래픽 관리자는 부하 분산 방법에 관계없이 끝점을 모니터링하여 온라인 상태인지 확인합니다. 모니터링 설정을 구성하면 트래픽 관리자는 모든 끝점이 오프라인 상태인 것을 감지하거나 프로필을 포함하는 끝점의 상태를 검색할 수 없는 경우가 아닌 한 모니터링 시스템에 따라 오프라인 상태인 끝점으로 트래픽을 보내지 않습니다. 모니터링에 대한 자세한 내용은 [트래픽 관리자 모니터링 정보](https://msdn.microsoft.com/library/azure/dn339013.aspx)를 참조하세요.
1. **사용할 부하 분산 방법을 결정합니다.** 세 가지 부하 분산 방법을 사용할 수 있습니다. 요구 사항에 가장 적합한 방법을 파악하세요. 나중에 방법을 변경해야 하는 경우 언제든지 변경할 수 있습니다. 또한 각 방법에 따라 필요한 구성 단계가 약간 다릅니다. 부하 분산 방법에 대한 자세한 내용은 [트래픽 관리자 부하 분산 방법 정보](https://msdn.microsoft.com/library/azure/dn339010.aspx)를 참조하세요.
1. **프로필을 만들고 설정을 구성합니다.** REST API, Windows PowerShell 또는 관리 포털을 사용하여 트래픽 관리자 프로필을 만들고 설정을 구성할 수 있습니다. 자세한 내용은 [트래픽 관리자 설정을 구성하는 방법]을 참조하세요(#Configure). 다음 단계는 관리 포털에서 빠른 생성을 사용한다고 가정합니다.
	- 	**트래픽 관리자 프로필 만들기 -** 관리 포털에서 빠른 생성을 사용하여 프로필을 만들려면 [빠른 생성을 사용하여 트래픽 관리자 프로필 만들기](https://msdn.microsoft.com/library/azure/dn339012.aspx)를 참조하세요.
	- 	**부하 분산 방법 설정 구성 -** 빠른 생성에서 프로필에 대한 부하 분산 방법을 선택해야 합니다. 빠른 생성 단계를 완료한 후 언제든지 이 설정을 변경할 수 있습니다. 구성 단계는 사용 중인 부하 분산 방법에 해당하는 항목을 참조하세요. [성능 부하 분산 구성](https://msdn.microsoft.com/library/azure/hh744835.aspx)
	
	[AZURE.NOTE]**라운드 로빈 부하 분산 방법은 현재 네트워크 트래픽의 가중 분산을 지원합니다. 그러나 지금은 REST API 또는 Windows PowerShell을 사용하여 가중치를 구성해야 합니다. 자세한 내용과 예제 구성은 Azure 블로그에서 [Azure 트래픽 관리자 외부 끝점 및 PowerShell을 통한 가중 라운드 로빈](https://msdn.microsoft.com/library/azure/hh744829.aspx)을 참조하세요.**
	- 	**끝점 구성 -** 빠른 생성 중에는 끝점이 구성되지 않습니다. 프로필을 만들고 부하 분산 방법을 지정한 후 트래픽 관리자가 끝점을 인식하도록 해야 합니다.
	- 	**모니터링 설정 구성 -** 빠른 생성 중에는 모니터링 설정이 구성되지 않습니다. 프로필을 만들고 부하 분산 방법을 지정한 후 트래픽 관리자가 모니터링할 항목을 인식하도록 해야 합니다. 모니터링 구성 단계는 [트래픽 관리자 모니터링 구성](configure-traffic-manager-monitoring.md).을 참조하세요.
1. **트래픽 관리자 프로필을 테스트합니다.** 프로필과 도메인이 예상대로 작동하는지 테스트합니다. 작업 방법에 대한 자세한 내용은 [트래픽 관리자 설정 테스트](testing-traffic-manager-settings.md).를 참조하세요.
1. **회사 도메인 이름의 DNS 리소스 레코드에서 프로필을 가리켜 활성화합니다.** 자세한 내용은 [회사 인터넷 도메인에서 트래픽 관리자 도메인 가리키기](point-a-company-internet-domain-to-a-traffic-manager-domain.md).를 참조하세요.

그림 1의 예제에서는 회사 도메인 이름이 트래픽 관리자 도메인 이름을 가리키도록 다음에 대한 서버의 DNS 리소스 레코드를 변경합니다.

    www.contoso.com IN CNAME contoso.trafficmanager.net


## 트래픽 관리자 설정을 구성하는 방법


관리 포털에서 REST API 및 Windows PowerShell cmdlet을 사용하여 트래픽 관리자 설정을 구성할 수 있습니다.

각 REST API 요소가 관리 포털에 표시되지는 않지만 두 방법 중 하나로 많은 설정을 사용할 수 있습니다. REST API 사용에 대한 자세한 내용은 [트래픽 관리자 작업(REST API 참조)](http://go.microsoft.com/fwlink/p/?LinkId=313584)을 참조하세요.


트래픽 관리자용 Windows PowerShell cmdlet에 대한 자세한 내용은 [Azure 트래픽 관리자 Cmdlet](http://go.microsoft.com/fwlink/p/?LinkId=400769)을 참조하세요.


[AZURE.NOTE] **현재 관리 포털에서는 외부 끝점(유형 = '임의'), 라운드 로빈 부하 분산 방법의 가중치 및 중첩된 프로필 구성을 지원하지 않습니다. REST(정의 만들기 참조) 또는 Windows PowerShell(Add-AzureTrafficManagerEndpoint 참조)을 사용해야 합니다.**

### 관리 포털에서 설정 구성


관리 포털에서 빠른 생성을 사용하여 트래픽 관리자 프로필을 만들 수 있습니다. 빠른 생성을 통해 기본 프로필을 만들 수 있습니다. 프로필을 만든 후 추가 설정을 구성하거나 이전에 구성한 설정을 편집할 수 있습니다. 빠른 생성을 사용하여 트래픽 관리자 프로필을 만드는 방법에 대한 자세한 내용은 빠른 생성을 사용하여 트래픽 관리자 프로필 만들기를 참조하세요.

[빠른 생성을 사용하여 트래픽 관리자 프로필 만들기](https://msdn.microsoft.com/library/azure/dn339012.aspx)

관리 포털에서 다음 설정을 구성할 수 있습니다.

-**DNS 접두사 -** 직접 만든 고유한 접두사입니다. 프로필은 접두사로 관리 포털에 표시됩니다.

-**DNS TTL -** DNS TTL(Time-To-Live) 값은 클라이언트 로컬 캐싱이 Azure 트래픽 관리자 DNS 시스템에서 업데이트된 DNS 항목을 쿼리하는 빈도를 제어합니다.

-**구독 -** 프로필에 해당하는 구독을 선택합니다. 이 옵션은 여러 구독이 있는 경우에만 나타납니다.

-**부하 분산 방법 -** 트래픽 관리자에서 부하 분산을 처리하려는 방법입니다.

-**장애 조치(Failover) 순서 -** 장애 조치(Failover) 부하 분산 방법을 사용하는 경우 끝점의 순서입니다.

-**모니터링 -** 모니터링 설정에는 프로토콜(HTTP 또는 HTTPS), 포트 및 상대 경로와 파일 이름이 포함됩니다.

### REST API를 사용하여 설정 구성


REST API를 사용하여 트래픽 관리자 프로필을 만들고 구성할 수 있습니다. 자세한 내용은 [트래픽 관리자 작업(REST API 참조)](http://go.microsoft.com/fwlink/?LinkId=313584)을 참조하세요.

-**프로필 -** 프로필에는 직접 만든 도메인 이름 접두사가 포함됩니다. 각 프로필은 구독에 해당합니다. 구동당 여러 개의 프로필을 만들 수 있습니다. 프로필 이름은 관리 포털에 표시됩니다. 프로필에 포함된 직접 만든 이름이 트래픽 관리자 도메인으로 참조됩니다.

-**정의 -** 정의에는 정책 설정과 모니터 설정이 포함됩니다. 정의는 프로필에 해당합니다. 프로필당 하나의 정의만 사용할 수 있습니다. 정의 자체는 관리 포털에 표시되지 않지만 정의 내에 포함된 많은 설정이 관리 포털에 표시되며 구성할 수 있습니다.

-**DNS 옵션 -** 각 정의 내에 DNS 옵션이 있습니다. 여기서 DNS TTL이 구성됩니다.

-**모니터 -** 각 정의 내에 모니터 설정이 있습니다. 여기서 프로토콜, 포트 및 상대 경로와 파일 이름이 구성됩니다. 모니터 설정은 관리 포털에 표시되며 구성할 수 있습니다. 자세한 내용은 [트래픽 관리자 모니터링 정보](https://msdn.microsoft.com/library/azure/dn339013.aspx)를 참조하세요.

-**정책 -** 각 정의 내에 정책 설정이 있습니다. 정책에서 부하 분산 방법과 끝점이 지정됩니다. 정책 자체는 관리 포털에 표시되지 않지만 정책에 대한 일부 설정이 관리 포털에 표시되며 구성할 수 있습니다. 자세한 내용은 [트래픽 관리자 부하 분산 방법](about-traffic-manager-balancing-methods.md).을 참조하세요.

## Windows PowerShell을 사용하여 설정 구성

Windows PowerShell을 사용하여 트래픽 관리자 프로필을 만들고 구성할 수 있습니다. 자세한 내용은 [Azure 트래픽 관리자 Cmdlet](http://go.microsoft.com/fwlink/p/?LinkId=400769)을 참조하세요.

## <a name=bkmk_TrafficManagerBestPracticesProfile>Best practices</a>

- **고유하고 파악하기 쉬운 접두사 설정 -** 트래픽 관리자 프로필의 DNS 이름은 고유해야 합니다. DNS 이름의 첫 부분만 제어할 수 있습니다. 트래픽 관리자 도메인 이름은 식별 및 클라이언트 요청 전송 목적으로만 사용됩니다. 이러한 이름은 클라이언트 컴퓨터에서 최종 사용자에게 표시되지 않습니다. 그러나 이 도메인 이름으로 프로필이 식별되므로 관리 포털에 나열된 다른 도메인 이름에서 빨리 식별할 수 있어야 합니다.
- **점을 사용하여 고유성을 추가하거나 도메인 이름을 읽기 쉽게 설정 -** 마침표를 사용하여 도메인 이름 접두사 부분을 구분할 수도 있습니다.  트래픽 관리자에서 여러 정책을 만들려는 경우 일관성 있는 계층 구조를 사용하여 서비스 간에 구별합니다. 예를 들어 Contoso에는 웹, 청구 및 유틸리티 관리를 위한 글로벌 서비스가 있습니다. 세 가지 정책은 web.contoso.trafficmanager.net, bill.contoso.trafficmanager.net 및 util.contoso.trafficmanager.net입니다. 클라우드 서비스나 웹 사이트를 설정할 때 위치를 포함하는 이름을 사용합니다. 예를 들면 web-us-contoso.cloudapp.net 및 web-asia-contoso.cloudapp.net입니다. DNS에 의한 제한 사항이 적용됩니다. 도메인 이름이 점으로 구분된 레이블 시퀀스(label.label.label.label.등)라고 가정합니다. 이 설명서를 작성할 당시 트래픽 관리자의 도메인 이름에 대한 제한은 다음과 같습니다.
	- 각 레이블에 최대 63자를 사용할 수 있습니다.
	- 전체 레이블 수는 40개를 넘을 수 없습니다. trafficmanager.net에서 두 개의 레이블이 사용되므로 접두사에 38개를 사용할 수 있습니다.
	- 전체 도메인 이름에 최대 253자를 사용할 수 있습니다. 이 중에서 최대 19자는 trafficmanager.net에서 사용된다는 것에 주의하세요.
- **DNS TTL -** DNS TTL 값은 클라이언트 로컬 캐싱이 Azure 트래픽 관리자 DNS 시스템에서 업데이트된 DNS 항목을 쿼리하는 빈도를 제어합니다. 트래픽 관리자 내에서 프로필 변경이나 끝점 가용성 변경과 같은 변경이 발생할 경우 DNS 서버의 전체 글로벌 시스템에서 이 기간이 새로 고쳐집니다. 설정을 기본값인 300초(5분)로 유지하는 것이 좋습니다. 값이 클수록 트래픽 관리자 DNS 응답이 DNS 확인자 및 클라이언트에서 캐시되는 기간이 증가하여 전반적인 DNS 쿼리 대기 시간이 감소합니다. 그러나 빠른 장애 조치(Failover)가 필요한 경우 더 낮은 값을 구성할 수도 있습니다.
- **끝점이 단일 구독에 있어야 함 -** 프로필을 만들 때 모든 끝점이 동일한 구독에 있어야 합니다. 다른 구독의 끝점을 프로필에 외부 끝점으로 추가할 수 있지만 연결된 서비스를 사용하지 않도록 설정하거나 삭제할 경우 Azure에서 자동으로 제거하지 않습니다. 따라서 외부 끝점이 트래픽 관리자 프로필에 남아 있으며, 수동으로 제거하지 않으면 계속 요금이 청구됩니다.

-**프로덕션 서버 전용 -** 프로덕션 환경의 끝점만 사용할 수 있습니다. 스테이징 환경에서 실행되는 끝점으로 보낼 수 없습니다. 프로필이 트래픽을 보내는 동안 VIP(가상 IP) 주소 교체를 수행할 경우 트래픽은 방금 프로덕션 환경으로 교체된 끝점을 사용합니다.

-**쉽게 식별할 수 있도록 끝점에 이름 지정 -** 사용할 DNS 접두사를 고려합니다. DNS 이름은 구독에서 고유하지만 클라우드 서비스나 웹 사이트의 이름은 고유하지 않을 수 있으므로 DNS 이름이 사용됩니다. 혼동을 피하려면 클라우드 서비스나 웹 사이트에 동일하거나 유사한 이름 및 DNS 접두사를 지정합니다. 클라우드 서비스와 웹 사이트 수가 20개를 초과할 경우 이름을 잘못 지정하면 올바른 끝점을 찾기 어려울 수 있습니다. 또한 끝점 이름을 잘못 지정할 경우 프로필을 유지 관리하기 어렵습니다.

-**프로필의 모든 끝점이 동일한 작업과 포트를 서비스해야 함 -** 끝점을 혼합하면 요청을 서비스할 수 없는 끝점을 클라이언트가 호출할 가능성이 커집니다.

-**프로필의 모든 클라우드 서비스가 동일한 모니터링 설정을 사용해야 함 -** 주어진 정의의 모든 끝점을 모니터링하기 위해 단일 경로와 파일만 선택할 수 있습니다. 모니터링 시 기본 경로와 파일 이름에 액세스하도록 상대 경로 및 파일 이름 텍스트 상자에 "/"를 입력할 수 있습니다.

-**구성을 변경하는 대신 일시적 변경을 위해 끝점을 사용하지 않도록 설정 -** 끝점을 오프라인 상태로 전환하려는 경우가 많습니다. 프로필에서 끝점을 제거하는 대신 프로필에서 개별 끝점을 사용하지 않도록 설정합니다. 그러면 끝점이 프로필의 일부로 유지되지만 끝점이 없는 것처럼 프로필이 작동합니다. 이 작업은 유지 관리 모드이거나 다시 배포할 예정인 끝점을 일시적으로 제거하는 데 매우 유용합니다. 끝점이 다시 작동하여 실행되면 사용하도록 설정할 수 있습니다. 자세한 내용은 [끝점 사용 안 함 또는 사용](disable-or-enable-an-endpoint.md)을 참조하세요.

-**저장소 -** 저장소 위치와 분산을 디자인하는 방법은 트래픽 관리자 사용 시 중요한 고려 사항입니다. 트래픽 관리자용 응용 프로그램을 디자인 및 배포하는 경우 종단 간 트랜잭션과 데이터가 흐르는 방법을 고려하세요.

-**SQL Azure -** 저장소 디자인과 마찬가지로, 끝점을 여러 지역으로 확장하는 경우 응용 프로그램 상태와 데이터 요구 사항을 분석합니다.

## <a name="Nested">중첩된 프로필</a>

다른 트래픽 관리자 프로필의 이름을 끝점으로 지정할 수 있습니다. 이를 중첩된 프로필이라고 합니다. 트래픽 관리자 프로필 이름은 해당 DNS 이름입니다(예: contoso-europe.trafficmanager.net).

이렇게 하면 들어오는 DNS 이름 쿼리가 일련의 계층에서 분석되어 요청하는 클라이언트를 올바른 끝점 집합으로 보내도록 트래픽 관리자를 구성할 수 있습니다. 그림 3은 예제를 보여 줍니다.

![Example of nested Traffic Manager profiles](./media/traffic-manager/IC751072.png)

**그림 3**

최대 10개의 수준을 중첩할 수 있으며 각 프로필을 다른 부하 분산 방법으로 구성할 수 있습니다.

예를 들어 다음에 대한 구성을 만들 수 있습니다.

-최상위 계층(외부 DNS 이름에 매핑된 트래픽 관리자 프로필)에서 성능 부하 분산 방법으로 프로필을 구성할 수 있습니다.

-가운데 계층에서 트래픽 관리자 프로필 집합은 다양한 데이터 센터를 나타내며 라운드 로빈 부하 분산 방법을 사용합니다.

-맨 아래 계층에서 각 데이터 센터의 클라우드 서비스 끝점 집합은 사용자의 트래픽 요청을 서비스합니다.

그 결과, 사용자는 성능에 따라 적절한 지역의 데이터 센터로 전송되고 균등 또는 가중 부하 분산에 따라 해당 데이터 센터 내의 클라우드 서비스로 전송됩니다. 예를 들어 가중을 사용하여 테스트 또는 고객 피드백을 위해 새 배포나 시험판 배포에 적은 백분율의 트래픽을 분산시킬 수 있습니다.

그림 4는 구성을 보여 줍니다.

![Example of multi-tiered Traffic Manager profiles](./media/traffic-manager/IC751073.png)

**그림 4**

그림 4에서 최상위 계층의 트래픽 관리자 프로필은 부모 프로필이고 중간 계층의 트래픽 관리자 프로필은 자식 프로필입니다.

트래픽 관리자가 적은 수의 정상 끝점이 있는 자식 프로필로 사용자를 보내는 경우 해당 끝점이 오버로드되어 성능 문제가 발생할 수 있습니다. 이러한 상황을 방지하기 위해 부모 프로필의 자식 프로필 내 끝점이 트래픽을 받을 수 있는지 여부를 확인하는 정상 끝점 임계값을 사용하여 부모 트래픽 관리자 프로필을 구성할 수 있습니다. 예를 들어 자식 프로필 내에 3개 이상의 정상 끝점이 있도록 하려는 경우 이 임계값을 3으로 설정합니다. 그림 4의 예제에서는 이 임계값에 대해 최상위 계층 트래픽 관리자 프로필을 구성합니다.

트래픽 관리자 프로필을 끝점으로 추가하고 최소 정상 끝점 수를 구성하려면 REST([정의 만들기](http://go.microsoft.com/fwlink/p/?LinkId=400772) 참조) 또는 Windows PowerShell([Add-AzureTrafficManagerEndpoint](https://msdn.microsoft.com/library/azure/dn690257.aspx) 참조)을 사용해야 합니다. 관리 포털을 사용할 수 없습니다.

## 트래픽 관리자 그림


이 항목의 그림을 트래픽 관리자의 고유한 프레젠테이션을 위한 PowerPoint 슬라이드로 사용하거나 고유한 목적을 위해 수정하려는 경우 [MSDN 설명서의 트래픽 관리자 그림](http://gallery.technet.microsoft.com/Traffic-Manager-figures-in-887e7c99)을 참조하세요.

## 참고 항목

[트래픽 관리자 구성 작업](https://msdn.microsoft.com/library/azure/hh744830.aspx)

[클라우드 서비스](http://go.microsoft.com/fwlink/?LinkId=314074)

[웹 사이트](http://go.microsoft.com/fwlink/p/?LinkId=393327)

[트래픽 관리자 작업(REST API 참조)](http://go.microsoft.com/fwlink/?LinkId=313584)

<!--HONumber=49-->