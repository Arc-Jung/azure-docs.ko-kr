---
title: Azure IoT Hub 장치 프로 비전 서비스를 사용 하 여 프로 비전 된 장치 프로 비전 해제
description: Azure IoT Hub 장치 프로 비전 서비스 (DPS)를 사용 하 여 프로 비전 된 장치의 프로 비전을 해제 하는 방법
author: wesmc7777
ms.author: wesmc
ms.date: 05/11/2018
ms.topic: conceptual
ms.service: iot-dps
services: iot-dps
ms.openlocfilehash: 8a3677ba285f5b02407ca3d176979bf6c016ef9b
ms.sourcegitcommit: 5ab4f7a81d04a58f235071240718dfae3f1b370b
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/10/2019
ms.locfileid: "74974839"
---
# <a name="how-to-deprovision-devices-that-were-previously-auto-provisioned"></a>이전에 자동으로 프로 비전 된 장치의 프로 비전을 해제 하는 방법 

장치 프로 비전 서비스를 통해 이전에 자동으로 프로 비전 된 장치의 프로 비전을 해제 해야 할 수도 있습니다. 예를 들어 장치를 다른 IoT hub로 판매 또는 이동 하거나 분실 하거나 도난당 하거나 손상 시킬 수 있습니다. 

일반적으로 장치를 프로 비전 해제 하는 과정은 다음 두 단계로 이루어집니다.

1. 향후 자동 프로 비전을 방지 하기 위해 프로 비전 서비스에서 장치를 등록 해제 합니다. 액세스 권한을 일시적으로 해지할 지 아니면 영구적으로 해지할 지에 따라 등록 항목을 사용 하지 않도록 설정 하거나 삭제할 수 있습니다. X.509 증명을 사용 하는 장치의 경우 기존 등록 그룹의 계층 구조에서 항목을 사용 하지 않도록 설정 하거나 삭제할 수 있습니다.  
 
   - 장치를 등록 해제 하는 방법에 대 한 자세한 내용은 [Azure IoT Hub 장치 프로 비전 서비스에서 장치를 등록 해제 하는 방법](how-to-revoke-device-access-portal.md)을 참조 하세요.
   - 프로 비전 서비스 Sdk 중 하나를 사용 하 여 프로그래밍 방식으로 장치를 등록 하는 방법을 알아보려면 [Service sdk를 사용 하 여 장치 등록 관리](how-to-manage-enrollments-sdks.md)를 참조 하세요.

2. 향후 통신 및 데이터 전송을 방지 하기 위해 IoT Hub에서 장치 등록을 취소 합니다. 다시, 프로 비전 된 IoT Hub에 대 한 id 레지스트리에서 장치 항목을 일시적으로 사용 하지 않도록 설정 하거나 영구적으로 삭제할 수 있습니다. 비활성화에 대해 자세히 알아보려면 [장치 사용 안 함](/azure/iot-hub/iot-hub-devguide-identity-registry#disable-devices) 을 참조 하세요. [Azure Portal](https://portal.azure.com)에서 IoT Hub 리소스에 대 한 "장치 관리/IoT 장치"를 참조 하세요.

장치 프로 비전을 해제 하기 위해 수행 하는 정확한 단계는 프로 비전 서비스에 해당 하는 등록 메커니즘과 해당 등록 항목에 따라 다릅니다. 다음 섹션에서는 등록 및 증명 유형을 기반으로 하는 프로세스에 대 한 개요를 제공 합니다.

## <a name="individual-enrollments"></a>개별 등록
리프 인증서가 있는 TPM 증명 또는 x.509 증명을 사용 하는 장치는 개별 등록 항목을 통해 프로 비전 됩니다. 

개별 등록이 있는 장치의 프로 비전을 해제 하려면: 

1. 프로 비전 서비스에서 장치를 등록 해제 합니다.

   - TPM 증명을 사용 하는 장치의 경우 개별 등록 항목을 삭제 하 여 프로 비전 서비스에 대 한 장치 액세스 권한을 영구적으로 취소 하거나 항목을 사용 하지 않도록 설정 하 여 일시적으로 해당 액세스를 취소 합니다. 
   - X.509 증명을 사용 하는 장치의 경우 해당 항목을 삭제 하거나 사용 하지 않도록 설정할 수 있습니다. 하지만 x.509를 사용 하는 장치에 대 한 개별 등록을 삭제 하 고 해당 장치의 인증서 체인에 있는 서명 인증서에 대해 사용 하도록 설정 된 등록 그룹이 존재 하는 경우 장치를 다시 등록할 수 있습니다. 이러한 장치의 경우 등록 항목을 사용 하지 않도록 설정 하는 것이 더 안전할 수 있습니다. 이렇게 하면 서명 인증서 중 하나에 대해 사용 하도록 설정 된 등록 그룹이 존재 하는지 여부에 관계 없이 장치를 다시 등록할 수 없습니다.

2. 프로 비전 된 IoT hub의 id 레지스트리에서 장치를 사용 하지 않도록 설정 하거나 삭제 합니다. 


## <a name="enrollment-groups"></a>등록 그룹
X.509 증명을 사용 하 여 등록 그룹을 통해 장치를 프로 비전 할 수도 있습니다. 등록 그룹은 서명 인증서 (중간 또는 루트 CA 인증서)를 사용 하 여 구성 되 고 해당 인증서 체인에서 해당 인증서를 사용 하는 장치의 프로 비전 서비스에 대 한 액세스를 제어 합니다. 프로 비전 서비스를 사용 하 여 등록 그룹 및 x.509 인증서에 대 한 자세한 내용은 [x.509 인증서](concepts-security.md#x509-certificates)를 참조 하세요. 

등록 그룹을 통해 프로 비전 된 장치 목록을 보려면 등록 그룹의 세부 정보를 볼 수 있습니다. 이 방법은 각 장치가 프로 비전 된 IoT hub를 이해 하는 쉬운 방법입니다. 장치 목록을 보려면: 

1. Azure Portal에 로그인 하 고 왼쪽 메뉴에서 **모든 리소스** 를 클릭 합니다.
2. 리소스 목록에서 프로 비전 서비스를 클릭 합니다.
3. 프로 비전 서비스에서 **등록 관리**를 클릭 한 다음 **등록 그룹** 탭을 선택 합니다.
4. 등록 그룹을 클릭 하 여 엽니다.

   ![포털에서 등록 그룹 항목 보기](./media/how-to-unprovision-devices/view-enrollment-group.png)

등록 그룹을 사용 하는 경우 다음 두 가지 시나리오를 고려해 야 합니다.

- 등록 그룹을 통해 프로 비전 된 모든 장치의 프로 비전을 해제 하려면 다음을 수행 합니다.
  1. 등록 그룹을 사용 하지 않도록 설정 하 여 서명 인증서를 블랙 리스트에 등록 합니다. 
  2. 해당 등록 그룹에 대해 프로 비전 된 장치 목록을 사용 하 여 해당 IoT hub의 id 레지스트리에서 각 장치를 사용 하지 않도록 설정 하거나 삭제할 수 있습니다. 
  3. 해당 IoT hub에서 모든 장치를 사용 하지 않도록 설정 하거나 삭제 한 후 필요에 따라 등록 그룹을 삭제할 수 있습니다. 그러나 등록 그룹을 삭제 하 고 하나 이상의 장치에 대 한 인증서 체인에서 상위에 있는 서명 인증서에 대해 사용 하도록 설정 된 등록 그룹이 있는 경우 해당 장치를 다시 등록할 수 있습니다. 

- 등록 그룹에서 단일 장치의 프로 비전을 해제 하려면 다음을 수행 합니다.
  1. 리프 (장치) 인증서에 대해 사용 하지 않도록 설정 된 개별 등록을 만듭니다. 이렇게 하면 해당 장치에 대 한 프로 비전 서비스에 대 한 액세스를 해지 하는 동시에 해당 체인에 등록 그룹의 서명 인증서가 있는 다른 장치에 대 한 액세스를 허용 합니다. 장치에 대해 사용 하지 않도록 설정 된 개별 등록을 삭제 하지 마세요. 이렇게 하면 장치에서 등록 그룹을 통해 다시 등록할 수 있습니다. 
  2. 해당 등록 그룹에 대해 프로 비전 된 장치 목록을 사용 하 여 장치가 프로 비전 된 IoT hub를 찾고 해당 허브의 id 레지스트리에서 해당 장치를 사용 하지 않도록 설정 하거나 삭제 합니다. 
  
  










