---
title: Azure IoT Hub 장치 프로 비전 서비스에서 장치 등록 해제
description: 장치를 등록 해제 하 여 DPS (Azure IoT Hub 장치 프로 비전 서비스)를 통한 프로 비전을 방지 하는 방법
author: wesmc7777
ms.author: wesmc
ms.date: 04/05/2018
ms.topic: conceptual
ms.service: iot-dps
services: iot-dps
manager: timlt
ms.openlocfilehash: af883da67f4e1bc819514e88ff480526e16124db
ms.sourcegitcommit: 5ab4f7a81d04a58f235071240718dfae3f1b370b
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/10/2019
ms.locfileid: "74974924"
---
# <a name="how-to-disenroll-a-device-from-azure-iot-hub-device-provisioning-service"></a>장치 프로 비전 서비스 Azure IoT Hub 장치를 등록 해제 하는 방법

IoT 솔루션과 같은 높은 프로필 시스템에는 장치 자격 증명을 적절 하 게 관리 하는 것이 중요 합니다. 이러한 시스템에 대 한 모범 사례는 SAS (공유 액세스 서명) 토큰 또는 x.509 인증서의 자격 증명이 손상 될 수 있는 경우 장치에 대 한 액세스를 취소 하는 방법을 명확 하 게 계획 하는 것입니다. 

장치 프로 비전 서비스를 등록 하면 장치를 [자동으로 프로 비전](concepts-auto-provisioning.md)할 수 있습니다. 프로 비전 된 장치는 IoT Hub에 등록 된 장치 이며 초기 [장치](~/articles/iot-hub/iot-hub-devguide-device-twins.md) 쌍 상태를 수신 하 고 원격 분석 데이터 보고를 시작할 수 있습니다. 이 문서에서는 프로 비전 서비스 인스턴스에서 장치를 등록 해제 하 여 나중에 다시 프로 비전 되는 것을 방지 하는 방법을 설명 합니다.

> [!NOTE] 
> 액세스를 취소 하는 장치의 재시도 정책에 유의 하십시오. 예를 들어 무한 재시도 정책이 있는 장치는 계속 프로 비전 서비스에 등록을 시도할 수 있습니다. 이 경우 서비스 리소스가 사용 되 고 성능에 영향을 줄 수 있습니다.

## <a name="blacklist-devices-by-using-an-individual-enrollment-entry"></a>개별 등록 항목을 사용 하 여 장치 블랙 리스트

개별 등록는 단일 장치에 적용 되며, x.509 인증서 또는 SAS 토큰 (실제 또는 가상 TPM)을 증명 메커니즘으로 사용할 수 있습니다. (SAS 토큰을 증명 메커니즘으로 사용 하는 장치는 개별 등록을 통해서만 프로 비전 할 수 있습니다.) 개별 등록이 있는 장치를 블랙 리스트에 포함 하려면 해당 등록 항목을 사용 하지 않도록 설정 하거나 삭제할 수 있습니다. 

등록 항목을 사용 하지 않도록 설정 하 여 일시적으로 장치를 블랙 리스트에 등록 하려면: 

1. Azure Portal에 로그인 하 고 왼쪽 메뉴에서 **모든 리소스** 를 선택 합니다.
2. 리소스 목록에서 장치를 목록에 추가할 프로 비전 서비스를 선택 합니다.
3. 프로 비전 서비스에서 **등록 관리**를 선택 하 고 **개별 등록** 탭을 선택 합니다.
4. 블랙 리스트를 추가할 장치의 등록 항목을 선택 합니다. 

    ![개별 등록을 선택 합니다.](./media/how-to-revoke-device-access-portal/select-individual-enrollment.png)

5. 등록 페이지에서 아래쪽으로 스크롤하고, **항목 사용** 스위치에서 **사용 안 함** 을 선택한 다음, **저장**을 선택 합니다.  

   ![포털에서 개별 등록 항목을 사용 하지 않도록 설정](./media/how-to-revoke-device-access-portal/disable-individual-enrollment.png)

등록 항목을 삭제 하 여 장치를 영구적으로 블랙 리스트에 등록 하려면:

1. Azure Portal에 로그인 하 고 왼쪽 메뉴에서 **모든 리소스** 를 선택 합니다.
2. 리소스 목록에서 장치를 목록에 추가할 프로 비전 서비스를 선택 합니다.
3. 프로 비전 서비스에서 **등록 관리**를 선택 하 고 **개별 등록** 탭을 선택 합니다.
4. 블랙 리스트를 추가할 장치의 등록 항목 옆에 있는 확인란을 선택 합니다. 
5. 창 위쪽에서 **삭제** 를 선택한 다음 **예** 를 선택 하 여 등록을 제거할 것임을 확인 합니다. 

   ![포털에서 개별 등록 항목 삭제](./media/how-to-revoke-device-access-portal/delete-individual-enrollment.png)


절차를 완료 한 후 개별 등록 목록에서 제거 된 항목이 표시 됩니다.  

## <a name="blacklist-an-x509-intermediate-or-root-ca-certificate-by-using-an-enrollment-group"></a>등록 그룹을 사용 하 여 x.509 중간 또는 루트 CA 인증서를 블랙 리스트에 등록 합니다.

일반적으로 x.509 인증서는 신뢰의 인증서 체인에 정렬 됩니다. 체인의 모든 단계에서 인증서가 손상 되 면 트러스트가 끊어집니다. 장치 프로 비전 서비스에서 해당 인증서를 포함 하는 체인의 장치 다운스트림 프로 비전을 방지 하려면 인증서를 블랙 리스트에 해야 합니다. X.509 인증서 및 프로 비전 서비스에서 사용 하는 방법에 대 한 자세한 내용은 [x.509 인증서](./concepts-security.md#x509-certificates)를 참조 하세요. 

등록 그룹은 동일한 중간 또는 루트 CA에서 서명 된 x.509 인증서의 일반적인 증명 메커니즘을 공유 하는 장치에 대 한 항목입니다. 등록 그룹 항목은 중간 또는 루트 CA와 연결 된 x.509 인증서를 사용 하 여 구성 됩니다. 항목은 또한 쌍 상태 및 IoT hub 연결과 같은 구성 값을 사용 하 여 인증서 체인에서 해당 인증서가 있는 장치에서 공유 됩니다. 인증서를 블랙 리스트에 표시 하려면 해당 등록 그룹을 사용 하지 않도록 설정 하거나 삭제할 수 있습니다.

등록 그룹을 사용 하지 않도록 설정 하 여 일시적으로 인증서를 블랙 리스트에 등록 하려면: 

1. Azure Portal에 로그인 하 고 왼쪽 메뉴에서 **모든 리소스** 를 선택 합니다.
2. 리소스 목록에서 서명 인증서를 목록에 추가할 프로 비전 서비스를 선택 합니다.
3. 프로 비전 서비스에서 **등록 관리**를 선택 하 고 **등록 그룹** 탭을 선택 합니다.
4. 블랙 리스트를 적용할 인증서를 사용 하 여 등록 그룹을 선택 합니다.
5. **항목 사용** 스위치에서 **사용 안 함** 을 선택 하 고 **저장**을 선택 합니다.  

   ![포털에서 등록 그룹 항목 사용 안 함](./media/how-to-revoke-device-access-portal/disable-enrollment-group.png)

    
해당 등록 그룹을 삭제 하 여 인증서를 영구적으로 차단 목록에 등록 하려면:

1. Azure Portal에 로그인 하 고 왼쪽 메뉴에서 **모든 리소스** 를 선택 합니다.
2. 리소스 목록에서 장치를 목록에 추가할 프로 비전 서비스를 선택 합니다.
3. 프로 비전 서비스에서 **등록 관리**를 선택 하 고 **등록 그룹** 탭을 선택 합니다.
4. 블랙 리스트를 적용할 인증서에 대 한 등록 그룹 옆의 확인란을 선택 합니다. 
5. 창 위쪽에서 **삭제** 를 선택한 다음 **예** 를 선택 하 여 등록 그룹을 제거할 것임을 확인 합니다. 

   ![포털에서 등록 그룹 항목 삭제](./media/how-to-revoke-device-access-portal/delete-enrollment-group.png)

절차를 완료 한 후 등록 그룹 목록에서 제거 된 항목이 표시 됩니다.  

> [!NOTE]
> 인증서에 대 한 등록 그룹을 삭제 하는 경우 인증서 체인에 인증서가 있는 장치는 루트 인증서에 대해 사용 하도록 설정 된 등록 그룹이 나 해당 인증서에서 높은 다른 중간 인증서를 등록할 수 있습니다. 체인이 있습니다.

## <a name="blacklist-specific-devices-in-an-enrollment-group"></a>등록 그룹의 블랙 리스트 특정 장치

X.509 증명 메커니즘을 구현 하는 장치는 장치의 인증서 체인 및 개인 키를 사용 하 여 인증 합니다. 장치에서 장치 프로 비전 서비스에 연결 하 고 인증 하는 경우 서비스는 먼저 장치 자격 증명과 일치 하는 개별 등록을 찾습니다. 그러면 서비스에서 등록 그룹을 검색 하 여 장치를 프로 비전 할 수 있는지 여부를 확인 합니다. 서비스에서 장치에 대해 사용 하지 않도록 설정 된 개별 등록을 찾으면 장치가 연결 되지 않습니다. 장치의 인증서 체인에 있는 중간 또는 루트 CA에 대해 사용 하도록 설정 된 등록 그룹이 있는 경우에도 서비스에서 연결을 차단 합니다. 

등록 그룹에서 개별 장치를 블랙 리스트에 추가 하려면 다음 단계를 수행 합니다.

1. Azure Portal에 로그인 하 고 왼쪽 메뉴에서 **모든 리소스** 를 선택 합니다.
2. 리소스 목록에서 블랙 리스트를 추가할 장치의 등록 그룹이 포함 된 프로 비전 서비스를 선택 합니다.
3. 프로 비전 서비스에서 **등록 관리**를 선택 하 고 **개별 등록** 탭을 선택 합니다.
4. 위쪽에서 **개별 등록 추가** 단추를 선택 합니다. 
5. **등록 추가** 페이지에서 장치에 대 한 증명 **메커니즘** 으로 **x.509** 을 선택 합니다.

    장치 인증서를 업로드 하 고 블랙 리스트에 장치의 장치 ID를 입력 합니다. 인증서의 경우 장치에 설치 된 서명 된 최종 엔터티 인증서를 사용 합니다. 장치는 인증을 위해 서명 된 최종 엔터티 인증서를 사용 합니다.

    ![블랙 리스트에 장치에 대 한 장치 속성 설정](./media/how-to-revoke-device-access-portal/disable-individual-enrollment-in-enrollment-group-1.png)

6. **등록 추가** 페이지의 아래쪽으로 스크롤하고 **항목 사용** 스위치에서 **사용 안 함** 을 선택한 다음 **저장**을 선택 합니다. 

    [포털에서 사용 하지 않도록 설정 된 개별 등록 항목을 사용 하 여 그룹 등록에서 장치를 사용 하지 않도록 설정 ![](./media/how-to-revoke-device-access-portal/disable-individual-enrollment-in-enrollment-group.png)](./media/how-to-revoke-device-access-portal/disable-individual-enrollment-in-enrollment-group.png#lightbox)

등록을 성공적으로 만들면 **개별 등록** 탭에 나열 된 사용 하지 않도록 설정 된 장치 등록이 표시 됩니다. 

## <a name="next-steps"></a>Következő lépések

또한 등록 해제는 더 큰 프로 비전 해제 프로세스의 일부입니다. 장치 프로 비전 해제는 프로 비전 서비스의 이기도 IoT hub의 있음이를 모두 포함 합니다. 전체 프로세스에 대 한 자세한 내용은 [이전에 자동으로 프로 비전 된 장치의 프로 비전을 해제 하는 방법](how-to-unprovision-devices.md) 을 참조 하세요. 

