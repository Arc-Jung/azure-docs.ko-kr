---
title: 제조업체의 보안 사례-Azure IoT 장치 프로 비전 서비스
description: Azure IoT 장치 프로 비전 서비스 (DPS)에 등록할 장치를 준비 하는 Oem 및 장치 제조업체에 대 한 일반적인 보안 관행을 간략하게 소개 합니다.
author: timlt
ms.author: timlt
ms.date: 3/02/2020
ms.topic: conceptual
ms.service: iot-dps
ms.custom: iot-p0-scenario, iot-devices-deviceOEM
ms.reviewer: nberdy
ms.openlocfilehash: 788738082cbf9995fb2f7282bc3f574903275528
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/09/2020
ms.locfileid: "90527210"
---
# <a name="security-practices-for-azure-iot-device-manufacturers"></a>Azure IoT 장치 제조업체를 위한 보안 방법
추가 제조업체에서 IoT 장치를 출시 하면 일반적인 방법에 대 한 지침을 확인 하는 데 도움이 됩니다. 이 문서에서는 Azure IoT (장치 프로 비전 서비스)에서 사용할 장치를 제조할 때 고려할 권장 되는 보안 방법을 요약 합니다.  

> [!div class="checklist"]
> * 장치 인증 옵션 선택
> * IoT 장치에 인증서 설치
> * 신뢰할 수 있는 플랫폼 모듈 (TPM)을 제조 프로세스에 통합

## <a name="selecting-device-authentication-options"></a>장치 인증 옵션 선택
IoT 장치 보안 측정의 궁극적인 목표는 보안 IoT 솔루션을 만드는 것입니다. 그러나 하드웨어 제한, 비용 및 보안 전문성 수준과 같은 문제는 모두 선택 하는 옵션에 영향을 줍니다. 또한 보안에 대 한 접근 방식은 IoT 장치를 클라우드에 연결 하는 방법에 영향을 줍니다. [몇 가지 IoT 보안 요소가](https://www.microsoft.com/research/publication/seven-properties-highly-secure-devices/) 고려해 야 하지만 모든 고객이 발견할 수 있는 주요 요소는 사용할 인증 유형입니다. 

널리 사용 되는 세 가지 인증 유형으로는 x.509 인증서, TPM (신뢰할 수 있는 플랫폼 모듈) 및 대칭 키가 있습니다. 다른 인증 유형이 있는 경우 Azure IoT에서 솔루션을 구축 하는 대부분의 고객은 이러한 세 가지 유형 중 하나를 사용 합니다. 이 문서의 나머지 부분에서는 각 인증 유형을 사용 하는 것과 같은 장점 및 단점을 설명 합니다.

### <a name="x509-certificate"></a>X.509 인증서
X.509 인증서는 인증에 사용할 수 있는 디지털 id의 유형입니다. X.509 인증서 표준은 [IETF RFC 5280](https://tools.ietf.org/html/rfc5280)에 설명 되어 있습니다. Azure IoT에는 인증서를 인증 하는 두 가지 방법이 있습니다.
- N. 인증서에 대 한 지문 알고리즘을 실행 하 여 16 진수 문자열을 생성 합니다. 생성 된 문자열은 인증서에 대 한 고유 식별자입니다. 
- 전체 체인을 기반으로 하는 CA 인증입니다. 인증서 체인은 EE (최종 엔터티) 인증서를 인증 하는 데 필요한 모든 인증서의 계층 목록입니다. EE 인증서를 인증 하려면 신뢰할 수 있는 루트 CA를 포함 하 여 체인의 각 인증서를 인증 해야 합니다. 

X.509에 대 한 장점:
- X.509는 Azure IoT에서 가장 안전 하 게 지원 되는 인증 유형입니다.
- X.509는 인증서 관리를 위한 높은 수준의 제어를 허용 합니다.
- 많은 공급 업체에서 x.509 기반 인증 솔루션을 제공할 수 있습니다.

X.509의 단점:
- 많은 고객이 외부 공급 업체에 인증서를 사용 해야 할 수 있습니다.
- 인증서 관리는 비용이 많이 들고 전체 솔루션 비용에 추가 될 수 있습니다.
- 인증서 수명 주기 관리는 물류가 잘 되지 않는 경우 어려울 수 있습니다. 

### <a name="trusted-platform-module-tpm"></a>TPM(신뢰할 수 있는 플랫폼 모듈)
[ISO/IEC 11889](https://www.iso.org/standard/66510.html)라고도 하는 TPM은 암호화 키를 안전 하 게 생성 하 고 저장 하기 위한 표준입니다. 또한 TPM은 표준을 구현 하는 모듈과 상호 작용 하는 가상 또는 실제 i/o 장치를 나타냅니다. TPM 장치는 불연속 하드웨어, 통합 하드웨어, 펌웨어 기반 모듈 또는 소프트웨어 기반 모듈로 존재할 수 있습니다. 

Tpm과 대칭 키 사이에는 두 가지 주요 차이점이 있습니다. 
- TPM 칩은 x.509 인증서를 저장할 수도 있습니다.
- DPS의 TPM 증명은 비대칭 인증 형태의 EK (TPM 인증 키)를 사용 합니다. 비대칭 인증을 사용 하면 암호화에 공개 키가 사용 되 고 암호 해독에 별도의 개인 키가 사용 됩니다. 반대로 대칭 키는 암호화와 암호 해독 모두에 개인 키가 사용 되는 대칭 인증을 사용 합니다. 

TPM에 대 한 장점:
- Tpm은 운영 체제에 대 한 기본 제공 지원을 포함 하 여 많은 Windows 장치에 표준 하드웨어로 포함 됩니다. 
- TPM 증명은 SAS (공유 액세스 서명) 토큰 기반 대칭 키 증명 보다 더 안전 하 게 보호 됩니다.
- 장치 자격 증명을 쉽게 만료 및 갱신 하거나 롤백할 수 있습니다. DP는 TPM 장치가 다시 프로 비전 될 때마다 IoT Hub 자격 증명을 자동으로 롤업 합니다.

TPM의 단점: 
- Tpm은 복잡 하며 사용 하기 어려울 수 있습니다. 
- TPM을 사용 하 여 응용 프로그램을 개발 하는 것은 실제 TPM 또는 품질 에뮬레이터가 아닌 한 어렵습니다.
- 하드웨어에 TPM을 포함 하도록 장치의 보드를 다시 디자인 해야 할 수 있습니다. 
- TPM에서 EK를 롤링 하는 경우 TPM의 id를 제거 하 고 새 id를 만듭니다. 실제 칩은 동일 하 게 유지 되지만 IoT 솔루션에 새 id가 있습니다.

### <a name="symmetric-key"></a>대칭 키
대칭 키를 사용 하면 동일한 키를 사용 하 여 메시지를 암호화 하 고 해독 합니다. 결과적으로, 장치 및 서비스를 인증 하는 서비스 모두에 동일한 키가 알려집니다. Azure IoT는 SAS 토큰 기반 대칭 키 연결을 지원 합니다. 대칭 키 인증에는 x.509 인증을 사용 하 여 키를 보호 하 고 동일한 수준의 보안을 구현 하는 데 상당한 소유자의 책임이 필요 합니다. 대칭 키를 사용 하는 경우 권장 되는 방법은 HSM (하드웨어 보안 모듈)을 사용 하 여 키를 보호 하는 것입니다.

대칭 키에 대 한 장점:
- 대칭 키를 사용 하는 것은 인증을 시작 하는 가장 간단 하 고 저렴 한 방법입니다.
- 대칭 키를 사용 하면 추가로 생성할 항목이 없으므로 프로세스가 간소화 됩니다. 

대칭 키의 단점: 
- 대칭 키는 키의 보안을 유지 하는 데 상당한 노력을 기울여야 합니다. 장치와 클라우드 간에 동일한 키가 공유 됩니다. 즉, 두 위치에서 키를 보호 해야 합니다. 반면 TPM 및 x.509 인증서의 챌린지는 개인 키를 노출 하지 않고 공개 키의 소유를 증명 하는 것입니다.
- 대칭 키를 통해 보안을 저하 시킬 수 있습니다. 대칭 키를 사용 하는 일반적인 추세는 장치에서 암호화 되지 않은 키를 하드 코딩 하는 것입니다. 이 방법은 편리 하지만 키가 노출 되지 않습니다. 장치에 대칭 키를 안전 하 게 저장 하 여 일부 위험을 완화할 수 있습니다. 그러나 우선 순위가 편리 하지 않고 궁극적으로 보안 되는 경우 인증에 x.509 인증서 또는 TPM을 사용 합니다. 

### <a name="shared-symmetric-key"></a>공유 대칭 키
공유 대칭 키로 알려진 대칭 키 인증의 변형이 있습니다. 이 접근 방식에는 모든 장치에서 동일한 대칭 키를 사용 하는 것이 포함 됩니다. 장치에서 공유 대칭 키를 사용 하지 않는 것이 좋습니다. 

Pro 공유 대칭 키:
- 간단 하 게 구현 하 고 규모가 저렴 하 게 생성할 수 있습니다. 

공유 대칭 키의 단점: 
- 공격에 매우 취약 합니다. 쉽게 구현할 수 있는 혜택은 위험에 따라 훨씬 얻게. 
- 공유 키를 획득 하는 경우 모든 사용자가 장치를 가장할 수 있습니다.
- 손상 되는 공유 대칭 키를 사용 하는 경우 장치에 대 한 제어 권한이 손실 될 수 있습니다. 

### <a name="making-the-right-choice-for-your-devices"></a>장치를 적절 하 게 선택
인증 방법을 선택 하려면 고유한 제조 프로세스의 각 접근 방식에 대 한 이점과 비용을 고려해 야 합니다.  장치 인증의 경우에는 일반적으로 지정 된 접근 방법의 보안 방법과의 편리한 방식 간에 역 관계가 있습니다.  

## <a name="installing-certificates-on-iot-devices"></a>IoT 장치에 인증서 설치
X.509 인증서를 사용 하 여 IoT 장치를 인증 하는 경우이 섹션에서는 제조 프로세스에 인증서를 통합 하는 방법에 대 한 지침을 제공 합니다. 몇 가지 사항을 결정 해야 합니다.  여기에는 일반적인 인증서 변수, 인증서를 생성 하는 시기 및 설치 시기에 대 한 결정이 포함 됩니다. 

암호를 사용 하는 데 사용 하는 경우 모든 장치에서 동일한 암호를 사용할 수 있는 것과 동일한 방식으로 모든 장치에서 동일한 인증서를 사용할 수 없는 이유를 요구할 수 있습니다. 첫째, 모든 곳에서 동일한 암호를 사용 하는 것은 위험 합니다. 이 연습에서는 몇 년 전에 미국 동부 지역에서 DNS를 다운 시킨 회사를 비롯 하 여 주요 DDoS 공격에 대 한 회사를 노출 했습니다. 개인 계정 에서도 동일한 암호를 어디에서 나 사용 하지 마세요. 둘째, 인증서는 암호가 아니라 고유한 id입니다. 암호는 모든 사용자가 보안 빌딩에서 도어를 여는 데 사용할 수 있는 비밀 코드와 같습니다.  사용자가 알고 있는 것 이며, 모든 사용자에 게 암호를 제공 하 여 입구를 얻을 수 있습니다.  인증서는 사진 및 기타 세부 정보를 포함 하는 드라이버의 라이선스와 유사 하며, 가드에 게 보안 빌드에 대 한 정보를 표시할 수 있습니다. 사용자가 누구에 게 연결 되어 있습니다.  Guard가 운전 면허와 정확히 일치 하는 경우에만 라이선스 (id)를 사용 하 여 입구를 얻을 수 있습니다. 

### <a name="variables-involved-in-certificate-decisions"></a>인증서 결정에 관련 된 변수
다음 변수와 각 변수가 전반적인 제조 프로세스에 미치는 영향을 고려 합니다. 

#### <a name="where-the-certificate-root-of-trust-comes-from"></a>신뢰의 인증서 루트를 가져오는 위치
PKI (공개 키 인프라)를 관리 하는 데 비용이 많이 들고 복잡할 수 있습니다.  특히 회사에서 PKI를 관리 하는 경험이 없는 경우 옵션은 다음과 같습니다.
- 타사 PKI를 사용 합니다. 타사 인증서 공급 업체에서 중간 서명 인증서를 구입할 수 있습니다. 또는 개인 CA (인증 기관)를 사용할 수 있습니다. 
- 자체 관리 PKI를 사용 합니다. 자신의 PKI 시스템을 유지 관리 하 고 자신의 인증서를 생성할 수 있습니다.
- [Azure Sphere](https://azure.microsoft.com/services/azure-sphere/) 보안 서비스를 사용 합니다. 이 옵션은 Azure Sphere 장치에만 적용 됩니다. 

#### <a name="where-certificates-are-stored"></a>인증서가 저장 되는 위치
인증서가 저장 되는 위치에 대 한 결정에 영향을 주는 몇 가지 요소가 있습니다. 이러한 요인에는 장치 유형, 예상 수익 여백 (보안 저장소를 사용할 수 있는지 여부), 장치 기능 및 사용할 수 있는 장치에 대 한 기존 보안 기술이 포함 됩니다. 다음 옵션을 살펴보세요.
- HSM (하드웨어 보안 모듈)에서 HSM을 사용 하는 것이 좋습니다. 장치의 제어 보드에 이미 HSM이 설치 되어 있는지 확인 합니다. HSM이 없는 경우 하드웨어 제조업체와 협력 하 여 요구 사항을 충족 하는 HSM을 식별 합니다.
- 디스크의 안전한 장소 (예: 티 (신뢰할 수 있는 실행 환경)).
- 로컬 파일 시스템 또는 인증서 저장소에 있습니다. 예를 들어 Windows 인증서 저장소입니다. 

#### <a name="connectivity-at-the-factory"></a>팩터리에 대 한 연결
공장에서의 연결은 장치에 설치할 인증서를 가져올 방법과 시기를 결정 합니다. 연결 옵션은 다음과 같습니다.
- Connectivity. 연결 하는 것이 가장 좋습니다. 인증서를 로컬로 생성 하는 프로세스를 간소화 합니다. 
- 연결이 없습니다. 이 경우 CA에서 서명 된 인증서를 사용 하 여 장치 인증서를 로컬 및 오프 라인으로 생성 합니다. 
- 연결이 없습니다. 이 경우 미리 생성 된 인증서를 가져올 수 있습니다. 또는 오프 라인 PKI를 사용 하 여 로컬로 인증서를 생성할 수 있습니다.

#### <a name="audit-requirement"></a>감사 요구 사항
생성 하는 장치 유형에 따라 장치에 장치 id가 설치 되는 방식에 대 한 감사 내역을 만들기 위한 규제 요구 사항이 있을 수 있습니다. 감사는 상당한 프로덕션 비용을 추가 합니다. 따라서 대부분의 경우 필요한 경우에만이 작업을 수행 합니다. 감사가 필요한 지 여부를 확신할 수 없으면 회사의 법률 부서에 문의 하세요. 감사 옵션은 다음과 같습니다. 
- 중요 한 업계는 아닙니다. 감사가 필요 하지 않습니다.
- 중요 한 업계. 인증서는 규정 준수 인증 요구 사항에 따라 안전한 방에 설치 되어야 합니다. 인증서를 설치 하는 데 안전한 공간이 필요한 경우 장치에 인증서를 설치 하는 방법을 이미 알고 있을 수 있습니다. 그리고 이미 감사 시스템이 준비 되어 있을 것입니다. 

#### <a name="length-of-certificate-validity"></a>인증서 유효성의 길이
드라이버의 라이선스 처럼 인증서는 생성 될 때 설정 되는 만료 날짜가 있습니다. 인증서 유효 기간에 대 한 옵션은 다음과 같습니다.
- 갱신이 필요 하지 않습니다.  이 방법은 긴 갱신 기간을 사용 하므로 장치의 수명 동안 인증서를 갱신할 필요가 없습니다. 이러한 접근 방식은 편리 하지만 위험할 수도 있습니다.  장치에서 HSM과 같은 보안 저장소를 사용 하 여 위험을 줄일 수 있습니다. 그러나 수명이 긴 인증서를 사용 하지 않는 것이 좋습니다.
- 갱신 해야 합니다.  장치의 수명 동안 인증서를 갱신 해야 합니다. 인증서 유효성의 길이는 컨텍스트에 따라 다르며 갱신 전략이 필요 합니다.  전략에는 인증서를 가져오는 위치 및 갱신 프로세스에서 사용 해야 하는 장치에서 사용 하는 공중파 기능의 유형이 포함 되어야 합니다. 

### <a name="when-to-generate-certificates"></a>인증서를 생성 하는 경우
팩터리의 인터넷 연결 기능은 인증서를 생성 하는 프로세스에 영향을 줍니다. 인증서를 생성 하는 시기에 대 한 몇 가지 옵션이 있습니다. 

- 미리 로드 된 인증서.  일부 HSM 공급 업체는 HSM 공급 업체가 고객에 대 한 인증서를 설치 하는 프리미엄 서비스를 제공 합니다. 첫째, 고객은 HSM 공급 업체에 서명 인증서에 대 한 액세스를 제공 합니다. 그런 다음 HSM 공급 업체는 고객이 구매 하는 각 HSM에 해당 서명 인증서로 서명 된 인증서를 설치 합니다. 모든 고객은 장치에 HSM을 설치 해야 합니다. 이 서비스는 비용을 추가 하지만 제조 프로세스를 간소화 하는 데 도움이 됩니다.  또한 인증서를 설치 하는 경우의 질문을 해결 합니다.
- 장치에서 생성 된 인증서입니다.  장치가 내부적으로 인증서를 생성 하는 경우 장치에서 공용 x.509 인증서를 추출 하 여 DPS에 등록 해야 합니다. 
- 연결 된 팩터리.  팩터리가 연결 된 경우 필요할 때마다 장치 인증서를 생성할 수 있습니다.
- 사용자의 PKI를 사용 하는 오프 라인 팩터리. 팩터리가 연결 되지 않은 상태에서 오프 라인 지원으로 자신의 PKI를 사용 하는 경우 필요할 때 인증서를 생성할 수 있습니다.
- 타사 PKI를 사용 하는 오프 라인 팩터리. 팩터리에 연결이 없고 타사 PKI를 사용 하는 경우 미리 인증서를 생성 해야 합니다. 그리고 연결 된 위치에서 인증서를 생성 해야 합니다. 

### <a name="when-to-install-certificates"></a>인증서를 설치 하는 경우
IoT 장치에 대 한 인증서를 생성 한 후 장치에 설치할 수 있습니다. 

HSM을 사용 하 여 미리 로드 된 인증서를 사용 하는 경우 프로세스가 간소화 됩니다. 장치에 HSM이 설치 되 면 장치 코드에서 액세스할 수 있습니다. 그런 다음 hsm Api를 호출 하 여 HSM에 저장 된 인증서에 액세스 합니다. 이 접근 방식은 제조 프로세스에 가장 편리 합니다. 

미리 로드 된 인증서를 사용 하지 않는 경우 프로덕션 프로세스의 일부로 인증서를 설치 해야 합니다. 가장 간단한 방법은 초기 펌웨어 이미지를 깜박일 때 HSM에 인증서를 설치 하는 것입니다. 프로세스에서 각 장치에 이미지를 설치 하는 단계를 추가 해야 합니다. 이 단계를 수행 하 고 나면 장치를 패키지 하 고 발송 하기 전에 최종 품질 검사 및 기타 단계를 실행할 수 있습니다. 

단일 단계에서 설치 프로세스와 최종 품질 검사를 실행할 수 있는 소프트웨어 도구를 사용할 수 있습니다. 이러한 도구를 수정 하 여 인증서를 생성 하거나 미리 생성 된 인증서 저장소에서 인증서를 끌어올 수 있습니다. 그런 다음 소프트웨어를 설치 해야 하는 곳에서 인증서를 설치할 수 있습니다. 이 유형의 소프트웨어 도구를 사용 하 여 프로덕션 품질 제조를 대규모로 실행할 수 있습니다. 

장치에 인증서를 설치한 후 다음 단계는 [DPS](about-iot-dps.md)에 장치를 등록 하는 방법을 알아봅니다. 

## <a name="integrating-a-tpm-into-the-manufacturing-process"></a>제조 프로세스에 TPM 통합
TPM을 사용 하 여 IoT 장치를 인증 하는 경우이 섹션에서 제공 하는 지침을 제공 합니다. 이 지침은 HMAC (해시 기반 메시지 인증 코드) 키 지원이 있는 널리 사용 되는 TPM 2.0 장치에 대해 설명 합니다. TPM 칩에 대 한 TPM 사양은 TCG(신뢰할 수 있는 컴퓨팅 그룹)에서 유지 관리 되는 ISO 표준입니다. TPM에 대 한 자세한 내용은 [tpm 2.0](https://trustedcomputinggroup.org/tpm-library-specification/) 및 [ISO/IEC 11889](https://www.iso.org/standard/66510.html)에 대 한 사양을 참조 하십시오. 

### <a name="taking-ownership-of-the-tpm"></a>TPM의 소유권 가져오기
TPM 칩을 사용 하 여 장치를 제조 하는 중요 한 단계는 TPM의 소유권을 획득 하는 것입니다. 이 단계는 장치 소유자에 게 키를 제공할 수 있도록 하기 위해 필요 합니다. 첫 번째 단계는 장치에서 EK (인증 키)를 추출 하는 것입니다. 다음 단계는 실제로 소유권을 요청 하는 것입니다. 이 작업을 수행 하는 방법은 사용 하는 TPM 및 운영 체제에 따라 달라 집니다. 필요한 경우 TPM 제조업체나 장치 운영 체제의 개발자에 게 문의 하 여 소유권을 요청 하는 방법을 확인 합니다. 

제조 프로세스에서 다양 한 시간에 EK 및 클레임 소유권을 추출 하 여 유연성을 높일 수 있습니다. 대부분의 제조업체는 HSM (하드웨어 보안 모듈)을 추가 하 여 장치 보안을 강화 함으로써 이러한 유연성을 활용 합니다. 이 섹션에서는 EK를 추출 하는 시기, TPM의 소유권을 주장 하는 시기 및 이러한 단계를 제조 타임 라인에 통합 하기 위한 고려 사항에 대 한 지침을 제공 합니다. 

> [!IMPORTANT]
> 다음 지침에서는 불연속, 펌웨어 또는 통합 TPM을 사용 한다고 가정 합니다. 해당 하는 위치에서 지침은 불연속 또는 소프트웨어 TPM을 사용 하는 방법에 대 한 참고 사항을 추가 합니다. 소프트웨어 TPM을 사용 하는 경우이 지침에 포함 되지 않는 추가 단계가 있을 수 있습니다. 소프트웨어 Tpm에는이 문서에서 다루지 않는 다양 한 구현이 있습니다.  일반적으로 소프트웨어 TPM을 다음과 같은 일반 제조 타임 라인에 통합할 수 있습니다. 그러나 소프트웨어에서 에뮬레이트된 TPM은 프로토타입 및 테스트에 적합 하지만 불연속, 펌웨어 또는 통합 된 TPM과 동일한 수준의 보안을 제공할 수 없습니다. 일반적으로 프로덕션 환경에서 소프트웨어 TPM을 사용 하지 않는 것이 좋습니다.

### <a name="general-manufacturing-timeline"></a>일반 제조 타임 라인
다음 타임 라인은 TPM이 프로덕션 프로세스를 거치는 방법과 장치에서 종료 되는 방법을 보여 줍니다. 각 제조 프로세스는 고유 하며,이 타임 라인은 가장 일반적인 패턴을 보여 줍니다. 타임 라인에서는 키를 사용 하 여 특정 작업을 수행 하는 시기에 대 한 지침을 제공 합니다. 

#### <a name="step-1-tpm-is-manufactured"></a>1 단계: TPM이 제조 됨
- 장치에서 사용할 수 있도록 제조업체에서 Tpm을 구입 하는 경우 EK_pubs (공용 인증 키)를 추출 하는 경우를 참조 하세요. 제조업체에서 배송 된 장치와 EK_pubs 목록을 제공 하는 경우 유용 합니다. 
    > [!NOTE]
    > 프로 비전 서비스에서 공유 액세스 정책을 사용 하 여 등록 목록에 대 한 쓰기 권한을 TPM 제조업체에 부여할 수 있습니다.  이 접근 방식을 통해 등록 목록에 Tpm을 추가할 수 있습니다.  하지만이는 제조 프로세스의 초기 단계 이며 TPM 제조업체의 신뢰가 필요 합니다. 사용자의 책임에 따라이 작업을 수행 합니다. 

- Tpm을 제조 하 여 장치 제조업체에 판매 하는 경우 고객에 게 실제 Tpm과 함께 EK_pubs 목록을 제공 하는 것이 좋습니다.  EK_pubs를 사용 하 여 고객에 게 프로세스의 단계를 저장 합니다. 
- 사용자 고유의 장치와 함께 사용할 Tpm을 제조 하는 경우 프로세스에서 EK_pub를 추출 하는 데 가장 편리한 지점을 식별 합니다. 타임 라인의 나머지 지점에서 EK_pub을 추출할 수 있습니다. 

#### <a name="step-2-tpm-is-installed-into-a-device"></a>2 단계: TPM이 장치에 설치 됨
프로덕션 프로세스의이 시점에서 장치가 사용 될 DPS 인스턴스를 알고 있어야 합니다. 따라서 자동화 된 프로 비전을 위해 등록 목록에 장치를 추가할 수 있습니다. 자동 장치 프로 비전에 대 한 자세한 내용은 [DPS 설명서](about-iot-dps.md)를 참조 하십시오.
- EK_pub를 추출 하지 않은 경우 지금이 작업을 수행 하는 것이 좋습니다. 
- TPM의 설치 프로세스에 따라이 단계를 수행 하 여 TPM의 소유권을 가져올 수도 있습니다. 

#### <a name="step-3-device-has-firmware-and-software-installed"></a>3 단계: 장치에 펌웨어 및 소프트웨어가 설치 되어 있음
프로세스의이 시점에서 프로 비전을 위한 ID 범위 및 전역 URL과 함께 DPS 클라이언트를 설치 합니다.
- 이제 EK_pub를 추출할 수 있는 마지막 기회입니다. 타사가 장치에 소프트웨어를 설치 하는 경우 EK_pub를 먼저 추출 하는 것이 좋습니다.
- 제조 프로세스의이 시점에서는 TPM의 소유권을 가져오는 것이 좋습니다.  
    > [!NOTE]
    > 소프트웨어 TPM을 사용 하는 경우 지금 설치할 수 있습니다.  동시에 EK_pub을 추출 합니다.

#### <a name="step-4-device-is-packaged-and-sent-to-the-warehouse"></a>4 단계: 장치가 포장 되어 웨어하우스로 전송 됨
장치는 배포 전 6-12 개월 동안 웨어하우스에 앉아 있을 수 있습니다. 

#### <a name="step-5-device-is-installed-into-the-location"></a>5 단계: 장치를 위치에 설치 합니다.
장치가 최종 위치에 도착 한 후에는 DPS를 사용 하 여 자동화 된 프로 비전을 거칩니다.

자세한 내용은 [프로 비전](about-iot-dps.md#provisioning-process) 및 [TPM 증명](concepts-tpm-attestation.md)을 참조 하세요. 

## <a name="resources"></a>리소스

이 문서의 권장 보안 방법 외에도 Azure IoT는 보안 하드웨어를 선택 하 고 보안 IoT 배포를 만드는 데 도움이 되는 리소스를 제공 합니다. 
- 배포 프로세스를 안내 하는 Azure IoT [보안 권장 사항](../iot-fundamentals/security-recommendations.md) 
- [Azure Security Center](https://azure.microsoft.com/services/security-center/) 는 보안 IoT 배포를 만드는 데 도움이 되는 서비스를 제공 합니다. 
- 하드웨어 환경을 평가 하는 데 도움이 필요한 경우 [IoT 보안 평가](https://download.microsoft.com/download/D/3/9/D3948E3C-D5DC-474E-B22F-81BA8ED7A446/Evaluating_Your_IOT_Security_whitepaper_EN_US.pdf)백서를 참조 하세요. 
- 보안 하드웨어를 선택 하는 방법에 대 한 도움말 [은 IoT 배포를 위한 적절 한 보안 하드웨어](https://download.microsoft.com/download/C/0/5/C05276D6-E602-4BB1-98A4-C29C88E57566/The_right_secure_hardware_for_your_IoT_deployment_EN_US.pdf)를 참조 하세요. 