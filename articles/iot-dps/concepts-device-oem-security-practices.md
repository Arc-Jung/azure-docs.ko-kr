---
title: 제조업체를 위한 보안 관행 - Azure IoT 장치 프로비저닝 서비스
description: Azure IoT 장치 프로비저닝 서비스(DPS)에 등록할 장치를 준비하는 OEM 및 장치 제조업체에 대한 일반적인 보안 방법을 간략하게 다투는 것입니다.
author: timlt
ms.author: timlt
ms.date: 3/02/2020
ms.topic: conceptual
ms.service: iot-dps
ms.custom: iot-p0-scenario, iot-devices-deviceOEM
ms.reviewer: nberdy
ms.openlocfilehash: 3854f353e4ea0b78c0162681e0b89d37419105d8
ms.sourcegitcommit: c5661c5cab5f6f13b19ce5203ac2159883b30c0e
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/01/2020
ms.locfileid: "80529516"
---
# <a name="security-practices-for-azure-iot-device-manufacturers"></a>Azure IoT 장치 제조업체를 위한 보안 사례
더 많은 제조업체가 IoT 장치를 출시함에 따라 일반적인 관행에 대한 지침을 식별하는 것이 좋습니다. 이 문서에서는 Azure IoT 장치 프로비저닝 서비스(DPS)와 함께 사용할 장치를 제조할 때 고려해야 할 권장 보안 방법을 요약합니다.  

> [!div class="checklist"]
> * 장치 인증 옵션 선택
> * IoT 장치에 인증서 설치
> * 신뢰할 수 있는 플랫폼 모듈(TPM)을 제조 공정에 통합

## <a name="selecting-device-authentication-options"></a>장치 인증 옵션 선택
모든 IoT 장치 보안 조치의 궁극적인 목표는 안전한 IoT 솔루션을 만드는 것입니다. 그러나 하드웨어 제한, 비용 및 보안 전문 지식과 같은 문제는 모두 선택한 옵션에 영향을 미칩니다. 또한 보안에 대한 접근 방식은 IoT 장치가 클라우드에 연결하는 방식에 영향을 미칩니다. 고려해야 할 [IoT 보안에는 여러 가지 요소가](https://www.microsoft.com/research/publication/seven-properties-highly-secure-devices/) 있지만 모든 고객이 발생하는 핵심 요소는 사용할 인증 유형입니다. 

널리 사용되는 세 가지 인증 유형은 X.509 인증서, 신뢰할 수 있는 플랫폼 모듈(TPM) 및 대칭 키입니다. 다른 인증 유형이 존재하지만 Azure IoT에서 솔루션을 빌드하는 대부분의 고객은 이러한 세 가지 유형 중 하나를 사용합니다. 이 문서의 나머지 부분에서는 각 인증 유형을 사용하는 장단점을 조사합니다.

### <a name="x509-certificate"></a>X.509 인증서
X.509 인증서는 인증에 사용할 수 있는 디지털 ID의 한 유형입니다. X.509 인증서 표준은 [IETF RFC 5280에](https://tools.ietf.org/html/rfc5280)문서화되어 있습니다. Azure IoT에는 인증서를 인증하는 두 가지 방법이 있습니다.
- 지문. 지문 알고리즘은 인증서에서 실행되어 육각형 문자열을 생성합니다. 생성된 문자열은 인증서에 대한 고유한 식별자입니다. 
- 전체 체인을 기반으로 하는 CA 인증입니다. 인증서 체인은 최종 엔터티(EE) 인증서를 인증하는 데 필요한 모든 인증서의 계층 적 목록입니다. EE 인증서를 인증하려면 신뢰할 수 있는 루트 CA를 포함하여 체인의 각 인증서를 인증해야 합니다. 

X.509에 대한 장점 :
- X.509는 Azure IoT에서 지원되는 가장 안전한 인증 유형입니다.
- X.509는 인증서 관리를 위해 높은 수준의 제어를 허용합니다.
- 많은 공급업체에서 X.509 기반 인증 솔루션을 제공할 수 있습니다.

X.509에 대한 단점 :
- 많은 고객이 인증서를 위해 외부 공급업체에 의존해야 할 수 있습니다.
- 인증서 관리는 비용이 많이 들 수 있으며 총 솔루션 비용이 추가됩니다.
- 물류를 잘 생각하지 않으면 인증서 수명 주기 관리가 어려울 수 있습니다. 

### <a name="trusted-platform-module-tpm"></a>TPM(신뢰할 수 있는 플랫폼 모듈)
[ISO/IEC 11889라고도](https://www.iso.org/standard/66510.html)하는 TPM은 암호화 키를 안전하게 생성하고 저장하기 위한 표준입니다. TPM은 표준을 구현하는 모듈과 상호 작용하는 가상 또는 물리적 I/O 장치도 말합니다. TPM 장치는 개별 하드웨어, 통합 하드웨어, 펌웨어 기반 모듈 또는 소프트웨어 기반 모듈로 존재할 수 있습니다. 

TPM과 대칭 키 사이에는 두 가지 주요 차이점이 있습니다. 
- TPM 칩은 X.509 인증서를 저장할 수도 있습니다.
- DPS의 TPM 증명은 비대칭 인증의 한 형태인 TPM 인증 키(EK)를 사용합니다. 비대칭 인증을 사용하면 암호화에 공개 키가 사용되고 암호 해독에 별도의 개인 키가 사용됩니다. 반대로 대칭 키는 개인 키가 암호화 및 암호 해독에 모두 사용되는 대칭 인증을 사용합니다. 

TPM에 대한 장점 :
- TPM은 운영 체제에 대한 기본 제공 지원과 함께 많은 Windows 장치에서 표준 하드웨어로 포함됩니다. 
- TPM 증명은 SAS(공유 액세스 서명) 토큰 기반 대칭 키 증명보다 보안이 더 쉽습니다.
- 장치 자격 증명을 쉽게 만료하고 갱신하거나 롤할 수 있습니다. DPS는 TPM 장치가 다시 프로비전될 때마다 IoT Hub 자격 증명을 자동으로 롤롤링합니다.

TPM에 대 한 단점: 
- TPM은 복잡하며 사용하기 어려울 수 있습니다. 
- 물리적 TPM 또는 품질 에뮬레이터가 없는 경우 TPM을 사용 하 고 응용 프로그램 개발이 어렵습니다.
- 하드웨어에 TPM을 포함하려면 장치의 보드를 다시 디자인해야 할 수 있습니다. 
- TPM에서 EK를 롤링하면 TPM의 ID가 삭제되고 새 ID가 생성됩니다. 물리적 칩은 동일하게 유지되지만 IoT 솔루션에 새로운 ID가 있습니다.

### <a name="symmetric-key"></a>대칭 키
대칭 키를 사용하면 동일한 키가 메시지를 암호화하고 해독하는 데 사용됩니다. 따라서 동일한 키가 장치와 인증하는 서비스에 모두 알려져 있습니다. Azure IoT는 SAS 토큰 기반 대칭 키 연결을 지원합니다. 대칭 키 인증은 X.509 인증을 통해 키를 보호하고 동일한 수준의 보안을 달성하기 위해 소유자의 상당한 책임이 필요합니다. 대칭 키를 사용하는 경우 HSM(하드웨어 보안 모듈)을 사용하여 키를 보호하는 것이 좋습니다.

대칭 키에 대한 장점 :
- 대칭 키를 사용하는 것은 인증을 시작하는 가장 간단하고 비용이 가장 저렴한 방법입니다.
- 대칭 키를 사용하면 생성할 추가 키가 없기 때문에 프로세스가 간소화됩니다. 

대칭 키에 대한 단점 : 
- 대칭 키는 키를 보호하기 위해 상당한 노력을 기울입니다. 동일한 키가 장치와 클라우드 간에 공유되므로 두 위치에서 키를 보호해야 합니다. 반대로 TPM 및 X.509 인증서의 문제는 개인 키를 공개하지 않고 공개 키를 소유하고 있음을 증명합니다.
- 대칭 키를 통해 잘못된 보안 관행을 쉽게 따를 수 있습니다. 대칭 키의 일반적인 경향은 장치에서 암호화되지 않은 키를 하드 코딩하는 것입니다. 이 방법은 편리하지만 키가 취약해 둡습니다. 장치에 대칭 키를 안전하게 저장하여 일부 위험을 완화할 수 있습니다. 그러나 우선 순위가 편의가 아닌 궁극적으로 보안인 경우 인증을 위해 X.509 인증서 또는 TPM을 사용합니다. 

### <a name="shared-symmetric-key"></a>공유 대칭 키
공유 대칭 키라고 하는 대칭 키 인증의 변형이 있습니다. 이 방법은 모든 장치에서 동일한 대칭 키를 사용하는 것입니다. 장치에서 공유 대칭 키를 사용하지 않는 것이 좋습니다. 

공유 대칭 키에 대한 프로:
- 구현이 간단하고 대규모로 생산비용이 저렴합니다. 

공유 대칭 키에 대한 단점: 
- 공격에 매우 취약합니다. 쉬운 구현의 이점은 위험보다 훨씬 큽니다. 
- 공유 키를 얻은 경우 누구나 기기를 가장할 수 있습니다.
- 손상된 공유 대칭 키에 의존하는 경우 장치를 제어할 수 없게 될 수 있습니다. 

### <a name="making-the-right-choice-for-your-devices"></a>장치에 적합한 선택
인증 방법을 선택하려면 고유한 제조 프로세스에 대한 각 접근 방식의 이점과 비용을 고려해야 합니다.  장치 인증의 경우 일반적으로 지정된 접근 방식이 얼마나 안전한지, 얼마나 편리한지 간에 역관계가 있습니다.  

## <a name="installing-certificates-on-iot-devices"></a>IoT 장치에 인증서 설치
X.509 인증서를 사용하여 IoT 장치를 인증하는 경우 이 섹션에서는 인증서를 제조 프로세스에 통합하는 방법에 대한 지침을 제공합니다. 몇 가지 결정을 내려야 합니다.  여기에는 일반적인 인증서 변수, 인증서 생성 시기 및 인증서 설치 시기에 대한 결정이 포함됩니다. 

암호를 사용하는 데 익숙한 경우 모든 장치에서 동일한 암호를 사용할 수 있는 것과 동일한 방식으로 모든 장치에서 동일한 인증서를 사용할 수 없는 이유를 물어볼 수 있습니다. 첫째, 어디서나 동일한 암호를 사용하는 것은 위험합니다. 이 관행은 몇 년 전 미국 동부 해안에서 DNS를 격추시킨 것을 포함하여 주요 DDoS 공격에 회사를 노출시켰습니다. 개인 계정으로도 어디서나 동일한 암호를 사용하지 마십시오. 둘째, 인증서는 암호가 아니라 고유한 ID입니다. 암호는 누구나 보안 건물에서 문을 여는 데 사용할 수 있는 비밀 코드와 같습니다.  그것은 당신이 알고있는 무언가, 당신은 입구를 얻기 위해 사람에게 암호를 제공 할 수 있습니다.  인증서는 사진 및 기타 세부 정보가있는 운전 면허증과 유사하며 보안 건물에 들어가기 위해 경비원에게 보여줄 수 있습니다. 그것은 당신이 누구와 연결되어 있습니다.  경비원이 운전 면허증과 정확하게 일치하는 경우, 당신은 입구를 얻기 위해 라이센스 (신원)를 사용할 수 있습니다. 

### <a name="variables-involved-in-certificate-decisions"></a>인증서 결정과 관련된 변수
다음 변수와 각 변수가 전체 제조 공정에 미치는 영향을 고려합니다. 

#### <a name="where-the-certificate-root-of-trust-comes-from"></a>신뢰의 인증서 루트가 있는 위치
PKI(공개 키 인프라)를 관리하는 데 는 비용이 많이 들고 복잡할 수 있습니다.  특히 회사에서 PKI를 관리한 경험이 없는 경우. 옵션은 다음과 같습니다.
- 타사 PKI를 사용합니다. 타사 인증서 공급업체에서 중간 서명 인증서를 구입할 수 있습니다. 또는 개인 인증 기관(CA)을 사용할 수 있습니다. 
- 자체 관리되는 PKI를 사용합니다. 사용자 고유의 PKI 시스템을 유지하고 고유한 인증서를 생성할 수 있습니다.
- Azure [Sphere](https://azure.microsoft.com/services/azure-sphere/) 보안 서비스를 사용합니다. 이 옵션은 Azure Sphere 장치에만 적용됩니다. 

#### <a name="where-certificates-are-stored"></a>인증서가 저장되는 위치
인증서가 저장되는 위치에 대한 결정에 영향을 주는 몇 가지 요소가 있습니다. 이러한 요소에는 장치 유형, 예상 이윤(보안 저장소를 감당할 수 있는지 여부), 장치 기능 및 사용할 수 있는 장치의 기존 보안 기술이 포함됩니다. 다음 옵션을 살펴보세요.
- 하드웨어 보안 모듈(HSM)에서. HSM을 사용하는 것이 좋습니다. 장치의 제어 보드에 HSM이 이미 설치되어 있는지 확인합니다. HSM이 없는 경우 하드웨어 제조업체와 협력하여 요구 사항을 충족하는 HSM을 식별합니다.
- 신뢰할 수 있는 실행 환경(TEE)과 같은 디스크의 안전한 위치에 있습니다.
- 로컬 파일 시스템 또는 인증서 저장소에서. 예를 들어 Windows 인증서 저장소입니다. 

#### <a name="connectivity-at-the-factory"></a>공장에서의 연결성
공장에서의 연결은 장치에 인증서를 설치하는 방법과 시기를 결정합니다. 연결 옵션은 다음과 같습니다.
- 연결. 연결이 최적이며 로컬에서 인증서를 생성하는 프로세스를 간소화합니다. 
- 연결이 없습니다. 이 경우 CA에서 서명된 인증서를 사용하여 로컬 및 오프라인에서 장치 인증서를 생성합니다. 
- 연결이 없습니다. 이 경우 미리 생성된 인증서를 가져올 수 있습니다. 또는 오프라인 PKI를 사용하여 로컬로 인증서를 생성할 수 있습니다.

#### <a name="audit-requirement"></a>감사 요구 사항
생산하는 장치 유형에 따라 장치에 장치 ID가 설치되는 방식에 대한 감사 추적을 만드는 규정 요구 사항이 있을 수 있습니다. 감사는 상당한 생산 비용을 추가합니다. 따라서 대부분의 경우 필요한 경우에만 수행하십시오. 감사가 필요한지 확실하지 않은 경우 회사의 법률 부서에 문의하십시오. 감사 옵션은 다음과 같습니다. 
- 민감한 산업이 아닙니다. 감사가 필요하지 않습니다.
- 민감한 산업. 인증서는 규정 준수 인증 요구 사항에 따라 안전한 방에 설치해야 합니다. 인증서를 설치하기 위한 보안 공간이 필요한 경우 인증서가 장치에 설치되는 방법을 이미 알고 있을 수 있습니다. 그리고 이미 감사 시스템이 마련되어 있을 것입니다. 

#### <a name="length-of-certificate-validity"></a>인증서 유효 기간
운전 면허증과 마찬가지로 인증서에는 인증서가 생성될 때 설정된 만료 날짜가 있습니다. 인증서 유효 기간에 대한 옵션은 다음과 같습니다.
- 갱신이 필요하지 않습니다.  이 방법은 긴 갱신 기간을 사용하므로 장치의 수명 동안 인증서를 갱신할 필요가 없습니다. 이러한 접근 방식은 편리하지만 위험하기도 합니다.  장치에서 HSM과 같은 보안 저장소를 사용하여 위험을 줄일 수 있습니다. 그러나 권장되는 방법은 수명이 긴 인증서를 사용하지 않는 것입니다.
- 갱신이 필요합니다.  장치의 수명 동안 인증서를 갱신해야 합니다. 인증서 유효 기간은 컨텍스트에 따라 다르므로 갱신 전략이 필요합니다.  전략에는 인증서를 받는 위치와 갱신 프로세스에서 장치가 사용해야 하는 공중파 기능 유형이 포함되어야 합니다. 

### <a name="when-to-generate-certificates"></a>인증서를 생성하는 시기
공장의 인터넷 연결 기능은 인증서 생성 프로세스에 영향을 미칩니다. 인증서를 생성하는 시기에 대한 몇 가지 옵션이 있습니다. 

- 사전 로드된 인증서입니다.  일부 HSM 공급업체는 HSM 공급업체가 고객을 위해 인증서를 설치하는 프리미엄 서비스를 제공합니다. 첫째, 고객은 HSM 공급업체에 서명 인증서에 대한 액세스 권한을 부여합니다. 그런 다음 HSM 공급업체는 고객이 구매하는 각 HSM에 서명된 인증서를 설치합니다. 고객이 해야 할 일은 장치에 HSM을 설치하는 것입니다. 이 서비스는 비용을 추가하지만 제조 프로세스를 간소화하는 데 도움이 됩니다.  그리고 인증서를 설치할 시기에 대한 문제를 해결합니다.
- 장치 생성 인증서입니다.  장치에서 인증서를 내부적으로 생성하는 경우 장치에서 공용 X.509 인증서를 추출하여 DPS에 등록해야 합니다. 
- 연결된 공장.  팩터리에 연결되어 있는 경우 필요할 때마다 장치 인증서를 생성할 수 있습니다.
- 자신의 PKI와 오프라인 공장. 팩터리에 연결이 없고 오프라인 지원을 통해 자체 PKI를 사용하는 경우 필요할 때 인증서를 생성할 수 있습니다.
- 타사 PKI와 오프라인 공장. 팩터리에 연결이 없고 타사 PKI를 사용하는 경우 인증서를 미리 생성해야 합니다. 또한 연결이 있는 위치에서 인증서를 생성해야 합니다. 

### <a name="when-to-install-certificates"></a>인증서 설치 시기
IoT 장치에 대한 인증서를 생성한 후 장치에 설치할 수 있습니다. 

HSM을 사용하여 미리 로드된 인증서를 사용하는 경우 프로세스가 간소화됩니다. 장치에 HSM을 설치한 후 장치 코드에 액세스할 수 있습니다. 그런 다음 HSM API를 호출하여 HSM에 저장된 인증서에 액세스합니다. 이 방법은 제조 공정에 가장 편리합니다. 

미리 로드된 인증서를 사용하지 않는 경우 프로덕션 프로세스의 일부로 인증서를 설치해야 합니다. 가장 간단한 방법은 초기 펌웨어 이미지를 플래시하는 동시에 HSM에 인증서를 설치하는 것입니다. 프로세스는 각 장치에 이미지를 설치하는 단계를 추가해야 합니다. 이 단계 후에는 장치를 패키징하고 배송하기 전에 최종 품질 검사 및 기타 단계를 실행할 수 있습니다. 

한 단계에서 설치 프로세스 및 최종 품질 검사를 실행할 수 있는 소프트웨어 도구가 있습니다. 이러한 도구를 수정하여 인증서를 생성하거나 미리 생성된 인증서 저장소에서 인증서를 가져올 수 있습니다. 그런 다음 소프트웨어를 설치해야 하는 곳에 인증서를 설치할 수 있습니다. 이러한 유형의 소프트웨어 도구를 사용하면 생산 품질 제조를 대규모로 실행할 수 있습니다. 

장치에 인증서가 설치되면 다음 단계는 [DPS로](about-iot-dps.md)장치를 등록하는 방법을 알아보는 것입니다. 

## <a name="integrating-a-tpm-into-the-manufacturing-process"></a>TPM을 제조 공정에 통합
TPM을 사용하여 IoT 장치를 인증하는 경우 이 섹션에서는 지침을 제공합니다. 이 가이드에서는 HMAC(해시 기반 메시지 인증 코드) 키 지원이 있는 널리 사용되는 TPM 2.0 장치를 다룹니다. TPM 칩의 TPM 사양은 신뢰할 수 있는 컴퓨팅 그룹이 유지하는 ISO 표준입니다. TPM에 대한 자세한 내용은 [TPM 2.0](https://trustedcomputinggroup.org/tpm-library-specification/) 및 [ISO/IEC 11889의](https://www.iso.org/standard/66510.html)사양을 참조하십시오. 

### <a name="taking-ownership-of-the-tpm"></a>TPM의 소유권 을 가져
TPM 칩이 있는 장치를 제조하는 데 중요한 단계는 TPM의 소유권을 가지는 것입니다. 장치 소유자에게 키를 제공할 수 있도록 이 단계가 필요합니다. 첫 번째 단계는 장치에서 보증 키(EK)를 추출하는 것입니다. 다음 단계는 실제로 소유권을 주장하는 것입니다. 이 작업을 수행하는 방법은 사용하는 TPM 및 운영 체제에 따라 다릅니다. 필요한 경우 TPM 제조업체 또는 장치 운영 체제 개발자에게 문의하여 소유권을 주장하는 방법을 결정합니다. 

제조 공정에서 EK를 추출하고 다른 시간에 소유권을 주장할 수 있으므로 유연성이 추가됩니다. 많은 제조업체는 장치의 보안을 강화하기 위해 하드웨어 보안 모듈(HSM)을 추가하여 이러한 유연성을 활용합니다. 이 섹션에서는 EK를 추출할 시기, TPM 소유권을 주장하는 시기 및 이러한 단계를 제조 타임라인에 통합하기 위한 고려 사항에 대한 지침을 제공합니다. 

> [!IMPORTANT]
> 다음 지침은 개별, 펌웨어 또는 통합 TPM을 사용한다고 가정합니다. 해당되는 위치에서는 비이터 또는 소프트웨어 TPM 사용에 대한 메모를 추가합니다. 소프트웨어 TPM을 사용하는 경우 이 지침에 포함되지 않는 추가 단계가 있을 수 있습니다. 소프트웨어 TPM에는 이 문서의 범위를 벗어난 다양한 구현이 있습니다.  일반적으로 소프트웨어 TPM을 다음과 같은 일반 제조 일정에 통합할 수 있습니다. 그러나 소프트웨어 에뮬레이트된 TPM은 프로토타이핑 및 테스트에 적합하지만 이산, 펌웨어 또는 통합 TPM과 동일한 수준의 보안을 제공할 수는 없습니다. 일반적으로 프로덕션 환경에서 소프트웨어 TPM을 사용하지 마십시오.

### <a name="general-manufacturing-timeline"></a>일반 제조 일정
다음 타임라인은 TPM이 프로덕션 프로세스를 거쳐 장치에서 끝나는 방법을 보여 줍니다. 각 제조 공정은 고유하며 이 타임라인은 가장 일반적인 패턴을 보여 줍니다. 타임라인은 키로 특정 작업을 수행할 시기에 대한 지침을 제공합니다. 

#### <a name="step-1-tpm-is-manufactured"></a>1단계: TPM이 제조됩니다.
- 제조업체에서 TPM을 구입하여 장치에서 사용할 수 있는 경우 공개 인증 키(EK_pubs)를 추출하는지 확인합니다. 제조업체가 제공된 장치와 함께 EK_pubs 목록을 제공하는 경우 유용합니다. 
    > [!NOTE]
    > 프로비저닝 서비스에서 공유 액세스 정책을 사용하여 TPM 제조업체가 등록 목록에 대한 쓰기 액세스 권한을 부여할 수 있습니다.  이 방법을 사용하면 등록 목록에 TPM을 추가할 수 있습니다.  그러나 이는 제조 공정 초기단계이며 TPM 제조업체에 대한 신뢰가 필요합니다. 자신의 위험에 그렇게. 

- 장치 제조업체에 판매할 TPM을 제조하는 경우 고객에게 실제 TPM과 함께 EK_pubs 목록을 제공하는 것이 좋습니다.  고객에게 EK_pubs 제공하면 프로세스의 한 단계를 절약할 수 있습니다. 
- 자체 장치와 함께 사용할 TPM을 제조하는 경우 프로세스에서 EK_pub 추출하는 것이 가장 편리한 지점을 식별합니다. 타임라인의 나머지 지점에서 EK_pub 추출할 수 있습니다. 

#### <a name="step-2-tpm-is-installed-into-a-device"></a>2단계: TPM이 장치에 설치됨
프로덕션 프로세스의 이 시점에서 장치가 사용할 DPS 인스턴스를 알아야 합니다. 따라서 자동화된 프로비저닝을 위해 등록 목록에 장치를 추가할 수 있습니다. 자동 장치 프로비저닝에 대한 자세한 내용은 [DPS 설명서를](about-iot-dps.md)참조하십시오.
- EK_pub 추출하지 않은 경우 지금이 그렇게 할 수있는 좋은 시간입니다. 
- TPM의 설치 프로세스에 따라 이 단계는 TPM의 소유권을 가져가는 좋은 시기이기도 합니다. 

#### <a name="step-3-device-has-firmware-and-software-installed"></a>3 단계 : 장치에 펌웨어 및 소프트웨어가 설치되어 있습니다.
프로세스의 이 시점에서 프로비저닝을 위한 ID 범위 및 전역 URL과 함께 DPS 클라이언트를 설치합니다.
- 이제 EK_pub 추출할 수 있는 마지막 기회입니다. 타사가 장치에 소프트웨어를 설치하는 경우 먼저 EK_pub 추출하는 것이 좋습니다.
- 제조 공정에서 이 점은 TPM의 소유권을 가지는 데 이상적입니다.  
    > [!NOTE]
    > 소프트웨어 TPM을 사용하는 경우 지금 설치할 수 있습니다.  동시에 EK_pub 추출합니다.

#### <a name="step-4-device-is-packaged-and-sent-to-the-warehouse"></a>4 단계 : 장치가 포장되어 창고로 전송됩니다.
장치는 배포되기 전에 6-12개월 동안 창고에 보관할 수 있습니다. 

#### <a name="step-5-device-is-installed-into-the-location"></a>5 단계 : 장치가 위치에 설치됩니다.
장치가 최종 위치에 도착하면 DPS를 통한 자동 프로비저닝을 거칩니다.

자세한 내용은 [자동 프로비저닝 개념](concepts-auto-provisioning.md) 및 [TPM 증명을](concepts-tpm-attestation.md)참조하십시오. 

## <a name="resources"></a>리소스

이 문서에서 권장되는 보안 방법 외에도 Azure IoT는 보안 하드웨어를 선택하고 안전한 IoT 배포를 만드는 데 도움이 되는 리소스를 제공합니다. 
- 배포 프로세스를 안내하는 Azure IoT [보안 권장 사항입니다.](../iot-fundamentals/security-recommendations.md) 
- [Azure 보안 센터는](https://azure.microsoft.com/services/security-center/) 안전한 IoT 배포를 만드는 데 도움이 되는 서비스를 제공합니다. 
- 하드웨어 환경 평가에 대한 도움말은 [IoT 보안 평가 백서를](https://download.microsoft.com/download/D/3/9/D3948E3C-D5DC-474E-B22F-81BA8ED7A446/Evaluating_Your_IOT_Security_whitepaper_EN_US.pdf)참조하십시오. 
- 보안 하드웨어 선택에 대한 도움말은 [IoT 배포에 적합한 보안 하드웨어를](https://download.microsoft.com/download/C/0/5/C05276D6-E602-4BB1-98A4-C29C88E57566/The_right_secure_hardware_for_your_IoT_deployment_EN_US.pdf)참조하십시오. 