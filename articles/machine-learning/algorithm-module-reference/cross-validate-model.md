---
title: '모델 교차 검증: 모듈 참조'
titleSuffix: Azure Machine Learning
description: Azure 기계 학습에서 모델 교차 유효성 검사 모듈을 사용하여 데이터를 분할하여 분류 또는 회귀 모델에 대한 매개 변수 추정치를 교차 검증하는 방법을 알아봅니다.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 02/11/2020
ms.openlocfilehash: 7550bb7c6bbf7602245f9a9f1ac006ce693b36a8
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "79477649"
---
# <a name="cross-validate-model"></a>모델 교차 유효성 검사

이 문서에서는 Azure 기계 학습 디자이너(미리 보기)에서 모델 교차 유효성 검사 모듈을 사용하는 방법을 설명합니다. *교차 유효성 검사는* 데이터 집합의 가변성과 해당 데이터를 통해 학습된 모든 모델의 안정성을 평가하기 위해 기계 학습에 자주 사용되는 기술입니다.  

교차 유효성 검사 모델 모듈은 학습되지 않은 분류 또는 회귀 모델과 함께 레이블이 지정된 데이터 집합을 입력으로 사용합니다. 데이터 집합을 몇 개의 하위 집합(접기)으로 나누고 각 접기에서 모델을 빌드한 다음 각 폴에 대한 정확도 통계 집합을*반환합니다.* 모든 접기의 정확도 통계를 비교하여 데이터 세트의 품질을 해석할 수 있습니다. 그런 다음 모델이 데이터의 변형에 취약한지 여부를 이해할 수 있습니다.  

또한 Cross Validate 모델은 데이터 집합에 대한 예측 결과 및 확률을 반환하므로 예측의 안정성을 평가할 수 있습니다.  

### <a name="how-cross-validation-works"></a>교차 유효성 검사의 작동 방식

1. 교차 유효성 검사는 학습 데이터를 접기로 임의로 나눕니다. 

   이전에 데이터 집합을 분할하지 않은 경우 이 알고리즘은 기본적으로 10개의 접기가 됩니다. 데이터 집합을 다른 수의 접기로 나누려면 [파티션 및 샘플](partition-and-sample.md) 모듈을 사용하여 사용할 접힌 개수를 나타낼 수 있습니다.  

2.  이 모듈은 유효성 검사에 사용할 데이터를 접기 1로 따로 설정합니다. (이것은 때때로 *홀드 아웃 폴드라고합니다*.) 모듈은 나머지 접기를 사용하여 모델을 학습합니다. 

    예를 들어 5겹을 만드는 경우 모듈은 교차 검증 중에 5개의 모델을 생성합니다. 이 모듈은 데이터의 4/5를 사용하여 각 모델을 훈련시급니다. 나머지 1/5에 각 모델을 테스트합니다.  

3.  각 폴드에 대한 모델을 테스트하는 동안 모듈은 여러 정확도 통계를 평가합니다. 모듈에서 사용하는 통계는 평가하려는 모델 유형에 따라 다릅니다. 분류 모델과 회귀 모델을 평가하는 데 다른 통계가 사용됩니다.  

4.  모든 접기에 대해 건물 및 평가 프로세스가 완료되면 Cross Validate 모델은 모든 데이터에 대한 성능 메트릭 및 점수가 매겨지는 결과 집합을 생성합니다. 이러한 메트릭을 검토하여 단일 배의 정확도가 높거나 낮은지 확인합니다. 

### <a name="advantages-of-cross-validation"></a>교차 검증의 장점

모델을 평가하는 다른 일반적인 방법은 [분할](split-data.md)데이터를 사용하여 데이터를 학습 및 테스트 집합으로 나눈 다음 학습 데이터에 대한 모델의 유효성을 검사하는 것입니다. 그러나 교차 유효성 검사는 다음과 같은 몇 가지 이점을 제공합니다.  

-   교차 유효성 검사는 더 많은 테스트 데이터를 사용합니다.

    교차 유효성 검사는 더 큰 데이터 공간에서 지정된 매개 변수를 사용하여 모델의 성능을 측정합니다. 즉, 교차 유효성 검사는 일부 대신 학습 및 평가모두에 전체 학습 데이터 집합을 사용합니다. 반대로 임의 분할에서 생성된 데이터를 사용하여 모델의 유효성을 검사하는 경우 일반적으로 사용 가능한 데이터의 30% 이하로 모델을 평가합니다.  

    그러나 교차 유효성 검사는 더 큰 데이터 집합에서 모델을 여러 번 훈련하고 유효성을 검사하기 때문에 훨씬 더 계산집약적입니다. 임의 분할에서 유효성을 검사하는 것보다 훨씬 오래 걸립니다.  

-   교차 유효성 검사는 데이터 집합과 모델을 모두 평가합니다.

    교차 유효성 검사는 단순히 모델의 정확도를 측정하는 것이 아닙니다. 또한 데이터 집합이 얼마나 대표적인지, 모델이 데이터의 변형에 얼마나 민감할 수 있는지에 대한 몇 가지 아이디어를 제공합니다.  

## <a name="how-to-use-cross-validate-model"></a>교차 유효성 검사 모델을 사용하는 방법

데이터 집합이 큰 경우 교차 유효성 검사를 실행하는 데 시간이 오래 걸릴 수 있습니다.  따라서 모델을 빌드하고 테스트하는 초기 단계에서 교차 유효성 검사 모델을 사용할 수 있습니다. 이 단계에서는 모델 매개 변수의 장점을 평가할 수 있습니다(계산 시간이 견딜 수 있다고 가정). 그런 다음 모델 및 모델 평가 모듈을 사용하여 설정된 매개변수를 사용하여 [모델을](train-model.md) 학습하고 [평가할](evaluate-model.md) 수 있습니다.

이 시나리오에서는 교차 유효성 검사 모델을 사용 하 여 모델을 학습 하 고 테스트 합니다.

1. 교차 유효성 검사 모델 모듈을 파이프라인에 추가합니다. Azure 기계 학습 디자이너에서 **모델 점수 매기기 & 평가** 범주에서 찾을 수 있습니다. 

2. 분류 또는 회귀 모델의 출력을 연결합니다. 

    예를 들어 분류에 **두 클래스 강화 된 의사 결정 트리를** 사용 하는 경우 원하는 매개 변수로 모델을 구성 합니다. 그런 다음 분류기의 **학습되지 않은 모델** 포트에서 교차 유효성 검사 모델의 일치 포트로 커넥터를 끕을 끕입니다. 

    > [!TIP] 
    > 교차 유효성 검사 모델은 평가의 일부로 모델을 자동으로 학습하기 때문에 모델을 학습할 필요가 없습니다.  
3.  교차 유효성 검사 모델의 **데이터 집합** 포트에서 레이블이 지정된 학습 데이터 집합을 연결합니다.  

4.  교차 유효성 검사 모델의 오른쪽 패널에서 **열 편집을**클릭합니다. 클래스 레이블또는 예측 가능한 값이 포함된 단일 열을 선택합니다. 

5. 동일한 데이터에서 연속실행에서 교차 유효성 검사 결과를 반복하려면 **Random seed** 매개 변수에 대한 값을 설정합니다.  

6. 파이프라인을 제출합니다.

7. 보고서에 대한 설명은 [결과](#results) 섹션을 참조하십시오.

## <a name="results"></a>결과

모든 반복이 완료되면 교차 유효성 검사 모델은 전체 데이터 집합에 대한 점수를 만듭니다. 또한 모델의 품질을 평가하는 데 사용할 수 있는 성능 메트릭도 생성합니다.

### <a name="scored-results"></a>점수가 매겨진 결과

모듈의 첫 번째 출력은 일부 예측 값 및 관련 확률과 함께 각 행에 대한 원본 데이터를 제공합니다. 

결과를 보려면 파이프라인에서 모델 교차 유효성 검사 모듈을 마우스 오른쪽 단추로 클릭합니다. **점수가 매겨지자 결과 시각화를**선택합니다.

| 새 열 이름      | 설명                              |
| -------------------- | ---------------------------------------- |
| 점수가 매겨진 레이블        | 이 열은 데이터 집합의 끝에 추가됩니다. 여기에는 각 행에 대한 예측 값이 포함됩니다. |
| 점수가 매겨지자 확률 | 이 열은 데이터 집합의 끝에 추가됩니다. **점수가 매겨진 레이블의**값의 예상 확률을 나타냅니다. |
| 접이식 번호          | 교차 유효성 검사 중에 각 데이터 행이 할당된 배의 0-기반 인덱스를 나타냅니다. |

 ### <a name="evaluation-results"></a>평가 결과

두 번째 보고서는 접힌 것으로 그룹화됩니다. 실행 하는 동안 교차 유효성 검사 모델 은 학습 데이터를 *n* 접지(기본적으로 10)로 임의로 분할합니다. 데이터 집합에 대한 각 반복에서 교차 유효성 검사 모델은 한 배를 유효성 검사 데이터 집합으로 사용합니다. 나머지 *n-1* 접기를 사용하여 모델을 학습합니다. *각 n* 모델은 다른 모든 접기의 데이터에 대해 테스트됩니다.

이 보고서에서 접기는 인덱스 값으로 오름차순으로 나열됩니다.  다른 열에서 주문하려면 결과를 데이터 집합으로 저장할 수 있습니다.

결과를 보려면 파이프라인에서 모델 교차 유효성 검사 모듈을 마우스 오른쪽 단추로 클릭합니다. 을 선택 을 선택 **배로 평가 결과 시각화.**


|열 이름| 설명|
|----|----|
|접이식 번호| 각 접기의 식별자입니다. 5개의 접기를 만든 경우 0에서 4로 번호가 매겨진 5개의 데이터 하위 집합이 있습니다.
|접힌 예제 수|각 접기에 할당된 행 수입니다. 그들은 대략 동일해야한다. |


이 모듈에는 평가하려는 모델 유형에 따라 각 접기마다 다음과 같은 메트릭이 포함되어 있습니다. 

+ **분류 모델**: 정밀도, 리콜, F-스코어, AUC, 정확도  

+ **회귀 모델**: 절대 오차, 근평균 제곱 오차, 상대 절대 오차, 상대 제곱 오차 및 결정 계수


## <a name="technical-notes"></a>기술 정보  

+ 교차 유효성 검사에 사용하기 전에 데이터 집합을 정규화하는 것이 좋습니다. 

+ Cross Validate 모델은 계산 집약적이며 임의로 분할된 데이터 집합을 사용하여 모델의 유효성을 검사하는 경우보다 완료하는 데 시간이 더 오래 걸립니다. 그 이유는 Cross Validate 모델에서 모델을 여러 번 훈련하고 유효성을 검사하기 때문입니다.

+ 모델의 정확도를 측정하기 위해 교차 유효성 검사를 사용할 때 데이터 집합을 학습 및 테스트 집합으로 분할할 필요가 없습니다. 


## <a name="next-steps"></a>다음 단계

Azure 기계 학습에 사용할 수 있는 [모듈 집합을](module-reference.md) 참조하십시오. 

