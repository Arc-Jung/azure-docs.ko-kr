<properties
	pageTitle="Azure 검색의 쿼리 및 인덱싱 작업을 위한 리소스 수준 확장 | Microsoft Azure"
	description="Azure 검색의 용량 계획은 파티션 및 복제본 컴퓨터 리소스의 조합을 기반으로 하며, 각 리소스는 청구 가능한 검색 단위로 가격이 책정됩니다."
	services="search"
	documentationCenter=""
	authors="HeidiSteen"
	manager="paulettm"
	editor=""
    tags="azure-portal"/>

<tags
	ms.service="search"
	ms.devlang="NA"
	ms.workload="search"
	ms.topic="article"
	ms.tgt_pltfrm="na"
	ms.date="05/25/2016"
	ms.author="heidist"/>

# Azure 검색의 쿼리 및 인덱싱 작업을 위한 리소스 수준 확장

Azure 검색에서 더 많은 저장소 및 IO가 필요하거나 향상된 쿼리 및 인덱싱 성능을 위해 복제본이 필요한 경우, 파티션을 늘려 특정 계산 리소스의 용량을 증분 방식으로 조정할 수 있습니다.

확장성은 [기본 계층](http://aka.ms/azuresearchbasic) 또는 [표준 계층](search-limits-quotas-capacity.md) 중 하나에서 서비스를 프로비전할 때 사용할 수 있게 됩니다.

요금 청구가 가능한 모든 계층의 경우 각 파티션 및 복제본이 하나의 SU로 계산되는 SU(*검색 단위*)로 용량을 증분하여 구매합니다.

- 기본 계층은 서비스당 최대 3개의 SU를 제공합니다.
- 표준 계층은 서비스당 최대 36개의 SU를 제공합니다.

계층 한도 내로 유지되는 파티션 및 복제본의 조합을 선택해야 합니다. 포털을 사용하여 확장하는 경우 포털은 허용 가능한 조합에 대해 강제로 한도를 적용합니다.

일반적으로 검색 응용 프로그램에는 파티션보다 복제본이 많이 필요합니다. 다음 섹션인 [고가용성](#HA)에 그 이유가 설명되어 있습니다.

<a id="HA"></a>
## 고가용성을 위한 리소스 관리

확장이 쉽고 비교적 빠르기 때문에, 일반적으로 파티션 하나와 복제본 한두 개로 시작한 후 쿼리 볼륨이 커지면 확장하는 것이 좋습니다. 배포에서 파티션 하나로 충분한 저장소와 IO를 제공할 수 있는 경우도 많습니다(파티션당 문서 1500만 개).

그러나 쿼리 작업은 복제본에서 주로 실행됩니다. 처리량이나 고가용성이 더 필요한 경우에는 추가 복제본이 필요할 수 있습니다.

고가용성을 위한 일반적인 권장 사항은 다음과 같습니다.

- 읽기 전용 작업(쿼리)의 고가용성을 위한 복제본 2개
- 읽기/쓰기 작업(쿼리 및 인덱싱)의 고가용성을 위한 복제본 3개 이상

## 재해 복구

현재, 재해 복구를 위한 기본 제공 메커니즘은 없습니다. 파티션이나 복제본을 제거하는 것은 재해 복구 목표를 달성하기 위한 전략으로 올바르지 않습니다. 가장 일반적인 방법은 다른 지역에서 두 번째 검색 서비스를 프로비전하여 서비스 수준에서 중복성을 추가하는 것입니다.

> [AZURE.NOTE] 서비스 수준 계약 및 확장성은 기본 및 표준 서비스의 기능이라는 점에 주의해야 합니다. 무료 서비스는 복제본과 파티션을 여러 구독자가 공유하는 고정 리소스 수준에서 제공됩니다. 무료 서비스로 시작한 후 업그레이드하려는 경우에는 기본 또는 표준 수준에서 새 Azure 검색 서비스를 만들고 인덱스와 데이터를 새로운 서비스에 다시 로드해야 합니다. 서비스 프로비전에 대한 자세한 내용은 [포털에서 Azure 검색 서비스 만들기](search-create-service-portal.md)를 참조하세요.

## 용어: 파티션 및 복제본

**파티션**은 저장소와 IO를 제공합니다. 단일 검색 서비스에는 최대 12개의 파티션이 있을 수 있습니다. 각 파티션의 하드 한도는 문서 1500만 개 또는 저장소 25GB 중 먼저 도달하는 것으로 지정되어 있습니다. 파티션을 추가하면 검색 서비스에서 더 많은 문서를 로드할 수 있습니다. 예를 들어, 처음에 단일 파티션에 최대 25GB의 데이터를 저장할 수 있었던 서비스에 두 번째 파티션을 추가하면 최대 50GB의 데이터를 저장할 수 있습니다.

**복제본**은 검색 엔진의 복사본입니다. 단일 검색 서비스에 있을 수 있는 복제본 수는 최대 12개입니다. 읽기(쿼리)를 사용하려면 2개 이상의 복제본이 필요하고, 읽기/쓰기(쿼리, 인덱싱)를 사용하려면 3개 이상의 복제본이 필요합니다.

## 복제본으로 쿼리 성능 향상

쿼리 대기 시간을 통해 추가 복제본의 필요성을 알 수 있습니다. 일반적으로 쿼리 성능을 향상시키는 첫 번째 단계는 복제본을 추가하는 것입니다.

각 인덱스의 복사본이 각 복제본에서 실행됩니다. 복제본을 추가하면 인덱스의 추가 복사본을 온라인에서 사용할 수 있으므로 더 큰 쿼리 작업을 지원하고 여러 복제본 사이에서 요청 작업의 규형을 조정할 수 있습니다. 여러 개의 인덱스가 있고(예를 들어 6개) 3개의 복제본이 있는 경우 각 복제본에는 인덱스 6개 모두의 복사본이 포함됩니다.

예상 QPS(초당 쿼리 수)를 고정 값으로 제공하지는 않습니다. 쿼리 성능은 쿼리의 복잡성과 경쟁 작업에 따라 달라지기 때문입니다. 평균적으로 복제본 하나에서는 약 15개의 QPS를 서비스할 수 있지만 쿼리의 복잡성과(패킷 쿼리가 더 복잡) 네트워크 대기 시간에 따라 처리량이 더 높거나 낮을 수도 있습니다. 복제본을 추가하면 확장성과 성능이 확실히 추가되지만 결과가 선형적으로 비례하지는 않는다는 점도 중요합니다. 복제본을 3개 추가한다고 해서 처리량이 3배가 되는 것은 아닙니다.

워크로드에 대한 QPS를 예측하는 방법을 비롯한 QPS에 대한 자세한 내용은 [검색 서비스 관리](search-manage.md)를 참조하세요.

## 파티션으로 인덱싱 성능 향상

거의 실시간으로 진행되는 데이터 새로 고침을 필요로 하는 검색 응용 프로그램은 복제본보다 비례적으로 더 많은 파티션이 필요합니다. 파티션을 추가하면 많은 수의 계산 리소스로 읽기-쓰기 작업이 분산됩니다. 또한 추가 인덱스와 문서를 저장하기 위한 더 많은 디스크 공간이 보장됩니다.

인덱스가 클수록 쿼리하는 데 더 오래 걸립니다. 따라서 파티션을 증분 방식으로 증가시킬 때마다 더 작지만 비례적으로 복제본도 늘려야 합니다. 앞서 설명한 것처럼 쿼리의 복잡성과 쿼리 용량은 쿼리 실행이 얼마나 빠르게 진행되는지에 영향을 줍니다.

## 기본 계층: 파티션 및 복제본 조합

기본 서비스는 1개의 파티션과 최대 3개의 복제본을 가질 수 있으며 최대 3개의 SU로 제한됩니다.

<a id="chart"></a>
## 표준 계층: 파티션 및 복제본 조합

이 표에서는 36개의 SU(검색 단위) 제한에 따라 복제본 및 파티션의 조합을 지원하는 데 필요한 검색 단위를 보여 줍니다.

- |- |- |- |- |- |- |
---|----|---|---|---|---|---|
**복제본 12개**|12 SU|24 SU|36 SU|해당 없음|해당 없음|해당 없음|
**복제본 6개**|6 SU|12 SU|18 SU|24 SU|36 SU|해당 없음|
**복제본 5개**|5 SU|10 SU|15 SU|20 SU|30 SU|해당 없음|
**복제본 4개**|4 SU|8 SU<|12 SU|16 SU|24 SU|N/|
**복제본 3개**|3 SU|6 SU|9 SU|12 SU|18 SU|36 SU|
**복제본 2개**|2 SU|4 SU|6 SU|8 SU|12 SU|24 SU|
**복제본 1개.**|1 SU|2 SU|3 SU|4 SU|6 SU|12 SU|
해당 없음|**파티션 1개**|**파티션 2개**|**파티션 3개**<|**파티션 4개**|**파티션 6개**|**파티션 12개**|


검색 단위, 가격 및 용량에 대해서는 Azure 웹 사이트에서 자세히 설명합니다. 자세한 내용은 [가격 책정 정보](https://azure.microsoft.com/pricing/details/search/)를 참조하세요.

> [AZURE.NOTE] 복제본 및 파티션 수는 12를 고르게 나눌 수 있는 값이어야 합니다(특히 1, 2, 3, 4, 6, 12). Azure 검색에서 각 인덱스를 파티션 사이에 고르게 분할할 수 있도록 12개의 부분으로 미리 나누기 때문입니다. 예를 들어, 서비스에 3개의 파티션이 있는 상태에서 새 인덱스를 만들 경우 각 파티션에는 분할된 인덱스가 4부분씩 포함됩니다. Azure 검색에서 인덱스를 분할하는 방법은 구현에 관한 세부 정보이며 이후 릴리스에서 변경될 수 있습니다. 지금은 그 숫자가 12이지만 이후에 12가 아닌 값으로 바뀔 수도 있습니다.

## 특정 리소싱 조합에 대한 검색 단위 계산: R X P = SU

필요한 SU 개수를 계산하는 공식은 파티션에 복제본을 곱하는 것입니다. 예를 들어 3개 복제본 X 3개 파티션은 9개의 검색 단위로 청구됩니다.

두 계층은 각각 1개의 복제본과 파티션으로 시작하므로 1개의 검색 단위로 계산됩니다. 각각 1개의 복제본과 파티션에 대한 경우만 1개의 검색 단위로 계산됩니다. 복제본이든 파티션이든 각 추가 리소스는 자체 SU로 계산됩니다.

SU당 비용은 계층별로 결정됩니다. SU당 비용은 표준 계층보다 기본 계층이 더 낮습니다. 각 계층에 대한 요금은 [가격 정보](https://azure.microsoft.com/pricing/details/search/)에서 확인할 수 있습니다.

<!---HONumber=AcomDC_0601_2016-->