---
title: 쿼리 및 인덱스 작업의 용량 예측
titleSuffix: Azure Cognitive Search
description: Azure Cognitive Search의 파티션 및 복제본 컴퓨터 리소스를 조정 합니다. 여기서 각 리소스는 청구 가능한 검색 단위로 가격이 책정 됩니다.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 01/15/2021
ms.openlocfilehash: 4a9a6b61e392ed2efd68cdcb1cf7e53d6bde5ccd
ms.sourcegitcommit: 25d1d5eb0329c14367621924e1da19af0a99acf1
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/16/2021
ms.locfileid: "98249732"
---
# <a name="estimate-and-manage-capacity-of-an-azure-cognitive-search-service"></a>Azure Cognitive Search 서비스의 용량 예측 및 관리

[검색 서비스를 프로 비전](search-create-service-portal.md) 하 고 특정 가격 책정 계층에서 잠금을 수행 하기 전에 몇 분 정도 변동을 작업 부하를 수용 하기 위해 복제본과 파티션을 조정 하는 방법을 이해 하는 것이 좋습니다.

Capacity는 [서비스 계층](search-sku-tier.md)의 기능입니다. 계층은 최대 저장소, 파티션당 저장소 저장소 및 만들 수 있는 개체 수에 대 한 최대 제한에 의해 구분 됩니다. 기본 계층은 저장소 요구 사항이 가장 적당 한 앱을 위해 설계 되었지만 (파티션만 하나씩) 고가용성 구성 (복제본 3 개)에서 실행할 수 있습니다. 다른 계층은 특정 작업 또는 패턴 (예: 배포할지에)을 위해 설계 되었습니다. 내부적으로 해당 계층에서 만든 서비스는 이러한 시나리오를 돕는 하드웨어를 활용 합니다.

Azure Cognitive Search의 확장성 아키텍처는 추가 쿼리 또는 인덱싱 전력이 필요한 지 여부에 따라 용량을 변경할 수 있도록 복제본과 파티션의 유연한 조합을 기반으로 합니다. 서비스를 만든 후에는 복제본 또는 파티션 수를 독립적으로 늘리거나 줄일 수 있습니다. 각 추가 물리적 리소스에 대 한 비용이 발생 하지만 대규모 작업이 완료 되 면 규모를 줄여 청구서를 낮출 수 있습니다. 조정의 계층 및 크기에 따라 용량을 추가 하거나 축소 하는 데에는 15 분에서 몇 시간까지 걸릴 수 있습니다.

복제본 및 파티션 할당을 수정 하는 경우 Azure Portal를 사용 하는 것이 좋습니다. 포털은 계층의 최대 한도 미만으로 유지 되는 허용 가능한 조합에 제한을 적용 합니다. 그러나 스크립트 기반 또는 코드 기반 프로 비전 접근 방식이 필요한 경우에는 [Azure PowerShell](search-manage-powershell.md) 또는 [관리 REST API](/rest/api/searchmanagement/services) 대체 해결 방법이 됩니다.

## <a name="concepts-search-units-replicas-partitions-shards"></a>개념: 단위, 복제본, 파티션, 분할 검색

용량은 *파티션* 및 *복제본* 의 조합에 할당 될 수 있는 *검색 단위로* 표시 되며, 기본 *분할* 메커니즘을 사용 하 여 유연한 구성을 지원 합니다.

| 개념  | 정의|
|----------|-----------|
|*검색 단위* | 사용 가능한 총 용량 (36 단위)의 단일 증가값입니다. Azure Cognitive Search 서비스에 대 한 청구 단위 이기도 합니다. 서비스를 실행 하려면 최소한 하나의 단위가 필요 합니다.|
|*복제본* | 검색 서비스의 인스턴스로 쿼리 작업을 부하 분산하는 데 주로 사용됩니다. 각 복제본은 인덱스의 복사본 하나를 호스팅합니다. 3 개의 복제본을 할당 하는 경우 쿼리 요청을 처리 하는 데 사용할 수 있는 인덱스의 복사본 3 개가 있습니다.|
|*파티션* | 읽기/쓰기 작업 (예: 인덱스를 다시 작성 하거나 새로 고치는 경우)에 대 한 실제 저장소 및 i/o 각 파티션에는 전체 인덱스의 조각이 있습니다. 3 개의 파티션을 할당 하면 인덱스가 1/3로 나뉩니다. |
|*분할* | 인덱스의 청크입니다. Azure Cognitive Search는 분할를 새 검색 단위로 이동 하 여 파티션을 더 빠르게 추가 하는 프로세스를 수행 하기 위해 각 인덱스를 분할으로 나눕니다.|

다음 다이어그램에서는 복제본, 파티션, 분할 및 검색 단위 간의 관계를 보여 줍니다. 단일 인덱스가 두 개의 복제본과 두 개의 파티션이 있는 서비스에서 4 개의 검색 단위에 걸쳐 있는 방법의 예를 보여 줍니다. 4 개의 검색 단위는 모두 인덱스의 절반 분할 저장 합니다. 왼쪽 열에 있는 검색 단위는 첫 번째 파티션으로 구성 된 분할의 처음 절반을 저장 하 고, 오른쪽 열의 두 번째는 두 번째 파티션을 구성 하는 분할의 두 번째 절반을 저장 합니다. 두 개의 복제본이 있으므로 각 인덱스 분할 된 데이터베이스의 복사본이 두 개 있습니다. 맨 위 행의 검색 단위는 첫 번째 복제본을 구성 하 고 첫 번째 복제본으로 구성 된 복사본 하나를 저장 하는 반면, 아래쪽 행의 검색 단위는 두 번째 복제본을 구성 하는 다른 복사본

:::image type="content" source="media/search-capacity-planning/shards.png" alt-text="검색 인덱스는 파티션 간에 분할 된 됩니다.":::

위의 다이어그램은 한 가지 예입니다. 파티션 및 복제본의 여러 조합은 최대 36의 총 검색 단위로 가능 합니다.

Cognitive Search 분할 된 관리는 구현 세부 정보 이며 구성할 수 없습니다. 그러나 인덱스를 분할 된 하는 것은 순위와 자동 완성 동작에서 간헐적으로 발생 하는 문제를 이해 하는 데 도움이 됩니다.

+ 이상 순위 지정: 검색 점수가 먼저 분할 된 수준에서 계산 된 다음 단일 결과 집합으로 집계 됩니다. 분할 된 콘텐츠의 특성에 따라 한 분할 된 데이터베이스가 다른 분할 된 항목의 일치 항목 보다 더 높은 순위를 지정할 수 있습니다. 검색 결과에서 직관적인 순위를 확인 하는 경우 특히 인덱스가 작은 경우 분할 효과 때문입니다. [전체 인덱스에서 점수를 전역적으로 계산](index-similarity-and-scoring.md#scoring-statistics-and-sticky-sessions)하도록 선택 하 여 이러한 순위에 대 한 문제를 방지할 수 있지만 이렇게 하면 성능이 저하 됩니다.

+ 자동 완성 이상 상태: 부분적으로 입력 된 용어의 처음 몇 개 문자에서 일치가 수행 되는 자동 완성 쿼리는 철자의 작은 편차를 제공 하는 유사 항목 매개 변수를 허용 합니다. 자동 완성의 경우 유사 항목 일치는 현재 분할 된 항목 내의 용어로 제한 됩니다. 예를 들어 분할 된 데이터베이스가 "Microsoft"를 포함 하 고 "micor"의 부분 용어를 입력 하면 검색 엔진은 해당 분할 영역의 "Microsoft"와 일치 하지만 인덱스의 나머지 부분을 포함 하는 다른 분할는 일치 하지 않습니다.

## <a name="how-to-evaluate-capacity-requirements"></a>용량 요구 사항을 평가 하는 방법

서비스를 실행 하는 비용과 용량을 함께 활용 하세요. 계층은 저장소 및 콘텐츠 (예: 서비스의 인덱스 수)의 두 수준에 제한을 부과 합니다. 가장 먼저 도달 하는 한도가 유효 한도 인지를 고려 하는 것이 중요 합니다.

인덱스 및 기타 개체의 수량은 일반적으로 비즈니스 및 엔지니어링 요구 사항에 따라 결정 됩니다. 예를 들어 활성 개발, 테스트 및 프로덕션을 위해 동일한 인덱스의 여러 버전이 있을 수 있습니다.

저장소 요구는 빌드에 필요한 인덱스 크기에 따라 결정 됩니다. 예상치에 도움이 되는 견고한 추론 또는 generalities 없습니다. 인덱스의 크기를 확인 하는 유일한 방법은 [빌드 1](search-what-is-an-index.md)입니다. 이 크기는 가져온 데이터, 텍스트 분석 및 인덱스 구성 (예: 확인 기, 필터링 및 정렬 사용 여부)을 기반으로 합니다.

전체 텍스트 검색의 경우 주 데이터 구조는 원본 데이터와 특성이 다른 [반전 된 인덱스](https://en.wikipedia.org/wiki/Inverted_index) 구조입니다. 반전 된 인덱스의 경우 크기와 복잡성은 내용에 따라 결정 되며,이는 사용자가 제공 하는 데이터의 양이 아닐 수도 있습니다. 중복성이 높은 큰 데이터 원본을 사용 하면 가변 콘텐츠를 포함 하는 작은 데이터 집합 보다 더 작은 인덱스가 생성 될 수 있습니다. 따라서 원래 데이터 집합의 크기에 따라 인덱스 크기를 유추할 수 있는 경우는 거의 없습니다.

> [!NOTE] 
> 인덱스 및 저장소에 대 한 향후 수요를 예측 하는 것이 추측 처럼 느껴질 수 있지만이 경우에는 충분 합니다. 계층의 용량이 너무 낮을 경우 더 높은 계층에서 새 서비스를 프로 비전 한 다음 [인덱스를 다시 로드](search-howto-reindex.md)해야 합니다. 한 계층에서 다른 계층으로 서비스를 전체 업그레이드할 수 없습니다.
>

### <a name="estimate-with-the-free-tier"></a>무료 계층으로 예측

용량을 예측하기 위한 한 방법은 무료 계층으로 시작하는 것입니다. 무료 서비스는 최대 3 개의 인덱스, 50 MB의 저장소 및 2 분의 인덱싱 시간을 제공 합니다. 이러한 제약 조건을 사용 하 여 예상 인덱스 크기를 추정 하는 것은 어려울 수 있지만 다음 단계를 수행 합니다.

+ [무료 서비스를 만드세요](search-create-service-portal.md).
+ 작은 대표적인 데이터 집합을 준비 합니다.
+ 인덱스를 만들고 데이터를 로드 합니다. 데이터 집합이 인덱서에 의해 지원 되는 Azure 데이터 원본에서 호스팅될 수 있는 경우 [포털에서 데이터 가져오기 마법사](search-get-started-portal.md) 를 사용 하 여 인덱스를 만들고 로드할 수 있습니다. 그렇지 않으면 REST 및 [Postman](search-get-started-rest.md) 또는 [Visual Studio Code](search-get-started-vs-code.md) 를 사용 하 여 인덱스를 만들고 데이터를 푸시 해야 합니다. 푸시 모델을 사용 하려면 데이터가 JSON 문서 형식 이어야 합니다. 여기서 문서의 필드는 인덱스의 필드에 해당 합니다.
+ 인덱스에 대 한 정보 (예: 크기)를 수집 합니다. 기능 및 특성은 저장소에 영향을 줍니다. 예를 들어 확인 기 (검색 형식 쿼리)를 추가 하면 저장소 요구 사항이 증가 합니다. 

  동일한 데이터 집합을 사용 하면 각 필드에 서로 다른 특성을 사용 하 여 여러 버전의 인덱스를 만들어 저장소 요구 사항이 어떻게 달라 지는 지 확인할 수 있습니다. 자세한 내용은 [기본 인덱스 만들기의 "저장소 영향"](search-what-is-an-index.md#index-size)을 참조 하세요.

대략적인 추정치를 사용 하는 경우 두 인덱스 (개발 및 프로덕션)에 대 한 예산에 해당 하는 금액을 두 배로 확보 하 고 그에 따라 계층을 선택할 수 있습니다.

### <a name="estimate-with-a-billable-tier"></a>청구 가능 계층으로 예측

전용 리소스는 개발 중에 인덱스 수량, 크기 및 쿼리 볼륨의 보다 현실적인 추정치를 위해 더 큰 샘플링 및 처리 시간을 수용할 수 있습니다. 일부 고객은 청구 가능한 계층으로 바로 이동한 다음 개발 프로젝트가 성숙 될 때 재평가 됩니다.

1. [각 계층에서 서비스 제한을 검토](./search-limits-quotas-capacity.md#index-limits) 하 여 하위 계층이 필요한 인덱스 수를 지원할 수 있는지 확인 합니다. 기본, S1 및 S2 계층 전체에서 인덱스 제한은 각각 15, 50 및 200입니다. 저장소에 최적화 된 계층은 매우 큰 인덱스를 적게 지원 하도록 설계 되었기 때문에 인덱스가 10 개로 제한 됩니다.

1. [청구 가능 계층에서 서비스 만들기](search-create-service-portal.md):

    + 예상 되는 부하에 대해 잘 모르는 경우 기본 또는 S1에서 낮은 수준으로 시작 합니다.
    + 테스트에 대규모 인덱싱 및 쿼리 부하가 포함 되어 있는 경우 시작 높음, S2 또는 심지어 S3.
    + 내부 비즈니스 응용 프로그램과 마찬가지로, 많은 양의 데이터를 인덱싱하는 경우에는 L1 또는 L2에서 저장소에 최적화 된 저장소로 시작 합니다.

1. 원본 데이터가 인덱스로 변환되는 방법을 결정하려면 [초기 인덱스를 만듭니다](search-what-is-an-index.md). 인덱스 크기를 추정하는 유일한 방법입니다.

1. 포털에서 [스토리지, 서비스 제한, 쿼리 볼륨 및 대기 시간을 모니터링](search-monitor-usage.md)합니다. 포털에는 초당 쿼리 수, 제한 된 쿼리 및 검색 대기 시간이 표시 됩니다. 이러한 모든 값은 올바른 계층을 선택 했는지 여부를 결정 하는 데 도움이 될 수 있습니다.

1. 고가용성이 필요 하거나 쿼리 성능이 저하 되는 경우 복제본을 추가 합니다.

   쿼리 로드를 수용 하는 데 필요한 복제본 수에 대 한 지침은 없습니다. 쿼리 성능은 쿼리 및 경쟁 작업의 복잡성에 따라 달라 집니다. 복제본을 추가하면 성능이 확실히 증가되지만 결과가 반드시 비례하지 않습니다. 복제본을 세 개 추가한다고 해서 처리량이 3배가 되는 것은 아닙니다. 솔루션에 대 한 QPS을 예측 하는 방법에 대 한 지침은 [성능 조정](search-performance-optimization.md)및 [쿼리 모니터링](search-monitor-queries.md)을 참조 하세요.

> [!NOTE]
> 검색 하지 않을 데이터를 포함 하는 경우 저장소 요구 사항을 팽창 수 있습니다. 이상적으로 문서에는 검색 환경에 필요한 데이터만 포함 됩니다. 이진 데이터는 검색할 수 없으며 Azure 테이블 또는 blob 저장소에 별도로 저장 해야 합니다. 그런 다음 인덱스에 필드를 추가 하 여 외부 데이터에 대 한 URL 참조를 저장 해야 합니다. 개별 검색 문서의 최대 크기는 16mb입니다 (한 요청에서 여러 문서를 대량으로 업로드 하는 경우에는 더 낮음). 자세한 내용은 [Azure Cognitive Search의 서비스 제한](search-limits-quotas-capacity.md)을 참조 하세요.
>

**쿼리 볼륨 고려 사항**

QPS (초당 쿼리 수)는 성능 튜닝 중에 중요 한 메트릭입니다. 그러나 일반적으로 처음에는 높은 쿼리 볼륨이 필요한 경우에만 계층을 고려 합니다.

표준 계층을 통해 복제본과 파티션의 균형을 맞출 수 있습니다. 부하 분산을 위해 복제본을 추가 하거나 병렬 처리를 위해 파티션을 추가 하 여 쿼리 수행을 늘릴 수 있습니다. 그런 다음 서비스가 프로 비전 된 후 성능을 조정할 수 있습니다.

처음부터 지속적으로 높은 쿼리 볼륨을 원하는 경우 더 강력한 하드웨어에서 지원 되는 더 높은 표준 계층을 고려해 야 합니다. 그런 다음 파티션 및 복제본을 오프 라인으로 전환 하거나, 해당 쿼리 볼륨이 발생 하지 않는 경우 하위 계층 서비스로 전환할 수도 있습니다. 쿼리 처리량을 계산 하는 방법에 대 한 자세한 내용은 [Azure Cognitive Search 성능 및 최적화](search-performance-optimization.md)를 참조 하세요.

저장소에 최적화 된 계층은 대량 데이터 워크 로드에 유용 하며, 쿼리 대기 시간 요구 사항이 그다지 중요 하지 않은 경우에 사용할 수 있는 전체 인덱스 저장소를 지원 합니다. 부하 분산 및 병렬 처리를 위한 추가 파티션에 대해서는 추가 복제본을 계속 사용 해야 합니다. 그런 다음 서비스가 프로 비전 된 후 성능을 조정할 수 있습니다.

**서비스 수준 계약**

무료 계층 및 미리 보기 기능은 [sla (서비스 수준 계약)](https://azure.microsoft.com/support/legal/sla/search/v1_0/)를 제공 하지 않습니다. 모든 청구 가능 계층에 대해 서비스에 충분한 중복성을 프로비전할 때 SLA가 적용됩니다. 쿼리 (읽기) Sla에는 두 개 이상의 복제본이 있어야 합니다. 쿼리 및 인덱싱 (읽기-쓰기) Sla에는 3 개 이상의 복제본이 있어야 합니다. 파티션 수는 Sla에 영향을 주지 않습니다.

## <a name="tips-for-capacity-planning"></a>용량 계획에 대 한 팁

+ 메트릭을 사용 하 여 쿼리를 작성 하 고 사용 패턴 (업무 시간 동안 쿼리, 사용량이 적은 시간 동안 인덱싱)에 대 한 데이터를 수집 합니다. 이 데이터를 사용 하 여 서비스 프로 비전 결정을 알립니다. 시간별 또는 일별 주기에서는 실용적이 지 않지만 쿼리 볼륨의 계획 된 변경 내용을 수용 하기 위해 파티션 및 리소스를 동적으로 조정할 수 있습니다. 또한 수준에서 조치를 취하는 데 충분 한 시간을 보유 하는 경우 계획 되지 않았지만 지속적으로 변경 될 수 있습니다.

+ 프로 비전 중인의 유일한 단점은 실제 요구 사항이 예측 보다 큰 경우 서비스를 중단 해야 할 수 있다는 것입니다. 서비스 중단을 방지 하기 위해 더 높은 계층에서 새 서비스를 만들고 모든 앱 및 요청이 새 끝점을 대상으로 할 때까지 함께 실행 합니다.

## <a name="when-to-add-partitions-and-replicas"></a>파티션 및 복제본을 추가 하는 경우

처음에는 서비스에 하나의 파티션과 하나의 복제본으로 구성 된 최소 수준의 리소스가 할당 됩니다.

단일 서비스에는 모든 워크로드(인덱싱 및 쿼리)를 처리할 만큼 충분한 리소스가 있어야 합니다. 작업은 백그라운드에서 실행 되지 않습니다. 쿼리 요청이 자연스럽 게 자주 발생 하지 않는 시간에 대 한 인덱싱을 예약할 수 있지만, 서비스는 다른 작업에 대해 하나의 작업에 우선 순위를 지정 하지 않습니다. 또한 특정 중복성은 서비스 또는 노드가 내부적으로 업데이트 될 때 쿼리 성능을 향상 합니다.

일반적으로 검색 응용 프로그램은 특히 서비스 작업이 쿼리 작업을 중심으로 수행 되는 경우 파티션 보다 많은 복제본이 필요 합니다. [고가용성](#HA) 섹션에 그 이유가 설명되어 있습니다.

[선택한 계층](search-sku-tier.md) 은 파티션 크기와 속도를 결정 하 고 각 계층은 다양 한 시나리오에 맞는 특성 집합을 중심으로 최적화 됩니다. 더 높은 수준의 계층을 선택 하는 경우 S1로 이동 하는 경우 보다 더 많은 파티션이 필요할 수 있습니다. 자신에 게 전달 되는 테스트를 통해 대답 해야 하는 질문 중 하나는 하위 계층에서 프로 비전 되는 서비스에서 더 크고 비용이 많이 드는 파티션이 2 개 보다 저렴 한 파티션에 비해 더 나은 성능을 얻을 수 있는지 여부입니다.

거의 실시간으로 진행되는 데이터 새로 고침을 필요로 하는 검색 애플리케이션은 복제본보다 비례적으로 더 많은 파티션이 필요합니다. 파티션을 추가하면 많은 수의 컴퓨팅 리소스로 읽기/쓰기 작업이 분산됩니다. 또한 추가 인덱스와 문서를 저장하기 위한 더 많은 디스크 공간이 보장됩니다.

인덱스가 클수록 쿼리하는 데 더 오래 걸립니다. 따라서 파티션을 증분 방식으로 증가시킬 때마다 더 작지만 비례적으로 복제본도 늘려야 합니다. 쿼리의 복잡성과 쿼리 용량은 쿼리 실행이 얼마나 빠르게 진행되는지에 영향을 줍니다.

> [!NOTE]
> 복제본 또는 파티션을 더 추가 하면 서비스 실행 비용이 늘어나고 결과가 정렬 되는 방식에 약간의 변화가 발생할 수 있습니다. 더 많은 노드를 추가 하는 청구 의미를 이해 하려면 [가격 계산기](https://azure.microsoft.com/pricing/calculator/) 를 확인 해야 합니다. [아래 차트](#chart) 는 특정 구성에 필요한 검색 단위 수를 상호 참조 하는 데 도움이 될 수 있습니다. 추가 복제본이 쿼리 처리에 미치는 영향에 대 한 자세한 내용은 [결과 순서](search-pagination-page-layout.md#ordering-results)지정을 참조 하세요.

## <a name="how-to-allocate-replicas-and-partitions"></a>복제본 및 파티션을 할당 하는 방법

1. [Azure Portal](https://portal.azure.com/) 에 로그인하고 검색 서비스를 선택합니다.

1. **설정** 에서 **크기 조정** 페이지를 열어 복제본 및 파티션을 수정 합니다. 

   다음 스크린샷은 하나의 복제본과 파티션으로 프로 비전 된 기본 표준을 보여줍니다. 아래쪽의 수식은 사용 되는 검색 단위의 수를 나타냅니다 (1). 단가가 $100 (실제 가격이 아님) 인 경우이 서비스를 실행 하는 월간 비용은 평균적으로 $100이 됩니다.

   :::image type="content" source="media/search-capacity-planning/1-initial-values.png" alt-text="현재 값을 보여 주는 크기 조정 페이지" border="true":::

1. 슬라이더를 사용 하 여 파티션 수를 늘리거나 줄입니다. 아래쪽의 수식은 사용 중인 검색 단위 수를 나타냅니다. **저장** 을 선택합니다.

   이 예에서는 두 번째 복제본과 파티션을 추가 합니다. 검색 단위 수를 확인 합니다. 요금 청구 수식은 복제본이 파티션 (2 x 2)을 곱하는 것 이므로 4입니다. 서비스를 실행 하는 비용의 두 배가 넘는 용량을 늘립니다. 검색 단위 비용이 $100 인 경우 이제 새로운 월간 청구는 $400이 됩니다.

   각 계층의 현재 단가 비용은 [가격 책정 페이지](https://azure.microsoft.com/pricing/details/search/)를 참조 하세요.

   :::image type="content" source="media/search-capacity-planning/2-add-2-each.png" alt-text="복제본 및 파티션 추가" border="true":::

1. 저장 한 후에는 알림을 확인 하 여 작업이 성공 했는지 확인할 수 있습니다.

   :::image type="content" source="media/search-capacity-planning/3-save-confirm.png" alt-text="변경 내용 저장" border="true":::

   용량 변경을 완료 하는 데 최대 몇 시간이 걸릴 수 있습니다. 프로세스가 시작 된 후에는 취소할 수 없으며 복제본 및 파티션 조정을 위한 실시간 모니터링은 없습니다. 그러나 변경 내용이 진행 되는 동안에는 다음 메시지가 표시 됩니다.

   :::image type="content" source="media/search-capacity-planning/4-updating.png" alt-text="포털의 상태 메시지" border="true":::

> [!NOTE]
> 서비스를 프로 비전 한 후에는 더 높은 계층으로 업그레이드할 수 없습니다. 새 계층에서 검색 서비스를 만들고 인덱스를 다시 로드해야 합니다. 서비스 프로 비전에 대 한 도움말 [은 포털에서 Azure Cognitive Search 서비스 만들기](search-create-service-portal.md) 를 참조 하세요.
>
> 또한 파티션과 복제본은 서비스에 의해 배타적으로 관리 됩니다. 프로세서 선호도의 개념이 없거나 특정 노드에 작업을 할당 하는 것은 아닙니다.
>

<a id="chart"></a>

## <a name="partition-and-replica-combinations"></a>파티션 및 복제본 조합

기본 서비스는 정확히 한 개의 파티션과 최대 세 개의 복제본을 가질 수 있으며 최대 세 개의 SU로 제한됩니다. 유일하게 조정할 수 있는 리소스는 복제본입니다. 쿼리에서 고가용성을 위해 최소 두 개의 복제본이 필요합니다.

모든 표준 및 저장소 최적화 search 서비스는 이러한 계층에 대해 허용 되는 36-SU 제한을 적용 하 여 다음과 같은 복제본 및 파티션의 조합을 가정할 수 있습니다. 

|   | **1 개 파티션** | **파티션 2 개** | **3 개 파티션** | **파티션 4개** | **6 개 파티션** | **파티션 12개** |
| --- | --- | --- | --- | --- | --- | --- |
| **복제본 1개** |1 SU |2 SU |3 SU |4 SU |6 SU |12 SU |
| **복제본 2개** |2 SU |4 SU |6 SU |8 SU |12 SU |24 SU |
| **복제본 3개** |3 SU |6 SU |9 SU |12 SU |18 SU |36 SU |
| **복제본 4개** |4 SU |8 SU |12 SU |16 SU |24 SU |해당 없음 |
| **복제본 5개** |5 SU |10 SU |15 SU |20 SU |30 SU |해당 없음 |
| **복제본 6개** |6 SU |12 SU |18 SU |24 SU |36 SU |해당 없음 |
| **복제본 12개** |12 SU |24 SU |36 SU |해당 없음 |해당 없음 |해당 없음 |

SU, 가격 책정 및 용량에 대해서는 Azure Websites에 자세히 설명되어 있습니다. 자세한 내용은 [가격 책정 세부 정보](https://azure.microsoft.com/pricing/details/search/)를 참조 하세요.

> [!NOTE]
> 복제본 및 파티션 수는 12를 고르게 나눌 수 있는 값입니다(특히 1, 2, 3, 4, 6, 12). 이는 Azure Cognitive Search에서 각 인덱스를 12 개의 분할 미리 나누어 모든 파티션에서 동일한 부분에 분산 될 수 있기 때문입니다. 예를 들어, 서비스에 파티션이 세 개 있는 상태에서 인덱스를 하나 만들 경우 각 파티션에는 분할된 인덱스가 4개가 포함됩니다. Azure Cognitive Search 분할의 인덱스는 구현 세부 정보 이며, 이후 릴리스에서 변경 될 수 있습니다. 지금은 그 숫자가 12이지만 이후에 12가 아닌 값으로 바뀔 수도 있습니다.
>

<a id="HA"></a>

## <a name="high-availability"></a>고가용성

확장이 쉽고 비교적 빠르기 때문에, 일반적으로 파티션 하나와 복제본 한두 개로 시작한 후 쿼리 볼륨이 커지면 확장하는 것이 좋습니다. 쿼리 작업은 복제본에서 주로 실행됩니다. 고가용성이나 처리량이 더 필요한 경우에는 추가 복제본이 필요할 가능성이 높습니다.

고가용성을 위한 일반적인 권장 사항은 다음과 같습니다.

+ 읽기 전용 작업(쿼리)의 고가용성을 위한 복제본 두 개

+ 읽기/쓰기 워크로드의 고가용성을 위한 복제본 세 개 이상(개별 문서가 추가, 업데이트 또는 삭제됨에 따라 쿼리 및 인덱싱)

Azure Cognitive Search에 대 한 SLA (서비스 수준 계약)는 문서 추가, 업데이트 또는 삭제로 구성 된 쿼리 작업 및 인덱스 업데이트를 대상으로 합니다.

기본 계층은 하나의 파티션과 세 개의 복제본에 우선합니다. 인덱싱 및 쿼리 처리량 모두에 대한 수요 변동에 즉시 응답하기 위한 유연성이 필요한 경우 표준 계층 중 하나를 사용하는 것이 좋습니다.  저장소 요구 사항이 쿼리 처리량 보다 훨씬 더 신속 하 게 증가 하는 경우 저장소에 최적화 된 계층 중 하나를 고려 합니다.

## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [비용을 예측 하 고 관리 하는 방법](search-sku-manage-costs.md)