---
title: Azure IoT Hub 할당량 및 제한 이해 | Microsoft 문서
description: 개발자 가이드 - IoT Hub에 적용할 할당량 및 예상되는 제한 동작을 설명합니다.
author: robinsh
ms.author: robinsh
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 08/08/2019
ms.openlocfilehash: 71a5737434e78bc39bccdfeb950e0dbc32ed0052
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "79284695"
---
# <a name="reference---iot-hub-quotas-and-throttling"></a>참조 - IoT Hub 할당량 및 제한

이 문서에서는 IoT Hub에 대한 할당량을 설명하고 제한 작동 방식을 이해하는 데 도움이 되는 정보를 제공합니다.

## <a name="quotas-and-throttling"></a>할당량 및 제한

각 Azure 구독은 IoT Hub 최대 50개와 무료 허브 최대 1개를 가질 수 있습니다.

각 IoT 허브는 특정 계층에서 특정한 단위 수로 프로비전됩니다. 계층과 단위 수는 보낼 수 있는 메시지의 최대 일일 할당량을 결정합니다. 일일 할당량을 계산하는 데 사용되는 메시지 크기는 무료 계층 허브의 경우 0.5KB이며 기타 모든 계층의 경우 4KB입니다. 자세한 내용은 [Azure IoT Hub 가격 책정](https://azure.microsoft.com/pricing/details/iot-hub/)을 참조하세요.

또한 계층은 IoT Hub가 모든 작업에 강제로 적용하는 조정 제한을 결정합니다.

### <a name="iot-plug-and-play"></a>IoT 플러그 앤 플레이

공개 미리 보기 중에 IoT 플러그 앤 플레이 장치는 인터페이스당 별도의 메시지를 보내므로 메시지 할당량에 계산되는 메시지 수가 늘어갈 수 있습니다.

## <a name="operation-throttles"></a>작업 제한

작업 제한은 미세 범위에서 적용되는 속도 제한이며 남용을 방지하기 위한 것입니다. 또한 [트래픽 형성의](#traffic-shaping)대상이 됩니다.

다음 표에서는 적용된 제한을 보여 줍니다. 값은 개별 허브라고 합니다.

| 제한 | 무료, B1 및 S1 | B2 및 S2 | B3 및 S3 | 
| -------- | ------- | ------- | ------- |
| [ID 레지스트리](#identity-registry-operations-throttle) 작업(생성, 검색, 목록, 업데이트, 삭제) | 1.67/초/단위(100/분/단위) | 1.67/초/단위(100/분/단위) | 83.33/초/단위(5,000/분/단위) |
| [새 장치 연결(이](#device-connections-throttle) 제한은 총 연결 수가 아닌 _새 연결_속도에 적용됩니다). | 100/초 또는 12/초/단위 이상 <br/> 예를 들어 두 개의 S1 단위는 2\*12=24 새 연결/초이지만 단위에는 100개 이상의 새 연결/초가 있습니다. S1 단위가 9개인 경우 단위 전체에 대한 값은 108 새 연결/초(9\*12)입니다. | 120 새 연결/초/단위 | 초당 6,000개의 새로운 연결 |
| 디바이스-&gt;클라우드 보내기 | 초당 100송기 또는 12송이 작업/초/단위 전송 이상 <br/> 예를 들어 두 개의 S1 단위는 2\*12 = 24/sec이지만 단위 간에 초당 100개 이상의 송신 작업이 있습니다. 9대의 S1 유닛을 사용하면 유닛 전체에 108개의 송신 작전/초(9\*12)가 있습니다. | 120 전송 작업/초/단위 | 6,000전송 작업/초/단위 |
| 클라우드-디바이스 보내기<sup>1</sup> | 1.67 전송 작업/초/단위(100개의 메시지/최소/단위) | 1.67 전송 작업/초/단위(100송이 작업/최소/단위) | 83.33 초당 단위/전송 작업(5,000송송작업/최소/단위) |
| 클라우드-디바이스 받기<sup>1</sup> <br/> (디바이스에서 HTTPS를 사용하는 경우에만)| 16.67 수신 작업/초/단위(1,000수신 작업/최소/단위) | 16.67 수신 작업/초/단위(1,000수신 작업/최소/단위) | 833.33 초당 작업 수신(50,000개의 수신 작업/최소/단위) |
| 파일 업로드 | 1.67 파일 업로드 개시/초/단위(100/분/단위) | 1.67 파일 업로드 개시/초/단위(100/분/단위) | 83.33 파일 업로드 개시/초/단위(5,000/분/단위) |
| 직접 메서드<sup>1</sup> | 160KB/sec/unit<sup>2</sup> | 480KB/sec/unit<sup>2</sup> | 24MB/sec/unit<sup>2</sup> | 
| 쿼리 | 20/분/단위 | 20/분/단위 | 1,000/분/단위 |
| 쌍(디바이스 및 모듈) 읽기<sup>1</sup> | 초당 100분 | 100/초 이상 또는 10/초/단위 | 500/초/단위 |
| 쌍 업데이트(디바이스 및 모듈)<sup>1</sup> | 50/초 | 50/sec 또는 5/sec/단위의 높임 | 250/초/단위 |
| 작업(Job) 작업<sup>1</sup> <br/> (만들기, 업데이트, 나열, 삭제) | 1.67/초/단위(100/분/단위) | 1.67/초/단위(100/분/단위) | 83.33/초/단위(5,000/분/단위) |
| 작업 디바이스 연산<sup>1</sup> <br/> (쌍 업데이트, 직접 메서드 호출) | 10/초 | 10/초 또는 1/초/단위 이상 | 50/초/단위 |
| 구성 및 에지 배포<sup>1</sup> <br/> (만들기, 업데이트, 나열, 삭제) | 0.33/초/단위(20/분/단위) | 0.33/초/단위(20/분/단위) | 0.33/초/단위(20/분/단위) |
| 장치 스트림 개시 속도<sup>1</sup> | 새 스트림 5개/초 | 새 스트림 5개/초 | 새 스트림 5개/초 |
| 동시에 연결된 장치 스트림의 최대 수<sup>1</sup> | 50 | 50 | 50 |
| 최대 장치 스트림 데이터 전송<sup>1(일일</sup> 총 볼륨) | 300MB | 300MB | 300MB |

<sup>1</sup>이 기능은 IoT Hub의 기본 계층에서 사용할 수 없습니다. 자세한 내용은 [올바른 IoT Hub를 선택하는 방법](iot-hub-scaling.md)을 참조하세요. <br/><sup>2개</sup> 제한 미터 크기는 4 KB입니다.

### <a name="throttling-details"></a>제한 세부 정보

* 미터 크기는 제한 한도가 소비되는 증분을 결정합니다. 직접 호출의 페이로드가 0에서 4KB 사이이면 4KB로 계산됩니다. 초당 최대 40회 통화를 할 수 있으며, 초당 160KB/sec/unit의 제한에 도달하면 됩니다.

   마찬가지로 페이로드가 4KB에서 8KB 사이인 경우 각 호출은 8KB를 차지하며 최대 한도에 도달하면 단위당 초당 최대 20개의 호출을 만들 수 있습니다.

   마지막으로 페이로드 크기가 156KB에서 160KB 사이인 경우 허브에서 단위당 초당 1회 통화만 한 후 초당 160KB/단위의 제한에 도달하면 됩니다.

*  계층 S2에 대한 *작업 장치 작업(트윈 업데이트, 직접 메서드 호출)의* 경우 50/sec/unit은 작업을 사용하여 메서드를 호출할 때만 적용됩니다. 직접 메서드를 직접 호출하는 경우 원래 제한 제한(S2의 경우)이 24MB/sec/단위가 적용됩니다.

*  **할당량은** *하루에*허브에서 보낼 수 있는 메시지의 총 수입니다. [IoT](https://azure.microsoft.com/pricing/details/iot-hub/)Hub 가격 책정 페이지에서 **총 메시지/일 열** 에서 허브의 할당량 제한을 찾을 수 있습니다.

*  클라우드-장치 및 장치 간 스로틀은 메시지를 보낼 *rate* 수 있는 최대 속도(4KB 청크에 관계없이 메시지 수를 결정합니다). 각 메시지는 [최대 메시지 크기인](iot-hub-devguide-quotas-throttling.md#other-limits)최대 256KB까지 사용할 수 있습니다.

*  제한 한도에 도달하거나 초과하지 않도록 통화를 제한하는 것이 좋습니다. 한도에 도달하면 IoT Hub는 오류 코드 429로 응답하고 클라이언트는 백오프하고 다시 시도해야 합니다. 이러한 제한은 허브당(또는 허브/단위당 경우에 따라)입니다. 자세한 내용은 연결 [및 신뢰할 수 있는 메시징/재시도 패턴 관리를](iot-hub-reliability-features-in-sdks.md#retry-patterns)참조하십시오.

### <a name="traffic-shaping"></a>트래픽 형성

버스트 트래픽을 수용하기 위해 IoT Hub는 제한된 시간 동안 스로틀 위의 요청을 수락합니다. 이러한 요청 중 처음 몇 개는 즉시 처리됩니다. 그러나 요청 수가 계속 제한을 위반하는 경우 IoT Hub는 요청을 큐에 배치하고 제한 속도로 처리하기 시작합니다. 이 효과를 *트래픽 형성이라고*합니다. 또한 이 큐의 크기는 제한되어 있습니다. 제한 위반이 계속되면 결국 큐가 채워지고 IoT Hub가 을 `429 ThrottlingException`사용하여 요청을 거부하기 시작합니다.

예를 들어 시뮬레이션된 장치를 사용하여 초당 200개의 디바이스-클라우드 메시지를 S1 IoT Hub로 전송합니다(초당 100초 D2C 전송 제한). 처음 1~2분 동안은 메시지가 즉시 처리됩니다. 그러나 장치가 제한 제한보다 더 많은 메시지를 계속 보내므로 IoT Hub는 초당 100개의 메시지만 처리하기 시작하고 나머지는 큐에 넣습니다. 대기 시간이 증가함을 알아차리기 시작합니다. 결국 대기열이 `429 ThrottlingException` 채워지면서 점점 더 커지기 시작하고 [IoT Hub의 메트릭에서](iot-hub-metrics.md) "제한 오류 수"가 증가하기 시작합니다.

### <a name="identity-registry-operations-throttle"></a>ID 레지스트리 작업 제한

장치 ID 레지스트리 작업은 장치 관리 및 프로비전 시나리오에서 런타임으로 사용하기 위한 것입니다. 많은 수의 디바이스 ID 읽기 또는 업데이트는 [가져오기 및 내보내기 작업](iot-hub-devguide-identity-registry.md#import-and-export-device-identities)을 통해 지원됩니다.

### <a name="device-connections-throttle"></a>장치 연결 제한

*디바이스 연결* 제한은 IoT Hub에서 새 디바이스 연결을 설정할 수 있는 속도를 제어합니다. *디바이스 연결* 제한은 동시에 연결되는 디바이스의 최대 수를 제어하지 않습니다. *디바이스 연결* 속도 제한은 IoT Hub에 대해 프로비전되는 단위의 수에 따라 다릅니다.

예를 들어 S1 단위 하나를 구매하는 경우 초당 연결 제한은 100개입니다. 따라서 100,000대의 장치를 연결하려면 최소 1,000초(약 16분)가 걸립니다. 그러나 ID 레지스트리에 등록한 수만큼의 디바이스를 동시에 연결할 수 있습니다.

## <a name="other-limits"></a>기타 제한

IoT Hub에는 다른 작업 제한도 적용됩니다.

| 작업(Operation) | 제한 |
| --------- | ----- |
| 디바이스 | 단일 IoT 허브에 등록할 수 있는 총 장치 및 모듈 수는 1,000,000개로 제한됩니다. 이 제한을 늘리는 유일한 방법은 [Microsoft 지원에](https://azure.microsoft.com/support/options/)문의하는 것입니다.|
| 파일 업로드 | 장치당 동시 파일 업로드 10개. |
| 작업<sup>1</sup> | 최대 동시 작업은 1(무료 및 S1의 경우), 5(S2의 경우), 10개(S3의 경우)입니다. 그러나 모든 계층에 대해 최대 동시 [장치 가져오기/내보내기 작업은](iot-hub-bulk-identity-mgmt.md) 1입니다. <br/>작업 기록은 최대 30일까지 유지됩니다. |
| 추가 엔드포인트 | 유료 SKU 허브에는 10개, 무료 SKU 허브에는 하나의 추가 엔드포인트가 있을 수 있습니다. |
| 메시지 라우팅 쿼리 | 유료 SKU 허브에는 100개의 라우팅 쿼리가 있을 수 있습니다. 무료 SKU 허브에는 5개의 라우팅 쿼리가 있을 수 있습니다. |
| 메시지 보강 | 유료 SKU 허브에는 최대 10개의 메시지 보강이 가능합니다. 무료 SKU 허브에는 최대 2개의 메시지 보강이 가능합니다.|
| 디바이스-클라우드 메시징 | 최대 메시지 크기 256KB |
| 클라우드-디바이스 메시징<sup>1</sup> | 최대 메시지 크기 64KB 배달대기 중인 최대 메시지는 장치당 50개입니다. |
| 직접 메서드<sup>1</sup> | 최대 직접 메서드 페이로드 크기는 128KB입니다. |
| 자동 장치 및 모듈 구성<sup>1</sup> | 유료 SKU 허브당 100개 구성입니다. 체험 SKU 허브당 20개 구성입니다. |
| IoT 에지 자동 배포<sup>1</sup> | 배포당 50개의 모듈. 유료 SKU 허브당 100개의 배포(계층화된 배포 포함). 무료 SKU 허브당 배포 10회. |
| 쌍<sup>1</sup> | 원하는 속성 및 보고된 속성 섹션의 최대 크기는 각각 32KB입니다. 태그 섹션의 최대 크기는 8KB입니다. |
| 공유 액세스 정책 | 최대 공유 액세스 정책 수는 16개입니다. |

<sup>1</sup>이 기능은 IoT Hub의 기본 계층에서 사용할 수 없습니다. 자세한 내용은 [올바른 IoT Hub를 선택하는 방법](iot-hub-scaling.md)을 참조하세요.

## <a name="increasing-the-quota-or-throttle-limit"></a>할당량 또는 제한 제한 증가

지정된 시간에 [IoT 허브에서 프로비저닝된 단위 수를 늘려](iot-hub-upgrade.md)할당량 또는 제한 제한을 늘릴 수 있습니다.

## <a name="latency"></a>대기 시간

IoT Hub는 모든 작업에 낮은 대기 시간을 제공하기 위해 노력합니다. 그러나 네트워크 조건 및 기타 예측할 수 없는 요인으로 인해 특정 대기 시간을 보장할 수 없습니다. 솔루션을 설계할 때 다음을 수행해야 합니다.

* IoT Hub 작업의 최대 대기 시간을 가정하지 마세요.
* 디바이스에 가장 가까운 Azure 지역에서 IoT Hub를 프로비전합니다.
* Azure IoT Edge를 사용하여 디바이스 또는 디바이스에 가까운 게이트웨이에서 대기 시간에 민감한 작업을 수행하는 것이 좋습니다.

여러 IoT Hub 단위는 앞에서 설명한 대로 제한에 영향을 주지만 추가 대기 시간을 주거나 보장하지 않습니다.

작업 대기 시간에 예기치 않은 증가가 발생한 경우 [Microsoft 지원](https://azure.microsoft.com/support/options/)에 문의하세요.

## <a name="next-steps"></a>다음 단계

IoT Hub 제한 동작에 대한 자세한 설명을 보려면 블로그 게시물 [IoT Hub 제한](https://azure.microsoft.com/blog/iot-hub-throttling-and-you/)을 참조하세요.

이 IoT Hub 개발자 가이드의 다른 참조 자료:

* [IoT Hub 엔드포인트](iot-hub-devguide-endpoints.md)
