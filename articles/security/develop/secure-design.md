---
title: Microsoft Azure에서 안전한 응용 프로그램 디자인
description: 이 문서에서는 웹 응용 프로그램 프로젝트의 요구 사항 및 디자인 단계에서 고려해야 할 모범 사례에 대해 설명합니다.
author: TerryLanfear
manager: barbkess
ms.author: terrylan
ms.date: 06/11/2019
ms.topic: article
ms.service: security
ms.subservice: security-develop
services: azure
ms.assetid: 521180dc-2cc9-43f1-ae87-2701de7ca6b8
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.openlocfilehash: 889897cfd4dc8714ae3aea556f0924c9dbcd7825
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "78299417"
---
# <a name="design-secure-applications-on-azure"></a>Azure에서 안전한 응용 프로그램 디자인
이 문서에서는 클라우드용 응용 프로그램을 디자인할 때 고려해야 할 보안 활동 및 컨트롤을 제시합니다. Microsoft [보안 개발 수명 주기(SDL)의](https://msdn.microsoft.com/library/windows/desktop/84aed186-1d75-4366-8e61-8d258746bopq.aspx) 요구 사항 및 디자인 단계에서 고려해야 할 보안 질문 및 개념과 함께 교육 리소스가 다룹니다. 목표는 보다 안전한 응용 프로그램을 디자인하는 데 사용할 수 있는 활동 및 Azure 서비스를 정의하는 데 도움을 주는 것입니다.

다음 SDL 단계는 이 문서에서 다룹니다.

- 학습
- 요구 사항
- 디자인

## <a name="training"></a>학습
클라우드 응용 프로그램 개발을 시작하기 전에 Azure에서 보안 및 개인 정보를 이해하는 데 시간을 할애하십시오. 이 단계를 통해 응용 프로그램에서 악용 가능한 취약점의 수와 심각도를 줄일 수 있습니다. 끊임없이 변화하는 위협 환경에 적절하게 대응할 수 있도록 더욱 준비될 것입니다.

교육 단계에서 다음 리소스를 사용하여 개발자가 사용할 수 있는 Azure 서비스 및 Azure의 보안 모범 사례에 익숙해지십시오.

  - [Azure에 대한 개발자 가이드에서는](https://azure.microsoft.com/campaigns/developer-guide/) Azure를 시작하는 방법을 보여 주며, Azure를 시작하는 방법을 보여 주시면 됩니다. 이 가이드에서는 애플리케이션을 실행하고, 데이터를 저장하고, 인텔리전스를 통합하고, IoT 앱을 빌드하고, 보다 효율적이고 안전한 방식으로 솔루션을 배포하는 데 사용할 수 있는 서비스를 보여 줍니다.

  - [Azure 개발자를 위한 시작 가이드는](../../guides/developer/azure-developer-guide.md) 개발 요구에 맞게 Azure 플랫폼을 사용하려는 개발자에게 필수 정보를 제공합니다.

  - [SDK 및 도구는](https://docs.microsoft.com/azure/index?pivot=sdkstools) Azure에서 사용할 수 있는 도구에 대해 설명합니다.

  - [Azure DevOps 서비스는](https://docs.microsoft.com/azure/devops/) 개발 공동 작업 도구를 제공합니다. 이 도구에는 고성능 파이프라인, 무료 Git 리포지토리, 구성 가능한 Kanban 보드, 광범위한 자동화 및 클라우드 기반 부하 테스트가 포함됩니다.
    [DevOps 리소스 센터는](https://docs.microsoft.com/azure/devops/learn/) DevOps 사례, Git 버전 제어, 민첩한 방법, Microsoft에서 DevOps와 협력하는 방법 및 자체 DevOps 진행 상황을 평가하는 방법을 학습하기 위한 리소스를 결합합니다.

  - [프로덕션으로 이동하기 전에 고려해야 할 상위 5가지 보안 항목은](https://docs.microsoft.com/learn/modules/top-5-security-items-to-consider/index?WT.mc_id=Learn-Blog-tajanca) Azure에서 웹 응용 프로그램을 보호하고 가장 일반적이고 위험한 웹 응용 프로그램 공격으로부터 앱을 보호하는 방법을 보여 줍니다.

  - [Azure용 보안 DevOps 키트는](https://azsk.azurewebsites.net/index.html) 광범위한 자동화를 사용하는 DevOps 팀의 포괄적인 Azure 구독 및 리소스 보안 요구 사항을 충족하는 스크립트, 도구, 확장 및 자동화의 모음입니다. Azure용 보안 DevOps 키트는 기본 DevOps 워크플로에 보안을 원활하게 통합하는 방법을 보여 줄 수 있습니다. 이 키트는 개발자가 보안 코드를 작성하고 코딩 및 초기 개발 단계에서 클라우드 응용 프로그램의 보안 구성을 테스트하는 데 도움이 되는 SVT(보안 검증 테스트)와 같은 도구를 다룹니다.

  - [Azure 솔루션에 대한 보안 모범 사례는](https://azure.microsoft.com/resources/security-best-practices-for-azure-solutions) Azure를 사용하여 클라우드 솔루션을 설계, 배포 및 관리할 때 사용할 수 있는 보안 모범 사례 모음을 제공합니다.

## <a name="requirements"></a>요구 사항
요구 사항 정의 단계는 응용 프로그램이 무엇이며 릴리스될 때 수행할 작업을 정의하는 데 중요한 단계입니다. 요구 사항 단계는 응용 프로그램에 빌드할 보안 컨트롤에 대해서도 생각해 볼 시간입니다. 이 단계에서는 보안 응용 프로그램을 릴리스하고 배포할 수 있도록 SDL 전체에서 수행할 단계를 시작합니다.

### <a name="consider-security-and-privacy-issues"></a>보안 및 개인 정보 보호 문제 고려
이 단계는 기본 보안 및 개인 정보 보호 문제를 고려하는 가장 좋은 시기입니다. 프로젝트 시작 시 허용 가능한 보안 및 개인 정보 보호 수준을 정의하는 것은 팀에 도움이 됩니다.

- 보안 문제와 관련된 위험을 이해합니다.
- 개발 중 보안 버그를 식별하고 수정합니다.
- 전체 프로젝트 에 걸쳐 확립 된 수준의 보안 및 개인 정보를 적용하십시오.

응용 프로그램에 대한 요구 사항을 작성할 때는 응용 프로그램과 데이터를 안전하게 유지하는 데 도움이 되는 보안 컨트롤을 고려해야 합니다.

### <a name="ask-security-questions"></a>보안 질문하기
다음과 같은 보안 질문을 하십시오.

  - 응용 프로그램에 중요한 데이터가 포함되어 있습니까?

  - 내 응용 프로그램이 [연방 금융 기관 심사 위원회 (FFIEC)](../blueprints/ffiec-analytics-overview.md) 또는 지불 카드 산업 데이터 [보안 표준 (PCI DSS)과](../blueprints/pcidss-analytics-overview.md)같은 업계 표준 및 규정 준수 프로그램을 준수해야하는 데이터를 수집하거나 저장합니까?

  - 내 응용 프로그램에서 단독으로 또는 다른 정보와 함께 한 사람을 식별, 연락처 또는 찾는 데 사용할 수 있는 민감한 개인 또는 고객 데이터를 수집하거나 포함하고 있습니까?

  - 응용 프로그램에서 개인의 의료, 교육, 금융 또는 고용 정보에 액세스하는 데 사용할 수 있는 데이터를 수집하거나 포함합니까? 요구 사항 단계에서 데이터의 민감도를 식별하면 데이터를 분류하고 응용 프로그램에 사용할 데이터 보호 방법을 식별하는 데 도움이 됩니다.

  - 내 데이터는 어디에 어떻게 저장되는가? 응답 시간 단축과 같이 예기치 않은 변경에 대해 응용 프로그램에서 사용하는 저장소 서비스를 모니터링하는 방법을 고려합니다. 로깅에 영향을 미주하여 보다 자세한 데이터를 수집하고 문제를 심층분석할 수 있습니까?

  - 내 신청서는 (인터넷에서) 대중에게 제공되거나 내부적으로만 사용할 수 있습니까? 응용 프로그램을 공개적으로 사용할 수 있는 경우 수집될 수 있는 데이터가 잘못된 방식으로 사용되지 않도록 보호하려면 어떻게 해야 합니까? 응용 프로그램을 내부적으로만 사용할 수 있는 경우 조직에서 응용 프로그램에 액세스할 수 있는 사용자 및 응용 프로그램에 액세스할 수 있는 기간(기간)을 고려합니다.

  - 응용 프로그램 디자인을 시작하기 전에 ID 모델을 이해하고 있습니까? 사용자가 자신이 누구이며 사용자가 수행할 권한이 있는지 어떻게 결정할 수 있습니까?

  - 응용 프로그램이 중요하거나 중요한 작업(예: 송금, 문 잠금 해제 또는 의약품 전달)을 수행합니까?
    중요한 작업을 수행하는 사용자가 작업을 수행할 수 있는 권한이 있는지 확인하는 방법과 해당 사용자가 자신이 누구인지 인증하는 방법을 고려합니다. 권한 부여(AuthZ)는 인증된 보안 주체가 작업을 수행할 수 있는 권한을 부여하는 행위입니다. 인증(AuthN)은 합법적인 자격 증명에 대해 당사자에게 이의를 제기하는 행위입니다.

  - 사용자가 파일이나 기타 데이터를 업로드하거나 다운로드할 수 있도록 허용하는 등 응용 프로그램에서 위험한 소프트웨어 활동을 수행합니까? 응용 프로그램이 위험한 작업을 수행하는 경우 응용 프로그램이 악의적인 파일이나 데이터를 처리하지 못하도록 보호하는 방법을 고려합니다.

### <a name="review-owasp-top-10"></a>검토 OWASP 상위 10
[<span class="underline">OWASP 상위 10개 응용 프로그램 보안 위험을</span>](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)검토하는 것이 좋습니다.
OWASP Top 10은 웹 응용 프로그램에 대한 중요한 보안 위험을 해결합니다.
이러한 보안 위험에 대한 인식을 통해 응용 프로그램에서 이러한 위험을 최소화하는 요구 사항 및 설계 결정을 내리는 데 도움이 될 수 있습니다.

보안 제어를 통해 침해를 방지하는 것이 중요합니다.
그러나 위반이 발생할 것이라고 [가정하려고](https://docs.microsoft.com/azure/devops/learn/devops-at-microsoft/security-in-devops) 합니다. 위반이 보안에 대한 몇 가지 중요한 질문에 미리 답변하는 데 도움이 된다고 가정하면 비상 시 답변할 필요가 없습니다.

  - 공격을 어떻게 감지하나요?

  - 공격이나 위반이 있는 경우 어떻게 해야 합니까?

  - 데이터 유출 이나 변조와 같은 공격에서 어떻게 복구할 수 있습니까?

## <a name="design"></a>디자인

설계 단계는 설계 및 기능 사양에 대한 모범 사례를 수립하는 데 매우 중요합니다. 또한 프로젝트 전체에서 보안 및 개인 정보 문제를 완화하는 데 도움이 되는 위험 분석을 수행하는 데도 중요합니다.

보안 요구 사항이 있고 보안 설계 개념을 사용하는 경우 보안 결함에 대한 가능성을 피하거나 최소화할 수 있습니다. 보안 결함은 사용자가 응용 프로그램을 릴리스한 후 악의적이거나 예기치 않은 작업을 수행할 수 있도록 하는 응용 프로그램 디자인에 대한 감독입니다.

디자인 단계에서는 계층에 보안을 적용하는 방법에 대해서도 생각해 보십시오. 한 단계의 방어만으로는 충분하지 않습니다. 공격자가 WAF(웹 응용 프로그램 방화벽)를 지나면 어떻게 됩니까? 해당 공격을 방어하기 위해 다른 보안 제어가 필요한 경우를 지정합니다.

이를 염두에 두고 보안 응용 프로그램을 설계할 때 해결해야 하는 보안 설계 개념과 보안 컨트롤에 대해 설명합니다.

- 보안 코딩 라이브러리와 소프트웨어 프레임워크를 사용합니다.
- 취약한 구성 요소를 검사합니다.
- 응용 프로그램 설계 중에 위협 모델링을 사용합니다.
- 공격 표면을 줄입니다.
- ID 정책을 기본 보안 경계로 채택합니다.
- 중요한 트랜잭션에 대해 다시 인증이 필요합니다.
- 키 관리 솔루션을 사용하여 키, 자격 증명 및 기타 비밀을 보호합니다.
- 중요한 데이터를 보호합니다.
- 페일 세이프 조치를 구현합니다.
- 오류 및 예외 처리를 활용합니다.
- 로깅 및 경고를 사용합니다.

### <a name="use-a-secure-coding-library-and-a-software-framework"></a>보안 코딩 라이브러리 및 소프트웨어 프레임워크 사용

개발을 위해 보안 코딩 라이브러리와 임베디드 보안이 포함된 소프트웨어 프레임워크를 사용합니다. 개발자는 처음부터 보안 제어를 개발하는 대신 기존, 입증된 기능(암호화, 입력 위생, 출력 인코딩, 키 또는 연결 문자열 및 보안 제어로 간주되는 기타 모든 기능)을 사용할 수 있습니다. 이렇게 하면 보안 관련 설계 및 구현 결함을 방지할 수 있습니다.

프레임워크의 최신 버전과 프레임워크에서 사용할 수 있는 모든 보안 기능을 사용하고 있는지 확인합니다. Microsoft는 모든 플랫폼 또는 언어에서 작업하는 모든 개발자를 위해 포괄적인 [개발 도구 세트를](https://azure.microsoft.com/product-categories/developer-tools/) 제공하여 클라우드 응용 프로그램을 제공합니다. 다양한 [SDK](https://azure.microsoft.com/downloads/)중에서 선택하여 원하는 언어로 코딩할 수 있습니다.
고급 디버깅 기능및 기본 제공 Azure 지원이 있는 모든 기능을 갖춘 통합 개발 환경(IDE) 및 편집기를 활용할 수 있습니다.

Microsoft는 Azure에서 응용 프로그램을 개발하는 데 사용할 수 있는 다양한 [언어, 프레임워크 및 도구를](https://docs.microsoft.com/azure/index?pivot=sdkstools&panel=sdkstools-all) 제공합니다. 예를 들어 [.NET 및 .NET 코어 개발자용 Azure를](https://docs.microsoft.com/dotnet/azure/)예로 들 수 있습니다. 제공되는 각 언어 및 프레임워크에 대해 빠른 시작, 자습서 및 API 참조를 통해 빠르게 시작할 수 있습니다.

Azure는 웹 사이트 및 웹 응용 프로그램을 호스트하는 데 사용할 수 있는 다양한 서비스를 제공합니다. 이러한 서비스를 사용하면 .NET, .NET 코어, Java, 루비, Node.js, PHP 또는 파이썬 등 좋아하는 언어로 개발할 수 있습니다.
[Azure 앱 서비스 웹 앱(웹](../../app-service/overview.md) 앱)은 이러한 서비스 중 하나입니다.

웹 앱은 응용 프로그램에 Microsoft Azure의 강력한 권한을 추가합니다. 여기에는 보안, 부하 분산, 자동 크기 조정 및 자동화된 관리가 포함됩니다. 또한 패키지 관리, 스테이징 환경, 사용자 지정 도메인, SSL/TLS 인증서 및 Azure DevOps, GitHub, Docker Hub 및 기타 소스에서 연속 배포와 같은 웹 앱의 DevOps 기능을 활용할 수 있습니다.

Azure는 웹 사이트 및 웹 응용 프로그램을 호스트하는 데 사용할 수 있는 다른 서비스를 제공합니다. 대부분의 시나리오의 경우 Web Apps를 사용하는 것이 좋습니다. 마이크로 서비스 아키텍처의 경우 [Azure 서비스 패브릭을](https://azure.microsoft.com/documentation/services/service-fabric)고려하십시오.
코드가 실행되는 VM을 자세히 제어해야 하는 경우 [Azure Virtual Machines](https://azure.microsoft.com/documentation/services/virtual-machines/)를 사용하는 것이 좋습니다.
이러한 Azure 서비스 중에서 선택하는 방법에 대한 자세한 내용은 [Azure 앱 서비스, 가상 컴퓨터, 서비스 패브릭 및 클라우드 서비스의 비교를](/azure/architecture/guide/technology-choices/compute-decision-tree)참조하십시오.

### <a name="apply-updates-to-components"></a>구성 요소에 업데이트 적용

취약점을 방지하려면 클라이언트 측 및 서버 측 구성 요소(예: 프레임워크 및 라이브러리)와 업데이트에 대한 종속성을 지속적으로 인벤토리해야 합니다. 새로운 취약점과 업데이트된 소프트웨어 버전이 지속적으로 릴리스됩니다. 사용하는 라이브러리 및 구성 요소에 업데이트 또는 구성 변경 내용을 모니터링, 심사 및 적용할 계획이 있는지 확인합니다.

도구 제안에 대해 [알려진 취약점이 있는 구성 요소를 사용하는](https://www.owasp.org/index.php/Top_10-2017_A9-Using_Components_with_Known_Vulnerabilities) [OWASP(개방형 웹 응용 프로그램 보안 프로젝트)](https://www.owasp.org/index.php/Main_Page) 페이지를 참조하십시오. 사용하는 구성 요소와 관련된 보안 취약점에 대한 전자 메일 경고를 구독할 수도 있습니다.

### <a name="use-threat-modeling-during-application-design"></a>애플리케이션 디자인 과정에서 위협 모델링 사용

위협 모델링은 비즈니스 및 응용 프로그램에 대한 잠재적보안 위협을 식별한 다음 적절한 완화가 이루어지도록 하는 프로세스입니다. SDL은 잠재적인 문제를 비교적 쉽고 비용 효율적인 경우 설계 단계에서 팀이 위협 모델링에 참여해야 한다고 지정합니다. 설계 단계에서 위협 모델링을 사용하면 총 개발 비용을 크게 줄일 수 있습니다.

위협 모델링 프로세스를 용이하게 하기 위해 비보안 전문가를 염두에 두고 [SDL 위협 모델링 도구를](threat-modeling-tool.md) 설계했습니다. 이 도구를 사용하면 위협 모델을 만들고 분석하는 방법에 대한 명확한 지침을 제공하여 모든 개발자가 위협 모델링을 더 쉽게 만들 수 있습니다.

모든 트러스트 경계에서 응용 프로그램 설계를 모델링하고 [STRIDE](https://docs.google.com/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxzZWN1cmVwcm9ncmFtbWluZ3xneDo0MTY1MmM0ZDI0ZjQ4ZDMy) 위협을 열거하는 경우 스푸핑, 변조, 거부, 정보 공개, 서비스 거부 및 권한 상승 등 모든 신뢰 경계를 통해 설계 오류를 조기에 파악할 수 있는 효과적인 방법이 입증되었습니다. 다음 표에서는 STRIDE 위협을 나열하고 Azure에서 제공하는 기능을 사용하는 몇 가지 예제 완화 를 제공합니다. 이러한 완화 방식을 모든 상황에서 사용할 수 있는 것은 아닙니다.

| 위협 | 보안 속성 | 잠재적인 Azure 플랫폼 완화 |
| ---------------------- | --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 스푸핑               | 인증        | [HTTPS 연결이 필요합니다.](https://docs.microsoft.com/aspnet/core/security/enforcing-ssl?view=aspnetcore-2.1&tabs=visual-studio) |
| 변조              | 무결성             | SSL/TLS 인증서의 유효성을 검사합니다. SSL/TLS를 사용하는 응용 프로그램은 연결하는 엔터티의 X.509 인증서를 완전히 확인해야 합니다. Azure Key Vault 인증서를 사용하여 [x509 인증서를 관리합니다.](../../key-vault/about-keys-secrets-and-certificates.md#key-vault-certificates) |
| 거부            | 거부 없음       | Azure [모니터링 및 진단](https://docs.microsoft.com/azure/architecture/best-practices/monitoring)을 사용하도록 설정합니다.|
| 정보 공개 | 기밀성       | [미사용](../fundamentals/encryption-atrest.md) 및 [전송](../fundamentals/data-encryption-best-practices.md#protect-data-in-transit)중 중요한 데이터를 암호화합니다. |
| 서비스 거부      | 가용성          | 잠재적인 서비스 거부 조건에 대한 성능 메트릭을 모니터링합니다. 연결 필터를 구현합니다. 응용 프로그램 디자인 모범 사례와 결합된 [Azure DDoS 보호는](../../virtual-network/ddos-protection-overview.md#next-steps)DDoS 공격에 대한 방어를 제공합니다.|
| 권한 높이기 | 권한 부여         | Azure Active 디렉터리 <span class="underline"> </span> 권한 있는 ID [관리를](../../active-directory/privileged-identity-management/pim-configure.md)사용합니다.|

### <a name="reduce-your-attack-surface"></a>공격 표면 감소

공격 영역은 잠재적인 취약점이 발생할 수 있는 전체 합계입니다. 이 백서에서는 응용 프로그램의 공격 표면에 중점을 둡니다.
응용 프로그램을 공격으로부터 보호하는 데 중점을 둡니다. 공격 노출 을 최소화하는 간단하고 빠른 방법은 응용 프로그램에서 사용하지 않는 리소스와 코드를 제거하는 것입니다. 응용 프로그램이 작을수록 공격 표면이 작아지게 됩니다. 예를 들어 다음을 제거합니다.

- 아직 릴리스하지 않은 기능에 대한 코드입니다.
- 지원 코드 디버깅.
- 사용되지 않거나 더 이상 사용되지 않는 네트워크 인터페이스 및 프로토콜입니다.
- 사용하지 않는 가상 컴퓨터 및 기타 리소스입니다.

리소스를 정기적으로 정리하고 사용하지 않는 코드를 제거하는 것은 악의적인 행위자의 공격 기회를 줄이는 좋은 방법입니다.

공격 표면을 줄이는 보다 상세하고 심층적인 방법은 공격 표면 분석을 완료하는 것입니다. 공격 표면 분석을 사용하면 보안 취약점을 검토하고 테스트해야 하는 시스템의 일부를 매핑할 수 있습니다.

공격 노출 영역 분석의 목적은 응용 프로그램의 위험 영역을 이해하여 개발자와 보안 전문가가 응용 프로그램의 공격에 열려 있는 부분을 파악하는 것입니다. 그런 다음 이러한 가능성을 최소화하고 공격 노출 표면이 변경되는 시기와 방법, 위험 관점에서 이 가능성을 추적할 수 있습니다.

공격 표면 분석을 통해 다음을 식별할 수 있습니다.

- 보안 취약점을 검토하고 테스트해야 하는 시스템의 기능 및 부분입니다.
- 심층 방어보호가 필요한 고위험 코드 영역(방어해야 하는 시스템의 일부).
- 공격 표면을 변경하고 위협 평가를 새로 고쳐야 하는 경우

공격자가 잠재적인 약점 이나 취약점을 악용 할 수있는 기회를 줄이려면 응용 프로그램의 전반적인 공격 표면을 철저히 분석해야합니다. 또한 시스템 서비스에 대한 액세스를 비활성화하거나 제한하고, 최소 권한 원칙을 적용하고, 가능한 경우 계층화된 방어를 사용하는 것도 포함됩니다.

SDL의 확인 단계에서 [공격 표면 검토를 수행하는](secure-develop.md#conduct-attack-surface-review) 데 대해 설명합니다.

> [!NOTE]
> **위협 모델링과 공격 표면 분석의 차이점은 무엇입니까?**
위협 모델링은 응용 프로그램에 대한 잠재적인 보안 위협을 식별하고 위협에 대한 적절한 완화가 이루어지도록 하는 프로세스입니다. 공격 표면 분석은 공격에 개방된 코드의 위험이 높은 영역을 식별합니다. 여기에는 응용 프로그램의 위험이 높은 영역을 방어하는 방법을 찾고 응용 프로그램을 배포하기 전에 해당 코드 영역을 검토 및 테스트하는 작업이 포함됩니다.

### <a name="adopt-a-policy-of-identity-as-the-primary-security-perimeter"></a>기본 보안 경계로서의 ID 정책 채택

클라우드 애플리케이션을 디자인할 때는 네트워크 중심 접근 방식에서 ID 중심 접근 방식에 이르기까지 보안 경계 초점을 확장하는 것이 중요합니다. 역사적으로 기본 온-프레미스 보안 경계는 조직의 네트워크였습니다. 대부분의 온-프레미스 보안 설계는 네트워크를 기본 보안 피벗으로 사용합니다. 클라우드 응용 프로그램의 경우 ID를 기본 보안 경계로 간주하여 더 나은 서비스를 제공하는 것이 좋습니다.

웹 응용 프로그램 개발에 대한 ID 중심 접근 방식을 개발하기 위해 수행할 수 있는 일:

- 사용자에 대한 다단계 인증을 적용합니다.
- 강력한 인증 및 권한 부여 플랫폼을 사용합니다.
- 최소 권한 원칙을 적용합니다.
- 적시 액세스를 구현합니다.

#### <a name="enforce-multi-factor-authentication-for-users"></a>사용자에 대한 다단계 인증 적용

따라서 2단계 인증을 사용해야 합니다. 이중 인증은 사용자 이름 및 암호 유형의 인증에 내재된 보안 약점을 피하기 때문에 인증 및 권한 부여의 현재 표준입니다. Azure 관리 인터페이스(Azure Portal/remote PowerShell) 및 고객 대면 서비스에 대한 액세스는 [Azure 다단계 인증을](../../active-directory/authentication/concept-mfa-howitworks.md)사용하도록 설계 및 구성되어야 합니다.

#### <a name="use-strong-authentication-and-authorization-platforms"></a>강력한 인증 및 권한 부여 플랫폼 사용

사용자 지정 코드 대신 플랫폼에서 제공하는 인증 및 권한 부여 메커니즘을 사용합니다. 사용자 지정 인증 코드를 개발하는 것은 오류가 발생하기 쉽기 때문입니다. 상용 코드(예: Microsoft의 코드)는 보안을 위해 광범위하게 검토되는 경우가 많습니다. [Azure AD(Azure Active Directory)](../../active-directory/fundamentals/active-directory-whatis.md)는 ID 및 액세스 관리를 위한 Azure 솔루션입니다. 이러한 Azure AD 도구 및 서비스는 보안 개발에 도움이 됩니다.

- [Azure AD ID 플랫폼(개발자용 Azure AD)은](../../active-directory/develop/about-microsoft-identity-platform.md) 개발자가 사용자를 안전하게 로그인하는 앱을 빌드하는 데 사용하는 클라우드 ID 서비스입니다. Azure AD는 단일 테넌트, LOB(업무 일등구) 앱을 빌드하는 개발자와 다중 테넌트 앱을 개발하려는 개발자를 지원합니다. 기본 로그인 외에도 Azure AD를 사용하여 빌드된 앱은 Azure AD 플랫폼에 빌드된 Microsoft API 및 사용자 지정 API를 호출할 수 있습니다. Azure AD ID 플랫폼은 OAuth 2.0 및 OpenID Connect와 같은 업계 표준 프로토콜을 지원합니다.

- [Azure Active Directory B2C(Azure AD B2C)는](../../active-directory-b2c/index.yml) 고객이 응용 프로그램을 사용할 때 프로필에 등록, 로그인 및 관리하는 방법을 사용자 지정하고 제어하는 데 사용할 수 있는 ID 관리 서비스입니다. 여기에는 iOS, Android 및 .NET용으로 개발된 응용 프로그램이 포함됩니다. Azure AD B2C는 고객 ID를 보호하면서 이러한 작업을 활성화합니다.

#### <a name="apply-the-principle-of-least-privilege"></a>최소 권한 원칙 적용

[최소 권한의](https://en.wikipedia.org/wiki/Principle_of_least_privilege) 개념은 사용자에게 작업을 수행하는 데 필요한 정확한 수준의 액세스 및 제어 권한을 제공하는 것을 의미합니다.

소프트웨어 개발자에게 도메인 관리자 권한이 필요합니까? 관리 도우미가 개인용 컴퓨터에서 관리 컨트롤에 액세스해야 합니까? 소프트웨어에 대한 액세스를 평가하는 것도 마찬가지입니다. [RBAC(역할 기반 액세스 제어)를](../../role-based-access-control/overview.md) 사용하여 응용 프로그램에서 사용자에게 서로 다른 능력과 권한을 부여하는 경우 모든 사용자에게 모든 정보에 대한 액세스 권한을 부여하지는 않습니다. 각 역할에 필요한 것에 대한 액세스를 제한하면 보안 문제가 발생할 위험을 제한할 수 있습니다.

응용 프로그램이 액세스 패턴 전체에서 [최소 권한을](https://docs.microsoft.com/windows-server/identity/ad-ds/plan/security-best-practices/implementing-least-privilege-administrative-models#in-applications) 적용해야 합니다.

> [!NOTE]
>  최소 권한의 규칙은 소프트웨어와 소프트웨어를 만드는 사람들에게 적용해야합니다. 소프트웨어 개발자가 너무 많은 액세스 권한을 부여받으면 IT 보안에 큰 위험이 될 수 있습니다. 개발자가 악의적인 의도를 가지고 있거나 너무 많은 액세스 권한을 부여받은 경우 심각한 결과가 초래될 수 있습니다. 개발 수명 주기 전반에 걸쳐 개발자에게 최소 권한 규칙을 적용하는 것이 좋습니다.

#### <a name="implement-just-in-time-access"></a>적시 액세스 구현

*JIT(적시)* 액세스를 구현하여 권한 노출 시간을 더 낮춥니다. [Azure AD 권한 ID 관리를](../../active-directory/users-groups-roles/directory-admin-roles-secure.md#stage-3-build-visibility-and-take-full-control-of-admin-activity) 사용하여 다음을 수행합니다.

- 사용자에게 JIT만 필요한 권한을 부여합니다.
- 권한을 자동으로 해지하는 짧은 기간 동안 자신 있게 역할을 할당합니다.

### <a name="require-re-authentication-for-important-transactions"></a>중요한 트랜잭션에 대해 다시 인증 필요

[교차 사이트 요청](https://docs.microsoft.com/aspnet/core/security/anti-request-forgery?view=aspnetcore-2.1) 위조(XSRF *XSRF* 또는 *CSRF라고도*함)는 악의적인 웹 앱이 클라이언트 브라우저와 해당 브라우저를 신뢰하는 웹 앱 간의 상호 작용에 영향을 주는 웹 호스팅 앱에 대한 공격입니다. 웹 브라우저는 웹 사이트에 대한 모든 요청과 함께 일부 유형의 인증 토큰을 자동으로 전송하기 때문에 사이트 간 요청 위조 공격이 가능합니다.
공격이 사용자의 이전에 인증된 세션을 활용하기 때문에 이러한 형태의 악용은 *원클릭 공격* 또는 *세션 승마라고도* 합니다.

이러한 종류의 공격을 방어하는 가장 좋은 방법은 구매, 계정 비활성화 또는 암호 변경과 같은 모든 중요한 트랜잭션 전에 사용자만 제공할 수 있는 것을 사용자에게 요청하는 것입니다. 사용자에게 암호를 다시 입력하거나, 보안 문자를 완료하거나, 사용자만 가질 수 있는 비밀 토큰을 제출하도록 요청할 수 있습니다. 가장 일반적인 방법은 비밀 토큰입니다.

### <a name="use-a-key-management-solution-to-secure-keys-credentials-and-other-secrets"></a>키 관리 솔루션을 사용하여 키, 자격 증명 및 기타 비밀 보호

키와 자격 증명을 잃어 버리는 것은 일반적인 문제입니다. 키 및 자격 증명을 분실하는 것보다 더 위험한 상황은 권한이 없는 사람이 해당 정보에 액세스하는 것뿐입니다. 공격자는 자동화 된 수동 기술을 활용하여 GitHub와 같은 코드 리포지토리에 저장된 키와 암호를 찾을 수 있습니다. 이러한 공용 코드 리포지토리 또는 다른 서버에 키와 비밀을 넣지 마십시오.

항상 키 관리 솔루션에 키, 인증서, 비밀 및 연결 문자열을 배치합니다. 키와 비밀이 하드웨어 보안 모듈(HSM)에 저장되는 중앙 집중식 솔루션을 사용할 수 있습니다. Azure는 [Azure 키 볼트를](../../key-vault/key-vault-overview.md)통해 클라우드에서 HSM을 제공합니다.

키 볼트는 *비밀 저장소입니다*: 그것은 응용 프로그램 비밀을 저장하기위한 중앙 집중식 클라우드 서비스입니다. Key Vault는 응용 프로그램 기밀을 단일 중앙 위치에 유지하고 보안 액세스, 권한 제어 및 액세스 로깅을 제공하여 기밀 데이터를 안전하게 유지합니다.

비밀은 개별 *볼트에 저장됩니다.* 각 볼트에는 액세스를 제어하는 자체 구성 및 보안 정책이 있습니다. REST API 또는 대부분의 프로그래밍 언어에서 사용할 수 있는 클라이언트 SDK를 통해 데이터를 얻을 수 있습니다.

> [!IMPORTANT]
> Azure 키 볼트는 서버 응용 프로그램에 대한 구성 비밀을 저장하도록 설계되었습니다. 앱 사용자에게 속한 데이터를 저장하기 위한 것이 아닙니다. 이는 성능 특성, API 및 비용 모델에 반영됩니다.
>
> 사용자 데이터는 투명 데이터 암호화(TDE)가 있는 Azure SQL Database 인스턴스 또는 Azure 저장소 서비스 암호화를 사용하는 저장소 계정에 있는 것과 같이 다른 곳에 저장해야 합니다. 응용 프로그램에서 이러한 데이터 저장소에 액세스하는 데 사용되는 비밀은 Azure Key Vault에 보관할 수 있습니다.

### <a name="protect-sensitive-data"></a>중요한 데이터 보호

데이터 보호는 보안 전략의 필수적인 부분입니다.
데이터를 분류하고 데이터 보호 요구 사항을 식별하면 데이터 보안을 염두에 두고 앱을 디자인하는 데 도움이 됩니다. 저장된 데이터를 민감도 및 비즈니스 영향별로 분류(분류)하면 개발자가 데이터와 관련된 위험을 결정하는 데 도움이 됩니다.

데이터 형식을 디자인할 때 적용 가능한 모든 데이터를 중요데이터로 레이블을 지정합니다. 응용 프로그램이 해당 데이터를 중요한 데이터로 처리하는지 확인합니다. 이러한 방법을 사용하면 중요한 데이터를 보호할 수 있습니다.

- 암호화를 사용합니다.
- 키 및 암호와 같은 하드 코딩 암호를 피하십시오.
- 액세스 제어 및 감사가 제자리에 있는지 확인합니다.

#### <a name="use-encryption"></a>암호화 사용

데이터 보호는 보안 전략의 필수적인 부분이어야 합니다.
데이터가 데이터베이스에 저장되거나 위치 간에 앞뒤로 이동하는 경우 [미사용 데이터](../fundamentals/encryption-atrest.md) 암호화(데이터베이스에 있는 동안)와 [전송 중 데이터](../fundamentals/data-encryption-best-practices.md#protect-data-in-transit) 암호화(사용자, 데이터베이스, API 또는 서비스 끝점을 오가는 길)를 사용합니다. 항상 SSL/TLS 프로토콜을 사용하여 데이터를 교환하는 것이 좋습니다. 암호화에 최신 버전의 TLS를 사용해야 합니다(현재 버전 1.2).

#### <a name="avoid-hard-coding"></a>하드 코딩 방지

어떤 것들은 소프트웨어에서 하드 코딩해서는 안됩니다. 호스트 이름 또는 IP 주소, URL, 이메일 주소, 사용자 이름, 암호, 저장소 계정 키 및 기타 암호화 키를 예로 들 수 있습니다. 코드의 주석 섹션을 포함하여 코드에서 하드 코딩할 수 있는 것 또는 할 수 없는 것과 관련된 요구 사항을 구현하는 것이 좋습니다.

코드에 주석을 넣을 때 중요한 정보를 저장하지 않도록 해야 합니다. 여기에는 전자 메일 주소, 암호, 연결 문자열, 조직의 다른 사람만 알 수 있는 응용 프로그램에 대한 정보 및 공격자가 응용 프로그램이나 조직을 공격하는 데 이점을 줄 수 있는 모든 정보가 포함됩니다. .

기본적으로 개발 프로젝트의 모든 것이 배포될 때 공개적인 지식이 된다고 가정합니다. 프로젝트에 모든 종류의 중요한 데이터를 포함하지 마십시오.

앞서 Azure [키 자격 증명 모음에](../../key-vault/key-vault-overview.md)대해 설명했습니다. 키 볼트를 사용하여 키와 암호와 같은 암호를 하드 코딩하는 대신 저장할 수 있습니다. Azure 리소스에 대한 관리ID와 함께 Key Vault를 사용하는 경우 Azure 웹 앱은 소스 제어 또는 구성에 비밀을 저장하지 않고도 비밀 구성 값에 쉽고 안전하게 액세스할 수 있습니다. 자세한 내용은 [Azure 키 자격 증명 모음을 사용하여 서버 앱의 비밀 관리를](https://docs.microsoft.com/learn/modules/manage-secrets-with-azure-key-vault/)참조하십시오.

### <a name="implement-fail-safe-measures"></a>페일 세이프 조치 구현

응용 프로그램은 실행 중에 발생하는 [오류를](https://docs.microsoft.com/dotnet/standard/exceptions/) 일관된 방식으로 처리할 수 있어야 합니다. 응용 프로그램은 모든 오류를 catch해야 하며 안전 오류가 없거나 닫힙싸게 됩니다.

또한 의심스럽거나 악의적인 활동을 식별하기에 충분한 사용자 컨텍스트로 오류가 기록되도록 해야 합니다. 지연된 포렌식 분석을 허용하기 위해 로그는 충분한 시간 동안 보존되어야 합니다. 로그는 로그 관리 솔루션에서 쉽게 사용할 수 있는 형식이어야 합니다. 보안과 관련된 오류에 대한 경고가 트리거되었는지 확인합니다. 로깅 및 모니터링이 부족하면 공격자가 시스템을 추가로 공격하고 지속성을 유지할 수 있습니다.

### <a name="take-advantage-of-error-and-exception-handling"></a>오류 및 예외 처리 활용

올바른 오류 및 [예외 처리를](https://docs.microsoft.com/dotnet/standard/exceptions/best-practices-for-exceptions) 구현하는 것은 방어 코딩의 중요한 부분입니다. 시스템을 안정적이고 안전하게 만드는 데는 오류 및 예외 처리가 중요합니다. 오류 처리의 실수는 공격자에게 정보를 유출하고 공격자가 플랫폼 및 설계에 대해 더 많이 이해할 수 있도록 돕는 등 다양한 종류의 보안 취약점으로 이어질 수 있습니다.

다음 사항을 확인합니다.

- 코드에서 중복된 [try/catch 블록을](https://docs.microsoft.com/dotnet/standard/exceptions/how-to-use-the-try-catch-block-to-catch-exceptions) 피하기 위해 중앙 집중식 방식으로 예외를 처리합니다.

- 모든 예기치 않은 동작은 응용 프로그램 내에서 처리됩니다.

- 사용자에게 표시되는 메시지는 중요한 데이터를 누설하지 않지만 문제를 설명하기에 충분한 정보를 제공합니다.

- 예외가 기록되고 포렌식 또는 사고 대응 팀이 조사할 수 있는 충분한 정보를 제공합니다.

[Azure Logic Apps는](../../logic-apps/logic-apps-overview.md) 종속 시스템에 의해 발생하는 [오류 및 예외를 처리하기](../../logic-apps/logic-apps-exception-handling.md) 위한 일류 환경을 제공합니다. Logic Apps를 사용하여 워크플로를 만들어 기업 및 조직 전체에서 앱, 데이터, 시스템 및 서비스를 통합하는 작업 및 프로세스를 자동화할 수 있습니다.

### <a name="use-logging-and-alerting"></a>로깅 및 경고 사용

보안 조사를 위해 보안 문제를 [기록하고](https://docs.microsoft.com/aspnet/core/fundamentals/logging/?view=aspnetcore-2.1) 문제에 대한 경고를 트리거하여 사람들이 적시에 문제에 대해 알 수 있도록 합니다. 모든 구성 요소에 감사 및 로깅을 사용하도록 설정합니다. 감사 로그는 사용자 컨텍스트를 캡처하고 모든 중요한 이벤트를 식별해야 합니다.

사용자가 사이트에 제출하는 중요한 데이터를 기록하지 않는지 확인합니다. 중요한 데이터의 예는 다음과 같습니다.

- 사용자 자격 증명
- 사회 보장 번호 또는 기타 식별 정보
- 신용 카드 번호 또는 기타 금융 정보
- 의료 정보
- 암호화된 정보의 암호를 해독하는 데 사용할 수 있는 개인 키 또는 기타 데이터
- 애플리케이션을 보다 효과적으로 공격하는 데 용할 수 있는 시스템 또는 애플리케이션 정보

응용 프로그램에서 성공 및 실패한 사용자 로그인, 암호 재설정, 암호 변경, 계정 잠금 및 사용자 등록과 같은 사용자 관리 이벤트를 모니터링해야 합니다. 이러한 이벤트에 대한 로깅을 사용하면 의심스러운 동작을 감지하고 이에 대응할 수 있습니다. 또한 응용 프로그램에 액세스하는 사용자와 같은 작업 데이터를 수집할 수 있습니다.

## <a name="next-steps"></a>다음 단계
다음 문서에서는 보안 응용 프로그램을 개발하고 배포하는 데 도움이 되는 보안 제어 및 활동을 권장합니다.

- [보안 애플리케이션 개발](secure-develop.md)
- [보안 애플리케이션 배포](secure-deploy.md)
