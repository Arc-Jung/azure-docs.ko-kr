---
title: VM용 Azure 모니터를 통해 앱 종속성 보기
description: 맵은 VM용 Azure 모니터의 기능입니다. Windows 및 Linux 시스템에서 응용 프로그램 구성 요소를 자동으로 검색하고 서비스 간의 통신을 매핑합니다. 이 문서에서는 다양한 시나리오에서 맵 기능을 사용하는 방법에 대한 자세한 내용을 제공합니다.
ms.subservice: ''
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 03/20/2020
ms.openlocfilehash: acb96984a49e4ad8535f87a41da11b3b63ae207b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "80283857"
---
# <a name="use-the-map-feature-of-azure-monitor-for-vms-to-understand-application-components"></a>VM용 Azure 모니터의 맵 기능을 사용하여 응용 프로그램 구성 요소를 이해합니다.
VM용 Azure 모니터에서 Azure 또는 사용자 환경에서 실행되는 Windows 및 Linux 가상 시스템(VM)에서 검색된 응용 프로그램 구성 요소를 볼 수 있습니다. 두 가지 방법으로 VM을 관찰할 수 있습니다. VM에서 직접 맵을 보거나 Azure Monitor에서 맵을 보고 VM 그룹 전체의 구성 요소를 확인합니다. 이 문서에서는 이 두 가지 보기 방법과 맵 기능을 사용하는 방법을 이해하는 데 도움이 됩니다. 

VM용 Azure Monitor를 구성하는 방법에 대한 자세한 내용은 [VM용 Azure Monitor 사용하도록 설정](vminsights-enable-overview.md)을 참조하세요.

## <a name="sign-in-to-azure"></a>Azure에 로그인
[Azure 포털에](https://portal.azure.com)로그인합니다.

## <a name="introduction-to-the-map-experience"></a>지도 체험 소개
맵 경험에 들어가기 전에 정보를 제시하고 시각화하는 방법을 이해해야 합니다. VM에서 직접 맵 기능을 선택하든 Azure 모니터에서 선택하든 맵 기능은 일관된 환경을 제공합니다. 유일한 차이점은 Azure Monitor에서 하나의 맵에 다중 계층 응용 프로그램 또는 클러스터의 모든 구성원이 표시된다는 것입니다.

맵 기능은 다음과 같은 실행 중인 프로세스를 검색하여 VM 종속성을 시각화합니다. 

- 서버 간의 활성 네트워크 연결.
- 인바운드 및 아웃바운드 연결 대기 시간입니다.
- 지정된 시간 범위에 걸쳐 TCP에 연결된 아키텍처에 대한 포트입니다.  
 
VM을 확장하여 프로세스 세부 정보와 VM과 통신하는 프로세스만 표시합니다. 클라이언트 그룹은 VM에 연결하는 프런트 엔드 클라이언트의 수를 표시합니다. 서버 포트 그룹은 VM이 연결하는 백 엔드 서버의 수를 표시합니다. 서버 포트 그룹을 확장하여 해당 포트를 통해 연결되는 서버의 자세한 목록을 확인합니다.  

VM을 선택하면 오른쪽의 **속성** 창에 VM의 속성이 표시됩니다. 속성에는 운영 체제에서 보고하는 시스템 정보, Azure VM의 속성 및 검색된 연결을 요약하는 도넛형 차트가 포함됩니다. 

![속성 창](./media/vminsights-maps/properties-pane-01.png)

창의 오른쪽에 있는 **로그 이벤트를** 선택하여 VM이 Azure Monitor에 보낸 데이터 목록을 표시합니다. 이 데이터는 쿼리에 사용할 수 있습니다.  레코드 유형을 선택하여 해당 레코드 유형에 대한 결과가 표시되는 **로그** 페이지를 엽니다. VM에 대해 필터링된 미리 구성된 쿼리도 표시됩니다.  

![로그 이벤트 창](./media/vminsights-maps/properties-pane-logs-01.png)

**로그** 페이지를 닫고 **속성** 창으로 돌아갑니다. 거기에서 **경고를** 선택하여 VM 상태 기준 경고를 봅니다. 맵 기능은 Azure 경고와 통합되어 선택한 시간 범위에서 선택한 서버에 대한 경고를 표시합니다. 서버는 현재 경고에 대한 **아이콘을** 표시하고 컴퓨터 경고 창에는 경고가 나열됩니다. 

![경고 창](./media/vminsights-maps/properties-pane-alerts-01.png)

맵 피처에 관련 경고가 표시되도록 하려면 특정 컴퓨터에 적용되는 경고 규칙을 만듭니다.

- 컴퓨터별로 경고를 그룹화하는 절을 포함합니다(예: **컴퓨터 간격 1분).**
- 메트릭에 경고를 기반으로 합니다.

Azure 경고 및 경고 규칙 만들기에 대한 자세한 내용은 [Azure 모니터의 통합 경고를](../../azure-monitor/platform/alerts-overview.md)참조하십시오.

오른쪽 위 모서리에서 **범례** 옵션은 맵의 기호와 역할을 설명합니다. 맵을 자세히 살펴보고 이동하려면 오른쪽 아래 모서리에 있는 확대/축소 컨트롤을 사용합니다. 확대/축소 수준을 설정하고 맵을 페이지 크기에 맞출 수 있습니다.  

## <a name="connection-metrics"></a>연결 메트릭
**연결** 창에는 TCP 포트를 통해 VM에서 선택한 연결에 대한 표준 메트릭이 표시됩니다. 메트릭에는 응답 시간, 분당 요청, 트래픽 처리량 및 링크가 포함됩니다.  

![연결 창의 네트워크 연결 차트](./media/vminsights-maps/map-group-network-conn-pane-01.png)  

### <a name="failed-connections"></a>실패한 연결
맵에 프로세스 및 컴퓨터에 대한 실패한 연결이 표시됩니다. 빨간색 파선은 클라이언트 시스템이 프로세스 또는 포트에 도달하지 못했음을 나타냅니다. 종속성 에이전트를 사용하는 시스템의 경우 에이전트는 실패한 연결 시도를 보고합니다. 맵 기능은 연결을 설정하지 못하는 TCP 소켓을 관찰하여 프로세스를 모니터링합니다. 이 오류는 방화벽, 클라이언트 또는 서버의 잘못된 구성 또는 사용할 수 없는 원격 서비스로 인해 발생할 수 있습니다.

![지도에서 실패한 연결](./media/vminsights-maps/map-group-failed-connection-01.png)

실패한 연결을 이해하면 문제를 해결하고 마이그레이션의 유효성을 검사하고 보안을 분석하고 서비스의 전체 아키텍처를 이해하는 데 도움이 됩니다. 실패한 연결은 때때로 무해하지만 종종 문제를 가리킵니다. 예를 들어 장애 조치 환경에 갑자기 연결할 수 없게 되거나 클라우드 마이그레이션 후 두 응용 프로그램 계층이 서로 통신할 수 없는 경우 연결이 실패할 수 있습니다.

### <a name="client-groups"></a>클라이언트 그룹
맵에서 클라이언트 그룹은 매핑된 컴퓨터에 연결하는 클라이언트 컴퓨터를 나타냅니다. 단일 클라이언트 그룹은 개별 프로세스 또는 컴퓨터에 대한 클라이언트를 나타냅니다.

![지도의 클라이언트 그룹](./media/vminsights-maps/map-group-client-groups-01.png)

클라이언트 그룹의 모니터링되는 클라이언트 및 IP 주소를 보려면 그룹을 선택합니다. 그룹의 내용은 아래에 표시됩니다.  

![맵의 IP 주소 클라이언트 목록](./media/vminsights-maps/map-group-client-group-iplist-01.png)

그룹에 모니터링및 모니터링되지 않는 클라이언트가 포함된 경우 그룹의 도넛어 차트의 해당 섹션을 선택하여 클라이언트를 필터링할 수 있습니다.

### <a name="server-port-groups"></a>서버 포트 그룹
서버 포트 그룹은 매핑된 컴퓨터에서 인바운드 연결이 있는 서버의 포트를 나타냅니다. 그룹에는 서버 포트와 해당 포트에 대한 연결이 있는 서버 수의 수가 포함됩니다. 그룹을 선택하여 개별 서버 및 연결을 확인합니다. 

![맵의 서버 포트 그룹](./media/vminsights-maps/map-group-server-port-groups-01.png)  

그룹에 모니터링 및 모니터링되지 않는 서버가 포함된 경우 그룹의 도넛 어 차트의 해당 섹션을 선택하여 서버를 필터링할 수 있습니다.

## <a name="view-a-map-from-a-vm"></a>VM에서 맵 보기 

VM에서 직접 VM용 Azure 모니터에 액세스하려면 다음을 수행하십시오.

1. Azure Portal에서 **Virtual Machines**를 선택합니다. 
2. 목록에서 VM을 선택합니다. **모니터링** 섹션에서 **인사이트를**선택합니다.  
3. **맵** 탭을 선택합니다.

맵은 지정된 시간 범위에 걸쳐 활성 네트워크 연결이 있는 실행 중인 프로세스 그룹 및 프로세스를 검색하여 VM의 종속성을 시각화합니다.  

기본적으로 맵은 최근 30분을 보여줍니다. 종속성이 과거에 어떻게 보였는지 확인하려면 최대 1시간의 기록 시간 범위를 쿼리할 수 있습니다. 쿼리를 실행하려면 왼쪽 위 모서리에 있는 **TimeRange** 선택기를 사용합니다. 예를 들어 인시던트 중에 쿼리를 실행하거나 변경 하기 전에 상태를 볼 수 있습니다.  

![직접 VM 맵 개요](./media/vminsights-maps/map-direct-vm-01.png)

## <a name="view-a-map-from-a-virtual-machine-scale-set"></a>가상 시스템 규모 집합에서 맵 보기

가상 시스템 규모 집합에서 직접 VM용 Azure 모니터에 액세스하려면 다음을 수행합니다.

1. Azure 포털에서 **가상 시스템 크기 집합을**선택합니다.
2. 목록에서 VM을 선택합니다. 그런 다음 **모니터링** 섹션에서 **인사이트를**선택합니다.  
3. **맵** 탭을 선택합니다.

맵은 그룹의 종속성과 함께 축척 집합의 모든 인스턴스를 그룹 노드로 시각화합니다. 확장노드는 축척 집합의 인스턴스를 나열합니다. 이러한 인스턴스를 한 번에 10개로 스크롤할 수 있습니다. 

특정 인스턴스에 대한 맵을 로드하려면 먼저 맵에서 해당 인스턴스를 선택합니다. 그런 다음 오른쪽에 있는 **타원** 단추(...)를 선택하고 **서버 맵 로드를**선택합니다. 표시되는 맵에는 지정된 시간 범위에 걸쳐 활성 네트워크 연결이 있는 프로세스 그룹 및 프로세스가 표시됩니다. 

기본적으로 맵은 최근 30분을 보여줍니다. 종속성이 과거에 어떻게 보였는지 확인하려면 최대 1시간의 기록 시간 범위를 쿼리할 수 있습니다. 쿼리를 실행하려면 **TimeRange** 선택기를 사용합니다. 예를 들어 인시던트 중에 쿼리를 실행하거나 변경 하기 전에 상태를 볼 수 있습니다.

![직접 VM 맵 개요](./media/vminsights-maps/map-direct-vmss-01.png)

>[!NOTE]
>가상 시스템 축척 집합에 대한 **인스턴스** 보기에서 특정 인스턴스에 대한 맵에 액세스할 수도 있습니다. **설정** 섹션에서 **인스턴스** > **인사이트**로 이동합니다.

## <a name="view-a-map-from-azure-monitor"></a>Azure 모니터에서 맵 보기

Azure 모니터에서 맵 기능은 VM 및 해당 종속성에 대한 전역 보기를 제공합니다. Azure 모니터의 맵 기능에 액세스하려면 다음을 수행하십시오.

1. Azure 포털에서 **모니터**를 선택합니다. 
2. **인사이트** 섹션에서 **가상 컴퓨터를**선택합니다.
3. **맵** 탭을 선택합니다.

   ![여러 VM의 Azure 모니터 개요 맵](./media/vminsights-maps/map-multivm-azure-monitor-01.png)

페이지 상단의 작업 영역 선택자를 사용하여 **작업 영역을** 선택합니다. 하나 이상의 Log Analytics 작업 영역이 있는 경우 솔루션에서 사용하도록 설정하고 VM이 보고하는 작업 영역을 선택합니다. 

**그룹** 선택기는 선택한 작업 영역과 관련된 컴퓨터의 구독, 리소스 그룹, [컴퓨터 그룹](../../azure-monitor/platform/computer-groups.md)및 가상 컴퓨터 크기 집합을 반환합니다. 선택한 영역은 맵 기능에만 적용되며 성능 또는 체력으로 이월되지 않습니다.

기본적으로 맵은 최근 30분을 보여줍니다. 종속성이 과거에 어떻게 보였는지 확인하려면 최대 1시간의 기록 시간 범위를 쿼리할 수 있습니다. 쿼리를 실행하려면 **TimeRange** 선택기를 사용합니다. 예를 들어 인시던트 중에 쿼리를 실행하거나 변경 하기 전에 상태를 볼 수 있습니다.  

## <a name="next-steps"></a>다음 단계

병목 현상을 식별하고 성능을 확인하고 VM의 전반적인 사용률을 이해하려면 [VM용 Azure 모니터의 성능 상태 보기를](vminsights-performance.md)참조하세요. 
