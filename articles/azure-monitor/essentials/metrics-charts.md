---
title: Azure 메트릭 탐색기의 고급 기능
description: Azure 메트릭 탐색기의 고급 사용에 대해 알아봅니다.
author: vgorbenko
services: azure-monitor
ms.topic: conceptual
ms.date: 01/22/2019
ms.author: vitalyg
ms.subservice: metrics
ms.openlocfilehash: b042049c803ad04b54bb6c2a242ca1008bc17dd3
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/03/2021
ms.locfileid: "101734522"
---
# <a name="advanced-features-of-the-azure-metrics-explorer"></a>Azure 메트릭 탐색기의 고급 기능

> [!NOTE]
> 이 문서에서는 Azure Monitor의 Azure 메트릭 탐색기 기능 기본 기능에 대해 잘 알고 있다고 가정 합니다. 새 사용자 인 경우 첫 번째 메트릭 차트를 만드는 방법을 알아보려면 [메트릭 탐색기 시작](./metrics-getting-started.md)을 참조 하세요.

Azure Monitor에서 [메트릭은](data-platform-metrics.md) 시간이 지남에 따라 수집 되 고 저장 되는 일련의 측정 된 값 및 개수입니다. 메트릭은 표준 ("플랫폼"이 라고도 함) 또는 사용자 지정 일 수 있습니다. 

표준 메트릭은 Azure 플랫폼에서 제공 됩니다. Azure 리소스의 상태 및 사용 통계를 반영 합니다. 

## <a name="resource-scope-picker"></a>리소스 범위 선택
리소스 범위 선택기를 사용 하면 단일 리소스 및 여러 리소스에서 메트릭을 볼 수 있습니다. 다음 섹션에서는 리소스 범위 선택기를 사용 하는 방법을 설명 합니다. 

### <a name="select-a-single-resource"></a>단일 리소스 선택
**Azure Monitor** 메뉴 또는 리소스 메뉴의 **모니터링** 섹션에서 **메트릭** 를 선택합니다. 그런 다음 **범위 선택** 을 선택 하 여 범위 선택기를 엽니다. 

범위 선택기를 사용 하 여 메트릭이 표시 되는 리소스를 선택 합니다. 리소스의 메뉴에서 Azure 메트릭 탐색기를 연 경우 범위를 채워야 합니다. 

![리소스 범위 선택을 여는 방법을 보여 주는 스크린샷](./media/metrics-charts/scope-picker.png)

일부 리소스의 경우 한 번에 하나의 리소스 메트릭을 볼 수 있습니다. **리소스 종류** 메뉴에서 이러한 리소스는 **모든 리소스 형식** 섹션에 있습니다.

![단일 리소스를 보여 주는 스크린샷](./media/metrics-charts/single-resource-scope.png)

리소스를 선택 하면 해당 리소스를 포함 하는 모든 구독과 리소스 그룹이 표시 됩니다.

![사용 가능한 리소스를 보여 주는 스크린샷](./media/metrics-charts/available-single-resource.png)

> [!TIP]
> 여러 리소스에 대 한 메트릭을 동시에 보거나 구독 또는 리소스 그룹에 대 한 메트릭을 보려면이 기능을 원하는 경우 **Upvote** 를 선택 합니다.

선택이 완료 되 면 **적용** 을 선택 합니다.

### <a name="view-metrics-across-multiple-resources"></a>여러 리소스에서 메트릭 보기
일부 리소스 종류는 여러 리소스에 대 한 메트릭을 쿼리할 수 있습니다. 리소스는 동일한 구독 및 위치에 있어야 합니다. **리소스 종류** 메뉴의 맨 위에서 이러한 리소스 종류를 찾습니다. 

자세한 내용은 [여러 리소스 선택](./metrics-dynamic-scope.md#select-multiple-resources)을 참조 하세요.

![리소스 간 형식을 보여 주는 스크린샷](./media/metrics-charts/multi-resource-scope.png)

여러 리소스와 호환 되는 유형의 경우 구독 또는 여러 리소스 그룹에서 메트릭을 쿼리할 수 있습니다. 자세한 내용은 [리소스 그룹 또는 구독 선택](./metrics-dynamic-scope.md#select-a-resource-group-or-subscription)을 참조 하세요.

## <a name="multiple-metric-lines-and-charts"></a>여러 메트릭 선 및 차트

Azure 메트릭 탐색기에서 여러 메트릭 선을 표시 하거나 여러 메트릭 차트를 동시에 표시 하는 차트를 만들 수 있습니다. 이 기능을 사용 하면 다음을 수행할 수 있습니다.

- 동일한 그래프에서 관련 메트릭의 상관 관계를 설정 하 여 한 값이 다른 값과 어떻게 관련 되는지 확인 합니다.
- 가까운 근접에서 다른 측정 단위를 사용 하는 메트릭을 표시 합니다.
- 여러 리소스에서 메트릭을 시각적으로 집계 하 고 비교 합니다.

예를 들어 5 개의 저장소 계정이 있고 함께 사용 되는 공간을 확인 하려는 경우를 가정해 보겠습니다. 개별 값과 특정 시점에 있는 모든 값의 합계를 보여 주는 (누적) 영역형 차트를 만들 수 있습니다.

### <a name="multiple-metrics-on-the-same-chart"></a>동일한 차트의 여러 메트릭

동일한 차트에서 여러 메트릭을 보려면 먼저 [새 차트를 만듭니다](./metrics-getting-started.md#create-your-first-metric-chart). 그런 다음 **메트릭 추가** 를 선택 합니다. 동일한 차트에 다른 메트릭을 추가 하려면이 단계를 반복 합니다.

> [!NOTE]
> 일반적으로 차트는 다른 측정 단위를 사용 하는 메트릭을 혼합 하지 않아야 합니다. 예를 들어 밀리초를 사용 하는 하나의 메트릭과 킬로바이트를 사용 하는 다른 메트릭을 혼합 하지 않도록 합니다. 또한 크기가 현저 하 게 다른 메트릭을 혼합 하지 않도록 합니다. 
>
> 이러한 경우에는 여러 차트를 대신 사용 하는 것이 좋습니다. 메트릭 탐색기에서 **차트 추가** 를 선택 하 여 새 차트를 만듭니다.

### <a name="multiple-charts"></a>여러 차트

다른 메트릭을 사용 하는 다른 차트를 만들려면 **차트 추가** 를 선택 합니다.

여러 차트의 순서를 변경 하거나 삭제 하려면 줄임표 (**...**) 단추를 선택 하 여 차트 메뉴를 엽니다. 그런 다음 **위로 이동**, **아래로 이동** 또는 **삭제** 를 선택 합니다.

## <a name="aggregation"></a>집계

차트에 메트릭을 추가 하면 메트릭 탐색기에서 기본 집계가 자동으로 적용 됩니다. 기본 시나리오에서는 기본값을 사용 하는 것이 좋습니다. 그러나 다른 집계를 사용 하 여 메트릭에 대 한 자세한 정보를 얻을 수 있습니다. 

차트에서 다른 집계를 사용 하기 전에 메트릭 탐색기에서 집계를 처리 하는 방법을 이해 해야 합니다. 메트릭은 일정 기간 동안 캡처되는 일련의 측정값 (또는 "메트릭 값")입니다. 차트를 그리면 선택 된 메트릭의 값이 *시간 세분화* 에 대해 개별적으로 집계 됩니다. 

메트릭 탐색기의 [시간 선택 패널](./metrics-getting-started.md#select-a-time-range)을 사용 하 여 시간 수준 크기를 선택 합니다. 시간 수준을 명시적으로 선택 하지 않으면 기본적으로 현재 선택한 시간 범위가 사용 됩니다. 시간 수준을 결정 한 후에는 각 시간 세분화 중에 캡처된 메트릭 값이 차트에서 집계 되 고 한 가지 데이터 요소는 시간 세분화 됩니다.

예를 들어 차트에 *서버 응답 시간* 메트릭이 표시 되어 있다고 가정 합니다. *최근 24 시간* 동안의 시간 범위에 대 한 *평균* 집계를 사용 합니다. 이 예제에서:

- 시간 세분성이 30 분으로 설정 된 경우 차트는 48 집계 데이터 요소에서 그려집니다. 즉, 꺾은선형 차트는 차트 그림 영역에서 48 점을 연결 합니다 (시간당 24 시간 x 2 데이터 요소). 각 데이터 요소는 각 관련 30 분 기간 동안 발생 한 서버 요청에 대해 캡처된 모든 응답 시간의 *평균* 을 나타냅니다.
- 시간 세분성을 15 분으로 전환 하는 경우 96 집계 데이터 요소를 얻게 됩니다.  즉, 시간당 24 시간 x 4의 데이터 요소를 얻을 수 있습니다.

메트릭 탐색기에는 sum, count, min, max 및 average의 5 가지 기본 통계 집계 유형이 있습니다. *합계* 집계를 *합계* 집계 라고도 합니다. 메트릭 탐색기는 대부분의 메트릭에 대해 관련이 없고 사용할 수 없는 집계를 숨깁니다.

* **합계**: 집계 간격 동안 캡처된 모든 값의 합계입니다.

    ![Sum 요청의 스크린샷](./media/metrics-charts/request-sum.png)

* **개수**: 집계 간격 중에 캡처된 측정 수입니다. 
    
    메트릭이 항상 값 1을 사용 하 여 캡처되는 경우 count 집계는 sum 집계와 같습니다. 이 시나리오는 메트릭이 고유 이벤트의 수를 추적 하 고 각 측정값이 하나의 이벤트를 나타내는 경우 일반적입니다. 이 코드는 새 요청이 도착할 때마다 메트릭 레코드를 내보냅니다.

    ![개수 요청의 스크린샷](./media/metrics-charts/request-count.png)

* **Average**: 집계 간격 중에 캡처된 메트릭 값의 평균입니다.

    ![평균 요청 스크린샷](./media/metrics-charts/request-avg.png)

* **Min**: 집계 간격 중에 캡처된 가장 작은 값입니다.

    ![최소 요청의 스크린샷](./media/metrics-charts/request-min.png)

* **Max**: 집계 간격 중에 캡처된 가장 큰 값입니다.

    ![최대 요청의 스크린샷](./media/metrics-charts/request-max.png)

## <a name="filters"></a>필터

메트릭에 차원이 있는 차트에 필터를 적용할 수 있습니다. 예를 들어 "응답 유형" 차원이 있는 "트랜잭션 수" 메트릭을 생각해 보겠습니다. 이 차원은 트랜잭션의 응답이 성공 했는지 아니면 실패 했는지를 나타냅니다. 이 차원에 대해 필터링 하는 경우 성공 또는 실패 한 트랜잭션만 표시 하는 차트 줄이 표시 됩니다. 

### <a name="add-a-filter"></a>필터 추가

1. 차트 위에서 **필터 추가** 를 선택 합니다.

2. 필터링 할 차원 (속성)을 선택 합니다.

   ![필터링 할 수 있는 차원 (속성)을 보여 주는 스크린샷](./media/metrics-charts/028.png)

3. 차원 (속성)에 대해 적용 하려는 연산자를 선택 합니다. 기본 연산자는 = (equals)입니다.

   ![필터에 사용할 수 있는 연산자를 보여 주는 스크린샷](./media/metrics-charts/filter-operator.png)

4. 차트를 그릴 때 필터에 적용할 차원 값을 선택 합니다 .이 예제에서는 성공적인 저장소 트랜잭션을 필터링 하는 방법을 보여 줍니다.

   ![성공적으로 필터링 된 저장소 트랜잭션을 보여 주는 스크린샷](./media/metrics-charts/029.png)

5. 필터 값을 선택한 후에 필터 선택기를 닫으려면 바깥쪽을 클릭합니다. 이제 차트에서는 실패한 스토리지 트랜잭션 수를 보여줍니다.

   ![실패 한 저장소 트랜잭션 수를 보여 주는 스크린샷](./media/metrics-charts/030.png)

6. 1-5 단계를 반복 하 여 동일한 차트에 여러 필터를 적용할 수 있습니다.


## <a name="metric-splitting"></a>메트릭 분할

메트릭을 치수로 분할 하 여 메트릭의 여러 세그먼트를 비교 하는 방법을 시각화할 수 있습니다. 분할을 통해 차원의 외부 세그먼트를 식별할 수도 있습니다.

### <a name="apply-splitting"></a>분할 적용

1. 차트 위에서 **분할 적용** 을 선택 합니다.
 
   > [!NOTE]
   > 여러 메트릭이 있는 차트는 분할 기능을 사용할 수 없습니다. 또한 차트에 여러 필터가 있을 수 있지만 분할 차원은 하나만 있을 수 있습니다.

2. 차트를 분할할 차원을 선택 합니다.

   ![차트를 분할할 선택 된 차원을 보여 주는 스크린샷](./media/metrics-charts/031.png)

   이제 차트에 각 차원 세그먼트에 대해 하나씩 여러 줄이 표시 됩니다.

   ![차원의 각 세그먼트에 대해 하나씩 여러 줄을 보여 주는 스크린샷](./media/metrics-charts/segment-dimension.png)
   
3. 선택한 차원으로 분할 한 후 표시할 값 수에 대 한 제한을 선택 합니다. 위의 차트에 표시 된 것 처럼 기본 제한은 10입니다. 제한 범위는 1-50입니다.
   
   ![분할 후 값의 수를 제한 하는 분할 된 제한을 보여 주는 스크린샷](./media/metrics-charts/segment-dimension-limit.png)
   
4. 세그먼트에서 오름차순 또는 내림차순으로 정렬 순서를 선택 합니다. 기본 선택은 내림차순입니다.
   
   ![분할 값에 대 한 정렬 순서를 보여 주는 스크린샷](./media/metrics-charts/segment-dimension-sort.png)

5. **그룹화 선택기** 를 닫으려면 바깥쪽을 클릭합니다.
   

   > [!NOTE]
   > 시나리오에 대해 관련이 없는 세그먼트를 숨기고 차트를 더 쉽게 읽을 수 있도록 하려면 동일한 차원에서 필터링과 분할을 모두 사용 합니다.

## <a name="locking-the-range-of-the-y-axis"></a>Y 축 범위 잠그기

값 (y) 축의 범위 잠금은 큰 값의 작은 변동을 보여 주는 차트에서 중요 합니다. 

예를 들어 99.99% ~ 99.5%의 성공적인 요청 볼륨에 대 한 삭제는 서비스 품질을 상당히 줄일 수 있습니다. 하지만 기본 차트 설정을 사용 하는 경우 작은 숫자 값을 변동을 하는 것은 어렵거나 불가능할 수도 있습니다. 이 경우 차트의 가장 낮은 경계를 99%로 잠가 작은 삭제를 더 명확 하 게 만들 수 있습니다. 

또 다른 예는 사용 가능한 메모리의 변동을입니다. 이 시나리오에서 값은 기술적으로 0에 도달 하지 않습니다. 범위를 더 높은 값으로 수정 하면 사용 가능한 메모리를 더 쉽게 찾을 수 있습니다. 

Y 축 범위를 제어 하려면 차트 메뉴 (**...**)를 엽니다. 그런 다음 **차트 설정을** 선택 하 여 고급 차트 설정에 액세스 합니다.

![차트 설정 선택 항목을 강조 표시 하는 스크린샷](./media/metrics-charts/033.png)

**Y-축 범위** 섹션에서 값을 수정 하거나 **자동** 을 선택 하 여 기본값으로 되돌립니다.
 
 ![Y-축 범위 섹션을 강조 표시 하는 스크린샷](./media/metrics-charts/034.png)

> [!WARNING]
> Count, sum, min 또는 max 집계를 사용 하 여 일정 기간 동안 개수 또는 합계를 추적 하는 차트에 대해 y 축의 경계를 잠가야 하는 경우 일반적으로 고정 된 시간 세분성을 지정 해야 합니다. 이 경우 자동 기본값을 사용 하면 안 됩니다. 
>
> 사용자가 브라우저 창의 크기를 조정 하거나 화면 해상도를 변경 하면 시간 세분성이 자동으로 수정 될 때 차트 값이 변경 되기 때문에 고정 된 시간 세분성을 선택할 수 있습니다. 시간 세분성의 결과 변경 내용은 차트의 모양에 영향을 주므로 y 축 범위의 현재 선택이 무효화 됩니다.

## <a name="line-colors"></a>선 색

차트를 구성한 후에는 기본 색상표에서 차트 선에 색이 자동으로 할당 됩니다. 이러한 색을 변경할 수 있습니다.

차트 선의 색을 변경 하려면 차트에 해당 하는 범례의 색이 지정 된 막대를 선택 합니다. 색 선택 대화 상자가 열립니다. 색 선택기를 사용 하 여 선 색을 구성 합니다.

![색을 변경 하는 방법을 보여 주는 스크린샷](./media/metrics-charts/035.png)

사용자 지정 된 색은 대시보드에 차트를 고정할 때 유지 됩니다. 다음 섹션에서는 차트를 고정 하는 방법을 보여 줍니다.

## <a name="pinning-to-dashboards"></a>대시보드에 고정 

차트를 구성한 후 대시보드에 추가 하는 것이 좋습니다. 대시보드에 차트를 고정 하 여 팀에서 액세스할 수 있도록 만들 수 있습니다. 다른 모니터링 원격 분석의 컨텍스트에서이를 확인 하 여 정보를 얻을 수도 있습니다.

구성 된 차트를 대시보드에 고정 하려면 차트의 오른쪽 위 모서리에서 **대시보드에 고정** 을 선택 합니다.

![대시보드에 차트를 고정 하는 방법을 보여 주는 스크린샷](./media/metrics-charts/036.png)

## <a name="alert-rules"></a>경고 규칙

시각화 기준을 사용 하 여 메트릭 기반 경고 규칙을 만들 수 있습니다. 새 경고 규칙에는 차트의 대상 리소스, 메트릭, 분할 및 필터 차원이 포함 됩니다. 경고 규칙 만들기 창을 사용 하 여 이러한 설정을 수정할 수 있습니다.

시작 하려면 **새 경고 규칙** 을 선택 합니다.

![빨간색으로 강조 표시 된 새 경고 규칙 단추를 보여 주는 스크린샷](./media/metrics-charts/042.png)

경고 규칙 만들기 창이 열립니다. 창에 차트의 메트릭 차원이 표시 됩니다. 이 창의 필드는 규칙을 사용자 지정할 수 있도록 미리 채워져 있습니다.

![규칙 만들기 창을 보여 주는 스크린샷](./media/metrics-charts/041.png)

자세한 내용은 [메트릭 경고 만들기, 보기 및 관리](../alerts/alerts-metric.md)를 참조 하세요.

## <a name="correlate-metrics-to-logs"></a>로그와 메트릭 상관 관계
고객의 메트릭 차트에서 변칙의 근본 원인을 진단 하는 데 도움이 되도록 로그에 드릴스루를 만들었습니다. 로그에 드릴스루를 통해 고객은 메트릭 차트의 급증을 로그와 쿼리에 상관 관계를 지정할 수 있습니다. 

경험을 살펴보기 전에 제공 되는 다양 한 유형의 로그와 쿼리를 먼저 도입 하려고 합니다. 

| 용어             | 정의  | 
|------------------|-------------|
| 활동 로그    | Service Health 이벤트에 대 한 업데이트 외에도 외부 (관리 평면)에서 구독의 각 Azure 리소스에 대 한 작업에 대 한 통찰력을 제공 합니다. 활동 로그를 사용 하 여 구독의 리소스에 대해 수행 되는 쓰기 작업 (PUT, POST, DELETE)에 대 한 내용, 대상 및 시기를 결정 합니다. 각 Azure 구독에 대 한 단일 활동 로그가 있습니다.  |   
| 진단 로그   | Azure 리소스 (데이터 평면) 내에서 수행 된 작업에 대 한 통찰력을 제공 합니다. 예를 들어 Key Vault에서 비밀을 가져오거나 데이터베이스를 요청 하는 등의 작업을 수행할 수 있습니다. 리소스 로그의 콘텐츠는 Azure 서비스 및 리소스 유형에 따라 달라 집니다. **참고:** 서비스에서 제공 해야 하며 고객이 사용 하도록 설정 해야 합니다.  | 
| 권장 로그 | 고객이 메트릭 탐색기의 비정상 상태를 조사 하기 위해 활용할 수 있는 시나리오 기반 쿼리입니다.  |

현재 select 리소스 공급자에 대 한 드릴스루 로그를 사용할 수 있습니다. 로그에 대 한 전체 드릴스루 환경을 포함 하는 리소스 공급자는 다음과 같습니다. 

* Application Insights 
* 자동 크기 조정 
* App Services  
* 스토리지  

다음은 Application Insights 리소스 공급자에 대 한 샘플 환경입니다.

![App insights 메트릭 블레이드에서 급증 하는 오류](./media/metrics-charts/drill-into-log-ai.png)

실패 한 요청에서 스파이크를 진단 하려면 "로그에 드릴스루"를 클릭 합니다.

![로그 드릴 드롭다운 스크린샷](./media/metrics-charts/drill-into-logs-dropdown.png)

실패 옵션을 클릭 하 여 실패 한 작업 작업, 상위 예외 유형 및 종속성을 제공 하는 사용자 지정 오류 블레이드로 이동 합니다. 

![앱 insights 오류 블레이드의 스크린샷](./media/metrics-charts/ai-failure-blade.png)

### <a name="common-problems-with-drill-into-logs"></a>로그 드릴에 대 한 일반적인 문제

* 로그 및 쿼리를 사용할 수 없습니다. 권장 로그와 쿼리를 보려면 진단 로그를 Log Analytics로 라우팅해야 합니다. 이 작업을 수행 하는 방법에 대 한 자세한 내용은 [이 문서](https://docs.microsoft.com/azure/azure-monitor/platform/diagnostic-settings) 를 참조 하세요. 
* 활동 로그만 제공 됩니다.-로그로 드릴 기능은 select 리소스 공급자에 대해서만 사용할 수 있습니다. 기본적으로 활동 로그가 제공 됩니다. 

 
## <a name="troubleshooting"></a>문제 해결

차트에 데이터가 표시 되지 않는 경우 다음 문제 해결 정보를 검토 합니다.

* 필터는 창의 모든 차트에 적용 됩니다. 차트에 집중 하는 동안 다른 차트의 모든 데이터를 제외 하는 필터를 설정 하지 않았는지 확인 합니다.

* 다른 차트에 다른 필터를 설정 하려면 다른 블레이드에 차트를 만듭니다. 그런 다음 별도의 즐겨찾기로 차트를 저장 합니다. 원하는 경우 차트를 대시보드에 고정 하 여 함께 볼 수 있습니다.

* 메트릭이 정의 하지 않는 속성을 기준으로 차트를 분할 하는 경우 차트에 콘텐츠가 표시 되지 않습니다. 분할(분리)한 속성을 지워 보거나 다른 속성을 선택합니다.

## <a name="next-steps"></a>다음 단계

메트릭을 사용 하 여 실행 가능한 대시보드를 만들려면 [사용자 지정 KPI 대시보드 만들기](../app/tutorial-app-dashboards.md)를 참조 하세요.

