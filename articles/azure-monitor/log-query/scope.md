---
title: Azure 모니터 로그 분석의 로그 쿼리 범위 | 마이크로 소프트 문서
description: Azure 모니터 로그 분석에서 로그 쿼리의 범위 및 시간 범위를 설명합니다.
ms.subservice: logs
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 06/25/2019
ms.openlocfilehash: 897eff62fcbab5996b6b9493bd825ae412aa4c3e
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "79249595"
---
# <a name="log-query-scope-and-time-range-in-azure-monitor-log-analytics"></a>Azure 모니터 로그 분석에서 로그 쿼리 범위 및 시간 범위
[Azure 포털에서 로그 분석에서](get-started-portal.md) [로그 쿼리를](log-query-overview.md) 실행하는 경우 쿼리에서 평가되는 데이터 집합은 선택한 범위 및 시간 범위에 따라 다릅니다. 이 문서에서는 범위 및 시간 범위와 요구 사항에 따라 각 범위를 설정하는 방법에 대해 설명합니다. 또한 다양한 유형의 범위의 동작에 대해서도 설명합니다.


## <a name="query-scope"></a>쿼리 범위
쿼리 범위는 쿼리에서 평가되는 레코드를 정의합니다. 여기에는 일반적으로 단일 로그 분석 작업 영역 또는 응용 프로그램 인사이트 응용 프로그램에 있는 모든 레코드가 포함됩니다. 또한 Log Analytics를 사용하면 모니터링되는 특정 Azure 리소스에 대한 범위를 설정할 수도 있습니다. 이렇게 하면 리소스 소유자가 해당 리소스가 여러 작업 영역에 쓰는 경우에도 데이터에만 집중할 수 있습니다.

범위는 항상 로그 분석 창의 왼쪽 상단에 표시됩니다. 아이콘은 범위가 Log Analytics 작업 영역인지 응용 프로그램 인 인 사이트 응용 프로그램인지 를 나타냅니다. 아이콘이 없는 다른 Azure 리소스를 나타냅니다.

![Scope](media/scope/scope.png)

범위는 Log Analytics를 시작하는 데 사용하는 방법에 따라 결정되며 경우에 따라 범위를 클릭하여 범위를 변경할 수 있습니다. 다음 표에는 사용되는 다양한 범위 유형과 각 범위에 대한 서로 다른 세부 정보가 나열되어 있습니다.

| 쿼리 범위 | 범위의 레코드 | 선택 방법 | 범위 변경 |
|:---|:---|:---|:---|
| Log Analytics 작업 영역 | 로그 분석 작업 영역의 모든 레코드입니다. | **Azure 모니터** 메뉴 또는 로그 분석 작업 영역 메뉴에서 **로그를** 선택합니다. **Log Analytics workspaces**  | 범위를 다른 리소스 유형으로 변경할 수 있습니다. |
| 애플리케이션 인사이트 애플리케이션 | 응용 프로그램 인사이트 응용 프로그램의 모든 레코드입니다. | 애플리케이션 인사이트 **개요** 페이지에서 **분석을** 선택합니다. | 범위를 다른 응용 프로그램 인사이트 응용 프로그램으로만 변경할 수 있습니다. |
| Resource group | 리소스 그룹의 모든 리소스에서 만든 레코드입니다. 여러 로그 분석 작업 영역의 데이터가 포함될 수 있습니다. | 리소스 그룹 메뉴에서 **로그를 선택합니다.** | 범위를 변경할 수 없습니다.|
| Subscription | 구독의 모든 리소스에서 만든 레코드입니다. 여러 로그 분석 작업 영역의 데이터가 포함될 수 있습니다. | 구독 메뉴에서 **로그를 선택합니다.**   | 범위를 변경할 수 없습니다. |
| 기타 Azure 리소스 | 리소스에서 만든 레코드입니다. 여러 로그 분석 작업 영역의 데이터가 포함될 수 있습니다.  | 리소스 메뉴에서 **로그를 선택합니다.**<br>또는<br>**Azure 모니터** 메뉴에서 **로그를** 선택한 다음 새 범위를 선택합니다. | 범위는 동일한 리소스 유형으로만 변경할 수 있습니다. |

### <a name="limitations-when-scoped-to-a-resource"></a>리소스로 범위를 정한 경우의 제한 사항

쿼리 범위가 Log Analytics 작업 영역 또는 응용 프로그램 인 응용 프로그램인 경우 포털의 모든 옵션과 모든 쿼리 명령을 사용할 수 있습니다. 그러나 리소스로 범위를 정할 때 포털의 다음 옵션은 단일 작업 영역 또는 응용 프로그램과 연결되어 있기 때문에 사용할 수 없습니다.

- 저장
- 쿼리 탐색기
- 새 경고 규칙

쿼리 범위에 해당 리소스 또는 리소스 집합에 대한 데이터가 있는 작업 영역이 이미 포함되어 있으므로 리소스로 범위가 조정될 때 쿼리에서 다음 명령을 사용할 수 없습니다.

- [앱](app-expression.md)
- [작업](workspace-expression.md)
 

## <a name="query-limits"></a>쿼리 제한
Azure 리소스가 여러 Log Analytics 작업 영역에 데이터를 작성하기 위한 비즈니스 요구 사항이 있을 수 있습니다. 작업 영역이 리소스와 동일한 지역에 있을 필요는 없으며 단일 작업 영역은 다양한 지역의 리소스에서 데이터를 수집할 수 있습니다.  

리소스 또는 리소스 집합으로 범위를 설정하는 것은 단일 쿼리에서 분산 데이터를 자동으로 통합할 수 있으므로 Log Analytics의 특히 강력한 기능입니다. 여러 Azure 지역의 작업 영역에서 데이터를 검색해야 하는 경우 성능에 큰 영향을 줄 수 있습니다.

Log Analytics는 특정 수의 영역을 사용할 때 경고 또는 오류를 발생시켜 여러 지역의 작업 영역에 걸쳐 있는 쿼리로부터 과도한 오버헤드를 방지합니다. 범위에 5개 이상의 지역에 작업 영역이 포함된 경우 쿼리에 경고가 표시됩니다. 계속 실행되지만 완료하는 데 시간이 너무 걸릴 수 있습니다.

![쿼리 경고](media/scope/query-warning.png)

범위에 20개 이상의 리전의 작업 영역이 포함된 경우 쿼리가 실행되지 않습니다. 이 경우 작업 영역 수를 줄이고 쿼리를 다시 실행하라는 메시지가 표시됩니다. 드롭다운은 쿼리 범위에 모든 영역을 표시하며 쿼리를 다시 실행하기 전에 리전 수를 줄여야 합니다.

![쿼리실패](media/scope/query-failed.png)


## <a name="time-range"></a>시간 범위
시간 범위는 레코드가 생성된 시기를 기준으로 쿼리에 대해 평가되는 레코드 집합을 지정합니다. 다음 표에 지정된 작업 영역 또는 응용 프로그램의 모든 레코드에 대한 표준 속성에 의해 정의됩니다.

| 위치 | 속성 |
|:---|:---|
| Log Analytics 작업 영역          | TimeGenerated |
| 애플리케이션 인사이트 애플리케이션 | timestamp     |

로그 분석 창 상단의 시간 선택기에서 시간 범위를 선택하여 시간 범위를 설정합니다.  미리 정의된 기간을 선택하거나 **사용자 지정을** 선택하여 특정 시간 범위를 지정할 수 있습니다.

![시간 선택기](media/scope/time-picker.png)

위의 표와 같이 표준 시간 속성을 사용하는 쿼리에서 필터를 설정하면 시간 선택기는 **쿼리에서 설정으로**변경되고 시간 선택기는 비활성화됩니다. 이 경우 후속 처리가 필터링된 레코드로만 작동하도록 필터를 쿼리 맨 위에 놓는 것이 가장 효율적입니다.

![필터링된 쿼리](media/scope/query-filtered.png)

[작업 영역](workspace-expression.md) 또는 [앱](app-expression.md) 명령을 사용하여 다른 작업 영역 또는 응용 프로그램에서 데이터를 검색하는 경우 시간 선택기는 다르게 작동할 수 있습니다. 범위가 Log Analytics 작업 영역이고 **앱을**사용하는 경우 또는 범위가 Application Insights 응용 프로그램이고 **작업 영역을**사용하는 경우 Log Analytics는 필터에 사용된 속성이 시간 필터를 결정해야 한다는 것을 이해하지 못할 수 있습니다.

다음 예제에서는 범위가 로그 분석 작업 영역으로 설정됩니다.  쿼리는 **작업 영역을** 사용하여 다른 Log Analytics 작업 영역에서 데이터를 검색합니다. **예상TimeGenerated** 속성을 사용하는 필터를 표시하기 때문에 시간 선택기는 **쿼리에서 Set으로** 변경됩니다.

![작업 영역으로 쿼리](media/scope/query-workspace.png)

쿼리가 **응용 프로그램** 인사이트 응용 프로그램에서 데이터를 검색하는 데 앱을 사용하는 경우 Log Analytics는 필터의 **타임스탬프** 속성을 인식하지 못하며 시간 선택기는 변경되지 않습니다. 이 경우 두 필터가 모두 적용됩니다. 이 예제에서는 **where** 절에서 7일을 지정하더라도 지난 24시간 동안 생성된 레코드만 쿼리에 포함됩니다.

![앱으로 쿼리](media/scope/query-app.png)

## <a name="next-steps"></a>다음 단계

- [Azure 포털에서 로그 분석을 사용하는 방법에 대한 자습서를](get-started-portal.md)살펴보세요.
- 쿼리 를 [작성하는 방법에 대한 자습서를](get-started-queries.md)통해 걸어 .
