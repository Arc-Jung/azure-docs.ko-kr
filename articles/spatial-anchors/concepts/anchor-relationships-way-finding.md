---
title: 앵커 관계 및 방법 찾기
description: 앵커 관계 뒤의 개념적 모델에 대해 알아봅니다. 공간 내에서 앵커를 연결 하 고 가까운 API를 사용 하 여 방법 찾기 시나리오를 수행 하는 방법을 알아봅니다.
author: ramonarguelles
manager: vriveras
services: azure-spatial-anchors
ms.author: rgarcia
ms.date: 02/24/2019
ms.topic: conceptual
ms.service: azure-spatial-anchors
ms.openlocfilehash: 13c85dff40e266287d893d9e45b32a66a33f027e
ms.sourcegitcommit: 829d951d5c90442a38012daaf77e86046018e5b9
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/09/2020
ms.locfileid: "83006011"
---
# <a name="anchor-relationships-and-way-finding-in-azure-spatial-anchors"></a>Azure 공간 앵커에서 앵커 관계 및 방법 찾기

앵커 관계를 사용 하 여 공간에 연결 된 앵커를 만든 후 다음과 같은 질문을 할 수 있습니다.

* 근처에 앵커가 있나요?
* 얼마나 멀리 떨어져 있나요?

## <a name="examples"></a>예

다음과 같은 경우에 연결 된 앵커를 사용할 수 있습니다.

* 작업자는 산업 팩터리에서 다양 한 위치를 방문 하는 작업을 완료 해야 합니다. 팩터리는 각 위치에 공간 앵커를 포함 합니다. HoloLens 또는 모바일 앱은 작업자를 한 위치에서 다음 위치로 안내할 수 있습니다. 앱은 먼저 주변 공간 앵커를 요청 하 고 작업자를 다음 위치로 안내 합니다. 앱은 일반적인 방향 및 다음 위치에 대 한 거리를 시각적으로 표시 합니다.

* 박물관은 공개 디스플레이에서 공간 앵커를 만듭니다. 이러한 앵커는 모두 박물관의 필수 공개 디스플레이의 1 시간 둘러보기를 형성 합니다. 공개 디스플레이에서 방문자는 자신의 모바일 장치에서 박물관의 혼합 현실 앱을 열 수 있습니다. 그런 다음 전화 카메라의 공간 주위를 가리켜 둘러보기의 다른 공개 표시에 대 한 일반 방향 및 거리를 확인 합니다. 사용자가 공개 디스플레이를 사용 하는 경우 앱은 사용자를 안내 하는 데 도움이 되는 일반 방향 및 거리를 업데이트 합니다.

## <a name="set-up-way-finding"></a>검색 방법 설정

시야를 제공 하기 위해 앵커 사이의 거리와 거리를 사용 하는 앱은 *방법 찾기*를 사용 합니다. 찾기 방법은 턴 탐색과는 다릅니다. 차례로 탐색을 통해 사용자는 벽, 도어 및 층 사이를 중심으로 합니다. 사용자는 방법 찾기를 통해 대상의 일반 방향에 대 한 힌트를 가져옵니다. 그러나 공간에 대 한 유추 또는 정보는 사용자가 구조를 대상으로 탐색 하는 데에도 도움이 됩니다.

방법 검색 환경을 구축 하려면 먼저 환경을 위한 공간을 준비 하 고 사용자가 상호 작용할 앱을 개발 합니다. 다음은 개념적 단계입니다.

1. **공간 계획**: 공간 내의 위치를 결정 하는 방법의 위치를 결정 합니다. 이 시나리오에서 공장 감독자 또는 박물관 투어 코디네이터는 찾기 환경에 포함할 위치를 결정할 수 있습니다.
2. **연결 앵커**: 선택한 위치를 방문 하 여 공간 앵커를 만듭니다. 최종 사용자 앱 또는 다른 앱의 관리자 모드에서이 작업을 수행할 수 있습니다. 각 앵커를 다른 앵커와 연결 하거나 연결 합니다. 서비스는 이러한 관계를 유지 합니다.
3. **최종 사용자 환경 시작**: 사용자가 앱을 실행 하 여 선택한 위치 중 하나에 있을 수 있는 앵커를 찾습니다. 전반적인 디자인은 사용자가 환경을 시작할 수 있는 위치를 결정 해야 합니다.
4. **가까운 앵커 찾기**: 사용자가 앵커를 찾은 후에는 앱에서 주변 앵커를 요청할 수 있습니다. 이 절차는 장치와 이러한 앵커 간의 포즈를 반환 합니다.
5. **사용자 가이드**: 앱은 이러한 각 앵커에 대 한 포즈를 사용 하 여 사용자의 일반 방향 및 거리에 대 한 지침을 제공할 수 있습니다. 예를 들어 다음 이미지에 나와 있는 것 처럼 앱의 카메라 피드에는 각 잠재적 대상을 나타내는 아이콘과 화살표가 표시 될 수 있습니다.
6. **지침 구체화**: 사용자가 안내 하면 앱은 장치 및 대상 앵커 간에 주기적으로 새 포즈를 계산할 수 있습니다. 앱은 사용자가 대상에 도착 하는 데 도움이 되는 지침 힌트를 계속 구체화 합니다.

    ![앱이 방법 찾기를 보여 주는 방법의 예](./media/meeting-spot.png)

## <a name="connect-anchors"></a>앵커 연결

방법 검색 환경을 구축 하려면 먼저 선택한 위치에 앵커를 두어야 합니다. 이 섹션에서는 앱의 관리자가이 작업을 이미 완료 했다고 가정 합니다.

### <a name="connect-anchors-in-a-single-session"></a>단일 세션에서 앵커 연결

앵커를 연결 하려면:

1. CloudSpatialAnchorSession를 사용 하 여 첫 번째 위치를 탐색 하 고 앵커 A를 만듭니다.
2. 두 번째 위치로 이동 합니다. 내부 MR/AR 플랫폼은 이동을 추적 합니다.
3. 동일한 CloudSpatialAnchorSession를 사용 하 여 앵커 B를 만듭니다. 이제 앵커 A와 B가 연결 되었습니다. 공간 앵커 서비스는이 관계를 유지 합니다.
4. 나머지 앵커에 대 한 절차를 계속 합니다.

### <a name="connect-anchors-in-multiple-sessions"></a>여러 세션에서 앵커 연결

여러 세션에 걸쳐 공간 앵커를 연결할 수 있습니다. 이 방법을 사용 하면 일부 앵커를 한 번에 만들고 연결한 후 나중에 더 많은 앵커를 만들고 연결할 수 있습니다.

여러 세션에 앵커를 연결 하려면 다음을 수행 합니다.

1. 앱은 하나의 CloudSpatialAnchorSession에서 일부 앵커를 만듭니다.
2. 다른 시간에 앱은 새 CloudSpatialAnchorSession를 사용 하 여 이러한 앵커 중 하나 (예: 앵커 A)를 찾습니다.
3. 새 위치로 이동 합니다. 기본 혼합 현실 또는 확대 현실 플랫폼은 이동을 추적 합니다.
4. 동일한 CloudSpatialAnchorSession를 사용 하 여 앵커 C를 만듭니다. 이제 앵커 A, B, C가 연결 되어 있습니다. 공간 앵커 서비스는이 관계를 유지 합니다.

시간이 지남에 따라 더 많은 앵커와 추가 세션에 대해이 절차를 계속 진행할 수 있습니다.

### <a name="verify-anchor-connections"></a>앵커 연결 확인

앱은에서을 설정 하 여 인접 앵커에 대해 쿼리를 실행 하 여 두 개의 앵커가 연결 되었는지 확인할 수 있습니다 `NearAnchorCriteria` `CloudSpatialAnchorWatcher` . 쿼리 결과가 대상 앵커를 포함 하는 경우 앵커 연결이 확인 됩니다. 앵커가 연결 되지 않은 경우 앱에서 다시 연결을 시도할 수 있습니다.

다음은 앵커가 연결에 실패할 수 있는 몇 가지 이유입니다.

* 기본 혼합 현실 또는 확대 현실 플랫폼은 앵커 연결 프로세스 중에 추적을 손실 합니다.
* 공간 앵커 서비스와 통신 하는 동안 네트워크 오류가 발생 하 여 앵커 연결을 유지할 수 없습니다.

### <a name="find-sample-code"></a>샘플 코드 찾기

앵커를 연결 하 고 가까운 쿼리를 수행 하는 방법을 보여 주는 샘플 코드를 찾으려면 [공간 앵커 샘플 앱](https://github.com/Azure/azure-spatial-anchors-samples)을 참조 하세요.
