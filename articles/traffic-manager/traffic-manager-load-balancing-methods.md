<properties 
   pageTitle="트래픽 관리자 라우팅 방법"
   description="이 문서는 트래픽 관리자에서 사용하는 다양한 트래픽 라우팅 방법을 이해하는 데 도움이 됩니다."
   services="traffic-manager"
   documentationCenter=""
   authors="joaoma"
   manager="adinah"
   editor="tysonn" />
<tags 
   ms.service="traffic-manager"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="07/10/2015"
   ms.author="joaoma" />

# 트래픽 관리자 라우팅 방법

트래픽 관리자에서 사용할 수 있는 세 가지 라우팅 방법이 있습니다. 각 트래픽 관리자 프로필은 한 번에 하나의 라우팅 방법만 사용할 수 있지만 언제든지 프로필에 대해 다른 라우팅 방법을 선택할 수 있습니다.

모든 라우팅 방법에 끝점 모니터링이 포함됩니다. 요구 사항에 가장 적합한 라우팅 방법을 지정하도록 트래픽 관리자 프로필을 구성한 후 모니터링 설정을 구성합니다. 모니터링이 올바르게 구성되면 트래픽 관리자가 클라우드 서비스와 웹 사이트로 구성된 끝점의 상태를 모니터링하고 사용할 수 없는 것으로 인식된 끝점으로는 트래픽을 전송하지 않습니다. 트래픽 관리자 모니터링에 대한 자세한 내용은 [트래픽 관리자 모니터링 정보](traffic-manager-monitoring.md)를 참조하세요.

세 가지 트래픽 관리자 라우팅 방법은 다음과 같습니다.

- **장애 조치(Failover)**: 끝점이 같거나 서로 다른 Azure 데이터 센터(관리 포털에서는 지역이라고 함)에 있고 모든 트래픽에 대해 기본 끝점을 사용하지만 기본 끝점이나 백업 끝점을 사용할 수 없는 경우 백업을 제공하려는 경우 장애 조치(Failover)를 선택합니다. 자세한 내용은 [장애 조치(Failover) 트래픽 라우팅 방법](#failover-traffic-routing-method)을 참조하세요.

- **라운드 로빈**: 같은 데이터 센터에 있는 일련의 끝점이나 다른 데이터 센터에 부하를 분산하려는 경우 라운드 로빈을 선택합니다. 자세한 내용은 [라운드 로빈 트래픽 라우팅 방법](#round-robin-traffic-routing-method)을 참조하세요.

- **성능**: 끝점이 서로 다른 지역에 있고 요청하는 클라이언트가 가장 짧은 대기 시간을 기준으로 "가장 가까운" 끝점을 사용하게 하려는 경우 성능을 선택합니다. 자세한 내용은 [성능 트래픽 라우팅 방법](#performance-traffic-routing-method)을 참조하세요.

Azure 웹 사이트는 웹 사이트 모드에 관계없이 데이터 센터 내의 웹 사이트에 대해 이미 장애 조치(Failover) 및 라운드 로빈 트래픽 라우팅 방법 기능을 제공합니다. 트래픽 관리자를 통해 다른 데이터 센터의 웹 사이트에 대해 장애 조치(Failover) 및 라운드 로빈 트래픽 라우팅을 지정할 수 있습니다.

>[AZURE.NOTE]DNS TTL(Time-To-Live)은 DNS 클라이언트와 DNS 서버의 확인자에 확인된 이름을 캐시할 기간을 알립니다. 클라이언트는 이름에 대한 로컬 DNS 캐시 항목이 만료될 때까지 도메인 이름을 확인할 때 제공된 끝점을 계속 사용합니다.

## 장애 조치(Failover) 트래픽 라우팅 방법

조직에서 서비스의 안정성을 제공하려는 경우가 많습니다. 이를 위해 기본 서비스가 작동을 중단하는 경우에 대비하여 백업 서비스를 제공합니다. 일반적인 서비스 장애 조치(Failover) 패턴은 일련의 동일한 끝점을 제공하고 하나 이상의 백업이 포함된 목록과 함께 기본 서비스로 트래픽을 전송하는 것입니다. 기본 서비스를 사용할 수 없는 경우 요청하는 클라이언트가 다음 순서의 서비스로 전송됩니다. 목록의 첫 번째 서비스와 두 번째 서비스를 모두 사용할 수 없는 경우 트래픽이 세 번째 서비스로 전송됩니다.

장애 조치(Failover) 트래픽 라우팅 방법을 구성하는 경우 선택한 끝점의 순서가 중요합니다. 관리 포털의 구성 페이지에서 프로필에 대한 장애 조치(Failover) 순서를 구성할 수 있습니다.

그림 1에서는 일련의 끝점에 대한 장애 조치(Failover) 트래픽 라우팅 방법의 예제를 보여 줍니다.

![트래픽 관리자 장애 조치 부하 분산](./media/traffic-manager-load-balancing-methods/IC750592.jpg)

**그림 1**

숫자가 매겨진 다음 단계는 그림 1의 숫자에 해당합니다.

1. 트래픽 관리자가 DNS를 통해 클라이언트에서 들어오는 요청을 받고 프로필을 찾습니다.
2. 프로필에는 정렬된 끝점 목록이 포함되어 있습니다. 트래픽 관리자가 목록에서 첫 번째 끝점을 확인합니다. 지속적인 끝점 모니터링을 기준으로 끝점이 온라인 상태이면 클라이언트로 전송되는 DNS 응답에 끝점의 DNS 이름을 지정합니다. 끝점이 오프라인 상태이면 트래픽 관리자가 목록에서 다음 온라인 끝점을 결정합니다. 이 예제에서 CS-A는 오프라인(사용할 수 없음) 상태이지만 CS-B는 온라인(사용할 수 있음) 상태입니다.
3. 트래픽 관리자가 CS-B의 도메인 이름을 클라이언트의 DNS 서버로 반환합니다. DNS 서버는 도메인 이름을 IP 주소로 확인하고 클라이언트에 보냅니다.
4. 클라이언트가 CS-B로 트래픽 전송을 시작합니다.

## 라운드 로빈 트래픽 라우팅 방법

일반적인 트래픽 라우팅 패턴은 일련의 동일한 끝점을 제공하고 각 서비스에 라운드 로빈 방식으로 트래픽을 전송하는 것입니다. 라운드 로빈 방법은 다양한 끝점에 트래픽을 분할합니다. 무작위로 정상 끝점을 선택하며 종료된 것으로 감지된 서비스로는 트래픽을 전송하지 않습니다. 자세한 내용은 [트래픽 관리자 모니터링](../traffic-manager-onitoring.md)을 참조하세요.

그림 2에서는 일련의 끝점에 대한 라운드 로빈 트래픽 라우팅 방법의 예제를 보여 줍니다.

![트래픽 관리자 라운드 로빈 부하 분산](./media/traffic-manager-load-balancing-methods/IC750593.jpg)

**그림 2**

숫자가 매겨진 다음 단계는 그림 2의 숫자에 해당합니다.

1. 트래픽 관리자가 클라이언트에서 들어오는 요청을 받고 프로필을 찾습니다.
2. 프로필에는 끝점 목록이 포함되어 있습니다. 트래픽 관리자가 트래픽 관리자 끝점 모니터링에서 확인된 오프라인(사용할 수 없음) 상태의 끝점을 제외하고 이 목록에서 끝점을 무작위로 선택합니다. 이 예제에서는 끝점 CS-B입니다.
3. 트래픽 관리자가 CS-B의 도메인 이름을 클라이언트의 DNS 서버로 반환합니다. 클라이언트의 DNS 서버가 이 도메인 이름을 IP 주소로 확인하고 클라이언트에 보냅니다.
4. 클라이언트가 CS-B로 트래픽 전송을 시작합니다.

라운드 로빈 트래픽 라우팅은 네트워크 트래픽의 가중 분산도 지원합니다. 그림 3에서는 일련의 끝점에 대한 라운드 로빈 가중 트래픽 라우팅 방법의 예제를 보여 줍니다.

![라운드 로빈 가중 부하 분산](./media/traffic-manager-load-balancing-methods/IC750594.png)

**그림 3**

라운드 로빈 가중 트래픽 라우팅을 사용하면 각 끝점에 할당된 가중치 값을 기준으로 다양한 끝점에 부하를 분산할 수 있습니다. 가중치가 높을수록 끝점이 더 자주 반환됩니다. 이 방법이 유용한 시나리오는 다음과 같습니다.

- 점진적 응용 프로그램 업그레이드: 새 끝점으로 라우팅할 트래픽의 백분율을 할당하고 시간 경과에 따라 점진적으로 트래픽을 100%까지 늘립니다.
- Azure로 응용 프로그램 마이그레이션: Azure 끝점과 외부 끝점 둘 다를 사용하여 프로필을 만들고 각 끝점으로 라우팅되는 트래픽의 가중치를 지정합니다.
- 추가 용량을 위한 클라우드 버스트: 트래픽 관리자 프로필을 통해 온-프레미스 배포를 클라우드로 신속하게 확장합니다. 클라우드에 추가 용량이 필요한 경우 끝점을 더 추가하거나 사용하도록 설정하고 각 끝점으로 전송되는 트래픽 양을 지정할 수 있습니다.

지금은 관리 포털을 사용하여 가중 트래픽 라우팅을 구성할 수 없습니다. Azure에서 연결된 서비스 관리 REST API 및 Azure PowerShell cmdlet을 사용하여 프로그래밍 방식으로 이 방법에 액세스할 수 있습니다.

REST API 사용에 대한 자세한 내용은 [트래픽 관리자 작업(REST API 참조)](http://go.microsoft.com/fwlink/p/?LinkId=313584)을 참조하세요.

Azure PowerShell cmdlet 사용에 대한 자세한 내용은 [Azure 트래픽 관리자 Cmdlet](http://go.microsoft.com/fwlink/p/?LinkId=400769)을 참조하세요. 예제 구성은 Azure 블로그에서 [Azure 트래픽 관리자 외부 끝점 및 PowerShell을 통한 가중 라운드 로빈](http://azure.microsoft.com/blog/2014/06/26/azure-traffic-manager-external-endpoints-and-weighted-round-robin-via-powershell/)을 참조하세요.

단일 클라이언트에서 프로필을 테스트하고 균등 또는 가중 라운드 로빈 동작을 관찰하려면 DNS 이름이 프로필의 균등 또는 가중 값에 따라 끝점의 다른 IP 주소로 확인되는지 확인합니다. 테스트 시 클라이언트 쪽 DNS 캐싱을 사용하지 않도록 설정하거나 각 시도 사이에 DNS 캐시를 지워 새 DNS 이름 쿼리가 전송되도록 해야 합니다.

## 성능 트래픽 라우팅 방법

전 세계 여러 데이터 센터에 있는 끝점의 트래픽을 라우팅하기 위해 들어오는 트래픽을 요청하는 클라이언트와 끝점 간의 가장 짧은 대기 시간을 기준으로 가장 가까운 끝점에 보낼 수 있습니다. 일반적으로 "가장 가까운" 끝점은 최단 지리적 거리에 해당합니다. 성능 트래픽 라우팅 방법을 사용하면 위치와 대기 시간을 기준으로 분산할 수 있지만 네트워크 구성이나 부하에서 발생하는 실시간 변경 내용은 고려할 수 없습니다.

성능 트래픽 라우팅 방법은 요청하는 클라이언트를 찾아 가장 가까운 끝점으로 보냅니다. "근접성"은 다양한 IP 주소와 각 Azure 데이터 센터 간의 왕복 시간을 표시하는 인터넷 대기 시간 표에 따라 결정됩니다. 이 표는 정기적으로 업데이트되며 인터넷상의 성능을 실시간으로 반영하지는 않습니다. 트래픽 관리자가 선택된 방법에 따라 끝점을 모니터링하고 사용할 수 없는 끝점은 DNS 쿼리 응답에 포함하지 않지만 주어진 서비스의 부하는 고려되지 않습니다. 즉, 성능 트래픽 라우팅은 장애 조치(Failover) 트래픽 라우팅 방법도 포함합니다.

그림 4에서는 일련의 끝점에 대한 성능 트래픽 라우팅 방법의 예제를 보여 줍니다.

![트래픽 관리자 성능 부하 분산](./media/traffic-manager-load-balancing-methods/IC753237.jpg)

**그림 4**

숫자가 매겨진 다음 단계는 그림 4의 숫자에 해당합니다.

1. 트래픽 관리자가 정기적으로 인터넷 대기 시간 표를 작성합니다. 트래픽 관리자 인프라에서 테스트를 실행하여 전 세계 여러 지점과 끝점을 호스트하는 Azure 데이터 센터 간의 왕복 시간을 결정합니다.
2. 트래픽 관리자가 로컬 DNS 서버를 통해 클라이언트에서 들어오는 요청을 받고 프로필을 찾습니다.
3. 트래픽 관리자가 인터넷 대기 시간 표에서 들어오는 DNS 요청의 IP 주소에 해당하는 행을 찾습니다. 사용자의 로컬 DNS 서버가 트래픽 관리자 프로필 이름에 대한 권한 있는 DNS 서버를 찾기 위해 반복 DNS 쿼리를 수행하기 때문에 클라이언트 로컬 DNS 서버의 IP 주소에서 DNS 쿼리가 전송됩니다.
4. 트래픽 관리자가 프로필에 정의된 끝점을 호스트하는 데이터 센터에서 대기 시간이 가장 짧은 데이터 센터를 찾습니다. 이 예제에서는 CS-B입니다.
5. 트래픽 관리자가 CS-B의 도메인 이름을 클라이언트의 로컬 DNS 서버로 반환합니다. DNS 서버는 도메인 이름을 IP 주소로 확인하고 클라이언트에 보냅니다.
6. 클라이언트가 CS-B로 트래픽 전송을 시작합니다.

**주의할 사항:**

- 프로필에 동일한 데이터 센터의 끝점이 여러 개 포함되어 있는 경우 해당 데이터 센터로 전송된 트래픽이 끝점 모니터링에 따라 사용할 수 있으며 정상 상태인 끝점 간에 균등하게 분산됩니다.
- 끝점 모니터링에 따라 주어진 데이터 센터의 모든 끝점을 사용할 수 없는 경우 해당 끝점에 대한 트래픽이 가장 가까운 다음 끝점이 아니라 프로필에 지정된 다른 사용 가능한 모든 끝점에 분산됩니다. 이는 가장 가까운 다음 끝점이 오버로드되는 경우 발생할 수 있는 연속 오류를 방지하는 데 도움이 됩니다.
- 인터넷 대기 시간 표가 업데이트된 경우 트래픽 패턴과 끝점의 부하에 차이가 나타날 수도 있습니다. 이러한 변경은 최소 수준이어야 합니다.
- 외부 끝점과 함께 성능 트래픽 라우팅 방법을 사용하는 경우 해당 끝점의 위치를 지정해야 합니다. 배포에 가장 가까운 Azure 지역을 선택합니다. 자세한 내용은 [트래픽 관리자에서 끝점 관리](traffic-manager-endpoints.md)를 참조하세요.

## 트래픽 관리자 그림

트래픽 관리자에서 이 주제의 그림을 사용자 자신의 프레젠테이션의 PowerPoint 슬라이드로 만들려는 경우 [MSDN 설명서에서 트래픽 관리자 그림](http://gallery.technet.microsoft.com/Traffic-Manager-figures-in-887e7c99)을 참조하세요.

## 다음 단계

[트래픽 관리자 개요](traffic-manager-overview.md)

[트래픽 관리자 모니터링 정보](traffic-manager-monitoring.md)

[트래픽 관리자 작업(REST API 참조)](http://go.microsoft.com/fwlink/p/?LinkID=313584)

[클라우드 서비스](http://go.microsoft.com/fwlink/p/?LinkId=314074)

[웹사이트](http://go.microsoft.com/fwlink/p/?LinkId=393327)

[Azure 트래픽 관리자 cmdlet](http://go.microsoft.com/fwlink/p/?LinkId=400769)

 

<!---HONumber=July15_HO4-->