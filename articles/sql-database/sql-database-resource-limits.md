<properties 
   pageTitle="Azure SQL 데이터베이스 리소스 제한"
   description="이 페이지에서는 Azure SQL 데이터베이스에 대한 몇 가지 일반적인 리소스 제한을 설명합니다."
   services="sql-database"
   documentationCenter="na"
   authors="rothja"
   manager="jeffreyg"
   editor="monicar" />
<tags 
   ms.service="sql-database"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="data-management"
   ms.date="07/24/2015"
   ms.author="jroth" />

# Azure SQL 데이터베이스 리소스 제한

Azure SQL 데이터베이스는 트랜잭션 로그, I/O 및 다양한 기타 리소스 등의 공유 리소스 사용량을 모니터링합니다. 이를 통해 Azure SQL 데이터베이스는 데이터베이스를 설정된 경계 내에서 유지할 수 있습니다. 이 리소스 경계 또는 임계값을 리소스 제한이라고 합니다. 클라이언트에서 리소스 사용량이 이러한 제한을 초과하는 경우 Azure SQL 데이터베이스는 테넌트 또는 실제 노드 수준에서 리소스 사용량을 관리하여 응답하며 그 결과 연결이 끊기거나 요청이 거부됩니다.

> [AZURE.NOTE]리소스 제한으로 쿼리에서 데이터베이스 성능 문제를 분석하지 못하는 경우 Azure SQL 데이터베이스 V12로 시작할 수 있는 DAC(관리자 전용 연결)를 사용해야 할 수 있습니다. DAC를 사용에 대한 자세한 내용은 [데이터베이스 관리자에 대한 진단 연결](https://msdn.microsoft.com/library/ms189595.aspx)을 참조하세요.

## 리소스 제한 요약 테이블

다음 표에서는 범위를 벗어날 경우 Azure SQL 데이터베이스가 요청을 거부하거나 영향을 받는 리소스에 대한 연결을 종료하고 오류 코드가 반환되는 각 리소스에 대한 제한을 요약합니다. 경우에 따라 서비스 계층(기본, 표준, 프리미엄) 및 성능 수준으로 정확한 제한이 결정됩니다. 이 경우 [Azure SQL 데이터베이스 서비스 계층 및 성능 수준](https://msdn.microsoft.com/library/azure/dn741336.aspx)을 참조하세요.

[AZURE.INCLUDE [azure-sql-database-limits](../../includes/azure-sql-database-limits.md)]

## 오류 코드 이해

경우에 따라 리소스에 대한 여러 제한 조건에서 동일한 오류 코드가 반환되는 경우가 있습니다. 이러한 조건은 오류 메시지에 상태로 식별됩니다. 예를 들어, 트랜잭션 로그 길이 리소스에 대해 다음 두 오류 메시지가 표시됩니다. 메시지 텍스트는 동일하지만 제한 조건이 다르면 서로 다른 상태 값(각각 1과 2)을 포함합니다.

오류 메시지 1:

	Msg 40552, Level 17, State 1, Line 1
	The session has been terminated because of excessive transaction log space usage.
	Try modifying fewer rows in a single transaction.

오류 메시지 2:

	Msg 40552, Level 17, State 2, Line 1
	The session has been terminated because of excessive transaction log space usage.
	Try modifying fewer rows in a single transaction.

일부 메시지에 나타나는 리소스 ID에 동일한 상황이 적용됩니다. 리소스 ID는 제한이 발생한 시스템 리소스로 변환됩니다.

이 항목의 나머지에서는 상태 값 및 리소스 ID에서 오류에 대한 추가 정보를 제공하는 인스턴스를 포함하여 가능한 오류 코드에 대해 보다 자세히 설명합니다.

## 데이터베이스 크기

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | 사용자 데이터베이스에 할당된 데이터베이스 공간이 꽉 찬 경우 사용자에게 데이터베이스 꽉 참 오류가 표시됩니다. |
| **오류 코드** | **40544**: 데이터베이스가 크기 할당량에 도달했습니다. 데이터를 분할 또는 삭제하거나 인덱스를 삭제하거나 가능한 해결 방법에 대한 설명서를 참조하십시오. |
| **제한** | [서비스 계층 및 성능 수준](https://msdn.microsoft.com/library/azure/dn741336.aspx)에 따라 달라집니다. |
| **거부된 요청 유형** | 비-Select DML(Insert, Update, 삽입 또는 업데이트하는 Merge)입니다. |
| **권장 사항** | DELETE/DROP 문을 사용하여 데이터베이스의 크기가 제한보다 작아질 때까지 데이터베이스에서 데이터를 제거합니다. |

## 로그인

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | SQL 데이터베이스는 데이터베이스에 설정할 수 있는 동시 로그인 수 제한을 제어합니다. 데이터베이스가 동시 로그인 수 제한에 도달하면 데이터베이스에 대한 새 로그인 요청이 거부되고 오류 코드 10928이 반환됩니다. |
| **오류 코드** | **10928**: 리소스 ID: 3. 데이터베이스에 대한 %s 제한이 %d이며 이 제한에 도달했습니다. 도움이 필요하면 http://go.microsoft.com/fwlink/?LinkId=267637을 참조하세요. |
| **제한** | [서비스 계층 및 성능 수준](https://msdn.microsoft.com/library/azure/dn741336.aspx)에 따라 달라집니다. |
| **권장 사항** | 어떤 사용자 연결이 현재 활성 상태인지 보려면 dm\_exec\_connections를 확인하십시오.<br><br>백오프하고 10초 후 다시 로그인하십시오. |

> [AZURE.NOTE]오류 메시지에서 리소스 ID 값은 제한에 도달한 리소스를 나타냅니다. 로그인의 경우 리소스 ID = 3입니다.

## 메모리 사용량

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | 20초 이상 메모리 부여를 기다리는 세션이 있는 경우 20초 이상 동안 16MB 이상의 메모리 부여를 사용하는 세션은 리소스를 점유한 시간을 기준으로 내림차순으로 종료되므로 가장 오래된 세션이 먼저 종료됩니다. 세션 종료는 필요한 메모리를 사용할 수 있게 되는 즉시 중지됩니다. |
| **오류 코드** | **40553**: 과도한 메모리 사용으로 인해 세션이 종료되었습니다. 처리할 행 수를 줄이도록 쿼리를 수정하십시오. |
| **제한** | 20초 이상 동안 16MB 이상의 메모리 부여. |
| **거부된 요청 유형** | 정렬 및 해시 조인을 사용하는 쿼리를 포함하는 메모리 부여를 사용하는 쿼리입니다. |
| **권장 사항** | 정렬 및/또는 해시 조인이 필요한 쿼리에 쿼리 튜닝을 수행합니다. |

## 세션

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | SQL 데이터베이스는 데이터베이스에 설정할 수 있는 동시 세션 수 제한을 제어합니다. 데이터베이스가 동시 세션 수 제한에 도달하면 데이터베이스에 대한 새 연결이 거부되고 사용자는 오류 코드 10928을 받게 됩니다. 그러나 데이터베이스에 대한 세션은 종료되지 않습니다. |
| **오류 코드** | **10928**: 리소스 ID: 2. 데이터베이스에 대한 %s 제한이 %d이며 이 제한에 도달했습니다. 도움이 필요하면 http://go.microsoft.com/fwlink/?LinkId=267637을 참조하세요. |
| **제한** | [서비스 계층 및 성능 수준](https://msdn.microsoft.com/library/azure/dn741336.aspx)에 따라 달라집니다. |
| **권장 사항** | 현재 실행 중인 사용자 요청을 보려면 dm\_exec\_requests를 확인하십시오. |

> [AZURE.NOTE]오류 메시지에서 리소스 ID 값은 제한에 도달한 리소스를 나타냅니다. 세션의 경우 리소스 ID = 2입니다.

## Tempdb

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | 다음 세 조건 중 하나로 인해 tempdb에 대한 사용자 요청이 거부될 수 있습니다.<br><br>\*\*상태 1:\*\* 세션에서 5GB 이상의 tempdb 공간을 사용하는 경우 세션이 종료됩니다.<br><br>\*\*상태 2:\*\* tempdb의 트랜잭션에서 2GB 크기를 초과하는 로그는 잘립니다. Tempdb에서 로그 공간을 사용할 수 있는 작업 예: 삽입, 업데이트, 삭제, 병합, 인덱스 만들기.<br><br>\*\*상태 3:\*\* tempdb에 커밋되지 않은 트랜잭션으로 로그 파일 잘림을 방지할 수 있습니다. 잘림을 방지하기 위해서는 tempdb에서 가장 오래된 활성 트랜잭션 로그 시퀀스 번호(LSN)에서 로그 테일(현재 LSN)까지의 거리가 로그 파일 크기의 20%를 초과해서는 안 됩니다. 이를 위반하는 경우 tempdb에서 잘못된 트랜잭션이 종료 및 롤백되어 로그가 잘릴 수 있습니다. |
| **오류 코드** | **40551**: 과도한 tempdb 사용으로 인해 세션이 종료되었습니다. 임시 테이블 공간 사용량을 줄이도록 쿼리를 수정하십시오. |
| **제한** | **상태 1:** 5GB의 tempdb 공간 <br><br> **상태 2:** tempdb에서 트랜잭션당 2GB <br><br>\*\*상태 3:\*\* tempdb에서 총 로그 공간의 20% |
| **거부된 요청 유형** | Tempdb에서 모든 DDL 또는 DML 문. |
| **권장 사항** | 임시 테이블 공간 사용량을 줄이도록 쿼리를 수정합니다. 더 이상 필요없는 임시 개체를 삭제하거나 테이블을 자르거나 사용하지 않는 테이블을 제거합니다. 행 수를 줄이거나 작업을 여러 트랜잭션으로 분할하여 tempdb에서 트랜잭션의 데이터 크기를 줄입니다. |

## 트랜잭션 기간

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | 행, 페이지 또는 테이블처럼 트랜잭션이 종속된 리소스에 대한 트랜잭션 요청을 잠근 후 잠긴 리소스에 대한 종속성이 더 이상 없는 경우 잠금을 해제합니다. 다음 두 조건 중 하나로 인해 사용자 요청이 거부될 수 있습니다.상태 1: 트랜잭션이 24시간 이상 실행 중인 경우 종료됩니다.상태 2: 트랜잭션이 기본 시스템 작업에 필요한 리소스를 20초 이상 잠그는 경우 종료됩니다. |
| **오류 코드** | **40549**: 실행 시간이 긴 트랜잭션이 있으므로 세션이 종료됩니다. 트랜잭션 실행 시간을 줄이십시오. |
| **제한** | **상태 1:**24시간<br><br>\*\*상태 2:\*\* 트랜잭션이 기본 시스템 작업에 필요한 리소스를 잠근 경우 20초 |
| **거부된 요청 유형** | 24시간 이상 실행 중인 트랜잭션 또는 잠금을 획득하는 모든 DDL 또는 DML 문으로 인해 시스템 작업이 차단됩니다. |
| **권장 사항** | SQL 데이터베이스에 대한 작업이 사용자 입력을 차단하거나 실행 시간이 긴 트랜잭션을 유도하는 기타 종속성을 포함해서는 안 됩니다. |

## 트랜잭션 잠금 수

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | 잠금을 1백만 개 이상 사용 중인 세션이 종료됩니다. |
| **오류 코드** | **40550**: 너무 많은 잠금을 획득하여 세션이 종료되었습니다. 단일 트랜잭션에서 읽기 또는 수정 행 수를 줄이십시오. |
| **제한** | 트랜잭션당 1백만 개의 잠금 |
| **거부된 요청 유형** | 모든 DDL 또는 DML 문. |
| **권장 사항** | 다음 DMV는 트랜잭션을 모니터링하는 데 사용할 수 있습니다. **sys.dm\_tran\_active\_transactions**, **sys.dm\_tran\_database\_transactions**, **sys.dm\_tran\_locks** 및 **sys.dm\_tran\_session\_transactions**. 응용 프로그램의 유형에 따라 **PAGLOCK**또는**TABLOCK**과 같은 간단한 잠금 힌트를 사용하여 지정된 문/트랜잭션에 획득되는 잠금 수를 줄일 수 있습니다. 이것은 응용 프로그램 동시성에 부정적인 영향을 줄 수 있습니다. |

## 트랜잭션 로그 길이

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | 다음 두 조건 중 하나로 인해 사용자 요청이 거부될 수 있습니다.<br><br>\*\*상태 1:\*\* SQL 데이터베이스에서 최대 2GB 크기의 로그를 생성하는 트랜잭션을 지원합니다. 트랜잭션에서 이 제한을 초과하는 로그는 잘립니다. 이 볼륨에서 로그 공간을 사용할 수 있는 작업 예: 삽입, 업데이트, 삭제, 병합, 인덱스 만들기.<br><br>\*\*상태 2:\*\* 커밋되지 않은 트랜잭션으로 로그 파일 잘림을 방지할 수 있습니다. 잘림을 방지하기 위해서는 가장 오래된 활성 트랜잭션 로그 시퀀스 번호(LSN)에서 로그 테일(현재 LSN)까지의 거리가 로그 파일 크기의 20%를 초과해서는 안 됩니다. 이를 위반하는 경우 잘못된 트랜잭션이 종료 및 롤백되어 로그가 잘릴 수 있습니다. |
| **오류 코드** | **40552**: 과도한 트랜잭션 로그 공간 사용으로 인해 세션이 종료되었습니다. 단일 트랜잭션에서 수정 행 수를 줄이십시오. |
| **제한** | **상태 1:** 트랜잭션당 2GB<br><br>\*\*상태 2:\*\* 총 로그 공간의 20% |
| **거부된 요청 유형** | 모든 DDL 또는 DML 문. |
| **권장 사항** | 행 작업의 경우 예를 들어, 행 수를 줄이거나 작업을 여러 트랜잭션으로 분할하여 트랜잭션의 데이터 크기를 줄입니다.단일 트랜잭션이 필요한 테이블/인덱스 작업의 경우 다음 수식을 따라야 합니다. 테이블에서 영향을 받는 행 수 \* (업데이트되는 필드의 평균 크기(바이트) + 80) < 2GB(인덱스를 다시 빌드하는 경우 업데이트되는 필드의 평균 크기는 평균 인덱스 크기로 대체). |

## 작업자 스레드 수(최대 동시 요청 수)

| &nbsp; | 추가 정보 |
| :--- | :--- |
| **조건** | SQL 데이터베이스는 데이터베이스에 대한 작업자 스레드 수(동시 요청 수) 제한을 제어합니다. 허용된 동시 요청 수 제한을 초과하는 데이터베이스는 오류 10928을 받게 되고 이 데이터베이스에 대한 추가 요청이 거부될 수 있습니다. |
| **오류 코드** | **10928**: 리소스 ID: 1입니다. 데이터베이스에 대한 %s 제한이 %d이며 이 제한에 도달했습니다. 도움이 필요하면 http://go.microsoft.com/fwlink/?LinkId=267637을 참조하세요.<br><br>\*\*10929\*\*: 리소스 ID: 1입니다. %s의 최소 보장은 %d이며, 최대 한도는 %d이고, 해당 데이터베이스의 현재 사용량은 %d입니다. 하지만 현재 서버 사용량이 너무 많아 해당 데이터베이스에 대해 %d 이상의 요청을 지원할 수 없습니다. 도움이 필요하면 http://go.microsoft.com/fwlink/?LinkId=267637을 참조하세요. 그렇지 않으면 나중에 다시 시도하세요. |
| **제한** | 기본, 표준 및 프리미엄 계층의 경우 [성능 수준](https://msdn.microsoft.com/library/azure/dn741336.aspx)에 따라 달라집니다. 이전 Web/Business Edition 데이터베이스의 경우 최대 동시 요청 수 제한은 180이며 시스템 활동에 따라 이보다 적을 수 있습니다. |
| **권장 사항** | 현재 실행 중인 사용자 요청을 보려면 dm\_exec\_requests를 확인하십시오.<br><br>백오프하고 10초 후 다시 요청하십시오. |

> [AZURE.NOTE]오류 메시지에서 리소스 ID 값은 제한에 도달한 리소스를 나타냅니다. 작업자 스레드의 경우 리소스 ID = 1입니다.

작업자 스레드 관리로 인한 오류(10928/10929)는 작업자 스레드에 대한 원래 엔진 제한 오류(40501)를 대체합니다. 정상적인 조건에서 사용자는 작업자 스레드에 대한 엔진 제한 오류를 더 이상 받지 않습니다.

페더레이션된 데이터베이스 기능 사용과 같은 특정 시나리오에서는 데이터베이스에 로그인 시 작업자 스레드 캡 오류(10928)가 발생할 수 있습니다. 이 작업에서 Connection.Open 호출 아래의 작업자 스레드를 활용하기 때문입니다. 이로 인해 응용 프로그램이 작업자 스레드 캡 임계값을 초과할 수 있습니다. 응용 프로그램은 이러한 오류를 적절하게 처리할 수 있는 기본 제공 논리를 포함하여 이러한 사례를 처리해야 합니다.

## 참고 항목

[Azure SQL 데이터베이스 리소스 관리](https://msdn.microsoft.com/library/azure/dn338083.aspx)

[SQL 데이터베이스 클라이언트 프로그램에 대한 오류 메시지](sql-database-develop-error-messages.md)

[요청 거부 또는 연결 종료를 방지하기 위한 Azure SQL 데이터베이스 모범 사례](https://msdn.microsoft.com/library/azure/dn338082.aspx)

<!---HONumber=July15_HO5-->