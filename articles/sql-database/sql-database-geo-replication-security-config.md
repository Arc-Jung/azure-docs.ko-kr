<properties
	pageTitle="표준 또는 활성 지역 복제를 위한 보안 구성"
	description="이 항목에서는 SQL 데이터베이스에 대한 표준 또는 활성 지역 복제 시나리오를 관리하기 위한 보안 고려 사항을 설명합니다."
	services="sql-database"
	documentationCenter="na"
	authors="rothja"
	manager="jeffreyg"
	editor="monicar" />


<tags
	ms.service="sql-database"
	ms.devlang="na"
	ms.topic="article"
	ms.tgt_pltfrm="na"
	ms.workload="data-management"
	ms.date="10/22/2015"
	ms.author="jroth" />

# 표준 또는 활성 지역 복제를 위한 보안 구성

## 개요
이 항목은 [표준 및 활성 지역 복제](sql-database-geo-replication-overview.md) 구성 및 제어에 대한 인증 요구 사항 및 보조 데이터베이스에 대한 사용자 액세스 설정이 필요한 단계를 설명합니다. 지역 복제 사용에 대한 자세한 내용은 [중단 상태에서 Azure SQL 데이터베이스 복구](sql-database-disaster-recovery.md)를 참조하세요.

## 포함된 사용자 사용
[Azure SQL 데이터베이스의 V12 버전](sql-database-v12-whats-new.md)과 함께 SQL 데이터베이스는 이제 포함된 사용자를 지원합니다. master 데이터베이스에서 로그인에 매핑되어야 하는 기존 사용자와 달리 포함된 사용자는 데이터베이스 자체에서 완전히 관리됩니다. 두 가지 이점이 있습니다. 지역 복제 시나리오에서 데이터베이스는 사용자를 관리하므로 사용자는 추가 구성 없이 보조 데이터베이스에 계속해서 연결할 수 있습니다. 로그인 관점에서 이 구성에는 잠재적인 확장성 및 성능 이점이 있습니다. 자세한 내용은 [포함된 데이터베이스 사용자 - 데이터베이스를 이식 가능하게 만들기](https://msdn.microsoft.com/library/ff929188.aspx)를 참조하세요.

포함된 사용자를 사용하는 경우 동일한 로그인을 사용하는 여러 데이터베이스가 있는 경우 로그인을 서버 수준에서 관리하는 대신 각 데이터베이스에 대해 별도로 사용자를 관리해야 합니다(예: 암호 변경).

>[AZURE.NOTE]주 및 보조에 대한 읽기 액세스를 독립적으로 변경하려는 경우 기존 로그인 및 사용자를 사용해야 합니다. 포함된 사용자는 주 데이터베이스와 독립적으로 보조 데이터베이스에서 관리할 수 없습니다.

## 기존 로그인 및 사용자 사용
기존 로그인 및 사용자를 사용하는 경우(포함된 사용자 대신) 보조 데이터베이스 서버에 동일한 로그인이 존재하는지 보장하기 위해 추가 단계를 수행해야 합니다. 다음 섹션에서는 관련된 단계 및 추가 고려 사항을 간략히 설명합니다.

### 온라인 보조 데이터베이스에 대한 사용자 액세스 설정
보조 데이터베이스를 읽기 전용 데이터베이스(온라인 보조) 또는 장애 조치 상황에서 실행 가능한 데이터베이스 복사본으로 사용할 수 있으려면 보조 데이터베이스는 적절한 보안 구성이 있어야 합니다.

서버 관리자만 항목의 뒷 부분에 설명된 모든 단계를 성공적으로 완료할 수 있습니다. 각 단계에 대한 특정 사용 권한은 이 항목의 뒷 부분에서 설명됩니다.

활성 지역 복제 온라인 보조에 대한 사용자 액세스 준비는 언제든지 수행될 수 있습니다. 아래에서 설명하는 세 단계가 포함됩니다.

1. 주 데이터베이스에 대한 액세스를 사용하여 로그인을 확인합니다.
2. 원본 서버에서 해당 로그인에 대한 SID를 찾습니다.
3. 원본 서버에서 일치하는 SID를 가진 대상 서버에서 로그인을 생성합니다.

#### 1\. 주 데이터베이스에 대한 액세스를 사용하여 로그인을 확인합니다.
프로세스의 첫 번째 단계는 대상 서버에 중복되어야 하는 로그인을 결정하는 것입니다. 이는 원본 서버의 논리적 master 데이터베이스에 있는 하나와 주 데이터베이스 자체에 있는 하나로 이루어진 SELECT 문 쌍으로 수행됩니다.

서버 관리자 또는 **LoginManager** 서버 역할의 멤버만 다음 SELECT 문을 사용하여 원본 서버에서 로그인을 결정할 수 있습니다.

	SELECT [name], [sid] 
	FROM [sys].[sql_logins] 
	WHERE [type_desc] = 'SQL_Login'

db\_owner 데이터베이스 역할의 멤버, dbo 사용자 또는 서버 관리자만 주 데이터베이스에서 모든 데이터베이스 사용자 계정을 결정할 수 있습니다.

	SELECT [name], [sid]
	FROM [sys].[database_principals]
	WHERE [type_desc] = 'SQL_USER'

#### 2\. 1단계에서 확인된 로그인에 대한 SID를 찾습니다.
이전 섹션에서 쿼리의 출력을 비교하고 SID와 일치하여 서버 로그인을 데이터베이스 사용자에 매핑할 수 있습니다. 일치하는 SID가 있는 데이터베이스 사용자를 가진 로그인은 해당 데이터베이스 사용자 계정으로 해당 데이터베이스에 대한 사용자 액세스를 가집니다.

다음 쿼리를 사용하여 데이터베이스에서 모든 사용자 계정 및 해당 SID를 볼 수 있습니다. db\_owner 데이터베이스 역할의 멤버 또는 서버 관리자만 이 쿼리를 실행할 수 있습니다.

	SELECT [name], [sid]
	FROM [sys].[database_principals]
	WHERE [type_desc] = 'SQL_USER'

>[AZURE.NOTE]**INFORMATION\_SCHEMA** 및 **sys** 사용자는 *NULL* SID가 있으며 **게스트** SID는 **0x00**입니다. 데이터베이스 작성자가 **DbManager**의 멤버가 아닌 서버 관리자인 경우 **dbo** SID는 *0x01060000000001648000000000048454*로 시작할 수 있습니다.

#### 3\. 대상 서버의 로그인을 생성합니다.
마지막 단계는 대상 서버 또는 서버로 이동하고 적절한 SID를 사용하여 로그인을 생성하는 것입니다. 기본 구문은 다음과 같습니다.

	CREATE LOGIN [<login name>]
	WITH PASSWORD = <login password>,
	SID = <desired login SID>

>[AZURE.NOTE]주 데이터베이스가 아닌 보조 데이터베이스에 사용자 액세스 권한을 부여하려는 경우 주 서버의 사용자 로그인을 변경하고 다음 구문을 사용하여 수행할 수 있습니다.
>
>ALTER LOGIN <login name> DISABLE
>
>DISABLE은 암호를 변경하지 않으므로 필요한 경우 항상 사용하도록 설정할 수 있습니다.

## 연속 복사 관계 종료 시 사용자 액세스 설정
장애 조치 발생 시 주 데이터베이스와 보조 데이터베이스 간의 연속 복사 관계를 중지해야 합니다. 이 프로세스에 대한 자세한 내용은 [중단 상태에서 Azure SQL 데이터베이스 복구](sql-database-disaster-recovery.md)를 참조하세요.

표준 지역 복제의 경우 사용자는 오프라인 보조에 액세스할 수 없으므로 사용자 계정에 대한 변경 사항은 연속 복사 관계 종료 시 만들어야 합니다.

로그인 SID가 대상 서버에서 중복 되지 않은 경우 종료 후 보조 데이터베이스에 대한 액세스는 서버 관리자에만 제한됩니다. 복제를 시작하는 사용자가 DbManager인 경우 해당 로그인 SID가 원본 서버에서 중복되지 않는 한 보조에 대한 액세스를 갖지 않습니다. 복제 프로세스의 수명 동안 유지됩니다.

복제가 종료되면 종료 프로세스의 일부로 [dbo] 사용자 계정이 복제를 시작한 사용자의 로그인 SID와 일치하도록 변경되고 해당 사용자의 액세스 권한이 복원됩니다. 다른 데이터베이스 사용자에는 적용되지 않습니다.

사용자 계정 및 종료 작업을 시작하는데 사용된 연결된 로그인은 종료가 완료된 후 사용자 계정이 보조에 액세스할 수 있는지 확인하도록 대상 서버 및 데이터베이스에 제공되어야 합니다.

장애 조치 후에 필요한 단계에 대한 자세한 내용은 [복구된 Azure SQL 데이터베이스 마무리](sql-database-recovered-finalize.md)를 참조하세요.

## 다음 단계
지역 복제 및 SQL 데이터베이스의 추가 비즈니스 연속성 기능에 대한 자세한 내용은 [비즈니스 연속성 개요](sql-database-business-continuity.md)를 참조하세요.

<!---HONumber=Oct15_HO4-->