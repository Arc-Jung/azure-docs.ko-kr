---
title: 저장소 취약성 평가 검사 결과 저장소 계정이 방화벽 및 Vnet에서 액세스할 수 있습니다.
description: 방화벽이 나 VNet을 통해 액세스할 수 있는 저장소 계정에서 VA (취약성 평가) 검색을 저장 하는 방법에 대 한 지침을 제공 합니다.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.topic: conceptual
author: barmichal
ms.author: mibar
ms.reviewer: vanto
ms.date: 04/17/2020
ms.openlocfilehash: 36783c84acc22d6bc1084c2c13f455dedbfc77ca
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/28/2020
ms.locfileid: "81771860"
---
# <a name="store-vulnerability-assessment-scan-results-in-a-storage-account-accessible-behind-firewalls-and-vnets"></a>저장소 취약성 평가 검사 결과 저장소 계정이 방화벽 및 Vnet에서 액세스할 수 있습니다.

특정 Vnet 또는 서비스에 대해 Azure에서 저장소 계정에 대 한 액세스를 제한 하는 경우 SQL Database 또는 관리 되는 인스턴스에 대 한 VA (취약성 평가) 검색에서 해당 저장소 계정에 액세스할 수 있도록 적절 한 구성을 사용 하도록 설정 해야 합니다.

## <a name="enable-azure-sql-database-va-scanning-access-to-the-storage-account"></a>저장소 계정에 대 한 Azure SQL Database VA 검색 액세스를 사용 하도록 설정

특정 네트워크 또는 서비스 에서만 액세스할 수 있도록 VA 저장소 계정을 구성한 경우 Azure SQL Database의 VA 검색에서 저장소 계정에 검색을 저장할 수 있는지 확인 해야 합니다. 사용 중인 저장소 계정을 확인 하려면 [Azure Portal](https://portal.azure.com)의 **SQL server** 창으로 이동 하 여 **보안**아래에서 **고급 데이터 보안**을 선택 합니다.

:::image type="content" source="media/sql-database-vulnerability-assessment-storage/va-storage.png" alt-text="va-저장소":::

기존 저장소 계정을 사용 하거나 Azure SQL Server의 모든 데이터베이스에 대해 VA 검사 결과를 저장 하는 새 저장소 계정을 만들 수 있습니다.

저장소 계정이 포함 된 **리소스 그룹** 으로 이동 하 여 **저장소 계정** 창에 액세스 합니다. **설정**아래에서 **방화벽 및 가상 네트워크**를 선택 합니다.

**이 저장소 계정에 대 한 신뢰할 수 있는 Microsoft 서비스 액세스 허용** 이 선택 되어 있는지 확인 합니다.

:::image type="content" source="media/sql-database-vulnerability-assessment-storage/storage-allow-microsoft-services.png" alt-text="저장소-허용-microsoft 서비스":::

## <a name="store-va-scan-results-for-azure-sql-managed-instance-in-a-storage-account-that-can-be-accessed-behind-a-firewall-or-vnet"></a>방화벽이 나 VNet 뒤에서 액세스할 수 있는 저장소 계정에 Azure SQL Managed Instance에 대 한 VA 검사 결과를 저장 합니다.

Managed Instance는 신뢰할 수 있는 Microsoft 서비스가 아니고 저장소 계정과 다른 VNet을 포함 하므로 VA 검색을 실행 하면 오류가 발생 합니다.

관리 되는 인스턴스에서 VA 검색을 지원 하려면 다음 단계를 수행 합니다.

1. **SQL 관리 되는 인스턴스** 창의 **개요** 제목 아래에서 **가상 네트워크/서브넷** 링크를 클릭 합니다. 그러면 **가상 네트워크** 창으로 이동 합니다.

   :::image type="content" source="media/sql-database-managed-instance-public-endpoint-configure/mi-overview.png" alt-text="mi-overview2":::

1. **설정**에서 **서브넷**을 선택 합니다. 새 창에서 **서브넷** 을 클릭 하 여 서브넷을 추가 하 고이를 *Microsoft. sql\managedInstance*에 위임 합니다. 자세한 내용은 [서브넷 관리](../virtual-network/virtual-network-manage-subnet.md)를 참조 하세요.

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/mi-subnets.png" alt-text="mi-서브넷":::

1. **가상 네트워크** 창의 **설정**에서 **서비스 끝점**을 선택 합니다. 새 창에서 **추가** 를 클릭 하 고 새 서비스 끝점으로 *Microsoft Storage* 서비스를 추가 합니다. *Managedinstance* 서브넷이 선택 되어 있는지 확인 합니다. **추가**를 클릭합니다.

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/mi-service-endpoint.png" alt-text="mi 서비스-끝점":::

1. VA 검색을 저장 하도록 선택한 **저장소 계정** 으로 이동 합니다. **설정**아래에서 **방화벽 및 가상 네트워크**를 선택 합니다. **기존 가상 네트워크 추가**를 클릭합니다. 관리 되는 인스턴스 가상 네트워크 및 서브넷을 선택 하 고 **추가**를 클릭 합니다.

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/storage-firewall.png" alt-text="저장소-방화벽":::

이제 저장소 계정에 관리 되는 인스턴스의 VA 검색을 저장할 수 있습니다.

## <a name="next-steps"></a>다음 단계

- [취약성 평가](sql-vulnerability-assessment.md)
- [Azure Storage 계정 만들기](../storage/common/storage-account-create.md)
- [Azure SQL Database에 대한 고급 데이터 보안](sql-database-advanced-data-security.md)