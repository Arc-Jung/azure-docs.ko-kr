---
title: SQL 취약성 평가
description: Azure SQL Database에서 SQL 취약성 평가를 구성하고 평가 보고서를 해석하는 방법을 알아봅니다.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: mibar
ms.author: mibar
ms.reviewer: vanto, carlrab
ms.date: 04/19/2020
tags: azure-synapse
ms.openlocfilehash: 80629898b56f81fc738cb30df63766ea39adea6d
ms.sourcegitcommit: acb82fc770128234f2e9222939826e3ade3a2a28
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/21/2020
ms.locfileid: "81684247"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>SQL 취약성 평가를 통해 데이터베이스 취약점을 식별하는 데 도움이 됩니다.

SQL 취약성 평가는 잠재적인 데이터베이스 취약점을 검색, 추적 및 해결하는 데 도움이 되는 구성이 쉬운 서비스입니다. 이 도구를 사용하여 데이터베이스 보안을 사전에 강화하세요.

취약점 평가는 고급 SQL 보안 기능을 위한 통합 패키지인 [고급 데이터 보안](sql-database-advanced-data-security.md) 오퍼링의 일부입니다. 취약점 평가는 중앙 SQL 고급 데이터 보안 포털을 통해 액세스하고 관리할 수 있습니다.

> [!NOTE]
> 취약성 평가는 Azure SQL 데이터베이스, Azure SQL Database 관리 인스턴스 및 Azure Synapse 분석에 대해 지원됩니다. 이 문서에서는 이해를 돕기 위해 모든 관리되는 데이터베이스 서비스를 지칭할 때 'SQL Database'라는 용어를 사용합니다.

## <a name="vulnerability-assessment"></a>취약성 평가

SQL 취약성 평가는 보안 상태에 대한 가시성을 제공하는 서비스입니다. 취약성 평가에는 보안 문제를 해결하고 데이터베이스 보안을 강화하기 위한 실행 가능한 단계가 포함되어 있습니다. 이 도구를 사용하여 다음과 같은 도움을 받을 수 있습니다. 

- 데이터베이스 검색 보고서가 필요한 준수 요구 사항 충족
- 데이터 개인 정보 보호 표준 충족
- 변경 사항을 추적하기 어려운 동적 데이터베이스 환경 모니터링

취약점 평가는 Azure SQL 데이터베이스에 내장된 검색 서비스입니다. 이 서비스는 보안 취약점을 표시하는 규칙의 기술 기반을 사용합니다. 잘못된 구성, 과도한 사용 권한 및 보호되지 않은 중요한 데이터와 같은 모범 사례의 편차를 강조 합니다.

이 규칙은 Microsoft의 모범 사례를 기반으로 하며 데이터베이스와 중요한 데이터에 가장 큰 위험을 초래하는 보안 문제에 중점을 둡니다. 서버 방화벽 설정 및 서버 수준 권한과 같은 데이터베이스 수준 문제 및 서버 수준 보안 문제를 다룹니다. 또한 이러한 규칙은 규정 준수 표준을 충족하는 다양한 규정 본문의 여러 요구 사항을 나타냅니다.

검색 결과에는 각 문제를 해결하는 실행 가능한 단계가 포함되며 해당하는 경우 사용자 지정된 재구성 스크립트가 제공됩니다. 다음에 대해 허용 가능한 기준을 설정하여 환경에 대한 평가 보고서를 사용자 지정할 수 있습니다.
* 권한 구성입니다.
* 기능 구성.
* 데이터베이스 설정.

## <a name="implement-vulnerability-assessment"></a>취약성 평가 구현

다음 단계는 SQL 데이터베이스에 대한 취약성 평가를 구현합니다.

### <a name="1-run-a-scan"></a>1. 스캔 실행

Azure SQL Database 창에서 **보안** 제목 아래에서 **고급 데이터 보안을**선택합니다. 그런 다음 취약성 **평가** 창에서 **저장소 선택을** 클릭하여 전체 SQL 서버에 대한 취약성 평가 설정 창을 엽니다.

서버의 모든 데이터베이스에 대한 검색 결과가 저장되는 저장소 계정을 구성합니다. 스토리지 계정에 대한 자세한 내용은 [Azure Storage 계정 정보](../storage/common/storage-create-storage-account.md)를 참조하세요. 저장소를 구성한 후 **검사를** 선택하여 데이터베이스에서 취약점이 있는지 검사합니다.

![데이터베이스 검색](./media/sql-vulnerability-assessment/pp_va_initialize.png)

  > [!NOTE]
  > 검색 작업은 간단하며 안전합니다. 실행하는 데 몇 초정도 걸리며 완전히 읽기 전용입니다. 데이터베이스를 변경하지 않습니다.

### <a name="2-view-the-report"></a>2. 보고서 보기

검색이 완료되면 스캔 보고서가 Azure 포털에 자동으로 표시됩니다. 이 보고서는 보안 상태에 대한 개요를 제공합니다. 발견된 문제의 수와 해당 의 중도를 나열합니다. 결과에는 모범 사례의 편차에 대한 경고와 데이터베이스 보안 주체 및 역할 및 관련 사용 권한과 같은 보안 관련 설정의 스냅숏이 포함됩니다. 또한 검색 보고서는 데이터베이스에서 검색된 중요한 데이터의 맵을 제공합니다. 여기에는 [데이터 검색 및 분류를](sql-database-data-discovery-and-classification.md)사용하여 해당 데이터를 분류하는 권장 사항이 포함되어 있습니다.

![보고서 보기](./media/sql-vulnerability-assessment/pp_main_getstarted.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. 결과 분석 및 문제 해결

결과를 검토하고 보고서에서 환경의 실제 보안 문제를 나타내는 결과를 확인합니다. 각 실패한 결과로 드릴다운하여 결과의 영향과 각 보안 검사가 실패한 이유를 이해합니다. 보고서에 제공된 실행 가능한 수정 정보를 사용하여 문제를 해결합니다.

![보고서 분석](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. 기준설정

평가 결과를 검토할 때 특정 결과를 사용자 환경에서 허용 가능한 *기준으로* 표시할 수 있습니다. 기준은 기본적으로 결과를 보고하는 방법의 사용자 지정입니다. 기준과 일치하는 결과는 후속 검색을 통과하는 것으로 간주합니다. 기준 보안 상태를 설정한 후 취약점 평가는 기준에서 편차에 대해서만 보고합니다. 이러한 방식으로 관련 문제에 집중할 수 있습니다.

![기준 설정](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. 새 검사를 실행하여 사용자 지정 추적 보고서를 확인합니다.

**규칙 기준**설정이 끝나면 새 검사를 실행하여 사용자 지정된 보고서를 봅니다. 이제 취약점 평가는 승인된 기준 상태에서 벗어난 보안 문제만 보고합니다.

![사용자 지정 보고서 보기](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)

이제 취약성 평가를 사용하여 데이터베이스가 항상 높은 수준의 보안을 유지하고 조직 정책을 충족하는지 모니터링할 수 있습니다. 규정 준수 보고서가 필요한 경우 취약점 평가 보고서는 규정 준수 프로세스를 용이하게 하는 데 도움이 될 수 있습니다.

### <a name="6-set-up-periodic-recurring-scans"></a>6. 주기적인 반복 검사 설정

취약점 평가 설정으로 이동하여 **주기적인 되풀이 검사를**켭니다. 이 설정은 취약점 평가를 구성하여 일주일에 한 번 데이터베이스에서 검사를 자동으로 실행합니다. 검색 결과 요약이 제공한 이메일 주소로 전송됩니다.

![사용자 지정 보고서 보기](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. 평가 보고서 내보내기

**검사 결과 내보내기를** 선택하여 스캔 결과에 대한 다운로드 가능한 Excel 보고서를 만듭니다. 이 보고서에는 평가 요약을 표시하는 요약 탭이 포함되어 있습니다. 보고서에는 실패한 모든 검사가 포함됩니다. 또한 검사의 전체 결과 집합을 포함하는 **결과** 탭도 포함되어 있습니다. 결과에는 실행된 모든 검사와 각 검사에 대한 결과 세부 정보가 포함됩니다.

### <a name="8-view-scan-history"></a>8. 스캔 기록 보기

취약성 평가 창에서 **검색 기록을** 선택하여 이 데이터베이스에서 이전에 실행된 모든 검사의 기록을 확인합니다. 자세한 검색 결과를 보려면 목록에서 특정 검색을 선택합니다.

이제 취약성 평가를 사용하여 데이터베이스가 항상 높은 수준의 보안을 유지하고 조직 정책을 충족하는지 모니터링할 수 있습니다. 규정 준수 보고서가 필요한 경우 취약점 평가 보고서는 규정 준수 프로세스를 용이하게 하는 데 도움이 될 수 있습니다.

## <a name="manage-vulnerability-assessments-by-using-azure-powershell"></a>Azure PowerShell을 사용하여 취약성 평가 관리

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> PowerShell Azure 리소스 관리자 모듈은 Azure SQL Database에서 계속 지원되지만 향후 모든 개발은 Az.Sql 모듈용입니다. 이러한 cmdlet에 대 한 [AzureRM.Sql](https://docs.microsoft.com/powershell/module/AzureRM.Sql/)을 참조 합니다. Az 모듈 및 AzureRm 모듈의 명령에 대한 인수는 거의 동일합니다.

Azure PowerShell cmdlet을 사용하여 취약성 평가를 프로그래밍 방식으로 관리할 수 있습니다. 지원되는 cmdlet은 다음과 같습니다.

| 링크로 Cmdlet 이름 | 설명 |
| :-------------------- | :---------- |
| [클리어 아즈Sql데이터베이스 취약성평가규칙기준선](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | 취약성 평가 규칙 기준을 지웁니다.<br/>먼저 이 cmdlet을 사용하여 기준선을 지우기 전에 기준선을 설정합니다. |
| [클리어-아즈Sql데이터베이스 취약성평가설정](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | 데이터베이스의 취약성 평가 설정을 지웁니다. |
| [변환-아즈Sql데이터베이스취약성평가스캔](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | 취약성 평가 검색 결과를 Excel 파일로 변환합니다. |
| [받기-아즈Sql데이터베이스 취약성평가규칙기준선](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | 지정된 규칙에 대한 취약성 평가 규칙 기준을 가져옵니다. |
| [받기-아즈Sql데이터베이스취약성평가스캔기록](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | 지정된 데이터베이스와 연결된 모든 취약성 평가 검사 레코드를 가져옵니다. |
| [받기-AzSql데이터베이스 취약성평가설정](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | 데이터베이스의 취약성 평가 설정을 반환합니다. |
| [세트-아즈Sql데이터베이스 취약성평가규칙기준선](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | 취약성 평가 규칙 기준을 설정합니다. |
| [시작-아즈Sql데이터베이스취약성평가스캔](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | 취약점 평가 검사의 시작을 트리거합니다. |
| [업데이트-AzSqlDatabase 취약성평가설정](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | 데이터베이스의 취약성 평가 설정을 업데이트합니다. |
| &nbsp; | &nbsp; |

스크립트 예제를 보려면 [Azure SQL 취약성 평가 PowerShell 지원](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/)을 참조하세요.

## <a name="manage-vulnerability-assessment-baseline-rules-by-using-resource-manager-templates"></a>리소스 관리자 템플릿을 사용하여 취약성 평가 기준 규칙 관리

Azure 리소스 관리자 템플릿을 사용하여 취약성 평가 기준을 `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` 구성하려면 형식을 사용합니다.

기준을 추가하기 `vulnerabilityAssessments` 전에 SQL Server를 실행 중인 컴퓨터에서 사용하도록 설정해야 합니다.

다음은 베이스라인 규칙 VA2065를 masterdb 및 VA1143을 resource Manager 템플릿의 리소스로 userdb로 정의하는 예제입니다.

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

마스터 데이터베이스 및 사용자 데이터베이스의 경우 리소스 이름은 다르게 정의됩니다.

* 마스터 데이터베이스 - "이름": "[concat(server_name'),'',',',',','database_name'), 매개변수('database_name'), '/기본값/VA2065/마스터']",<b>master</b>
* 사용자 데이터베이스 - "이름": "[concat('server_name'),''',',',','database_name'), 매개변수('database_name'), '/기본값/VA2065/기본값']",<b>default</b>
 
 
 부울 형식을 true/false로 처리하려면 "1"/"0"과 같은 이진 입력으로 기준 결과를 설정합니다.
 
```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>다음 단계  

- [고급 데이터 보안에](sql-database-advanced-data-security.md)대해 자세히 알아보십시오.
- [데이터 검색 및 분류에](sql-database-data-discovery-and-classification.md)대해 자세히 알아보십시오.
