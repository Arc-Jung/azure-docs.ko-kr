---
title: Azure HPC 캐시에 저장소 추가
description: Azure HPC 캐시가 장기 파일 저장소에 온-프레미스 NFS 시스템 또는 Azure Blob 컨테이너를 사용할 수 있도록 저장소 대상을 정의하는 방법
author: ekpgh
ms.service: hpc-cache
ms.topic: conceptual
ms.date: 12/30/2019
ms.author: rohogue
ms.openlocfilehash: a68bf06bad995f71bedf6a5bdedcb676737a8c61
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "79271890"
---
# <a name="add-storage-targets"></a>스토리지 대상 추가

*저장소 대상은* Azure HPC 캐시 인스턴스를 통해 액세스되는 파일에 대한 백 엔드 저장소입니다. NFS 저장소(예: 온-프레미스 하드웨어 시스템)를 추가하거나 Azure Blob에 데이터를 저장할 수 있습니다.

하나의 캐시에 대해 최대 10개의 서로 다른 저장소 대상을 정의할 수 있습니다. 캐시는 모든 스토리지 대상을 하나의 집계된 네임스페이스에 제공합니다.

저장소 내보내기는 캐시의 가상 네트워크에서 액세스할 수 있어야 합니다. 온-프레미스 하드웨어 스토리지의 경우 NFS 저장소 액세스에 대한 호스트 이름을 확인할 수 있는 DNS 서버를 설정해야 할 수 있습니다. [자세한 내용은 DNS 액세스.](hpc-cache-prereqs.md#dns-access)

캐시를 만든 후 저장소 대상을 추가합니다. 이 절차는 Azure Blob 저장소를 추가하는지 NFS 내보내기를 추가할지 여부에 따라 약간 다릅니다. 각각에 대한 자세한 내용은 아래와 같습니다.

## <a name="open-the-storage-targets-page"></a>저장소 대상 페이지 열기

Azure 포털에서 캐시 인스턴스를 열고 왼쪽 사이드바의 **저장소 대상을** 클릭합니다. 저장소 대상 페이지는 모든 기존 대상을 나열하고 새 대상을 추가하는 링크를 제공합니다.

![저장소 대상 링크의 스크린샷 은 범주 제목 설정 및 모니터링 사이에 있는 구성 이라는 제목 아래 사이드바에 링크합니다.](media/hpc-cache-storage-targets-sidebar.png)

## <a name="add-a-new-azure-blob-storage-target"></a>새 Azure Blob 저장소 대상 추가

새 Blob 저장소 대상에는 Azure HPC 캐시 클라우드 파일 시스템 형식의 데이터로 채워진 빈 Blob 컨테이너 또는 컨테이너가 필요합니다. [Azure Blob 저장소로 이동 데이터에서](hpc-cache-ingest.md)Blob 컨테이너를 미리 로드하는 것에 대해 자세히 알아보기.

이 페이지에서 새 컨테이너를 추가하기 직전에 만들 수 있습니다.

Azure Blob 컨테이너를 정의하려면 이 정보를 입력합니다.

![새 Azure Blob 저장소 대상에 대한 정보로 채워진 저장소 추가 대상 페이지의 스크린샷](media/hpc-cache-add-blob.png)

* **저장소 대상 이름** - Azure HPC 캐시에서 이 저장소 대상을 식별하는 이름을 설정합니다.
* **대상 유형** - **Blob을**선택합니다.
* **저장소 계정** - 사용할 계정을 선택합니다.

  액세스 기능 [추가 역할에](#add-the-access-control-roles-to-your-account)설명된 대로 저장소 계정에 액세스하려면 캐시 인스턴스에 권한을 부여해야 합니다.

  사용할 수 있는 저장소 계정의 종류에 대한 자세한 내용은 [Blob 저장소 요구 사항을](hpc-cache-prereqs.md#blob-storage-requirements)참조하십시오.

* **저장소 컨테이너** - 이 대상의 Blob 컨테이너를 선택하거나 **새 만들기를 클릭합니다.**

  ![새 컨테이너에 대한 이름 및 액세스 수준(비공개)을 지정하는 대화 상자의 스크린샷](media/add-blob-new-container.png)

* **가상 네임스페이스 경로** - 이 저장소 대상에 대한 클라이언트 대상 파일 경로를 설정합니다. 가상 네임스페이스 기능에 대해 자세히 알아보려면 [집계된 네임스페이스 구성을](hpc-cache-namespace.md) 읽어보십시오.

완료되면 **확인을** 클릭하여 저장소 대상을 추가합니다.

> [!NOTE]
> 저장소 계정 방화벽이 "선택한 네트워크"에만 대한 액세스를 제한하도록 설정된 경우 [Blob 저장소 계정 방화벽 해결 설정에](hpc-cache-blob-firewall-fix.md)설명된 임시 해결 방법을 사용합니다.

### <a name="add-the-access-control-roles-to-your-account"></a>계정에 액세스 제어 역할 추가

Azure HPC 캐시는 [RBAC(역할 기반 액세스 제어)를](https://docs.microsoft.com/azure/role-based-access-control/index) 사용하여 캐시 서비스가 Azure Blob 저장소 대상에 대한 저장소 계정에 액세스할 수 있도록 권한을 부여합니다.

저장소 계정 소유자는 사용자 "HPC 캐시 리소스 공급자"에 대한 [저장소 계정 참여자](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#storage-account-contributor) 및 [저장소 Blob 데이터 참여자](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#storage-blob-data-contributor) 역할을 명시적으로 추가해야 합니다.

미리 또는 Blob 저장소 대상을 추가하는 페이지의 링크를 클릭하여 이 작업을 수행할 수 있습니다. 역할 설정이 Azure 환경을 통해 전파되는 데 최대 5분이 걸릴 수 있으므로 저장소 대상을 만들기 전에 역할을 추가한 후 몇 분 정도 기다려야 합니다.

RBAC 역할을 추가하는 단계:

1. 저장소 계정에 대한 **IAM(액세스 제어)** 페이지를 엽니다. 저장소 **추가 대상** 페이지의 링크가 선택한 계정에 대해 이 페이지를 자동으로 엽니다.

1. 페이지 **+** 상단에서 를 클릭하고 **역할 할당 추가를**선택합니다.

1. 목록에서 "저장소 계정 참여자" 역할을 선택합니다.

1. 필드에 **대한 액세스 할당에서** 기본값을 선택한 상태로 둡니다("Azure AD 사용자, 그룹 또는 서비스 주체").  

1. **선택** 필드에서 "hpc"를 검색합니다.  이 문자열은 "HPC 캐시 리소스 공급자"라는 하나의 서비스 주체와 일치해야 합니다. 해당 보안 주체를 클릭하여 선택합니다.

   > [!NOTE]
   > "hpc"에 대한 검색이 작동하지 않으면 대신 문자열 "storagecache"를 사용해 보십시오. GA 이전의 미리 보기에 참여한 사용자는 서비스 주체에 이전 이름을 사용해야 할 수 있습니다.

1. 하단의 **저장** 버튼을 클릭합니다.

1. 이 프로세스를 반복하여 "저장소 Blob 데이터 참여자" 역할을 할당합니다.  

![역할 할당 GUI 추가 스크린샷](media/hpc-cache-add-role.png)

## <a name="add-a-new-nfs-storage-target"></a>새 NFS 스토리지 대상 추가

NFS 저장소 대상에는 Blob 저장소 대상보다 더 많은 필드가 있습니다. 이러한 필드는 저장소 내보내기에 도달하는 방법과 데이터를 효율적으로 캐시하는 방법을 지정합니다. 또한 NFS 저장소 대상을 사용하면 NFS 호스트에 두 개 이상의 내보내기가 있는 경우 여러 네임스페이스 경로를 만들 수 있습니다.

![NFS 대상이 정의된 저장소 대상 페이지 추가 스크린샷](media/hpc-cache-add-nfs-target.png)

NFS 지원 스토리지 대상에 대해 이 정보를 제공합니다.

* **저장소 대상 이름** - Azure HPC 캐시에서 이 저장소 대상을 식별하는 이름을 설정합니다.

* **대상 유형** - **NFS를**선택합니다.

* **호스트 이름** - NFS 스토리지 시스템의 IP 주소 또는 정규화된 도메인 이름을 입력합니다. (캐시가 이름을 확인할 수 있는 DNS 서버에 액세스할 수 있는 경우에만 도메인 이름을 사용합니다.)

* **사용 모델** - 아래 사용 [모델 선택에서](#choose-a-usage-model)설명한 워크플로에 따라 데이터 캐싱 프로필 중 하나를 선택합니다.

### <a name="nfs-namespace-paths"></a>NFS 네임스페이스 경로

NFS 저장소 대상은 각 경로가 동일한 저장소 시스템에서 다른 내보내기 또는 하위 디렉터리를 나타내는 한 여러 가상 경로를 가질 수 있습니다.

하나의 저장소 대상에서 모든 경로를 만듭니다.

언제든지 저장소 대상에 [네임스페이스 경로를 추가하고 편집할](hpc-cache-edit-storage.md) 수 있습니다.

각 네임스페이스 경로에 대해 다음 값을 채웁니다.

* **가상 네임스페이스 경로** - 이 저장소 대상에 대한 클라이언트 대상 파일 경로를 설정합니다. 가상 네임스페이스 기능에 대해 자세히 알아보려면 [집계된 네임스페이스 구성을](hpc-cache-namespace.md) 읽어보십시오.

<!--  The virtual path should start with a slash ``/``. -->

* **NFS 내보내기 경로** - NFS 내보내기 경로를 입력합니다.

* **하위 디렉터리 경로** - 내보내기의 특정 하위 디렉터리를 탑재하려면 여기에 입력합니다. 그렇지 않은 경우 이 필드를 비워 둡니다.

완료되면 **확인을** 클릭하여 저장소 대상을 추가합니다.

### <a name="choose-a-usage-model"></a>사용 모델 선택
<!-- referenced from GUI - update aka.ms link if you change this heading -->

NFS 저장소 시스템을 가리키는 저장소 대상을 만들 때 해당 대상에 대한 *사용 모델을* 선택해야 합니다. 이 모델은 데이터가 캐시되는 방식을 결정합니다.

세 개의 옵션이 있습니다.

* **무거운 드문 쓰기 읽기** - 정적이거나 거의 변경되지 않는 파일에 대한 읽기 액세스 속도를 높이려면 이 옵션을 사용합니다.

  이 옵션은 클라이언트가 읽는 파일을 캐시하지만 즉시 백 엔드 저장소로 전달됩니다. 캐시에 저장된 파일은 NFS 저장소 볼륨의 파일과 비교되지 않습니다.

  먼저 캐시에 파일을 쓰지 않고 저장소 시스템에서 파일을 직접 수정할 수 있는 위험이 있는 경우 이 옵션을 사용하지 마십시오. 이 경우 캐시된 파일 버전은 백 엔드의 변경 내용으로 업데이트되지 않으며 데이터 집합이 일치하지 않을 수 있습니다.

* **쓰기 가 15% 이상 -** 이 옵션은 읽기 및 쓰기 성능 모두의 속도를 높입니다. 이 옵션을 사용하는 경우 모든 클라이언트는 백 엔드 저장소를 직접 탑재하는 대신 Azure HPC 캐시를 통해 파일에 액세스해야 합니다. 캐시된 파일에는 백 엔드에 저장되지 않은 최근 변경 내용이 있습니다.

  이 사용 모델에서는 캐시의 파일이 백 엔드 저장소의 파일에 대해 검사되지 않습니다. 캐시된 버전의 파일은 최신 버전인 것으로 가정합니다. 캐시에서 수정된 파일은 추가 변경 없이 한 시간 동안 캐시에 보관된 후에만 백 엔드 저장소 시스템에 기록됩니다.

* **클라이언트는 캐시를 우회하여 NFS 대상에 쓰기** - 워크플로의 모든 클라이언트가 캐시에 먼저 쓰지 않고 저장소 시스템에 데이터를 직접 쓰는 경우 이 옵션을 선택합니다. 클라이언트가 요청하는 파일은 캐시되지만 클라이언트에서 해당 파일에 대한 변경 내용은 즉시 백 엔드 저장소 시스템으로 다시 전달됩니다.

  이 사용 모델을 사용하면 캐시의 파일이 백 엔드 버전에서 업데이트를 위해 자주 검사됩니다. 이 확인을 통해 데이터 일관성을 유지하면서 캐시 외부에서 파일을 변경할 수 있습니다.

이 표에는 사용 모델 차이점이 요약됩니다.

| 사용 모델 | 캐싱 모드 | 백 엔드 검증 | 최대 쓰기 지연 |
| ---- | ---- | ---- | ---- |
| 무겁고 드문 쓰기 읽기 | 읽기 | 안 함 | None |
| 15% 이상 쓰기 | 읽기/쓰기 | 안 함 | 1시간 |
| 클라이언트가 캐시를 우회합니다. | 읽기 | 30초 | None |

## <a name="next-steps"></a>다음 단계

저장소 대상을 만든 후 다음 작업 중 하나를 고려하십시오.

* [Azure HPC Cache 마운트](hpc-cache-mount.md)
* [Azure Blob 저장소로 데이터 이동](hpc-cache-ingest.md)

설정을 업데이트해야 하는 경우 [저장소 대상을 편집할](hpc-cache-edit-storage.md)수 있습니다.
