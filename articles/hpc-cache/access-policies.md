---
title: Azure HPC 캐시에서 액세스 정책 사용
description: Azure HPC 캐시의 저장소 대상에 대 한 클라이언트 액세스를 제한 하는 사용자 지정 액세스 정책을 만들고 적용 하는 방법
author: ekpgh
ms.service: hpc-cache
ms.topic: how-to
ms.date: 03/11/2021
ms.author: v-erkel
ms.openlocfilehash: eb9e71cc8ec463077e3b12b8738203a4945a2eab
ms.sourcegitcommit: 66ce33826d77416dc2e4ba5447eeb387705a6ae5
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/15/2021
ms.locfileid: "103471788"
---
# <a name="control-client-access"></a>클라이언트 액세스 제어

이 문서에서는 저장소 대상에 대 한 사용자 지정 클라이언트 액세스 정책을 만들고 적용 하는 방법을 설명 합니다.

클라이언트 액세스 정책은 클라이언트에서 저장소 대상 내보내기에 연결 하도록 허용 하는 방법을 제어 합니다. 클라이언트 호스트 또는 네트워크 수준에서 root squash 및 읽기/쓰기 액세스와 같은 항목을 제어할 수 있습니다.

액세스 정책은 네임 스페이스 경로에 적용 됩니다. 즉, NFS 저장소 시스템의 두 가지 다른 내보내기에 대해 서로 다른 액세스 정책을 사용할 수 있습니다.

이 기능은 다양 한 클라이언트 그룹이 저장소 대상에 액세스 하는 방법을 제어 해야 하는 워크플로에 사용 됩니다.

저장소 대상 액세스를 세부적으로 제어 하지 않아도 되는 경우 기본 정책을 사용 하거나 추가 규칙을 사용 하 여 기본 정책을 사용자 지정할 수 있습니다. 예를 들어 캐시를 통해 연결 되는 모든 클라이언트에 루트 squash를 사용 하도록 설정 하려는 경우 **기본값** 이라는 정책을 편집 하 여 root squash 설정을 추가할 수 있습니다.

## <a name="create-a-client-access-policy"></a>클라이언트 액세스 정책 만들기

Azure Portal의 **클라이언트 액세스 정책** 페이지를 사용 하 여 정책을 만들고 관리할 수 있습니다. <!-- is there AZ CLI for this? -->

[![클라이언트 액세스 정책 페이지의 스크린샷 여러 정책을 정의 하 고 일부 정책을 확장 하 여 해당 규칙을 표시 합니다.](media/policies-overview.png)](media/policies-overview.png#lightbox)

각 정책은 규칙으로 구성 됩니다. 규칙은 가장 작은 범위 (호스트)에서 가장 큰 (기본값) 순서로 호스트에 적용 됩니다. 일치 하는 첫 번째 규칙이 적용 되 고 이후 규칙은 무시 됩니다.

새 액세스 정책을 만들려면 목록 맨 위에 있는 **+ 액세스 정책 추가** 단추를 클릭 합니다. 새 액세스 정책에 이름을 지정 하 고 하나 이상의 규칙을 입력 합니다.

![여러 규칙이 채워진 액세스 정책 편집 블레이드의 스크린샷 확인을 클릭 하 여 규칙을 저장 합니다.](media/add-policy.png)

이 섹션의 나머지 부분에서는 규칙에서 사용할 수 있는 값에 대해 설명 합니다.

### <a name="scope"></a>Scope

범위 용어와 주소 필터는 함께 작동 하 여 규칙의 영향을 받는 클라이언트를 정의 합니다.

이를 사용 하 여 규칙이 개별 클라이언트 (호스트), IP 주소 범위 (네트워크) 또는 모든 클라이언트 (기본값)에 적용 되는지 여부를 지정 합니다.

규칙에 적절 한 **범위** 값을 선택 합니다.

* **호스트** -규칙이 개별 클라이언트에 적용 됩니다.
* **네트워크** -규칙이 IP 주소 범위의 클라이언트에 적용 됩니다.
* **기본값** -규칙이 모든 클라이언트에 적용 됩니다.

정책의 규칙은 순서 대로 평가 됩니다. 클라이언트 탑재 요청은 하나의 규칙과 일치 하며, 다른 규칙은 무시 됩니다.

### <a name="address-filter"></a>주소 필터

**주소 필터** 값은 규칙과 일치 하는 클라이언트를 지정 합니다.

범위를 **호스트** 로 설정 하는 경우 필터에 IP 주소를 하나만 지정할 수 있습니다. 범위 설정 **기본값** 의 경우 기본 범위가 모든 클라이언트와 일치 하므로 **주소 필터** 필드에 IP 주소를 입력할 수 없습니다.

이 규칙의 IP 주소 또는 주소 범위를 지정 하십시오. CIDR 표기법 (예: 0.1.0.0 이상/16)을 사용 하 여 주소 범위를 지정 합니다.

### <a name="access-level"></a>액세스 수준

범위 및 필터와 일치 하는 클라이언트를 부여할 권한을 설정 합니다.

**읽기/쓰기**, **읽기** 전용 또는 **액세스 권한 없음** 옵션이 있습니다.

### <a name="suid"></a>SUID

**SUID** 상자를 선택 하 여 저장소의 파일이 액세스 시 사용자 id를 설정할 수 있도록 허용 합니다.

SUID는 일반적으로 사용자가 해당 파일에 관련 된 작업을 수행할 수 있도록 사용자의 권한을 일시적으로 늘리는 데 사용 됩니다.

### <a name="submount-access"></a>Submount 액세스

지정 된 클라이언트가이 내보내기의 하위 디렉터리를 직접 탑재할 수 있도록 하려면이 확인란을 선택 합니다.

### <a name="root-squash"></a>루트 squash

이 규칙과 일치 하는 클라이언트에 대 한 루트 squash를 설정할지 여부를 선택 합니다.

이 설정은 Azure HPC 캐시가 클라이언트 컴퓨터에서 루트 사용자의 요청을 처리 하는 방법을 제어 합니다. Root squash를 사용 하도록 설정 하면 클라이언트의 루트 사용자가 Azure HPC 캐시를 통해 요청을 보낼 때 권한 없는 사용자에 게 자동으로 매핑됩니다. 또한 클라이언트 요청에서 UID 권한 비트를 사용 하는 것을 방지 합니다.

Root squash가 사용 하지 않도록 설정 된 경우 클라이언트 루트 사용자 (UID 0)의 요청은 백 엔드 NFS 저장소 시스템에 루트로 전달 됩니다. 이 구성은 부적절 한 파일 액세스를 허용할 수 있습니다.

클라이언트 요청에 대 한 루트 squash를 설정 하면 ``no_root_squash`` 저장소 대상으로 사용 되는 NAS 시스템에서 필요한 설정을 보정 하는 데 도움이 될 수 있습니다. [NFS 저장소 대상 필수 구성 요소](hpc-cache-prerequisites.md#nfs-storage-requirements)에 대해 자세히 알아보세요. 또한 Azure Blob 저장소 대상에서 사용 하는 경우 보안을 향상 시킬 수 있습니다.

Root squash를 설정 하는 경우 익명 ID 사용자 값도 설정 해야 합니다. 포털은 0에서 4294967295 사이의 정수 값을 허용 합니다. 이전 값-2 및-1은 이전 버전과의 호환성을 위해 지원 되지만 새로운 구성에는 권장 되지 않습니다.

이러한 값은 특정 사용자 값에 매핑됩니다.

* **-2** 또는 **65534** (아무도 없음)
* **-1** 또는 **65535** (액세스 권한 없음)
* **0** (권한 없는 루트)

저장소 시스템에 특별 한 의미를 가진 다른 값이 있을 수 있습니다.

## <a name="update-access-policies"></a>액세스 정책 업데이트

**클라이언트 액세스 정책** 페이지의 테이블에서 액세스 정책을 편집 하거나 삭제할 수 있습니다.

정책 이름을 클릭 하 여 편집용으로 엽니다.

정책을 삭제 하려면 목록에서 해당 이름 옆에 있는 확인란을 표시 한 다음 목록 맨 위에 있는 **삭제** 단추를 클릭 합니다. "Default" 라는 정책은 삭제할 수 없습니다.

> [!NOTE]
> 사용 중인 액세스 정책은 삭제할 수 없습니다. 삭제 하기 전에이를 포함 하는 네임 스페이스 경로에서 정책을 제거 합니다.

## <a name="next-steps"></a>다음 단계

* 저장소 대상에 대 한 네임 스페이스 경로에 액세스 정책을 적용 합니다. 자세한 내용은 [집계 된 네임 스페이스 설정](add-namespace-paths.md) 을 참조 하세요.
