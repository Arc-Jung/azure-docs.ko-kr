---
title: Azure HPC 캐시 사용 모델
description: 다양 한 캐시 사용 모델 및 이러한 모델 중에서 선택 하 여 읽기 전용 또는 읽기/쓰기 캐싱을 설정 하 고 기타 캐싱 설정을 제어 하는 방법을 설명 합니다.
author: ekpgh
ms.service: hpc-cache
ms.topic: how-to
ms.date: 03/08/2021
ms.author: v-erkel
ms.openlocfilehash: 856f2c15d2bd0b39212e8962a92b1df50cada29e
ms.sourcegitcommit: 66ce33826d77416dc2e4ba5447eeb387705a6ae5
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/15/2021
ms.locfileid: "103472857"
---
# <a name="understand-cache-usage-models"></a>캐시 사용 모델 이해

캐시 사용 모델을 사용 하면 Azure HPC 캐시에서 워크플로 속도를 높이기 위해 파일을 저장 하는 방법을 사용자 지정할 수 있습니다.

## <a name="basic-file-caching-concepts"></a>기본 파일 캐싱 개념

파일 캐싱은 Azure HPC 캐시가 클라이언트 요청을 신속 하 게 하는 방법입니다. 다음과 같은 기본 방법을 사용 합니다.

* **읽기 캐싱** -Azure HPC 캐시는 클라이언트가 저장소 시스템에서 요청 하는 파일의 복사본을 유지 합니다. 다음 번에 클라이언트가 동일한 파일을 요청 하면 HPC 캐시가 백 엔드 저장소 시스템에서 다시 인출 하지 않고 해당 캐시의 버전을 제공할 수 있습니다.

* **쓰기 캐싱** -선택적으로 Azure HPC 캐시는 클라이언트 컴퓨터에서 전송 된 변경 된 파일의 복사본을 저장할 수 있습니다. 여러 클라이언트에서 짧은 기간 동안 동일한 파일을 변경 하는 경우 백 엔드 저장소 시스템에 각 변경 내용을 개별적으로 작성 하지 않고 캐시에서 캐시의 모든 변경 내용을 수집할 수 있습니다.

  지정 된 시간이 변경 되지 않은 상태에서 캐시는 장기 저장소 시스템으로 파일을 이동 합니다.

  쓰기 캐싱이 사용 되지 않도록 설정 되어 있으면 캐시에서 변경 된 파일을 저장 하지 않고 백 엔드 저장소 시스템에 즉시 기록 합니다.

* **쓰기 저장 지연** -쓰기 캐싱이 설정 된 캐시의 경우 쓰기 저장 지연은 캐시에서 파일을 백 엔드 저장소 시스템으로 이동 하기 전에 추가 파일 변경 내용을 대기 하는 시간입니다.

* **백 엔드 확인** -백 엔드 확인 설정은 캐시가 백 엔드 저장소 시스템의 원격 버전과 파일의 로컬 복사본을 비교 하는 빈도를 결정 합니다. 백 엔드 복사본이 캐시 된 복사본 보다 최신인 경우 캐시는 원격 복사본을 페치하고 이후 요청에 저장 합니다.

  백 엔드 확인 설정은 캐시가 *자동으로* 해당 파일을 원격 저장소의 소스 파일과 비교 하는 경우를 표시 합니다. 그러나 Azure HPC 캐시가 readdirplus 요청을 포함 하는 디렉터리 작업을 수행 하 여 파일을 비교 하도록 강제할 수 있습니다. Readdirplus는 디렉터리 메타 데이터를 반환 하는 표준 NFS API (확장 된 읽기 라고도 함)로, 캐시에서 파일을 비교 하 고 업데이트 합니다.

Azure HPC 캐시에 기본 제공 되는 사용 모델은 이러한 설정에 대해 다른 값을 가지 므로 사용자의 상황에 가장 적합 한 조합을 선택할 수 있습니다.

## <a name="choose-the-right-usage-model-for-your-workflow"></a>워크플로에 적합 한 사용 모델 선택

사용 하는 각 NFS 탑재 저장소 대상에 대 한 사용 모델을 선택 해야 합니다. Azure Blob 저장소 대상에는 사용자 지정할 수 없는 기본 제공 사용 모델이 있습니다.

HPC 캐시 사용 모델을 사용 하 여 오래 된 응답의 균형을 유지 하는 방법을 선택할 수 있습니다. 파일 읽기 속도를 최적화 하려면 캐시의 파일을 백 엔드 파일에 대해 확인 하는 것이 중요 하지 않을 수 있습니다. 반면에 원격 저장소를 사용 하 여 파일이 항상 최신 상태를 유지 하 게 하려면 자주 확인 하는 모델을 선택 합니다.

몇 가지 옵션이 있습니다.

* 자주 발생 하지 않는 **많은 쓰기 읽기** -정적 이거나 거의 변경 되지 않은 파일에 대 한 읽기 액세스를 가속화 하려면이 옵션을 사용 합니다.

  이 옵션은 클라이언트 읽기를 캐시 하지만 쓰기를 캐시 하지 않습니다. 백 엔드 저장소에 즉시 쓰기를 전달 합니다.
  
  캐시에 저장 된 파일은 NFS 저장소 볼륨의 파일과 자동으로 비교 되지 않습니다. (위의 백 엔드 확인에 대 한 설명을 읽고 수동으로 비교 하는 방법을 알아보세요.)

  저장소 시스템에서 파일을 직접 캐시에 쓰지 않고 수정할 수 있는 위험이 있는 경우이 옵션을 사용 하지 마세요. 이 경우 캐시 된 버전의 파일이 백 엔드 파일과 동기화 되지 않습니다.

* **쓰기 수 15% 이상** -이 옵션을 선택 하면 읽기 및 쓰기 성능이 향상 됩니다. 이 옵션을 사용 하는 경우 모든 클라이언트는 백 엔드 저장소를 직접 탑재 하는 대신 Azure HPC 캐시를 통해 파일에 액세스 해야 합니다. 캐시 된 파일에는 백 엔드에 저장 되지 않은 최근 변경 내용이 포함 됩니다.

  이 사용 모델에서 캐시의 파일은 8 시간 마다 백 엔드 저장소에 있는 파일에 대해서만 확인 됩니다. 캐시 된 버전의 파일은 더 최신 버전으로 간주 됩니다. 캐시에 있는 수정 된 파일은 20 분 동안 캐시에 있는 백 엔드 저장소 시스템에 기록 됩니다.<!-- an hour --> 추가 변경 내용이 없습니다.

* **클라이언트에서 NFS 대상에 기록 하 고 캐시를 무시** 합니다. 워크플로의 클라이언트에서 먼저 캐시에 쓰지 않고 저장소 시스템에 직접 데이터를 기록 하거나 데이터 일관성을 최적화 하려는 경우이 옵션을 선택 합니다. 클라이언트에서 요청 하는 파일이 캐시 (읽기) 되지만 클라이언트에서 해당 파일에 대 한 변경 내용 (쓰기)은 캐시 되지 않습니다. 백 엔드 저장소 시스템에 직접 전달 됩니다.

  이 사용 모델을 사용 하면 캐시의 파일을 백 엔드 버전에 대해 자주 확인 하 여 업데이트를 수행 합니다. 이 확인을 통해 데이터 일관성을 유지 하면서 캐시 외부에서 파일을 변경할 수 있습니다.

* **15% 이상의 쓰기, 백업 서버에서 30 초 마다 변경 내용을 확인** 하 고, 30 **% 보다 큰 쓰기를 수행 하 고, 백업 서버에서 60 초 마다 변경 내용을 확인** 하는 경우, 이러한 옵션은 읽기 및 쓰기 속도를 향상 시키려는 워크플로를 위해 설계 되었지만 다른 사용자가 백 엔드 저장소 시스템에 직접 쓸 가능성이 있습니다. 예를 들어 여러 클라이언트 집합이 서로 다른 위치의 동일한 파일에서 작업 하는 경우 이러한 사용 모델은 원본에서 오래 된 콘텐츠에 대해 낮은 허용 오차를 사용 하는 빠른 파일 액세스의 필요성을 분산 하는 것이 적합할 수 있습니다.

* **30 초 간격으로 서버에 쓰기 15% 초과-30 초 간격으로 서버에 다시 쓰기** -이 옵션은 여러 클라이언트가 동일한 파일을 적극적으로 수정 하거나 일부 클라이언트가 캐시를 탑재 하는 대신 백 엔드 저장소에 직접 액세스 하는 시나리오를 위해 설계 되었습니다.

  빈번한 백 엔드 쓰기는 캐시 성능에 영향을 주므로 파일 충돌 위험이 낮은 경우 (예: 서로 다른 클라이언트가 동일한 파일 집합의 서로 다른 영역에서 작업 하는 경우)에는 **15% 보다 큰 쓰기** 사용 모델을 사용 하는 것이 좋습니다.

* **3 시간 마다 백업 서버를 확인 하는** 것이 좋습니다 .이 옵션은 클라이언트 쪽에서 빠른 읽기의 우선 순위를 정하는 반면, 자주 사용 하지 않는 **읽기** 작업 모델과는 달리 백 엔드 저장소 시스템에서 캐시 된 파일을 정기적으로 새로 고칩니다.

이 표에는 사용 모델의 차이점이 요약 되어 있습니다.

| 사용 모델                   | 캐싱 모드 | 백 엔드 확인 | 최대 다시 쓰기 지연 |
|-------------------------------|--------------|-----------------------|--------------------------|
| 자주 발생 하지 않는 매우 많은 쓰기 읽기 | 읽기         | 안 함                 | 없음                     |
| 쓰기 15% 초과       | 읽기/쓰기   | 8시간               | 20분               |
| 클라이언트에서 캐시 무시      | 읽기         | 30초            | 없음                     |
| 쓰기 15% 초과, 자주 수행 하는 백 엔드 검사 (30 초) | 읽기/쓰기 | 30초 | 20분 |
| 쓰기 15% 초과, 빈번한 백 엔드 검사 (60 초) | 읽기/쓰기 | 60초 | 20분 |
| 쓰기 15% 이상, 자주 쓰기 복구 | 읽기/쓰기 | 30초 | 30초 |
| 3 시간 마다 자주 읽고 백업 서버 확인 | 읽기 | 3시간 | 없음 |

Azure HPC 캐시 워크플로에 대 한 최상의 사용 모델에 대 한 질문이 있는 경우 Azure 담당자에 게 문의 하거나 지원 요청을 여세요.

## <a name="next-steps"></a>다음 단계

* Azure HPC 캐시에 [저장소 대상 추가](hpc-cache-add-storage.md)
