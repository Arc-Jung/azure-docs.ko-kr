---
title: Azure Cosmos DB 일관성, 가용성 및 성능 절충
description: Azure Cosmos DB에서 다양한 일관성 수준의 가용성 및 성능 절충
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 04/06/2020
ms.reviewer: sngun
ms.openlocfilehash: 7cdaa9699b15000359c438bcc410e300415b759a
ms.sourcegitcommit: ea006cd8e62888271b2601d5ed4ec78fb40e8427
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/14/2020
ms.locfileid: "81379954"
---
# <a name="consistency-availability-and-performance-tradeoffs"></a>일관성, 가용성 및 성능의 장단점

고가용성, 낮은 대기 시간 또는 둘 다를 위해 복제에 의존하는 분산 데이터베이스는 절충을 해야 합니다. 읽기 일관성과 가용성, 대기 시간 및 처리량의 절충이 필요합니다.

Azure Cosmos DB는 선택 사항 스펙트럼으로 데이터 일관성에 접근합니다. 이 접근 방식에는 두 가지의 극단적인 강력한 최종 일관성보다 많은 옵션이 포함됩니다. 일관성 스펙트럼에서 잘 정의된 5가지 수준에서 선택할 수 있습니다. 가장 강한 수준에서 가장 약한 수준입니다.

- *강력*
- *경계 부실*
- *세션*
- *일관된 접두사*
- *최종*

각 수준은 가용성 및 성능 절충을 제공하며 포괄적인 SLA를 통해 뒷받침됩니다.

## <a name="consistency-levels-and-latency"></a>일관성 수준 및 대기 시간

모든 일관성 수준에 대한 읽기 대기 시간은 항상 99번째 백분위 수에서 10밀리초 미만을 보장합니다. 이 읽기 대기 시간은 SLA로 지원됩니다. 50번째 백분위수의 평균 읽기 대기 시간은 일반적으로 4밀리초 이하입니다.

모든 일관성 수준에 대한 쓰기 대기 시간은 항상 99번째 백분위수에서 10밀리초 미만으로 보장됩니다. 이 쓰기 대기 시간은 SLA를 통해 지원됩니다. 50번째 백분위 수의 평균 쓰기 대기 시간은 일반적으로 5밀리초 이하입니다. 여러 Azure 지역에 걸쳐 있으며 강력한 일관성을 사용하여 구성된 Azure Cosmos 계정은 이 보장의 예외입니다.

### <a name="write-latency-and-strong-consistency"></a>쓰기 대기 시간 및 강력한 일관성

둘 이상의 리전과 강력한 일관성으로 구성된 Azure Cosmos 계정의 경우 쓰기 대기 시간은 가장 먼 두 지역 간의 왕복 시간(RTT)과 99번째 백분위수의 10밀리초와 같습니다. 지역 간의 높은 네트워크 RTT는 강력한 일관성이 계정 내의 모든 지역에 커밋된 후에만 작업을 완료하기 때문에 Cosmos DB 요청에 대한 대기 시간이 더 높은 것으로 변환됩니다.

정확한 RTT 대기 시간은 광속 거리와 Azure 네트워킹 토폴로지의 함수입니다. Azure 네트워킹은 두 Azure 지역 간의 RTT에 대해 대기 시간 SLA를 제공하지 않습니다. Azure Cosmos 계정의 경우 Azure Portal에 복제 대기 시간이 표시됩니다. Azure 포털(메트릭 블레이드로 이동, 일관성 탭 선택)을 사용하여 Azure Cosmos 계정과 연결된 다양한 지역 간의 복제 대기 시간을 모니터링할 수 있습니다.

> [!IMPORTANT]
> 5,000마일(8,000킬로미터) 이상을 아우르는 지역에 대한 강력한 일관성은 쓰기 대기 시간이 높기 때문에 기본적으로 차단됩니다. 이 기능을 사용하려면 지원팀에 문의하십시오.

## <a name="consistency-levels-and-throughput"></a>일관성 수준 및 처리량

- 강력하고 경계가 있는 부실의 경우 일관성 을 보장하기 위해 네 개의 복제본 집합(소수 쿼럼)에 있는 두 복제본에 대해 읽기가 수행됩니다. 세션, 일관된 접두사 및 최종 복제본 읽기를 수행합니다. 결과적으로 동일한 수의 요청 단위에 대해 강력하고 경계가 있는 부실에 대한 읽기 처리량이 다른 일관성 수준의 절반입니다.

- 지정된 쓰기 작업 유형(예: 삽입, 바꾸기, upsert, 삭제 등)의 경우 요청 단위에 대한 쓰기 처리량은 모든 일관성 수준에서 동일합니다.

|**일관성 수준**|**정원회 읽기**|**쿼럼 쓰기**|
|--|--|--|
|**강력**|지역 소수 민족|글로벌 과반수|
|**제한된 부실**|지역 소수 민족|지역 과반수|
|**세션**|단일 복제본(세션 토큰 사용)|지역 과반수|
|**일관적인 접두사**|단일 복제본|지역 과반수|
|**최종**|단일 복제본|지역 과반수|

## <a name="consistency-levels-and-data-durability"></a><a id="rto"></a>일관성 수준 및 데이터 내구성

전 세계적으로 분산된 데이터베이스 환경에서 지역 전체 가동 중단이 발생할 경우, 일관성 수준과 데이터 내구성 사이에 직접적인 관계가 있습니다. 비즈니스 연속성 계획을 개발할 때는 중단 이벤트가 발생한 후 애플리케이션이 완전히 복구되기까지 허용되는 최대 시간을 이해해야 합니다. 응용 프로그램이 완전히 복구하는 데 필요한 시간을 **복구 시간** 목표(RTO)라고 합니다.**RTO** 또한 중단 이벤트가 발생한 후 복구될 때 애플리케이션에서 손실을 허용할 수 있는 최근 데이터 업데이트의 최대 기간도 이해해야 합니다. 잃을 수 있는 업데이트 기간을 **RPO(복구 지점 목표)라고** 합니다.**RPO**

아래 표는 영역이 크게 중단되는 경우 일관성 모델과 데이터 내구성 간의 관계를 정의합니다. 분산 시스템에서는 일관성이 강하더라도 CAP 정리로 인해 RPO 및 RTO가 0인 분산 데이터베이스를 가질 수 없습니다. 그 이유에 대한 자세한 내용은 [Azure Cosmos DB의 일관성 수준을](consistency-levels.md)참조하십시오.

|**지역(들)**|**복제 모드**|**일관성 수준**|**RPO**|**RTO**|
|---------|---------|---------|---------|---------|
|1|단일 또는 다중 마스터|일관성 수준|< 240분|< 1주|
|>1|단일 마스터|세션, 일관된 접두사, 최종|< 15분|< 15분|
|>1|단일 마스터|제한된 부실|*K* & *T*|< 15분|
|>1|단일 마스터|강력|0|< 15분|
|>1|다중 마스터|세션, 일관된 접두사, 최종|< 15분|0|
|>1|다중 마스터|제한된 부실|*K* & *T*|0|

*K* = 항목의 *"K"* 버전(즉, 업데이트)의 수입니다.

*T* = 마지막 업데이트 이후의 시간 간격 *"T"입니다.*

## <a name="strong-consistency-and-multi-master"></a>강력한 일관성 과 멀티 마스터

분산 시스템이 0의 RPO와 0의 RTO를 제공할 수 없으므로 멀티 마스터용으로 구성된 Cosmos 계정은 강력한 일관성을 위해 구성할 수 없습니다. 또한 모든 리전에 쓰기를 복제하고 계정 내의 구성된 모든 리전에 커밋해야 하므로 다중 마스터와 함께 강력한 일관성을 사용하는 데는 쓰기 대기 시간 이점이 없습니다. 이렇게 하면 단일 마스터 계정과 동일한 쓰기 대기 시간이 발생합니다.

## <a name="next-steps"></a>다음 단계

전역 분산 및 분산 시스템의 일반적인 일관성 절충에 대해 알아봅니다. 다음 문서를 참조하세요.

- [최신 분산 데이터베이스 시스템 설계의 일관성 장단점](https://www.computer.org/csdl/magazine/co/2012/02/mco2012020037/13rRUxjyX7k)
- [고가용성](high-availability.md)
- [Azure Cosmos DB SLA](https://azure.microsoft.com/support/legal/sla/cosmos-db/v1_2/)
