---
title: Azure Cosmos DB에서 분할
description: Azure Cosmos DB의 분할, 파티션 키를 선택할 때의 모범 사례 및 논리 파티션 을 관리하는 방법에 대해 알아봅니다.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 12/02/2019
ms.openlocfilehash: 551703b5dcca082904197010366ee059998dde4b
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "79251870"
---
# <a name="partitioning-in-azure-cosmos-db"></a>Azure Cosmos DB에서 분할

Azure Cosmos DB는 분할을 사용하여 데이터베이스의 개별 컨테이너를 확장하여 응용 프로그램의 성능 요구 사항을 충족합니다. 분할에서 컨테이너의 항목은 *논리 파티션이라는*별개의 하위 집합으로 나뉩니다. 논리 파티션은 컨테이너의 각 항목과 연결된 *파티션 키의* 값을 기반으로 형성됩니다. 논리 파티션의 모든 항목에는 동일한 파티션 키 값이 있습니다.

예를 들어 컨테이너는 항목을 보유합니다. 각 항목에는 속성에 `UserID` 대한 고유한 값이 있습니다. 컨테이너의 항목에 대한 파티션 키역할을 하고 고유 `UserID` `UserID` 값이 1,000인 경우 컨테이너에 대해 1,000개의 논리 파티션이 만들어집니다.

항목의 논리 파티션을 결정하는 파티션 키 외에도 컨테이너의 각 항목에는 *항목 ID(논리* 파티션 내에서 고유)가 있습니다. 파티션 키와 항목 ID를 결합하면 항목의 *인덱스가*생성되어 항목을 고유하게 식별합니다.

[파티션 키를 선택하는](partitioning-overview.md#choose-partitionkey) 것은 응용 프로그램의 성능에 영향을 주는 중요한 결정입니다.

## <a name="managing-logical-partitions"></a>논리 파티션 관리

Azure Cosmos DB는 컨테이너의 확장성 및 성능 요구를 효율적으로 충족하기 위해 물리적 파티션에 논리 파티션의 배치를 투명하고 자동으로 관리합니다. 응용 프로그램의 처리량 및 저장소 요구 사항이 증가함에 따라 Azure Cosmos DB는 논리 파티션을 이동하여 더 많은 수의 서버에 부하를 자동으로 분산시깁니다. 

Azure Cosmos DB는 해시 기반 파티션을 사용하여 실제 파티션에 논리 파티션을 분산합니다. Azure Cosmos DB는 항목의 파티션 키 값을 해시합니다. 해시된 결과에 따라 실제 파티션이 결정됩니다. 그런 다음 Azure Cosmos DB는 파티션 키 해시의 키 공간을 실제 파티션에 균등하게 할당합니다.

단일 논리 파티션 내에서 데이터에 액세스하는 쿼리는 여러 파티션에 액세스하는 쿼리보다 비용 효율적입니다. 트랜잭션(저장 프로시저 또는 트리거)은 단일 논리 파티션의 항목에 대해서만 허용됩니다.

Azure Cosmos DB가 파티션을 관리하는 방법에 대한 자세한 내용은 [논리 파티션을](partition-data.md)참조하십시오. 응용 프로그램을 빌드하거나 실행하기 위해 내부 세부 정보를 이해할 필요는 없지만 호기심 많은 독자를 위해 여기에 추가되었습니다.

## <a name="choosing-a-partition-key"></a><a id="choose-partitionkey"></a>파티션 키 선택

다음은 파티션 키를 선택하는 좋은 지침입니다.

* 단일 논리 파티션에는 20GB의 저장소상이 있습니다.  

* Azure Cosmos 컨테이너의 최소 처리량은 초당 400개의 요청 단위(RU/s)입니다. 처리량이 데이터베이스에 프로비전되는 경우 컨테이너당 최소 RU는 초당 100개의 요청 단위(RU/s)입니다. 동일한 파티션 키에 대한 요청은 파티션에 할당된 처리량을 초과할 수 없습니다. 요청이 할당된 처리량을 초과하는 경우 요청은 속도 제한이 있습니다. 따라서 애플리케이션 내에서 "핫 스폿"을 초래하지 않는 파티션 키를 선택해야 합니다.

* 값 범위가 방대하고 논리 파티션 간에 액세스 패턴이 균등하게 분산되는 파티션 키를 선택해야 합니다. 이렇게 하면 논리 파티션 집합에 걸쳐 컨테이너의 데이터와 활동을 분산할 수 있으므로 데이터 저장소 및 처리량에 대한 리소스를 논리 파티션 에 분산할 수 있습니다.

* 시간이 지남에 따라 모든 파티션에 걸쳐 균등하게 워크로드를 분산시키는 파티션 키를 선택합니다. 파티션 키를 선택하면 확장성을 달성하기 위해 여러 파티션에 항목을 배포하는 목표와 효율적인 파티션 쿼리 및 트랜잭션의 필요성간에 균형을 유지해야 합니다.

* 파티션 키의 후보에는 쿼리에서 필터로 자주 나타나는 속성이 포함될 수 있습니다. 필터 조건자에 파티션 키를 포함하여 쿼리를 효율적으로 라우팅할 수 있습니다.

## <a name="next-steps"></a>다음 단계

* Azure [Cosmos DB에서 분할 및 수평 크기 조정에](partition-data.md)대해 알아봅니다.
* Azure [Cosmos DB에서 프로비저닝된 처리량에](request-units.md)대해 알아봅니다.
* Azure [코스모스 DB에서 글로벌 배포에](distribute-data-globally.md)대해 자세히 알아보기
