---
title: Azure Cosmos DB의 인덱싱
description: Azure Cosmos DB에서 인덱싱의 작동 방식을 파악하고
author: rimman
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 04/08/2019
ms.author: rimman
ms.openlocfilehash: ecf53251020ce1b639a5bf8da65f5d31ff699db9
ms.sourcegitcommit: c174d408a5522b58160e17a87d2b6ef4482a6694
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59265698"
---
# <a name="indexing-in-azure-cosmos-db---overview"></a>Azure Cosmos DB의 인덱싱 - 개요

Azure Cosmos DB는 스키마에 구애받지 않는 데이터베이스이며 스키마나 인덱스 관리를 처리할 필요 없이 애플리케이션을 빠르게 반복할 수 있습니다. 기본적으로 Azure Cosmos DB는 개발자에게 스키마 또는 보조 인덱스를 요청하지 않고 컨테이너의 모든 항목을 자동으로 인덱싱합니다.

## <a name="items-as-trees"></a>트리로서의 항목

항목 컨테이너에 JSON 문서로 프로젝션 하 고 트리로 나타내는 Azure Cosmos DB 정규화 구조 및 인스턴스 값 모두 항목에서 통합의 개념에는 **경로 구조를 동적으로 인코딩된** . 이 표현에 속성 이름과 해당 값 모두를 포함 하는 JSON 문서를의 각 레이블은 트리의 노드가 됩니다. 트리의 리프 실제 값을 포함 하 고 중간 노드는 스키마 정보를 포함 합니다. 다음 그림은 두 만든 트리를 나타내는 Azure Cosmos 컨테이너에 있는 항목 (1 및 2):

![Azure Cosmos 컨테이너의 서로 다른 두 개의 항목을 표현하는 트리](./media/index-overview/indexing-as-tree.png)

의사 루트 노드 아래에 있는 JSON 문서에서 레이블로 해당 실제 노드를 부모로 만들어집니다. 중첩된 데이터 구조는 트리의 계층 구조를 만듭니다. 숫자 값(예: 0, 1, ...)을 사용하여 레이블이 지정된 인위적인 중간 노드는 열거형 및 배열 인덱스를 나타내는 데 사용됩니다.

## <a name="index-paths"></a>인덱스 경로

Azure Cosmos DB를 트리로 JSON 문서 및 인덱스는 Azure Cosmos 컨테이너에서 항목을 프로젝션합니다. 그런 다음 트리 내 경로 대 한 인덱스 정책을 튜닝할 수 있습니다. 인덱싱에서 경로를 포함하거나 제외하도록 선택할 수도 있습니다. 따라서 쿼리 패턴을 사전에 알고 있는 시나리오에서 쓰기 성능이 향상되고 인덱스 스토리지를 줄일 수 있습니다. 자세한 내용은 참조 하세요 [인덱스 경로](index-paths.md)합니다.

## <a name="indexing-under-the-hood"></a>인덱싱: 내부 살펴보기

Azure Cosmos 데이터베이스에 적용 됩니다 *자동 인덱싱* 는 트리의 모든 경로 인덱싱된 특정 경로 제외를 구성 하지 않으면 데이터에 있습니다.

Azure Cosmos 데이터베이스는 각 항목의 정보를 저장하고 쿼리 시 효율적인 표현을 활용하기 위해 반전된 인덱스 데이터 구조를 사용합니다. 인덱스 트리는 컨테이너의 개별 항목을 나타내는 트리의 모든 집합의 합집합을 사용 하 여 생성 된 문서입니다. 새 항목이 추가 되거나 기존 항목 컨테이너에 업데이트 되는 인덱스 트리 시간이 지남에 따라 증가 합니다. 관계형 데이터베이스 인덱싱와 달리 Azure Cosmos DB 다시 시작 되지 않는부터 인덱싱을 새 필드가 도입 됩니다. 기존 인덱스 구조에 새 항목이 추가 됩니다. 

인덱스 트리의 각 노드는 이라는 레이블 및 위치 값을 포함 하는 인덱스 항목의 *용어*, 라는 항목의 id를 *게시물*합니다. 중괄호에 게시물 (예를 들어 {1,2}) 반전 된 인덱스 그림과에서 해당 항목에 같은 *Document1* 및 *Document2* 지정 된 레이블 값을 포함 하 합니다. 스키마 레이블 및 인스턴스 값 모두를 균일 하 게 처리 하는 중요 한 이유를 더 큰 인덱스 내에서 모든 항목은 압축입니다. 여전히 리프에 있는 인스턴스 값은 반복되지 않으며, 스키마 레이블이 서로 다른 항목 간에서 서로 다른 역할에 있을 수 있지만 동일한 값입니다. 다음 이미지는 두 개의 다른 항목에 대 한 반전 된 인덱스를 보여줍니다.

![인덱스 내부, 반전된 인덱싱](./media/index-overview/inverted-index.png)

> [!NOTE]
> 반전된 인덱스는 정보 검색 도메인의 검색 엔진에 사용되는 인덱싱 구조와 유사하게 나타날 수 있습니다. Azure Cosmos DB는 이 방법을 사용하여 사용자가 해당 스키마 구조에 관계 없이 모든 항목에 대한 데이터베이스를 검색할 수 있도록 합니다.

정규화된 경로의 경우 인덱스는 값의 형식 정보와 함께 루트에서 값까지의 모든 전달 경로를 인코딩합니다. 경로 값 인덱싱 범위, 공간 등의 다양 한 형식을 제공 하도록 인코딩됩니다. 값 인코딩은 경로 세트의 조합 또는 고유한 값을 제공하기 위해 설계되었습니다.

## <a name="querying-with-indexes"></a>인덱스를 사용한 쿼리

반전된 인덱스를 사용하면 쿼리에서 쿼리 조건자를 일치하는 문서를 신속하게 식별할 수 있습니다. 스키마와 인스턴스 값 경로의 관점에서 균일 하 게에서 취급 하 여 반전된 된 인덱스는 또한 트리입니다. 따라서 인덱스 및 결과는 유효한 JSON 문서로 직렬화할 수 있으며, 트리 표현으로 반환될 때 문서 자체로 반환될 수 있습니다. 이 방법을 사용하면 추가 쿼리 시 결과를 재귀적으로 사용할 수 있습니다. 다음 이미지는 지점 쿼리에서의 인덱싱 예제를 보여줍니다.  

![지점 쿼리 예제](./media/index-overview/index-point-query.png)

범위 쿼리를 작성 *GermanTax* 되는 [사용자 정의 함수](stored-procedures-triggers-udfs.md#udfs) 쿼리 처리의 일부로 실행 합니다. 사용자 정의 함수는 쿼리를 통합 하는 다양 한 프로그래밍 논리를 제공할 수 있는 모든 등록된 JavaScript 함수입니다. 다음 이미지는 범위 쿼리에서의 인덱싱 예제를 보여줍니다.

![범위 쿼리 예제](./media/index-overview/index-range-query.png)

## <a name="next-steps"></a>다음 단계

다음 문서에서 인덱싱에 대해 자세히 알아보세요.

- [인덱싱 정책](index-policy.md)
- [인덱싱 형식](index-types.md)
- [인덱스 경로](index-paths.md)
- [인덱싱 정책을 관리하는 방법](how-to-manage-indexing-policy.md)
