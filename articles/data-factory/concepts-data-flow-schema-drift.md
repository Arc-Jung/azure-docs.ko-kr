---
title: 매핑 데이터 흐름의 스키마 드리프트
description: 스키마 드리프트를 사용하여 Azure Data Factory에서 복원력 있는 데이터 흐름 빌드
author: kromerm
ms.author: makromer
ms.reviewer: daperlov
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 09/12/2019
ms.openlocfilehash: 9daf7973a2e48f866a8d0b93a682851d31dc3af7
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/27/2020
ms.locfileid: "74928549"
---
# <a name="schema-drift-in-mapping-data-flow"></a>매핑 데이터 흐름의 스키마 드리프트

스키마 드리프트는 소스가 메타데이터를 자주 변경하는 경우입니다. 필드, 열 및 유형은 즉시 추가, 제거 또는 변경할 수 있습니다. 스키마 드리프트를 처리하지 않으면 데이터 흐름이 업스트림 데이터 원본 변경에 취약해집니다. 들어오는 열과 필드가 해당 소스 이름에 연결되는 경향이 있기 때문에 일반적인 ETL 패턴이 변경될 때 실패합니다.

스키마 드리프트를 방지하려면 데이터 엔지니어로서 다음을 수행할 수 있도록 데이터 흐름 도구에 시설을 갖추는 것이 중요합니다.

* 가변 필드 이름, 데이터 형식, 값 및 크기가 있는 원본 정의
* 하드 코드된 필드 및 값 대신 데이터 패턴을 사용할 수 있는 변환 매개 변수 정의
* 명명된 필드를 사용하는 대신 수신 필드와 일치하는 패턴을 이해하는 식 정의

Azure Data Factory는 기본적으로 실행에서 실행으로 변경되는 유연한 스키마를 지원하므로 데이터 흐름을 다시 컴파일할 필요 없이 제네릭 데이터 변환 논리를 빌드할 수 있습니다.

흐름 전체의 스키마 드리프트를 허용하도록 데이터 흐름의 아키텍처를 결정해야 합니다. 이렇게 하면 원본의 스키마 변경으로부터 보호할 수 있습니다. 그러나 데이터 흐름 전체에서 열및 형식의 초기 바인딩이 손실됩니다. Azure Data Factory는 스키마 드리프트 흐름을 늦은 바인딩 흐름으로 처리하므로 변환을 빌드할 때 흐름 전체의 스키마 뷰에서 드리프트 열 이름을 사용할 수 없습니다.

## <a name="schema-drift-in-source"></a>소스에서 스키마 드리프트

원본 정의에서 데이터 흐름으로 들어오는 열은 원본 프로젝션에 없는 경우 "드리프트"로 정의됩니다. 소스 변환의 투영 탭에서 소스 투영을 볼 수 있습니다. 원본에 대한 데이터 집합을 선택하면 ADF는 데이터 집합에서 스키마를 자동으로 가져 와서 해당 데이터 집합 스키마 정의에서 프로젝트를 만듭니다.

원본 변환에서 스키마 드리프트는 데이터 집합 스키마를 정의하지 않은 열 읽기로 정의됩니다. 스키마 드리프트를 사용하려면 소스 변환에서 **스키마 드리프트 허용을** 선택합니다.

![스키마 드리프트 소스](media/data-flow/schemadrift001.png "스키마 드리프트 소스")

스키마 드리프트를 사용하도록 설정하면 실행 중에 모든 들어오는 필드가 소스에서 읽히고 전체 흐름을 싱크로 전달합니다. 기본적으로 드리프트 열이라고 하는 새로 검색된 모든 열은 문자열 데이터 유형으로 *도착합니다.* 데이터 흐름이 드리프트 열의 데이터 형식을 자동으로 유추하려면 원본 설정에서 **드리프트 열 유형을 인퍼(Infer)로** 확인합니다.

## <a name="schema-drift-in-sink"></a>싱크대에서 스키마 드리프트

싱크 변환에서 스키마 드리프트는 싱크 데이터 스키마에 정의된 것 위에 추가 열을 쓸 때입니다. 스키마 드리프트를 사용하려면 싱크 변환에서 **스키마 드리프트 허용을** 선택합니다.

![스키마 드리프트 싱크](media/data-flow/schemadrift002.png "스키마 드리프트 싱크")

스키마 드리프트가 활성화된 경우 매핑 탭의 **자동 매핑** 슬라이더가 켜져 있는지 확인합니다. 이 슬라이더를 켜면 들어오는 모든 열이 대상에 기록됩니다. 그렇지 않으면 규칙 기반 매핑을 사용하여 드리프트 열을 작성해야 합니다.

![싱크 자동 매핑](media/data-flow/automap.png "싱크 자동 매핑")

## <a name="transforming-drifted-columns"></a>표류하는 기둥 변환

데이터 흐름에 열이 드리프트된 경우 다음 방법을 사용하여 변환에서 열에 액세스할 수 있습니다.

* `byPosition` 및 `byName` 식을 사용하여 이름 또는 위치 번호로 열을 명시적으로 참조합니다.
* 파생 열 또는 집계 변환에 열 패턴을 추가하여 이름, 스트림, 위치 또는 유형의 조합에 일치시다.
* 선택 또는 싱크 변환에 규칙 기반 매핑을 추가하여 드리프트 열을 패턴을 통해 열 별칭에 일치시다.

열 패턴을 구현하는 방법에 대한 자세한 내용은 [매핑 데이터 흐름의 열 패턴을](concepts-data-flow-column-pattern.md)참조하십시오.

### <a name="map-drifted-columns-quick-action"></a>지도 드리프트 열 빠른 작업

드리프트 열을 명시적으로 참조하려면 데이터 미리 보기 빠른 작업을 통해 이러한 열에 대한 매핑을 신속하게 생성할 수 있습니다. [디버그 모드가](concepts-data-flow-debug-mode.md) 켜지면 데이터 미리 보기 탭으로 이동하여 **새로 고침을** 클릭하여 데이터 미리 보기를 가져옵니다. 데이터 팩터리에서 드리프트 열이 있음을 감지하면 **드리프트 맵을** 클릭하고 스키마 뷰 다운스트림의 모든 드리프트 열을 참조할 수 있는 파생 열을 생성할 수 있습니다.

![표류하는 지도](media/data-flow/mapdrifted1.png "표류하는 지도")

생성된 파생 열 변환에서 각 드리프트 열은 검색된 이름 및 데이터 형식에 매핑됩니다. 위의 데이터 미리 보기에서 'movieId' 열이 정수로 감지됩니다. **드리프트 맵을** 클릭한 후 movieId는 파생 열에 다운스트림 변환의 스키마 뷰에 `toInteger(byName('movieId'))` 포함됩니다.

![표류하는 지도](media/data-flow/mapdrifted2.png "표류하는 지도")

## <a name="next-steps"></a>다음 단계
데이터 [흐름 표현식 언어에서는](data-flow-expression-functions.md)"byName" 및 "byPosition"를 포함하여 열 패턴 및 스키마 드리프트에 대한 추가 시설을 찾을 수 있습니다.
