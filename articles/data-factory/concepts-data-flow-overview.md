---
title: 데이터 흐름 매핑
description: Azure 데이터 팩터리에서 데이터 흐름 매핑 개요
author: kromerm
ms.author: makromer
ms.reviewer: daperlov
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 12/19/2019
ms.openlocfilehash: 210c1814325e689dd70af9caa7fad08deed933e1
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "79243797"
---
# <a name="what-are-mapping-data-flows"></a>데이터 흐름 매핑이란?

데이터 흐름 매핑은 Azure 데이터 팩터리에서 시각적으로 설계된 데이터 변환입니다. 데이터 흐름을 통해 데이터 엔지니어는 코드를 작성하지 않고도 그래픽 데이터 변환 논리를 개발할 수 있습니다. 결과 데이터 흐름은 확장된 Spark 클러스터를 사용하는 Azure Data Factory 파이프라인 내의 활동으로 실행됩니다. 데이터 흐름 활동은 기존 데이터 팩터리 스케줄링, 제어, 흐름 및 모니터링 기능을 통해 운영될 수 있습니다.

데이터 흐름을 매핑하는 것은 코딩없이 완전한 시각적 경험을 제공합니다. 데이터 흐름은 확장된 데이터 처리를 위해 자체 실행 클러스터에서 실행됩니다. Azure Data Factory는 모든 코드 변환, 경로 최적화 및 데이터 흐름 작업의 실행을 처리합니다.

## <a name="getting-started"></a>시작

데이터 흐름을 만들려면 **팩터리 리소스**에서 더하기 기호를 선택한 다음 **데이터 흐름을 선택합니다.** 

![새 데이터 흐름](media/data-flow/newdataflow2.png "새 데이터 흐름")

이렇게 하면 변환 논리를 만들 수 있는 데이터 흐름 캔버스로 이동합니다. 소스 변환 구성을 시작하려면 **소스 추가를** 선택합니다. 자세한 내용은 [소스 변환](data-flow-source.md)을 참조하십시오.

## <a name="data-flow-canvas"></a>데이터 흐름 캔버스

데이터 흐름 캔버스는 위쪽 막대, 그래프 및 구성 패널의 세 부분으로 구분됩니다. 

![Canvas](media/data-flow/canvas1.png "Canvas")

### <a name="graph"></a>그래프

그래프에 변환 스트림이 표시됩니다. 하나 이상의 싱크로 흐르는 원본 데이터의 계보를 보여 주며, 원본 데이터의 계보를 표시합니다. 새 소스를 추가하려면 **소스 추가를**선택합니다. 새 변환을 추가하려면 기존 변환의 오른쪽 하단에 있는 더하기 기호를 선택합니다.

![Canvas](media/data-flow/canvas2.png "Canvas")

### <a name="azure-integration-runtime-data-flow-properties"></a>Azure 통합 런타임 데이터 흐름 속성

![디버그 버튼](media/data-flow/debugbutton.png "디버그 버튼")

ADF에서 데이터 흐름 작업을 시작할 때 브라우저 UI 맨 위에 있는 데이터 흐름에 대해 "디버그" 스위치를 켜야 합니다. 이렇게 하면 대화형 디버깅, 데이터 미리 보기 및 파이프라인 디버그 실행에 사용할 Azure Databricks 클러스터가 스핀업됩니다. 사용자 지정 [Azure 통합 런타임을](concepts-integration-runtime.md)선택하여 활용 중인 클러스터의 크기를 설정할 수 있습니다. 디버그 세션은 마지막 데이터 미리 보기 또는 마지막 디버그 파이프라인 실행 후 최대 60분 동안 유지됩니다.

데이터 흐름 활동으로 파이프라인을 운영할 때 ADF는 "실행 중" 속성의 [활동과](control-flow-execute-data-flow-activity.md) 연결된 Azure 통합 런타임을 사용합니다.

기본 Azure 통합 런타임은 최소한의 비용으로 데이터를 미리 보고 디버그 파이프라인을 신속하게 실행할 수 있도록 하는 소규모 4코어 단일 작업자 노드 클러스터입니다. 대규모 데이터 집합에 대해 작업을 수행하는 경우 더 큰 Azure IR 구성을 설정합니다.

Azure IR 데이터 흐름 속성에서 TTL을 설정하여 ADF에 클러스터 리소스(VM) 풀을 유지 관리하도록 지시할 수 있습니다. 이렇게 하면 후속 작업에서 작업 실행 속도가 빨라집니다.

#### <a name="azure-integration-runtime-and-data-flow-strategies"></a>Azure 통합 런타임 및 데이터 흐름 전략

##### <a name="execute-data-flows-in-parallel"></a>데이터 흐름을 병렬로 실행

파이프라인에서 데이터 흐름을 병렬로 실행하는 경우 ADF는 각 활동에 연결된 Azure 통합 런타임의 설정을 기반으로 각 활동 실행에 대해 별도의 Azure Databricks 클러스터를 스핀업합니다. ADF 파이프라인에서 병렬 실행을 디자인하려면 UI에 우선 제한 없이 데이터 흐름 활동을 추가합니다.

이 세 가지 옵션 중 에서 이 옵션은 가장 짧은 시간 내에 실행될 가능성이 높습니다. 그러나 각 병렬 데이터 흐름은 별도의 클러스터에서 동시에 실행되므로 이벤트 순서는 결정적이지 않습니다.

파이프라인 내부에서 데이터 흐름 활동을 병렬로 실행하는 경우 TTL을 사용하지 않는 것이 좋습니다. 이는 동일한 Azure 통합 런타임을 사용하여 데이터 흐름을 병렬로 실행하면 데이터 팩터리에 대해 여러 개의 웜 풀 인스턴스가 생성되므로

##### <a name="overload-single-data-flow"></a>단일 데이터 흐름 과부하

모든 논리를 단일 데이터 흐름 내에 넣으면 ADF는 모두 단일 Spark 클러스터 인스턴스에서 동일한 작업 실행 컨텍스트에서 실행됩니다.

비즈니스 규칙과 비즈니스 논리가 함께 뒤섞이기 때문에 이 옵션을 따르고 문제를 해결하는 것이 더 어려울 수 있습니다. 이 옵션은 재사용성을 제공하지 않습니다.

##### <a name="execute-data-flows-serially"></a>데이터 흐름을 연속적으로 실행

파이프라인에서 직렬로 데이터 흐름 활동을 실행하고 Azure IR 구성에서 TTL을 설정한 경우 ADF는 계산 리소스(VM)를 재사용하여 후속 실행 시간을 단축합니다. 각 실행에 대한 새 Spark 컨텍스트는 계속 표시됩니다.

이 세 가지 옵션 중 종단 간 실행하는 데 가장 오랜 시간이 걸릴 수 있습니다. 그러나 각 데이터 흐름 단계에서 논리 적 작업의 깔끔한 분리를 제공합니다.

### <a name="configuration-panel"></a>구성 패널

구성 패널에는 현재 선택한 변환과 관련된 설정이 표시됩니다. 변환을 선택하지 않으면 데이터 흐름이 표시됩니다. 전체 데이터 흐름 구성에서 **일반** 탭 에서 이름과 설명을 편집하거나 매개 변수 탭을 통해 매개 변수를 추가할 수 **있습니다.** 자세한 내용은 [데이터 흐름 매개 변수 매핑을](parameters-data-flow.md)참조하십시오.

각 변환에는 적어도 4개의 구성 탭이 있습니다.

#### <a name="transformation-settings"></a>변환 설정

각 변환의 구성 창의 첫 번째 탭에는 해당 변환과 관련된 설정이 포함되어 있습니다. 자세한 내용은 해당 변환의 설명서 페이지를 참조하세요.

![소스 설정 탭](media/data-flow/source1.png "소스 설정 탭")

#### <a name="optimize"></a>최적화

**최적화** 탭에는 분할 구성표를 구성하는 설정이 포함되어 있습니다.

![최적화](media/data-flow/optimize1.png "최적화")

기본 설정은 Azure Data Factory에서 Spark에서 실행되는 데이터 흐름에 기본분할 체계를 사용하도록 지시하는 **현재 분할 사용**입니다. 대부분의 시나리오에서는 이 설정을 권장합니다.

분할을 조정하려는 경우가 있습니다. 예를 들어, 호수의 단일 파일로 변환을 출력하려면 싱크 변환에서 **단일 파티션을** 선택합니다.

분할 구성표를 제어하려는 또 다른 경우는 성능을 최적화하는 것입니다. 분할을 조정하면 전체 데이터 흐름 성능에 긍정적 및 부정적 영향을 미칠 수 있는 계산 노드 및 데이터 지역성 최적화 전반에 걸쳐 데이터 분포를 제어할 수 있습니다. 자세한 내용은 데이터 [흐름 성능 가이드를](concepts-data-flow-performance.md)참조하십시오.

변환에서 분할을 변경하려면 **최적화** 탭을 선택하고 **파티션** 라디오 설정 단추를 선택합니다. 그런 다음 분할을 위한 일련의 옵션이 제공됩니다. 분할하는 가장 좋은 방법은 데이터 볼륨, 후보 키, null 값 및 카디널리티에 따라 다릅니다. 

가장 좋은 방법은 기본 분할로 시작한 다음 다른 분할 옵션을 시도하는 것입니다. 파이프라인 디버그 실행을 사용하여 테스트하고 모니터링 보기에서 각 변환 그룹에서 실행 시간 및 파티션 사용량을 볼 수 있습니다. 자세한 내용은 [데이터 흐름 모니터링](concepts-data-flow-monitoring.md)을 참조하십시오.

다음 분할 옵션을 사용할 수 있습니다.

##### <a name="round-robin"></a>라운드 로빈 

라운드 로빈은 파티션 간에 데이터를 균등하게 균등하게 배포하는 간단한 파티션입니다. 견고하고 스마트한 분할 전략을 구현할 수 있는 좋은 키 후보가 없는 경우 라운드 로빈을 사용합니다. 물리적 파티션 수를 설정할 수 있습니다.

##### <a name="hash"></a>Hash

Azure Data Factory는 유사한 값을 가진 행이 동일한 파티션에 속하도록 균일한 파티션을 생성하기 위해 열 해시를 생성합니다. 해시 옵션을 사용하는 경우 가능한 파티션 기울이기 여부를 테스트합니다. 물리적 파티션 수를 설정할 수 있습니다.

##### <a name="dynamic-range"></a>다이나믹 레인지

동적 범위는 제공한 열이나 식에 따라 Spark 동적 범위를 사용합니다. 물리적 파티션 수를 설정할 수 있습니다. 

##### <a name="fixed-range"></a>고정 범위

분할된 데이터 열 내의 값에 대해 고정된 범위를 제공하는 식을 작성합니다. 파티션 기울이기를 방지하려면 이 옵션을 사용하기 전에 데이터를 잘 이해해야 합니다. 식에 대해 입력한 값은 파티션 함수의 일부로 사용됩니다. 물리적 파티션 수를 설정할 수 있습니다.

##### <a name="key"></a>Key

데이터의 카디널리티를 잘 이해하고 있다면 키 분할이 좋은 전략일 수 있습니다. 키 분할은 열의 각 고유 값에 대한 파티션을 만듭니다. 숫자는 데이터의 고유 값을 기반으로 하므로 파티션 수를 설정할 수 없습니다.

#### <a name="inspect"></a>검사

**검사** 탭은 변환하는 데이터 스트림의 메타데이터에 대한 보기를 제공합니다. 열 개수, 변경된 열, 추가된 열, 데이터 형식, 열 순서 지정 및 열 참조를 볼 수 있습니다. **검사는** 메타데이터의 읽기 전용 보기입니다. **검사** 창에서 메타데이터를 볼 수 있도록 디버그 모드를 사용할 필요가 없습니다.

![검사](media/data-flow/inspect1.png "검사")

변환을 통해 데이터의 모양을 변경하면 **검사** 창에서 메타데이터 변경 흐름이 표시됩니다. 원본 변환에 정의된 스키마가 없는 경우 검사 **창에** 메타데이터가 표시되지 않습니다. 메타데이터의 부족은 스키마 드리프트 시나리오에서 일반적입니다.

#### <a name="data-preview"></a>데이터 미리 보기

디버그 모드가 켜지면 **데이터 미리 보기** 탭에서 각 변환에서 데이터의 대화형 스냅샷을 제공합니다. 자세한 내용은 [디버그 모드에서 데이터 미리 보기를](concepts-data-flow-debug-mode.md#data-preview)참조하십시오.

### <a name="top-bar"></a>위쪽 막대

맨 위 막대에는 저장 및 유효성 검사와 같이 전체 데이터 흐름에 영향을 주는 작업이 포함되어 있습니다. 그래프 표시 및 **그래프 숨기기** 단추를 사용하여 **그래프와** 구성 모드 간에 전환할 수도 있습니다.

![그래프 숨기기](media/data-flow/hideg.png "그래프 숨기기")

그래프를 숨기면 **이전** 및 **다음** 단추를 통해 변환 노드를 측면으로 탐색할 수 있습니다.

![이전 및 다음 단추](media/data-flow/showhide.png "이전 및 다음 단추")

## <a name="next-steps"></a>다음 단계

* [소스 변환을](data-flow-source.md)만드는 방법에 대해 알아봅니다.
* [디버그 모드에서](concepts-data-flow-debug-mode.md)데이터 흐름을 빌드하는 방법에 대해 알아봅니다.
