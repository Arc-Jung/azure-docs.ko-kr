---
title: Azure Data Factory의 데이터 흐름 매핑 기능에서 원본 변환을 설정 합니다.
description: 매핑 데이터 흐름에서 원본 변환을 설정 하는 방법에 대해 알아봅니다.
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.date: 02/12/2019
ms.openlocfilehash: f6aed5d2ac1c4672d8d8868fe127ead053512e42
ms.sourcegitcommit: da0a8676b3c5283fddcd94cdd9044c3b99815046
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/18/2019
ms.locfileid: "68314829"
---
# <a name="source-transformation-for-mapping-data-flow"></a>매핑 데이터 흐름에 대 한 원본 변환 

[!INCLUDE [notes](../../includes/data-factory-data-flow-preview.md)]

원본 변환은 데이터 흐름에 대 한 데이터 원본을 구성 합니다. 데이터 흐름은 둘 이상의 원본 변환을 포함할 수 있습니다. 데이터 흐름을 디자인 하는 경우 항상 원본 변환으로 시작 합니다.

모든 데이터 흐름에는 하나 이상의 원본 변환이 필요 합니다. 데이터 변환을 완료 하기 위해 필요한 만큼 원본을 추가 합니다. 조인 변환 또는 공용 구조체 변환과 함께 이러한 소스를 조인할 수 있습니다.

> [!NOTE]
> 데이터 흐름을 디버그할 때 샘플링 설정 또는 디버그 소스 제한을 사용 하 여 원본에서 데이터를 읽습니다. 싱크에 데이터를 쓰려면 파이프라인 데이터 흐름 작업에서 데이터 흐름을 실행 해야 합니다. 

원본 ![설정 탭의 원본 변환 옵션](media/data-flow/source.png "원본")

데이터 흐름 원본 변환을 정확히 하나의 Data Factory 데이터 집합에 연결 합니다. 데이터 집합은 쓰거나 읽고 싶은 데이터의 모양과 위치를 정의 합니다. 원본에서 와일드 카드 및 파일 목록을 사용 하 여 한 번에 두 개 이상의 파일로 작업할 수 있습니다.

## <a name="data-flow-staging-areas"></a>데이터 흐름 준비 영역

데이터 흐름은 모두 Azure의 *준비* 데이터 집합에서 작동 합니다. 데이터를 변환 하는 경우 준비에 이러한 데이터 집합을 사용 합니다. 

Data Factory는 거의 80 개의 기본 커넥터에 액세스할 수 있습니다. 데이터 흐름에 이러한 다른 원본의 데이터를 포함 하려면 복사 작업 도구를 사용 하 여 데이터 흐름 데이터 집합 준비 영역 중 하나에서 해당 데이터를 준비 합니다.

## <a name="options"></a>변수

데이터에 대 한 스키마 및 샘플링 옵션을 선택 합니다.

### <a name="schema-drift"></a>스키마 드리프트
[스키마 드리프트](concepts-data-flow-schema-drift.md) 는 열 변경 내용을 명시적으로 정의할 필요 없이 데이터 흐름에서 유연한 스키마를 기본적으로 처리 하는 ADF의 기능입니다.

* 원본 열이 자주 변경 되는 경우 **스키마 드리프트 허용** 을 선택 합니다. 이 설정을 사용 하면 들어오는 모든 원본 필드가 싱크로 변환을 통과할 수 있습니다.

* **유추 데이터베이스가 드리프트 열 유형을** 선택 하면 검색 된 각 새 열의 데이터 형식을 정의 하도록 ADF에 지시 합니다. 이 기능을 끄면 ADF는 문자열을 가정 합니다.

### <a name="validate-schema"></a>스키마 유효성 검사

원본 데이터의 들어오는 버전이 정의 된 스키마와 일치 하지 않으면 데이터 흐름이 실행 되지 않습니다.

![스키마 유효성 검사, 스키마 드리프트 허용 및 샘플링을 위한 옵션을 보여 주는 공용 소스 설정](media/data-flow/source1.png "공용 소스 1")

### <a name="sample-the-data"></a>데이터 샘플링
**샘플링** 을 사용 하 여 원본의 행 수를 제한 합니다. 디버깅을 위해 소스에서 데이터를 테스트 하거나 샘플링할 때이 설정을 사용 합니다.

## <a name="define-schema"></a>스키마 정의

원본 파일이 강력 하 게 형식화 되지 않은 경우 (예: Parquet 파일이 아닌 플랫 파일) 원본 변환에서 각 필드에 대 한 데이터 형식을 정의 합니다.  

![스키마 정의 탭의 원본 변환 설정](media/data-flow/source2.png "원본 2")

나중에 선택 변환에서 열 이름을 변경할 수 있습니다. 파생 열 변환을 사용 하 여 데이터 형식을 변경 합니다. 강력한 형식의 원본의 경우 나중에 선택한 변환에서 데이터 형식을 수정할 수 있습니다. 

![Select 변환의 데이터 형식](media/data-flow/source003.png "데이터 형식")

### <a name="optimize-the-source-transformation"></a>원본 변환 최적화

원본 변환에 대 한 **최적화** 탭에서 **원본** 파티션 형식이 표시 될 수 있습니다. 이 옵션은 원본이 Azure SQL Database 경우에만 사용할 수 있습니다. 이는 Data Factory 연결을 설정 하 여 SQL Database 원본에 대해 많은 쿼리를 실행 하 려 하기 때문입니다.

![원본 파티션 설정](media/data-flow/sourcepart3.png "분할")

SQL Database 원본에서 데이터를 분할할 필요가 없지만 파티션은 대량 쿼리에 유용 합니다. 열 또는 쿼리를 기반으로 파티션을 만들 수 있습니다.

### <a name="use-a-column-to-partition-data"></a>열을 사용 하 여 데이터 분할

원본 테이블에서 분할할 열을 선택 합니다. 또한 파티션 수를 설정 합니다.

### <a name="use-a-query-to-partition-data"></a>쿼리를 사용 하 여 데이터 분할

쿼리에 따라 연결을 분할 하도록 선택할 수 있습니다. WHERE 조건자의 내용을 입력 하기만 하면 됩니다. 예를 들어 연도 > 1980를 입력 합니다.

## <a name="source-file-management"></a>원본 파일 관리

원본에서 파일을 관리 하려면 설정을 선택 합니다. 

![새 원본 설정](media/data-flow/source2.png "새 설정")

* **와일드 카드 경로**: 소스 컨테이너에서 패턴과 일치 하는 일련의 파일을 선택 합니다. 이 설정은 데이터 집합 정의의 모든 파일을 재정의 합니다.

와일드 카드 예제:

* ```*```모든 문자 집합을 나타냅니다.
* ```**```재귀 디렉터리 중첩을 나타냅니다.
* ```?```한 문자를 대체 합니다.
* ```[]```대괄호 안에 있는 하나 이상의 문자를 찾습니다.

* ```/data/sales/**/*.csv```/Data/clas 아래의 모든 csv 파일을 가져옵니다.
* ```/data/sales/20??/**```20 세기의 모든 파일을 가져옵니다.
* ```/data/sales/2004/*/12/[XY]1?.csv```12 월의 2004에서 X 또는 Y 접두사가 2 자리 숫자로 시작 하는 csv 파일을 모두 가져옵니다.

데이터 집합에 컨테이너를 지정 해야 합니다. 따라서 와일드 카드 경로에도 루트 폴더의 폴더 경로가 포함 되어야 합니다.

* **파일 목록**: 이 파일은 파일 집합입니다. 처리할 상대 경로 파일 목록이 포함 된 텍스트 파일을 만듭니다. 이 텍스트 파일을 가리킵니다.
* **저장할 열 파일 이름**: 원본 파일의 이름을 데이터의 열에 저장 합니다. 파일 이름 문자열을 저장하려면 여기에 새 이름을 입력합니다.
* **완료 후**: 데이터 흐름이 실행 된 후 원본 파일을 사용 하 여 아무 작업도 수행 하지 않도록 선택 하거나 원본 파일을 삭제 하거나 원본 파일을 이동 합니다. 이동 경로는 상대 경로입니다.

원본 파일을 다른 위치로 처리 후에 이동 하려면 먼저 파일 작업에 대해 "이동"을 선택 합니다. 그런 다음 "from" 디렉터리를 설정 합니다. 경로에 와일드 카드를 사용 하지 않는 경우 "보낸 사용자" 설정은 원본 폴더와 같은 폴더에 있습니다.

와일드 카드 원본 경로 (예:

```/data/sales/20??/**/*.csv```

다음으로 "시작"을 지정할 수 있습니다.

```/data/sales```

및 "to"로

```/backup/priorSales```

이 경우 원본 이었던/데이터의 모든 하위 디렉터리는/backup/priorSales.을 기준으로 이동 됩니다.

### <a name="sql-datasets"></a>SQL 데이터 집합

소스가 SQL Database 또는 SQL Data Warehouse 인 경우 소스 파일 관리를 위한 추가 옵션이 있습니다.

* **쿼리**: 원본의 SQL 쿼리를 입력합니다. 이 설정은 데이터 집합에서 선택한 테이블을 재정의 합니다. **Order By** 절은 여기서 지원 되지 않지만 전체 SELECT FROM 문을 설정할 수 있습니다. 사용자 정의 테이블 함수를 사용할 수도 있습니다. **select * From udfGetData ()** 는 테이블을 반환 하는 SQL의 UDF입니다. 이 쿼리는 데이터 흐름에서 사용할 수 있는 원본 테이블을 생성 합니다.
* **배치 크기**: 대량 데이터를 읽기로 청크 하는 일괄 처리 크기를 입력 합니다.
* **격리 수준**: ADF의 SQL 원본 매핑 데이터 흐름은 커밋되지 않은 읽기입니다. 여기에서 격리 수준을 다음 값 중 하나로 변경할 수 있습니다.
* 커밋된 읽기
* 커밋되지 않은 읽기
* 반복 가능한 읽기
* 직렬화 가능
* 없음 (격리 수준 무시)

![격리 수준](media/data-flow/isolationlevel.png "격리 수준")

> [!NOTE]
> 파이프라인에서 데이터 흐름 실행 작업을 사용 하는 파이프라인 실행 (파이프라인 디버그 또는 실행 실행)에서 데이터 흐름을 시작 하는 경우에만 파일 작업이 실행 됩니다. 파일 작업은 데이터 흐름 디버그 모드에서 실행 *되지* 않습니다.

### <a name="projection"></a>프로젝션

데이터 집합의 스키마와 마찬가지로 원본의 프로젝션은 원본 데이터의 데이터 열, 형식 및 형식을 정의 합니다. 

![투영 탭의 설정](media/data-flow/source3.png "프로젝션")

텍스트 파일에 정의 된 스키마가 없는 경우 데이터 형식 **검색** 을 선택 하 여 Data Factory에서 데이터 형식을 샘플링 하 고 유추 하도록 합니다. 기본 데이터 형식을 자동으로 검색 하려면 **기본 형식 정의** 를 선택 합니다. 

나중에 파생 된 열 변환에서 열 데이터 형식을 수정할 수 있습니다. 열 이름을 수정 하려면 선택 변환을 사용 합니다.

![기본 데이터 형식에 대 한 설정](media/data-flow/source2.png "기본 형식")

### <a name="add-dynamic-content"></a>동적 콘텐츠 추가

설정 패널에서 필드 내부를 클릭 하면 "동적 콘텐츠 추가"에 대 한 하이퍼링크가 표시 됩니다. 여기를 클릭 하면 식 작성기가 시작 됩니다. 여기에서 식, 정적 리터럴 값 또는 매개 변수를 사용 하 여 동적으로 설정에 대 한 값을 설정할 수 있습니다.

![매개 변수](media/data-flow/params6.png "매개 변수")

## <a name="next-steps"></a>다음 단계

[파생 열 변환과](data-flow-derived-column.md) [선택 변환](data-flow-select.md)의 작성을 시작 합니다.
