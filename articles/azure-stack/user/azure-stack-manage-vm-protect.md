---
title: Azure Stack에 배포 된 Vm 보호 | Microsoft Docs
description: Azure Stack에 배포 된 가상 컴퓨터를 보호 하는 방법에 대 한 지침입니다.
services: azure-stack
documentationcenter: ''
author: jeffgilb
manager: femila
editor: ''
ms.assetid: 4e5833cf-4790-4146-82d6-737975fb06ba
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 12/10/2018
ms.author: jeffgilb
ms.reviewer: hectorl
ms.lastreviewed: 3/19/2018
ms.openlocfilehash: de57ebbf0c0c4e8a18c955200d1692ea4ae9afae
ms.sourcegitcommit: ab6fa92977255c5ecbe8a53cac61c2cd2a11601f
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/20/2019
ms.locfileid: "58295014"
---
# <a name="protect-virtual-machines-deployed-on-azure-stack"></a>Azure Stack에 배포 된 가상 컴퓨터를 보호 합니다.

이 문서에서는 사용자가 Azure Stack에 배포 하는 virtual machines (Vm) 보호에 대 한 계획을 개발 하는 데 사용 합니다.

데이터 손실 및 계획 되지 않은 가동 중지 시간을 방지 하려면 사용자 응용 프로그램 및 해당 데이터에 대 한 백업 복구 또는 재해 복구 계획을 구현 해야 합니다. 이 계획 각 응용 프로그램에 대 한 고유 수도 있지만 조직의 포괄적인 비즈니스 연속성 및 재해 복구 (BC/DR) 전략에 의해 설정 된 프레임 워크를 따릅니다. 좋은 출발점은 [Azure Stack: 비즈니스 연속성 및 재해 복구에 대 한 고려 사항](https://aka.ms/azurestackbcdrconsiderationswp)합니다.

## <a name="azure-stack-infrastructure-recovery"></a>Azure Stack 인프라 복구

사용자는 Azure Stack 인프라 서비스에서 해당 Vm을 개별적으로 보호 하는 일을 담당 합니다.

Azure Stack 인프라 서비스에 대 한 복구 계획 **하지 않습니다** 사용자 Vm, 저장소 계정 또는 데이터베이스의 복구를 포함 합니다. 응용 프로그램 소유자는 응용 프로그램 및 데이터에 대 한 복구 계획을 구현할 책임이 됩니다.

Azure Stack 클라우드는 오랜된 시간 동안 오프 라인 또는 복구에 대 한 계획이 필요 영구적으로 복구할 수 없는 경우는 배치 합니다.

* 최소 가동 중지 시간을 보장
* 을 실행 하는 데이터베이스 서버와 같은 중요 한 Vm을 유지 합니다.
* 응용 프로그램을 사용자 요청에 응답 유지

Azure Stack 클라우드 운영자는 기본 Azure Stack 인프라 및 서비스 복구 계획을 작성 하는 일을 담당 합니다. 자세한 내용은 문서를 읽어보세요 [치명적인 데이터 손실 로부터 복구](https://docs.microsoft.com/azure/azure-stack/azure-stack-backup-recover-data)합니다.

## <a name="considerations-for-iaas-vms"></a>IaaS Vm에 대 한 고려 사항
IaaS VM에 설치 된 운영 체제는 포함 된 데이터를 보호 하는 데 사용할 수 있는 제품으로 제한 됩니다. Windows 기반 IaaS Vm의 경우에 데이터를 보호 하기 위해 Microsoft 및 파트너 제품을 사용할 수 있습니다. Linux 기반 IaaS Vm의 경우 유일한 옵션 파트너 제품을 사용 하는 것입니다. 가리킵니다 [Azure Stack에 대 한 유효성이 검사 된 제품을 사용 하 여 모든 BC/DR 파트너에 대 한이 데이터 시트](https://aka.ms/azurestackbcdrpartners)합니다.

## <a name="sourcetarget-combinations"></a>원본/대상 조합

각 Azure Stack 클라우드는 하나의 데이터 센터에 배포 됩니다. 별도 환경 필수 이므로 응용 프로그램을 복구할 수 있습니다. 다른 데이터 센터에서 다른 Azure Stack 클라우드 또는 Azure 공용 클라우드의 복구 환경 수 있습니다. 데이터 주권 및 데이터 개인 정보 보호 요구 사항을 응용 프로그램에 대 한 복구 환경에 따라 결정 됩니다. 각 응용 프로그램에 대 한 보호를 사용 하면 유연성을 각각에 대해 특정 복구 옵션을 선택할 수 있습니다. 다른 데이터 센터로 데이터를 백업 하는 하나의 구독에 응용 프로그램 할 수 있습니다. 다른 구독에 Azure 공용 클라우드로 데이터를 복제할 수 있습니다.

각 응용 프로그램에 대 한 대상을 결정 하도록 각 응용 프로그램에 대 한 백업 복구 및 재해 복구 전략을 계획 합니다. 복구 계획에는 제대로 크기 저장소 용량이 필요한 온-프레미스 및 공용 클라우드에서 소비 프로젝트 조직 데 도움이 됩니다.

|  | 글로벌 Azure | Azure Stack CSP 데이터 센터에 배포 된 후 CSP에서 작동 | Azure Stack 고객 데이터 센터에 배포 하 여 고객이 운영 |
|------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| **Azure Stack CSP 데이터 센터에 배포 된 후 CSP에서 작동** | 사용자 Vm 작업을 수행할 CSP Azure Stack에 배포 됩니다.<br><br>사용자 Vm 백업에서 복원 기능은 직접 Azure로 장애 조치 합니다. | CSP는 자체 데이터 센터에서 Azure Stack의 기본 및 보조 인스턴스를 작동합니다.<br><br>사용자 Vm 복원 기능은 두 Azure Stack 인스턴스 간의 장애 조치 합니다. | CSP의 Azure Stack 기본 사이트에서 작동합니다.<br><br>고객의 데이터 센터는 복원 또는 장애 조치 대상입니다. |
| **Azure Stack 고객 데이터 센터에 배포 하 여 고객이 운영** | 사용자 Vm에 배포 된 Azure Stack을 운영 하는 고객.<br><br>사용자 Vm 백업에서 복원 기능은 직접 Azure로 장애 조치 합니다. | 고객의 Azure Stack 기본 사이트에서 작동합니다.<br><br>CSP의 데이터 센터는 복원 또는 장애 조치 대상입니다. | 고객은 자체 데이터 센터에서 Azure Stack의 기본 및 보조 인스턴스를 작동합니다.<br><br>사용자 Vm 복원 기능은 두 Azure Stack 인스턴스 간의 장애 조치 합니다. |

![원본-대상 조합](media/azure-stack-manage-vm-backup/vm_backupdataflow_01.png)

## <a name="application-recovery-objectives"></a>응용 프로그램 복구 목표

각 응용 프로그램에 대 한 조직 허용할 수 있는 가동 중지 시간과 데이터 손실 양을 결정 해야 합니다. 가동 중지 시간과 데이터 손실을 측정 하 여 조직에 재해의 영향을 최소화 하는 복구 계획을 만들 수 있습니다. 각 응용 프로그램에서 다음을 고려 합니다.

 - **RTO(복구 시간 목표)**  
RTO가 최대 허용 시간 응용 프로그램 사용할 수 없게 사고 발생 후입니다. 예를 들어, 90 분의 RTO는 응용 프로그램을 실행 중인 상태로 90 분 이내부터 재해 복원 하는 일을 할 수 있어야 의미 합니다. 낮은 RTO에 있는 경우 지역 가동 중단 으로부터 보호 하기 위해 대기 중인 두 번째 배포를 유지할 수 있습니다.
 - **RPO(복구 지점 목표)**  
RPO는 재해 발생 시 허용 되는 데이터 손실의 최대 기간입니다. 예를 들어 다른 데이터베이스에 데이터를 복제하지 않고 단일 데이터베이스에만 데이터를 저장하며 매시간 백업을 수행하는 경우 최대 1시간 분량의 데이터가 손실될 수 있습니다.

RTO 및 RPO는 비즈니스 요구 사항입니다. 응용 프로그램의 RTO 및 RPO를 정의 하기 위한 위험 평가 수행 합니다.

다른 메트릭이 **평균 복구 시간** mttr (평균)는 오류 발생 후 응용 프로그램을 복원 하는 데 걸리는 평균 시간입니다. MTTR은 시스템에 대해 동작이 수행 될 경험적 값입니다. MTTR이 RTO를 초과하면 시스템에 오류가 발생했을 때 정의된 RTO 내에서 시스템을 복원할 수 없기 때문에 허용할 수 없는 수준의 비즈니스 중단이 발생합니다.

### <a name="backup-restore"></a>백업 복원

VM 기반 응용 프로그램에 대 한 가장 일반적인 보호 체계 백업 소프트웨어를 사용 하는 것입니다. 일반적으로 VM을 지 원하는 운영 체제, 운영 체제 구성, 응용 프로그램 이진 파일 및 응용 프로그램 데이터에 포함 되어 있습니다. 백업 볼륨, 디스크 또는 전체 VM의 스냅숏을 수행 하 여 생성 됩니다. Azure Stack을 사용 하 여 Azure Stack 저장소 또는 게스트 OS의 컨텍스트 내에서 백업 작업의 유연성이 및 Api를 계산 합니다. Azure Stack에는 하이퍼바이저 수준에서 수행 백업을 지원 하지 않습니다.
 
![백업 복원](media/azure-stack-manage-vm-backup/vm_backupdataflow_03.png)

응용 프로그램 복구 같은 클라우드 또는 새 클라우드를 하나 이상의 Vm을 복원 해야 합니다. 데이터 센터 또는 공용 클라우드에서 클라우드를 대상 지정할 수 있습니다. 선택한 컨트롤 내에서 전적으로 클라우드와 데이터 개인 정보 보호 및 주권 요구 사항에 기반 합니다.
 
 - RTO: 시간 단위로 측정 된 가동 중지 시간
 - RPO: 변수 데이터 손실 (빈도 따라 백업)
 - 배포 토폴로지: 활성/수동

#### <a name="planning-your-backup-strategy"></a>백업 전략 계획

백업 전략을 계획 및 확장 요구 사항을 정의 보호 해야 하는 VM 인스턴스의 수를 정량화로 시작 합니다. 환경에서 모든 서버에서 모든 Vm을 백업 하는 것은 일반적인 전략입니다. 그러나 Azure Stack을 통해 가지 일부 Vm을 백업 하려면 필요 합니다. 예를 들어, Vm 확장 집합에서 제공 하 고 경우에 따라 없이 이동 있는 임시 리소스 간주 됩니다. 영 속 데이터를 보호 해야 하는 데이터베이스 또는 개체 저장소와 같은 별도 저장소에 저장 됩니다.

Azure Stack에서 Vm을 백업 하는 것에 대 한 중요 고려 사항:

 - **분류**
    - 사용자가 있는 VM 백업에 옵트인 모델을 고려 합니다.
    - 복구 서비스 수준 계약 (SLA) 기반으로 응용 프로그램 또는 비즈니스에 미치는 영향의 우선 순위를 정의 합니다.
 - **규모**
    - 때 온 보 딩을 많은 수의 새 Vm (백업을 수행 해야 함) 하는 경우 전환이 백업을 고려 하십시오.
    - 효율적으로 캡처 및 솔루션 리소스 콘텐츠를 최소화 하기 위해 백업 데이터를 전송할 수 있는 백업 제품을 평가 합니다.
    - 효율적으로 증분 또는 차등 백업을 사용 하 여 환경에서 모든 Vm에서 전체 백업에 대 한 필요성을 최소화 하는 백업 데이터를 저장 하는 백업 제품을 평가 합니다.
 - **Restore**
    - 백업 제품은 기존 VM 또는 전체 VM 리소스 내에서 응용 프로그램 데이터 가상 디스크 및 연결 된 가상 디스크를 복원할 수 있습니다. 필요한 복원 구성표 응용 프로그램을 복원 하려는 방법에 따라 다르며이 복구로 응용 프로그램 시간에 영향을 줍니다. 예를 들어 템플릿 기반으로 SQL server를 다시 배포 하 고 다음 전체 VM 또는 Vm 집합을 복원 하는 대신 데이터베이스를 복원 하는 작업을 쉽게 수도 있습니다.

### <a name="replicationmanual-failover"></a>복제/수동 장애 조치

고가용성을 지원 하기 위해 또 다른 방법은 다른 클라우드로 응용 프로그램 Vm을 복제 하 고 수동 장애 조치를 사용 하는 것입니다. VM 수준 또는 게스트 OS 수준에서 운영 체제, 응용 프로그램 이진 파일 및 응용 프로그램 데이터의 복제를 수행할 수 있습니다. 장애 조치는 응용 프로그램의 포함 되지 않은 추가 소프트웨어를 사용 하 여 관리 됩니다.

이 방식에서는 하나의 클라우드에서 배포 된 응용 프로그램 및 해당 VM은 다른 클라우드로 복제 됩니다. 장애 조치가 트리거될 경우 Vm 보조 두 번째 클라우드에서 전원이 켜져 있어야 합니다. 일부 시나리오에서는 장애 조치에 Vm 및 연결 디스크를 만듭니다. 이 프로세스는 특히 특정 시작 순서를 요구 하는 다중 계층 응용 프로그램을 사용 하 여 완료 하는 데 시간이 오래 걸릴 수 있습니다. 응용 프로그램 요청 처리를 시작할 준비가 되기 전에 실행 해야 하는 단계도 있을 수 있습니다.

![복제-수동 장애 조치](media/azure-stack-manage-vm-backup/vm_backupdataflow_02.png)

 - RTO: 가동 중지 시간 (분)
 - RPO: 변수 데이터 손상 (복제 빈도)에 따라 다름
 - 배포 토폴로지: 활성/수동 대기에서
 
### <a name="high-availabilityautomatic-failover"></a>높은 가용성/자동 장애 조치

몇 초 또는 몇 분의 가동 중지 시간과 데이터 손실을 최소화 비즈니스 허용할 수 있는 응용 프로그램에 대 한 고가용성 구성을 고려해 해야 합니다. 고가용성 응용 프로그램 오류에서 신속 하 고 자동으로 복구 하도록 설계 되었습니다. 로컬 하드웨어 오류에 대 한 Azure Stack 인프라 두 맨 rack 스위치를 사용 하 여 실제 네트워크에서 고가용성을 구현 합니다. Azure Stack을 계산 수준 오류에 대 한 배율 단위에서 여러 노드를 사용합니다. VM 수준에서 노드 실패에 응용 프로그램 사용 하지 않도록 하려면 장애 도메인을 사용 하 여 조합 하 여 확장 집합을 사용할 수 있습니다.

확장 집합과 함께에서 응용 프로그램 고가용성을 기본적으로 지원 하거나 클러스터링 소프트웨어의 사용을 지원 해야 합니다. 예를 들어 Microsoft SQL Server는 고가용성을 지원 기본적으로 동기-커밋 모드를 사용 하 여 데이터베이스에 대 한 합니다. 그러나 비동기 복제만 지원할 수 않으면 있습니다 됩니다 일부 데이터가 손실 됩니다. 클러스터링 소프트웨어 응용 프로그램의 자동 장애 조치를 처리 하는 위치는 장애 조치 클러스터에 응용 프로그램을 배포할 수도 있습니다.

이 방법을 사용 응용 프로그램 에서만 활성 상태인 한 클라우드 하지만 소프트웨어는 여러 클라우드에 배포 합니다. 다른 클라우드 대기 모드에서 장애 조치가 트리거될 때 응용 프로그램을 시작할 준비가 됩니다.

 - RTO: 가동 중지 시간 (초)
 - RPO: 데이터 손실을 최소화
 - 배포 토폴로지: 능동/능동 독립 별

### <a name="fault-tolerance"></a>내결함성

Azure Stack 물리적 중복성 및 인프라 서비스 가용성 하드웨어에 대해서만 방지 이러한 디스크, 전원 공급 장치, 네트워크 포트 또는 노드 오류/오류 수준입니다. 그러나 응용 프로그램 항상 사용할 수 있어야 하 고 어떠한 데이터도 손실 되지 않습니다 수, 응용 프로그램에서 고유 하 게 내결함성을 구현 하거나 추가 소프트웨어를 사용 하 여 내결함성을 제공할 수 있도록 해야 합니다.

먼저 노드 수준 오류 로부터 보호를 설정 하는 Vm 확장을 사용 하 여 배포 된 응용 프로그램을 확인 해야 합니다. 오프 라인으로 전환 하는 클라우드를 방지 하려면 동일한 응용 프로그램 이미에 배포 해야 다른 클라우드 서비스 중단 없이 요청을 계속할 수 있도록 합니다. 이 모델 일반적으로 활성-활성 배포 라고 합니다.

각 Azure Stack 클라우드는 서로 독립적 클라우드 항상 인프라 측면에서에서 활성 것으로 간주 됩니다 것을 염두에 두십시오. 이 경우 응용 프로그램의 여러 활성 인스턴스를 하나 이상의 활성 클라우드에 배포 됩니다.

 - RTO: 가동 중지 시간 없이
 - RPO: 데이터 손실 없음
 - 배포 토폴로지: 활성/활성

### <a name="no-recovery"></a>복구 안 함

일부 응용 프로그램 환경에서 계획 되지 않은 가동 중지 시간 또는 데이터 손실 방지가 필요는 없습니다. 예를 들어, 개발에 사용 되는 Vm 및 테스트 일반적으로 않아도 복구할 수 있습니다. 응용 프로그램 또는 특정 VM에 대해 보호 하지 않고 작업을 수행 하 여 의사 결정 이며 Azure Stack 기본 인프라에서 백업 또는 Vm의 복제를 제공 하지 않습니다. Azure와 마찬가지로 해야 각 구독에서 각 VM에 대 한 보호를 옵트인 합니다.

 - RTO: 복구할 수 없는
 - RPO: 완전 한 데이터 손실

## <a name="recommended-topologies"></a>권장된 토폴로지

Azure Stack 배포에 대 한 중요 고려 사항:

|     | 권장 사항 | 설명 |
|-------------------------------------------------------------------------------------------------|-----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 외부 백업 대상 데이터 센터에 이미 배포 된 Vm 백업/복원 | 권장 | 기존 백업 인프라 및 운영 기술을 활용 합니다. VM 인스턴스가 추가로 보호 하기 위해 사용할 준비가 되도록 백업 인프라 크기 조정 해야 합니다. 백업 인프라 가까운 근접성을 원본에 없는 있는지 확인 합니다. 원본 Azure Stack을 보조 Azure Stack 인스턴스 또는 Azure에 Vm을 복원할 수 있습니다. |
| Azure Stack에 전용 외부 백업 대상 Vm 백업/복원 | 권장 | Azure Stack에 대 한 새 백업 인프라 또는 전용된 백업 인프라를 프로 비전을 구입할 수 있습니다. 백업 인프라 가까운 근접성을 원본에 없는 있는지 확인 합니다. 원본 Azure Stack을 보조 Azure Stack 인스턴스 또는 Azure에 Vm을 복원할 수 있습니다. |
| 전역 Azure 또는 신뢰할 수 있는 서비스 공급자에 직접 Vm 백업/복원 | 권장 | 데이터 개인 정보 보호 및 규정 요구 사항을 충족할 수 있습니다,으로 신뢰할 수 있는 서비스 공급자 또는 전역 Azure에 백업을 저장할 수 있습니다. 이상적으로 서비스 공급자도 실행 되어 Azure Stack 복원 하는 경우 운영 환경에서 일관성을 확보할 수 있습니다. |
| 별도 Azure Stack 인스턴스로 복제/장애 조치 Vm | 권장 | 장애 조치의 경우 확장된 응용 프로그램 가동 중지 시간을 피할 수 있도록 두 번째 Azure Stack 클라우드에 완벽 하 게 작동 하도록 해야 합니다. |
| 신뢰할 수 있는 서비스 공급자 또는 Azure에 직접 복제/장애 조치 Vm | 권장 | 데이터 개인 정보 보호 및 규정 요구 사항을 충족할 수 있습니다,으로 신뢰할 수 있는 서비스 공급자 또는 전역 Azure에 데이터를 복제할 수 있습니다. 이상적으로 서비스 공급자도 실행 되어 Azure Stack 장애 조치 후 운영 환경에서 일관성을 확보할 수 있습니다. |
| 배포 응용 프로그램 데이터를 사용 하 여 동일한 Azure Stack 클라우드에 백업 대상 | 권장 되지 않음 | 동일한 Azure Stack 클라우드 내에서 백업을 저장 하지 않습니다. 클라우드 계획 되지 않은 가동 중지 시간에서 기본 데이터 및 백업 데이터를 유지할 수 있습니다. 백업 대상 (백업 및 복원에 대 한 최적화 하기 위해)에 대 한 가상 어플라이언스로 배포 하려는 경우 모든 데이터는 지속적으로 외부 백업 위치에 복사 해야 합니다. |
| Azure Stack 솔루션 설치 되어 있는 동일한 랙에 백업 물리적 어플라이언스를 배포 합니다. | 지원되지 않음 | 이 시점에서, 다른 장치 원래 솔루션의 일부분이 아닌 rack 스위치의 위쪽에 연결할 수 없습니다. |

## <a name="next-steps"></a>다음 단계

이 문서에서는 Azure Stack에 배포 하는 사용자 Vm을 보호 하기 위한 일반 지침을 제공 합니다. Azure 서비스를 사용 하 여 사용자 Vm을 보호 하는 방법에 대 한 내용은을 참조 하세요.

 - [백업할 파일 및 응용 프로그램이 Azure Stack에서 Azure Backup을 사용 합니다.](https://docs.microsoft.com/azure/backup/backup-mabs-files-applications-azure-stack)
 - [Azure Stack 용 azure Backup Server 지원](https://docs.microsoft.com/azure/backup/ ) 
 - [Azure Stack에 대 한 azure Site Recovery 지원](https://docs.microsoft.com/azure/site-recovery/)  

Azure Stack에서 VM 보호를 제공 하는 파트너 제품에 대 한 자세한 내용은 참조 "[응용 프로그램 및 Azure Stack에서 데이터 보호](https://azure.microsoft.com/blog/protecting-applications-and-data-on-azure-stack/)."
