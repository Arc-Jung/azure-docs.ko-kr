---
title: "Azure 스택에 배포 된 Vm을 보호 | Microsoft Docs"
description: "Azure 스택에 배포 된 가상 컴퓨터를 보호 하는 방법에 대 한 지침입니다."
services: azure-stack
documentationcenter: 
author: mattbriggs
manager: femila
editor: 
ms.assetid: 4e5833cf-4790-4146-82d6-737975fb06ba
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: 02get-started-article
ms.date: 02/27/2018
ms.author: mabrigg
ms.reviewer: hector.linares
ms.openlocfilehash: e7c437e3310fbf5c921920a3f08ecb8fe1f0d931
ms.sourcegitcommit: 8c3267c34fc46c681ea476fee87f5fb0bf858f9e
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/09/2018
---
# <a name="protect-virtual-machines-deployed-on-azure-stack"></a>Azure 스택에 배포 된 가상 컴퓨터 보호

*적용 대상: Azure 스택 통합 시스템과 Azure 스택 개발 키트*

이 문서에서는 Azure 스택에 배포 된 사용자 Vm을 보호 하는 방법에 대 한 지침을 다룹니다.

계획 되지 않은 가동 중지 시간 및 데이터 손실을 방지 하기 위해 사용자 응용 프로그램 및 데이터에 대 한 백업 복구 또는 재해 복구 계획을 구현 해야 합니다. 이 계획은 각 응용 프로그램에 대해 고유 하지만 조직의 포괄적인 비즈니스 연속성 및 재해 복구 (BC/DR) 전략에 의해 설정 된 프레임 워크를 따릅니다. 일반 패턴 및 응용 프로그램에 대 한 사례에 대 한 가용성과 복원 력이 참조 [Azure에 대 한 복원 력 있는 응용 프로그램 디자인](https://docs.microsoft.com/azure/architecture/resiliency) Azure의 아키텍처 센터에 있습니다.

## <a name="azure-stack-infrastructure-recovery"></a>Azure 스택 인프라 복구

사용자가 Azure 스택 인프라 서비스에서의 Vm을 별도로 보호 해야 합니다.

Azure 스택 클라우드 오랜된 시간 동안 오프 라인 상태 이거나 영구적으로 복구할 수 없는 경우에 최소한의 가동 중지 시간을 사용자 요청을 처리 하는 응용 프로그램을 유지 하기 위해 준비에서 계획을 수립 해야 합니다. Azure 스택 클라우드 운영자는 기본 Azure 스택 인프라 및 서비스에 대 한 복구 계획을 준비 하는 일을 담당 합니다. 자세한 내용을 보려면 문서를 읽어보세요 [치명적인 데이터 손실 로부터 복구할](https://docs.microsoft.com/azure/azure-stack/azure-stack-backup-recover-data)합니다. 

Azure 스택 인프라 서비스에 대 한 복구 계획 사용자 Vm, 저장소 계정 또는 데이터베이스의 복구를 포함 하지 않습니다. 응용 프로그램 소유자는 응용 프로그램 및 데이터에 대 한 복구 계획을 구현 해야 합니다.
 
## <a name="sourcetarget-combinations"></a>소스/대상 조합

각 Azure 스택 클라우드는 하나의 데이터 센터에 배포 됩니다. 별도 환경 필수 이므로 응용 프로그램을 복구할 수 있습니다. 다른 데이터 센터에 별도 Azure 스택 클라우드 또는 Azure 공용 클라우드 환경 수 있습니다. 사용자 데이터 sovereignty 및 데이터 개인 정보 요구 사항을 응용 프로그램에 대 한 복구 환경을 결정 됩니다. 각 응용 프로그램에 대 한 보호를 사용 하면 각각에 대 한 특정 복구 옵션을 선택할 수 있는 융통성을 수 있습니다. 다른 데이터 센터로 데이터를 백업 하는 하나의 구독에 응용 프로그램을 사용할 수 있습니다. 다른 구독을 Azure 공용 클라우드로 데이터를 복제할 수 있습니다. 
 
각 응용 프로그램에 대 한 대상을 결정할 각 응용 프로그램에 대 한 백업 복구 및 재해 복구 전략을 계획 합니다. 이 사용자 조직 제대로 크기가 필요한 저장 용량 온-프레미스 및 공용 클라우드에서 소비 프로젝트 도움이 됩니다. 

|  | 전역 Azure | Azure 스택 CSP 데이터 센터에 배포 하 고 CSP에서 작동 합니다. | 고객 데이터 센터에 배포 하 여 고객이 운영 azure 스택 |
|------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| **Azure 스택 CSP 데이터 센터에 배포 하 고 CSP에서 작동 합니다.** | 사용자 Vm 운영 CSP Azure 스택에 배포 됩니다. 사용자 Vm은 백업에서 복원 하거나 Azure에 직접 장애 조치 합니다. | CSP는 자체 데이터 센터에서 Azure 스택의 기본 및 보조 인스턴스를 작동합니다. 사용자 Vm 복원 되거나 두 Azure 스택 인스턴스 간의 장애 조치 됩니다. | CSP에는 기본 사이트에서 Azure 스택 작동합니다. 고객의 데이터 센터에 복원 또는 장애 조치 대상입니다. |
| **고객 데이터 센터에 배포 하 여 고객이 운영 azure 스택** | 사용자 Vm에 배포 된 고객 Azure 스택 작동 합니다. 사용자 Vm은 백업에서 복원 하거나 Azure에 직접 장애 조치 합니다. | 고객은 자체 데이터 센터에서 Azure 스택의 기본 및 보조 인스턴스를 작동합니다. 사용자 Vm 복원 되거나 두 Azure 스택 인스턴스 간의 장애 조치 됩니다. | 고객은 기본 사이트에서 Azure 스택 작동합니다. CSP의 데이터 센터에 복원 또는 장애 조치 대상입니다. |

![대상 소스 조합](media\azure-stack-manage-vm-backup\vm_backupdataflow_01.png)

## <a name="application-recovery-objectives"></a>응용 프로그램 복구 목표

조직이 Azure 스택에 응용 프로그램을 보호 하기 위해 최선의 방법을 결정 하는 응용 프로그램을 감당할 수 있는 가동 중지 시간 및 데이터 손실 양을 결정 해야 합니다. 중심지 크기 및 데이터 손실 값의 조직에 영향을 최소화 하는 복구 계획을 구현 하 고 개발 하기 위해 확인 하는 데 필요한 됩니다. 각 응용 프로그램을 고려해 보십시오.  
 - **복구 시간 목표 (RTO)**  
RTO는 최대 허용 시간 응용 프로그램이 사용할 수 없게 사건 후입니다. RTO가 90분이면 재해가 시작된 시점부터 90분 이내에 응용 프로그램을 실행 상태로 복원할 수 있어야 합니다. 낮은 RTO를 설정한 경우에 지속적으로 지역 가동 중단 으로부터 보호 하기 위해 대기 모드에서 실행 되는 두 번째 배포를 가질 수 있습니다.
 - **복구 지점 목표 (RPO)**  
RPO에는 재해 발생 시 허용 되는 데이터 손실의 최대 기간입니다. 예를 들어 다른 데이터베이스에 데이터를 복제하지 않고 단일 데이터베이스에만 데이터를 저장하며 매시간 백업을 수행하는 경우 최대 1시간 분량의 데이터가 손실될 수 있습니다.
 
RTO 및 RPO는 비즈니스 요구 사항입니다. 응용 프로그램의 RTO 및 RPO를 정의 하는 위험 평가 수행 합니다. 또 다른 일반적인 메트릭은 **복구 하는 평균 시간** (MTTR) 되는 응용 프로그램 오류가 발생 한 후 복원 하는 데 걸리는 평균 시간입니다. MTTR은 시스템에 대한 실증적 팩트입니다. MTTR이 RTO를 초과하면 시스템에 오류가 발생했을 때 정의된 RTO 내에서 시스템을 복원할 수 없기 때문에 허용할 수 없는 수준의 비즈니스 중단이 발생합니다.

### <a name="backup-restore"></a>Backup-restore

VM 기반 응용 프로그램에 대 한 가장 일반적인 보호 체계 백업 소프트웨어를 사용 하는 것입니다. 일반적으로 VM을 백업할 운영 체제, 운영 체제 구성, 응용 프로그램 이진 파일 및 응용 프로그램 데이터를 포함 합니다. 백업 볼륨, 디스크 또는 전체 VM의 스냅숏을 수행 하 여 생성 됩니다. Azure 스택 Azure 스택 저장소 또는 게스트 OS의 컨텍스트 내에서 백업의 유연성 있으며 Api를 계산 합니다. Azure 스택 하이퍼바이저 수준에서 기록 백업을 지원 하지 않습니다. 
 
![Backup-restor](media\azure-stack-manage-vm-backup\vm_backupdataflow_03.png)
 
응용 프로그램 복구 또는 새 클라우드 동일한 클라우드로 하나 이상의 가상 컴퓨터를 복원 해야 합니다. 데이터 센터 또는 공용 클라우드는 클라우드를 지정할 수 있습니다. 대상 클라우드가 컨트롤 내에 완전히을 데이터 개인 정보 및 sovereignty 요구 사항에 따라 수행 됩니다. 
 
 - RTO: 가동 중지 시간 (초) 
 - RPO: 최소한의 데이터 손실
 - 배포 토폴로지: 액티브/패시브 

#### <a name="planning-your-backup-strategy"></a>백업 전략 계획

백업 전략을 계획 및 크기 조정 요구 사항 정의 보호 되어야 하는 VM 인스턴스 수를 측정으로 시작 합니다. 환경에서 모든 서버에서 모든 Vm을 백업 하는 것은 매우 일반적인 전략입니다. 그러나 Azure 스택에 있습니다 백업할 필요가 있는 몇 가지 Vm입니다. 예를 들어 Vm 크기 집합의 임시 리소스를 제공 하 고 때때로 예 고 없이 이동할 수 간주 됩니다. 모든 영 속 데이터 보호 되어야 하는 저장 되는 데이터베이스 또는 개체와 같은 다른 저장소에 저장 됩니다. Azure 스택 Vm 백업에 대 한 중요 한 고려 사항:

 - **분류**
    - 사용자가 있는 VM 백업할 옵트인 모델을 고려 하십시오.
    - SLA가 응용 프로그램 또는 비즈니스에 미치는 영향의 우선 순위를 기준으로 복구를 정의 합니다.
 - **규모**
    - 때 온 보 딩 새 Vm의 다 수 (백업 필요한 경우) 시차를 두고 진행된 백업을 고려 하십시오.
    - 효율적으로 캡처할 하 고 솔루션에 대해 콘텐츠 리소스를 최소화 하기 위해 백업 데이터를 전송할 수 있는 백업 제품을 평가 합니다.
    - 환경에서 모든 Vm에서 전체 백업을를 최소화 하기 위해 증분 또는 차등 백업을 사용 하 여 백업 데이터를 효율적으로 저장 하는 백업 제품을 평가 합니다.
 - **Restore**
    - 기존 VM 또는 VM의 전체 리소스 내에서 응용 프로그램 데이터 가상 디스크 및 연결 된 가상 디스크 백업 제품은 복원할 수 있습니다. 필요한 복원 구성표는 응용 프로그램이 복원 계획 하 고 응용 프로그램의 복구 시간에 영향을 줍니다 하는 방법에 따라 다릅니다. 예를 들어 쉽게 서식 파일에서 SQL server를 다시 배포 및 다음 전체 VM 또는 Vm 집합이 복원 하는 대신 데이터베이스를 복원할 수 있습니다.


### <a name="replicationmanual-failover"></a>복제/수동 장애 조치

고가용성을 지원 하기 위해 또 다른 방법은 응용 프로그램 Vm 클라우드에서 다른 클라우드로 복제를 수동으로 트리거된 장애 조치에 의존 하는 것입니다. VM 수준 또는 게스트 운영 체제 수준에서 운영 체제, 응용 프로그램 이진 파일 및 응용 프로그램 데이터의 복제를 수행할 수 있습니다. 응용 프로그램에서 별도 추가 소프트웨어를 사용 하 여 장애 조치를 관리 합니다.
 
이 방법에서는 응용 프로그램 클라우드 하나에 배포 됩니다. VM은 다른 클라우드 데이터 센터 중 하나에 하나 또는 공용 클라우드로 복제 됩니다. 장애 조치가 트리거되는 경우 보조 Vm 할 두 번째 클라우드에서 켤 수 있습니다. 장애 조치에 따라서는 Vm 만들고이 디스크를 연결 합니다. 이 프로세스는 다중 계층 응용 프로그램에 특정 시작 시퀀스와 특히 완료 하는 데는 오랜된 시간을 걸릴 수 있습니다. 응용 프로그램은 서비스 요청을 시작할 준비가 전에 실행 해야 하는 추가 단계가 있을 수 있습니다.

![복제-수동 장애 조치](media\azure-stack-manage-vm-backup\vm_backupdataflow_02.png)

 - RTO: 가동 중지 시간 (분) 
 - RPO: 변수 데이터 손실
 - 배포 토폴로지: 액티브/패시브 독립 여
 
### <a name="high-availabilityautomatic-failover"></a>높은 가용성/자동 장애 조치

응용 프로그램의 비즈니스 몇 초 또는 최소한의 데이터 손실 및 가동 중지 시간 (분)을 허용할 수 있는 경우 고가용성 구성을 고려 해야 합니다. 고가용성 응용 프로그램을 자동으로 오류에서 복구 하도록 설계 되었습니다. 로컬 하드웨어 오류에 대 한 Azure 스택 인프라 두 맨 랙 스위치를 사용 하 여 실제 네트워크에서 높은 가용성을 구현 합니다. 계산 수준 오류에 대 한 Azure 스택 배율 단위에 여러 개의 노드를 사용합니다. VM 수준에서 응용 프로그램을 축소 하려면 노드 실패 수 있도록 오류 도메인과 함께에서 크기 집합을 사용할 수 있습니다. 
 
크기 집합으로 함께 응용 프로그램 고가용성을 기본적으로 지원 하거나 클러스터링 소프트웨어의 사용을 지원 해야 합니다. 예를 들어 Microsoft SQL Server 고가용성을 지원 기본적으로 동기-커밋 모드를 사용 하 여 데이터베이스에 대 한 합니다. 그러나 비동기 복제를만 지원할 수 있는 경우 다음 일부 데이터 손실이 됩니다. 또한 클러스터링 소프트웨어 응용 프로그램의 자동 장애 조치를 처리 하는 장애 조치 클러스터에 응용 프로그램을 배포할 수 있습니다. 
 
이 방법을 사용 하면 응용 프로그램은 클라우드 하나에 활성화 하지만 소프트웨어는 여러 클라우드에 배포 합니다. 다른 클라우드 대기 모드에서 장애 조치 트리거될 때 응용 프로그램을 시작할 준비가 됩니다.

 - RTO: 가동 중지 시간 (초) 
 - RPO: 최소한의 데이터 손실
 - 배포 토폴로지: 액티브/액티브 독립 여

### <a name="fault-tolerance"></a>내결함성

실제 중복성 및 인프라 서비스 가용성 실패 한 디스크와 같은 하드웨어 수준 오류 으로부터 보호 하는 azure 스택 전원 공급 장치를 실패 했습니다. 네트워크 포트를 못했거나 노드 실패 했습니다. 그러나 응용 프로그램 항상 사용할 수 있어야 하 고 어떠한 데이터도 손실 되지 않습니다 수, 응용 프로그램에서 결함 허용을 고유 하 게 구현 또는 추가 소프트웨어와 함께 내결함성을 지원을 해야 합니다. 
 
첫째, 노드 수준 오류를 방지 하기 위해 설정 하는 Vm이 눈금을 사용 하 여 배포 된 응용 프로그램을 확인 해야 합니다. 오프 라인으로 전환 하는 클라우드를 방지 하기 위해 동일한 응용 프로그램 이미에 배포 해야 다른 클라우드 서비스 요청 중단 없이 계속 수 있습니다. 일반적으로 액티브-액티브 배포 라고 합니다.
 
각 Azure 스택 클라우드는 서로 독립적 때문에 클라우드는 인프라 측면에서 볼 때 활성 간주 항상 염두에서에 둬야 합니다. 이 경우 응용 프로그램의 여러 활성 인스턴스 활성 클라우드가 하나 이상에 배포 됩니다. 
 
 - RTO: 작동 중단 시간 없음
 - RPO: 데이터 손실 없음
 - 배포 토폴로지: 활성/활성

### <a name="no-recovery"></a>복구 없음

사용자 환경에서 일부 응용 프로그램에서 계획 되지 않은 가동 중지 시간 또는 데이터 손실에 대 한 보호를 필요 하지 않습니다. 예를 들어 개발에 사용 되는 Vm 및 테스트 일반적으로 불필요 복구할 수 있습니다. 되기을 응용 프로그램 또는 특정 VM에 대 한 보호 없이 않습니다. Azure 스택 기본 인프라에서 백업 또는 Vm의 복제를 제공 하지 않습니다. Azure와 유사한 할 각 구독에 각 VM에 대 한 보호를 옵트인 합니다.  
 
 - RTO: 복구할 수 없는 
 - RPO: 완전 한 데이터 손실
 
## <a name="recommended-topologies"></a>권장된 토폴로지 

Azure 스택 배포에 대 한 중요 한 고려 사항:

|     | 권장 사항 | 설명 |
|-------------------------------------------------------------------------------------------------|-----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 백업/복원 Vm 데이터 센터에 이미 배포 된 외부 백업 대상 | 권장 | 기존 백업 인프라 및 operational 기술을 활용 합니다. 추가 VM 인스턴스를 보호 하려면 되기 때문에 백업 인프라 크기를 조정 해야 합니다. 백업 인프라 소스에 근접에 없는 있는지 확인 합니다. Azure 스택 인스턴스를 보조 또는 Azure를 원본 Azure 스택에 Vm을 복원할 수 있습니다. |
| 백업/복원 Vm Azure 스택 전용된 외부 백업 대상 | 권장 | Azure 스택에 대 한 새 백업 인프라 또는 전용된 백업 인프라를 프로 비전을 구입할 수 있습니다. 백업 인프라 소스에 근접에 없는 있는지 확인 합니다. Azure 스택 인스턴스를 보조 또는 Azure를 원본 Azure 스택에 Vm을 복원할 수 있습니다. |
| 신뢰할 수 있는 서비스 공급자 또는 글로벌 Azure에 직접 Vm에 대 한 백업/복원 | 권장 | 데이터 개인 정보 보호 및 규정 요구 사항을 충족할 수 있는,으로 신뢰할 수 있는 서비스 공급자 또는 글로벌 Azure에 백업을 저장할 수 있습니다. 이상적으로 서비스 공급자도 실행 되어 Azure 스택 복원 하는 경우 운영 경험에서 일관성을 찾을 수 있습니다. |
| 개별 Azure 스택 인스턴스에 복제/장애 조치 Vm | 권장 | 장애 조치의 경우 확장된 응용 프로그램의 가동 중지 시간을 방지할 수 있도록 완벽 하 게 작동 하는 두 번째 Azure 스택 클라우드를 해야 합니다. |
| 신뢰할 수 있는 서비스 공급자 또는 Azure에 직접 Vm 복제/장애 조치 | 권장 | 데이터 개인 정보 보호 및 규정 요구 사항을 충족할 수 있는,으로 신뢰할 수 있는 서비스 공급자 또는 글로벌 Azure에 데이터를 복제할 수 있습니다. 이상적으로 서비스 공급자가 장애 조치 후 일관성 운영 경험에서 찾을 수 있도록 Azure 스택 실행도 합니다. |
| 배포 응용 프로그램 데이터를 사용 하는 동일한 Azure 스택 클라우드에 백업 대상 | 권장 하지 않음 | 동일한 Azure 스택 클라우드 내에서 백업을 저장 하지 않습니다. 계획 되지 않은 가동 중지 시간 클라우드의 주 데이터 및 백업 데이터에서 유지할 수 있습니다. 를 백업 대상 (위해 백업 및 복원에 대 한 최적화)를 가상 어플라이언스로 배포 하도록 선택한 경우 모든 데이터는 외부 백업 위치에 복사 지속적으로 확인 해야 합니다. |
| Azure 스택 솔루션이 설치 된 동일한 랙에 물리적 백업 기기를 배포 합니다. | 지원되지 않음 | 이 시점에서, 원래 솔루션의 일부가 아닌 랙 스위치의 맨 위에 다른 장치를 연결할 수 없습니다. |
 
## <a name="next-steps"></a>다음 단계 

이 문서에서는 Azure 스택에 배포 된 사용자 Vm을 보호 하는 방법에 대 한 지침 포함 되어 있습니다. Azure 서비스를 사용 하 여 Vm을 보호 하는 방법에 대 한 자세한 내용은 참조 합니다.
 - [Azure 스택에 대 한 azure 백업 서버 지원](https://docs.microsoft.com/en-us/azure/backup/ ) 
 - [Azure 스택에 대 한 azure 사이트 복구 지원](https://docs.microsoft.com/en-us/azure/site-recovery/)  
 
Azure 스택에서 VM 보호를 제공 하는 파트너 제품에 대 한 자세한 내용은를 참조 "[응용 프로그램과 데이터에 Azure 스택 보호](https://azure.microsoft.com/blog/protecting-applications-and-data-on-azure-stack/)."
