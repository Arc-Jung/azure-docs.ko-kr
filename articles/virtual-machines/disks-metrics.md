---
title: 디스크 메트릭
description: 디스크 버스트 메트릭의 예
author: roygara
ms.service: virtual-machines
ms.topic: conceptual
ms.date: 02/12/2021
ms.author: rogarana
ms.subservice: disks
ms.openlocfilehash: 60486c41ad843cf193ee0648dfcfef66f7668e47
ms.sourcegitcommit: b4647f06c0953435af3cb24baaf6d15a5a761a9c
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/02/2021
ms.locfileid: "101674974"
---
# <a name="disk-performance-metrics"></a>디스크 성능 메트릭
Azure는 VM (가상 머신) 및 디스크가 수행 하는 방법에 대 한 통찰력을 제공 하는 메트릭을 Azure Portal에 제공 합니다. API 호출을 통해 메트릭을 검색할 수도 있습니다. 이 문서는 세 개의 하위 섹션으로 나뉘어 있습니다.

- **디스크 IO, 처리량 및 큐 깊이 메트릭** -이러한 메트릭을 통해 디스크 및 가상 컴퓨터의 관점에서 저장소 성능을 확인할 수 있습니다.
- **디스크 버스트 메트릭** -이러한 메트릭은 프리미엄 디스크에서 [버스트](disk-bursting.md) 기능에 관찰성을 제공 합니다.
- **저장소 IO 사용률 메트릭** -이러한 메트릭은 디스크를 사용 하 여 저장소 성능의 병목 상태를 진단 하는 데 도움이 됩니다. 

5 분 마다 내보내지는 버스트 크레딧 백분율 메트릭을 제외한 모든 메트릭은 1 분 마다 내보내집니다.

## <a name="disk-io-throughput-and-queue-depth-metrics"></a>디스크 IO, 처리량 및 큐 깊이 메트릭
다음 메트릭을 사용 하 여 VM 및 디스크 IO, 처리량 및 큐 깊이 성능에 대 한 통찰력을 얻을 수 있습니다.

- **Os 디스크 큐 깊이**: os 디스크에서 읽거나 쓰는 동안 대기 중인 현재 미해결 IO 요청 수입니다.
- **Os 디스크 읽기 바이트/초**: os 디스크에서 초당 읽은 바이트 수입니다.
- **Os 디스크 읽기 작업/초**: os 디스크에서 초당 읽은 입력 작업의 수입니다.
- **Os Disk Write bytes/Sec**: os 디스크에서 1 초 안에 기록 된 바이트 수입니다.
- **Os 디스크 쓰기 작업/초**: os 디스크에서 1 초 안에 기록 된 출력 작업의 수입니다.
- **데이터 디스크 큐 깊이**: 데이터 디스크에서 읽거나 쓸 때까지 대기 중인 현재 미해결 IO 요청 수입니다.
- **데이터 디스크 읽기 바이트/초**: 데이터 디스크에서 초당 읽은 바이트 수입니다.
- **데이터 디스크 읽기 작업/초**: 데이터 디스크에서 1 초 안에 읽은 입력 작업의 수입니다.
- **데이터 디스크 쓰기 바이트/초**: 데이터 디스크에서 1 초 안에 기록 된 바이트 수입니다.
- **데이터 디스크 쓰기 작업/초**: 데이터 디스크에서 1 초 안에 기록 된 출력 작업의 수입니다.
- **디스크 읽기 바이트/초**: VM에 연결 된 모든 디스크에서 초당 읽은 총 바이트 수입니다.
- **디스크 읽기 작업/초**: VM에 연결 된 모든 디스크에서 초당 읽은 입력 작업 수입니다.
- **디스크 쓰기 바이트 수/초**: VM에 연결 된 모든 디스크에서 초당 기록 되는 바이트 수입니다.
- **디스크 쓰기 작업/초**: VM에 연결 된 모든 디스크에서 초당 작성 된 출력 작업의 수입니다.

## <a name="bursting-metrics"></a>버스트 메트릭
다음 메트릭은 프리미엄 디스크에서 [버스트](disk-bursting.md) 기능을 관찰성 하는 데 도움이 됩니다.

- **데이터 디스크 최대 버스트 대역폭**: 데이터 디스크를 버스트 할 수 있는 처리량 한도입니다.
- **Os 디스크 최대 버스트 대역폭**: os 디스크에서 버스트 가능한 처리량 제한입니다.
- **데이터 디스크 최대 버스트 iops**: 데이터 디스크를 버스트 할 수 있는 IOPS 제한입니다.
- **Os 디스크 최대 버스트 iops**: os 디스크를 버스트 할 수 있는 IOPS 제한입니다.
- **데이터 디스크 대상 대역폭**: 데이터 디스크에서 버스트 없이 달성할 수 있는 처리량 한도입니다.
- **Os 디스크 대상 대역폭**: os 디스크에서 버스트 없이 달성할 수 있는 처리량 한도입니다.
- **데이터 디스크 대상 iops**: 데이터 디스크에서 버스트 없이 달성할 수 있는 iops 제한입니다.
- **OS 디스크 대상 iops**: 데이터 디스크에서 버스트 없이 달성할 수 있는 iops 제한입니다.
- **데이터 디스크 사용 된 버스트 BPS 크레딧 백분율**: 데이터 디스크에 사용 되는 처리량 버스트의 누적 백분율입니다. 5 분 간격으로 내보내집니다.
- **Os 디스크 사용 된 버스트 BPS 크레딧 백분율**: os 디스크에 사용 되는 처리량 버스트의 누적 백분율입니다. 5 분 간격으로 내보내집니다.
- **데이터 디스크 사용 된 버스트 IO 크레딧 백분율**: 데이터 디스크에 사용 되는 IOPS 버스트의 누적 백분율입니다. 5 분 간격으로 내보내집니다.
- **Os 디스크 사용 된 버스트 IO 크레딧 백분율**: os 디스크에 사용 되는 IOPS 버스트의 누적 백분율입니다. 5 분 간격으로 내보내집니다.

## <a name="storage-io-utilization-metrics"></a>저장소 IO 사용률 메트릭
다음 메트릭은 가상 컴퓨터 및 디스크 조합의 병목 상태를 진단 하는 데 도움이 됩니다. 이러한 메트릭은 프리미엄 사용 VM을 사용 하는 경우에만 사용할 수 있습니다. 이러한 메트릭은 Ultra을 제외한 모든 디스크 유형에 사용할 수 있습니다. 

디스크 IO 50,을 진단 하는 데 도움이 되는 메트릭:

- **데이터 디스크 Iops 사용 백분율**: 프로 비전 된 데이터 디스크 iops를 통해 완료 된 데이터 디스크 iops에서 계산 된 백분율입니다. 이 금액이 100%에 해당 하는 경우 데이터를 실행 하는 응용 프로그램은 데이터 디스크의 IOPS 제한을 초과 하는 IO입니다.
- **사용 된 데이터 디스크 대역폭 백분율**: 프로 비전 된 데이터 디스크 처리량에 대해 완료 된 데이터 디스크 처리량에서 계산 된 백분율입니다. 이 금액이 100%에 해당 하는 경우 데이터를 실행 하는 응용 프로그램은 데이터 디스크의 대역폭 제한에서 IO가 됩니다.
- **Os 디스크 Iops 사용 백분율**: 프로 비전 된 os 디스크 iops를 통해 완료 된 OS 디스크 iops에서 계산 된 백분율입니다. 이 금액이 100%에 해당 하는 경우 실행 중인 응용 프로그램은 OS 디스크의 IOPS 제한을 초과 하는 IO입니다.
- **사용 된 Os 디스크 대역폭 (%**): os 디스크 처리량에서 계산 된 백분율이 프로 비전 된 os 디스크 처리량을 초과 했습니다. 이 금액이 100%에 해당 하는 경우 실행 중인 응용 프로그램은 OS 디스크의 대역폭 한도를 초과 하는 IO입니다.

VM IO 50,을 진단 하는 데 도움이 되는 메트릭:

- **사용 된 VM 캐시 된 Iops 비율**: 총 iops로 계산 된 최대 캐시 된 가상 머신 IOPS 제한을 초과 하 여 계산 된 백분율입니다. 이 금액이 100%에 해당 하는 경우 실행 중인 응용 프로그램은 VM의 캐시 된 IOPS 제한에서 더 많은 IO가 됩니다.
- **사용 된 VM 캐시 된 대역폭 비율**: 캐시 된 최대 가상 머신 처리량에 대해 완료 된 총 디스크 처리량으로 계산 된 백분율입니다. 이 금액이 100%에 해당 하는 경우 실행 중인 응용 프로그램은 VM의 캐시 된 대역폭 제한에서 더 많은 IO가 됩니다.
- **VM 캐시 되지 않은 IOPS 사용 백분율**: 가상 머신의 총 IOPS로 계산 된 백분율이 최대 캐시 되지 않은 가상 머신 IOPS 제한을 초과 하 여 완료 되었습니다. 이 금액이 100%에 해당 하는 경우, 실행 중인 응용 프로그램은 VM의 캐시 되지 않은 IOPS 제한에서 더 많은 IO를 실행 합니다.
- **VM 캐시 되지 않은 대역폭 사용 백분율**: 가상 머신의 총 디스크 처리량으로 계산 된 비율이 최대 프로 비전 된 가상 머신 처리량을 통해 완료 되었습니다. 이 금액이 100%에 해당 하는 경우, 실행 중인 응용 프로그램은 VM의 캐시 되지 않은 대역폭 제한에서 IO가 됩니다.

## <a name="storage-io-metrics-example"></a>저장소 IO 메트릭 예

이러한 새 저장소 IO 사용률 메트릭을 사용 하 여 시스템에서 병목 현상이 발생 하는 위치를 디버그 하는 방법의 예를 살펴보겠습니다. 시스템 설정은 이전 예제와 동일 합니다. 단, 이번에는 연결 된 OS 디스크가 캐시 *되지* 않습니다.

**설치**

- Standard_D8s_v3
  - 캐시 된 IOPS: 16000
  - 캐시 되지 않은 IOPS: 12800
- P30 OS 디스크
  - IOPS: 5000
  - 호스트 캐싱: **사용 안 함**
- 2 개의 P30 데이터 디스크 × 2
  - IOPS: 5000
  - 호스트 캐싱: **읽기/쓰기**
- 2 개의 P30 데이터 디스크 × 2
  - IOPS: 5000
  - 호스트 캐싱: **사용 안 함**

이 가상 머신과 IO 활동을 만드는 디스크 조합에서 벤치마킹 테스트를 실행 해 보겠습니다. Azure에서 저장소 IO를 벤치 마크 하는 방법을 알아보려면 [Azure 디스크 저장소에서 응용 프로그램 벤치 마크](disks-benchmarks.md)를 참조 하세요. 벤치마킹 도구에서 VM 및 디스크 조합이 22800 IOPS를 달성할 수 있음을 확인할 수 있습니다.

![R = 22.8 k가 강조 표시 된 f i o 출력의 스크린샷](media/disks-metrics/utilization-metrics-example/fio-output.jpg)



Standard_D8s_v3는 총 28600 IOPS를 달성할 수 있습니다. 메트릭을 사용 하 여 진행 상황을 조사 하 고 저장소 IO 병목 상태를 식별 하겠습니다. 왼쪽 창에서 **메트릭** 을 선택 합니다.

![왼쪽 창에 강조 표시 된 메트릭을 보여 주는 스크린샷](media/disks-metrics/utilization-metrics-example/metrics-menu.jpg)

먼저 **VM 캐시 된 IOPS 사용 백분율** 메트릭을 살펴보겠습니다.

![V M 캐시 된 I O P S가 사용 된 비율을 보여 주는 스크린샷](media/disks-metrics/utilization-metrics-example/vm-cached.jpg)

이 메트릭은 VM의 캐시 된 IOPS에 할당 된 16000 IOPS의 61%가 사용 됨을 나타냅니다. 이 백분율은 100%가 아니기 때문에 캐시 된 디스크와 저장소 IO 병목 현상이 없음을 의미 합니다. 이제 **VM 캐시 되지 않은 IOPS 사용 백분율** 메트릭을 살펴보겠습니다.

![V M 캐시 되지 않은 I O P S 사용 백분율을 보여 주는 스크린샷](media/disks-metrics/utilization-metrics-example/vm-uncached.jpg)

이 메트릭은 100%입니다. VM의 캐시 되지 않은 IOPS에 할당 된 모든 12800 IOPS를 사용 하 고 있음을 알려 줍니다. 이 문제를 해결할 수 있는 한 가지 방법은 추가 IO를 처리할 수 있는 더 큰 크기로 VM의 크기를 변경 하는 것입니다. 그러나이 작업을 수행 하기 전에 연결 된 디스크를 살펴보고 표시 되는 IOPS 수를 확인 하겠습니다. Os 디스크 **IOPS를 사용한 비율** 을 확인 하 여 os 디스크를 확인 합니다.

![O S 디스크 i/o가 사용 된 비율을 보여 주는 스크린샷](media/disks-metrics/utilization-metrics-example/os-disk.jpg)

이 메트릭은이 P30 OS 디스크에 대해 프로 비전 된 5000 IOPS의 약 90%가 사용 됨을 나타냅니다. 이 백분율은 OS 디스크에 병목 현상이 없음을 의미 합니다. 이제 **사용 된 데이터 디스크 IOPS** 를 살펴보면 VM에 연결 된 데이터 디스크를 확인 합니다.

![데이터 디스크 i/o가 사용 된 비율을 보여 주는 스크린샷](media/disks-metrics/utilization-metrics-example/data-disks-no-splitting.jpg)

이 메트릭은 연결 된 모든 디스크에서 사용 된 평균 IOPS가 42%를 차지 함을 나타냅니다. 이 백분율은 디스크에 사용 되는 IOPS를 기준으로 계산 되며 호스트 캐시에서 제공 되지 않습니다. 이러한 메트릭에 대 한 *분할* 을 적용 하 고 LUN 값을 분할 하 여이 메트릭을 자세히 살펴보겠습니다.

![분할으로 사용 된 데이터 디스크 i/o를 보여 주는 스크린샷](media/disks-metrics/utilization-metrics-example/data-disks-splitting.jpg)

이 메트릭은 LUN 3에 연결 된 데이터 디스크와 2가 프로 비전 된 IOPS의 약 85%를 사용 하 고 있음을 나타냅니다. 다음은 VM 및 디스크 아키텍처에서 IO가 표시 되는 모양에 대 한 다이어그램입니다.

![저장소 i/o 메트릭 예의 다이어그램입니다.](media/disks-metrics/utilization-metrics-example/metrics-diagram.jpg)

## <a name="next-steps"></a>다음 단계

- [Azure Monitor 메트릭 개요](../azure-monitor/essentials/data-platform-metrics.md)
- [메트릭 집계 설명](../azure-monitor/essentials/metrics-aggregation-explained.md)
- [Azure Monitor를 사용하여 메트릭 경고 만들기, 보기 및 관리](../azure-monitor/alerts/alerts-metric.md)