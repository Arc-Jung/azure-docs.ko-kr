<properties
	pageTitle="VM 할당 오류 문제 해결 | Microsoft Azure"
	description="Azure에서 VM을 만들거나 재시작하거나 크기를 조정하는 경우 할당 오류 해결"
	services="virtual-machines, azure-resource-manager"
	documentationCenter=""
	authors="jiangchen79"
	manager="felixwu"
	editor=""
	tags="top-support-issue"/>

<tags
	ms.service="virtual-machines"
	ms.workload="na"
	ms.tgt_pltfrm="ibiza"
	ms.devlang="na"
	ms.topic="article"
	ms.date="02/02/2016"
	ms.author="cjiang"/>



# Azure에서 VM을 만들거나 재시작하거나 크기를 조정하는 경우 할당 오류 해결

VM을 만들거나 중지된(할당이 취소된) VM을 재시작하거나 VM의 크기를 조정하는 경우 Microsoft Azure에서 구독에 계산 리소스를 할당합니다. 이러한 작업을 수행하면서 오류를 수신하는 경우도 있습니다. Azure 구독 제한에 도달하기 전에도 그렇습니다. 이 문서는 일부 일반적인 할당 오류의 이유를 설명하고 가능한 수정을 제안합니다. 서비스 배포를 계획하는 사용자에게 이 정보가 유용할 수 있습니다.

"일반 문제 해결 단계" 섹션에는 일반적인 문제를 해결하는 단계가 나와 있습니다. "자세한 문제 해결 단계" 섹션은 특정 오류 메시지에 따른 해결 단계를 제공합니다. 시작하기 전에 할당이 어떻게 작동하며 할당 오류가 발생하는 이유에 대한 몇 가지 배경 정보를 설명합니다.

Azure 문제와 관련된 정보가 이 문서에 없을 경우 [MSDN 및 스택 오버플로에서 Azure 포럼](https://azure.microsoft.com/support/forums/)을 방문합니다. 이러한 포럼이나 Twitter의 @AzureSupport에 문제를 게시할 수 있습니다. 또한 [Azure 지원](https://azure.microsoft.com/support/options/) 사이트에서 **지원 받기**를 선택하여 Azure 지원 요청을 제출할 수 있습니다.

## 배경 정보
### 할당의 작동 원리
Azure 데이터 센터의 서버는 클러스터로 분할되어 있습니다. 일반적으로 할당 요청은 여러 클러스터에서 시도되지만 할당 요청의 특정한 제약 조건으로 인해 Azure 플랫폼이 하나의 클러스터에만 요청을 시도하게 될 수 있습니다. 이 문서에서는 이를 “클러스터에 고정”이라고 합니다. 아래 다이어그램 1은 여러 클러스터에 시도되는 정상적인 할당의 사례를 보여 줍니다. 다이어그램 2는 기존 클라우드 서비스 CS\_1 또는 가용성 집합이 호스트되는 클러스터 2에 고정된 할당의 사례를 보여 줍니다.![할당 다이어그램](./media/virtual-machines-allocation-failure/Allocation1.png)

### 할당 오류가 발생하는 이유
할당 요청이 클러스터에 고정되면 사용 가능한 리소스 풀이 작아지기 때문에 유휴 리소스를 찾는데 실패할 가능성이 높습니다. 할당 요청이 클러스터에 고정되어 있지만 요청하는 리소스 유형이 이 클러스터에서 지원되지 않으면, 클러스터에 유휴 리소스가 있어도 사용자의 요청은 실패합니다. 아래 다이어그램 3은 유일한 후보 클러스터에 유휴 리소스가 없어서 고정된 할당이 실패하는 경우를 보여줍니다. 다이어그램 4는 클러스터에 유휴 리소스가 있지만 유일한 후보 클러스터가 요청한 VM 크기를 지원하지 않기 때문에 고정된 할당이 실패하는 경우를 보여 줍니다.

![고정된 할당 오류](./media/virtual-machines-allocation-failure/Allocation2.png)

## 일반적인 문제 해결 단계
### 클래식 배포 모델의 일반적인 할당 오류 문제 해결

이 단계는 가상 컴퓨터의 다양한 할당 문제를 해결하는 데 도움이 됩니다.

- VM을 다른 VM 크기로 조정합니다.<br> **모두 찾아보기** > **가상 컴퓨터(클래식)** > 사용자의 가상 컴퓨터 > **설정** > **크기**를 클릭합니다. 자세한 단계는 [가상 컴퓨터 크기 조정](https://msdn.microsoft.com/library/dn168976.aspx)을 참조하세요.

- 클라우드 서비스의 VM을 모두 삭제하고 다시 만듭니다.<br> **모두 찾아보기** > **가상 컴퓨터(클래식)** > 사용자의 가상 컴퓨터 > **삭제**를 클릭합니다. 그런 다음 **새로 만들기** > **계산** > [가상 컴퓨터 이미지]를 클릭합니다.

### Azure 리소스 관리자 배포 모델의 일반적인 할당 실패 문제 해결

이 단계는 가상 컴퓨터의 다양한 할당 문제를 해결하는 데 도움이 됩니다.

- 동일한 가용성 집합의 모든 VM을 중지(할당 취소)하고 각 VM을 재시작합니다.<br> 중지하려면: **리소스 그룹** > 사용자의 리소스 그룹 > **리소스** > 사용자의 가용성 집합 > **가상 컴퓨터** > 사용자의 가상 컴퓨터 > **중지**를 클릭합니다.

	모든 VM이 중지된 후에 첫 번째 VM을 선택하고 **시작**을 클릭합니다.

## 자세한 문제 해결
### 클래식 배포 모델의 특정 할당 오류 시나리오 문제 해결
다음은 할당 요청이 고정되도록 하는 일반적인 할당 시나리오입니다. 이 문서의 뒷 부분에서 각 시나리오에 대해 자세히 알아봅니다.

- VM 크기 조정 또는 기존 클라우드 서비스에 VM 또는 역할 인스턴스 추가
- 부분적으로 중지(할당 취소)된 VM 다시 시작
- 완전히 중지(할당 취소)된 VM 다시 시작
- 스테이징/프로덕션 배포(Platform as a Service 전용)
- 선호도 그룹(VM/서비스 근접)
- 선호도-그룹-기반 가상 네트워크

할당 오류를 수신하면 여기에 설명해 놓은 시나리오가 오류에 적용되는지 알아봅니다. Azure 플랫폼에서 반환된 할당 오류를 사용하여 해당 시나리오를 식별합니다. 요청이 고정된 경우에는 고정시키는 일부 제약 조건을 제거하여 더 많은 클러스터에 요청을 열고 할당이 성공할 기회를 높입니다.

일반적으로 “요청된 VM 크기가 지원되지 않습니다”라고 오류에 나타나지 않는 한 사용자의 요청을 수용하기 충분한 리소스가 클러스터에 확보되어 있기 때문에 언제나 나중에 다시 시도할 수 있습니다. 요청한 VM 크기가 지원되지 않는 것이 문제라면 다른 VM 크기를 시도하세요. 그렇지 않은 경우 유일한 옵션은 고정 제약 조건을 제거하는 것입니다.

두 가지 일반적인 실패 시나리오는 선호도 그룹과 관련되어 있습니다. 과거에 선호도 그룹은 VM/서비스 인스턴스에 가까운 근접성을 제공하는 데 사용되거나 가상 네트워크를 생성할 수 있도록 하는 데 사용되었습니다. 지역 가상 네트워크가 도입되면서 선호도 그룹이 가상 네트워크 생성에 더 이상 필요하지 않게 되었습니다. Azure 인프라의 네트워크 대기 시간이 감소하면서 VM/서비스 근접성을 위해 선호도 그룹을 사용하는 권장 사항이 변경되었습니다.

아래 다이어그램 5는 (고정된) 할당 시나리오의 분류법을 나타냅니다.![고정된 할당 분류법](./media/virtual-machines-allocation-failure/Allocation3.png)

> [AZURE.NOTE] 각각의 할당 시나리오에 나열된 오류는 짧은 형식입니다. 자세한 오류 문자열은 [오류 문자열 조회](#오류 문자열 조회)를 참조하세요.

#### 할당 시나리오: VM 크기 조정 또는 기존 클라우드 서비스에 VM 또는 역할 인스턴스 추가
**오류**

Upgrade\_VMSizeNotSupported 또는 GeneralError

**클러스터 고정의 원인**

VM 크기를 조정하거나 기존 클라우드 서비스에 VM 또는 역할 인스턴스를 추가하는 요청은 기존 클라우드 서비스를 호스트하는 원래 클러스터에서 시도되어야 합니다. 클라우드 서비스를 새로 만들면 Azure 플랫폼에서 유휴 리소스가 있거나 사용자가 요청한 VM 크기를 지원하는 또 다른 클러스터를 찾을 수 있습니다.

**해결 방법**

오류가 Upgrade\_VMSizeNotSupported*이면, 다른 VM 크기를 시도합니다. 다른 VM 크기를 사용할 수는 없지만 다른 VIP(가상 IP 주소)를 사용하는 것이 허용되면, 새로운 VM을 호스트할 새 클라우드 서비스를 만들고 새 클라우드 서비스를 기존 VM이 실행되는 지역 가상 네트워크에 추가합니다. 기존 클라우드 서비스가 지역 가상 네트워크를 사용하지 않더라도 새 클라우드 서비스에 새 가상 네트워크를 만든 후 [기존 가상 네트워크를 새 가상 네트워크](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/)에 연결할 수 있습니다. [지역 가상 네트워크](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/)에 대한 자세한 내용을 참조하세요.

오류가 GeneralError*이면 리소스 유형(예: 특정한 VM 크기)이 클러스터에서 지원되지만 해당 시점에 클러스터에 유휴 리소스가 없을 가능성이 있습니다. 위 시나리오와 유사하게 새 클라우드 서비스를 만들고(새 클라우드 서비스는 다른 VIP를 사용해야 함) 지역 가상 네트워크를 사용하여 클라우드 서비스로 연결하여 원하는 계산 리소스를 추가합니다.

#### 할당 시나리오: 부분적으로 중지(할당 취소)된 VM 다시 시작

**오류**

GeneralError*

**클러스터 고정의 원인**

일부 할당 취소란 클라우드 서비스에서 하나 이상을 중지(할당 취소)했지만 모든 VM을 중지한 것은 아니라는 의미입니다. VM을 중지(할당 취소)하면 연결된 리소스가 해제됩니다. 따라서 중지(할당 취소)한 VM을 재시작하는 것은 새로운 할당 요청입니다. 부분적으로 할당 취소된 클라우드 서비스에서 VM을 다시 시작하는 것은 기존 클라우드 서비스에 VM을 추가하는 것과 같습니다. 할당 요청은 기존 클라우드 서비스를 호스트하는 원래 클러스터에서 시도되어야 합니다. 다른 클라우드 서비스를 만들면 Azure 플랫폼에서 유휴 리소스가 있거나 사용자가 요청한 VM 크기를 지원하는 또 다른 클러스터를 찾을 수 있습니다.

**해결 방법**

다른 VIP를 사용하는 것이 허용되면 중지된(할당 취소된) VM을 삭제하고(하지만 연결된 디스크는 유지한 채로) 다른 클라우드 서비스를 통해 VM을 다시 추가합니다. 지역 가상 네트워크를 사용하여 클라우드 서비스에 연결합니다. - 기존 클라우드 서비스가 지역 가상 네트워크를 사용하는 경우 동일한 가상 네트워크에 새 클라우드 서비스를 추가하면 됩니다. - 기존 클라우드 서비스가 지역 가상 네트워크를 사용하지 않는 경우 새 클라우드 서비스에 대한 새 가상 네트워크를 만든 다음 [새 가상 네트워크에 기존 가상 네트워크를 연결합니다](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/). [지역 가상 네트워크](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/)에 대한 자세한 내용을 참조하세요.

#### 할당 시나리오: 완전히 중지(할당 취소)된 VM 다시 시작
**오류**

GeneralError*

**클러스터 고정의 원인**

전체 할당 취소란 클라우드 서비스의 모든 VM을 중지(할당 취소)했다는 의미입니다. VM 재시작을 위한 할당 요청은 클라우드 서비스를 호스트하는 원래 클러스터에서 시도되어야 합니다. 클라우드 서비스를 새로 만들면 Azure 플랫폼에서 유휴 리소스가 있거나 사용자가 요청한 VM 크기를 지원하는 또 다른 클러스터를 찾을 수 있습니다.

**해결 방법**

다른 VIP를 사용하는 것이 허용되면, 원래 중지(할당 취소)된 VM을 연결된 디스크를 유지한 채로 삭제하고 해당 클라우드 서비스를 삭제합니다. 연결된 계산 리소스는 VM을 중지(할당 취소)할 때 이미 해제되었습니다. 새 클라우드 서비스를 만들어서 VM에 다시 추가합니다.

#### 할당 시나리오: 스테이징/프로덕션 배포(Platform as a Service 전용)
**오류**

New\_General* 또는 New\_VMSizeNotSupported*

**클러스터 고정의 원인**

클라우드 서비스의 스테이징 배포 및 프로덕션 배포는 동일한 클러스터에서 호스트됩니다. 두 번째 배포를 추가하는 경우 할당 요청은 첫 번째 배포를 호스팅하는 동일한 클러스터에서 시도됩니다.

**해결 방법**

첫 번째 배포와 원래 클라우드 서비스를 삭제하고 클라우드 서비스를 다시 배포합니다. 이렇게 하면 2개의 배포를 수용하기에 충분한 유휴 리소스가 있는 클러스터나 요청한 VM 크기를 지원하는 클러스터에 첫 번째 배포가 배치될 수 있습니다.

#### 할당 시나리오: 선호도 그룹(VM/서비스 근접성)
**오류**

New\_General* 또는 New\_VMSizeNotSupported*

**클러스터 고정의 원인**

선호도 그룹에 할당된 모든 계산 리소스는 하나의 클러스터에 구속됩니다. 해당 선호도 그룹에 속하는 새로운 계산 리소스 요청은 기존 리소스를 호스트하는 동일한 클러스터에서 시도됩니다. 새로운 리소스가 새 클라우드 서비스에서 만들어지건 아니면 기존 클라우드 서비스를 통해 만들어지건 이 내용은 사실입니다.

**해결 방법**

선호도 그룹이 필요하지 않으면 선호도 그룹을 사용하지 않거나 여러 선호도 그룹의 계산 리소스를 그룹화합니다.

#### 할당 시나리오: 선호도-그룹-기반 가상 네트워크
**오류**

New\_General* 또는 New\_VMSizeNotSupported*

<**클러스터 고정의 원인**

지역 가상 네트워크가 도입되기 전에는 가상 네트워크를 선호도 그룹과 연결해야 했습니다. 그 결과 선호도 그룹에 배치된 계산 리소스가 위의 “할당 시나리오: 선호도 그룹(VM/서비스 근접성)” 섹션의 설명처럼 동일한 제약 조건에 바인딩되었습니다. 계산 리소스는 한 개의 클러스터에 연결됩니다.

**해결 방법**

선호도 그룹이 필요하지 않으면 추가하는 새 리소스에 대해 새로운 지역 가상 네트워크를 만들고 [기존 가상 네트워크를 새 가상 네트워크에 연결](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/)합니다. [지역 가상 네트워크](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/)에 대한 자세한 내용을 참조하세요.

또는 [선호도 그룹 기반 가상 네트워크를 지역 가상 네트워크로 마이그레이션](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/)한 다음 원하는 리소스를 다시 추가할 수 있습니다.

### Azure 리소스 관리자 배포 모델의 특정 할당 실패 시나리오 문제 해결
다음은 할당 요청이 고정되도록 하는 일반적인 할당 시나리오입니다. 이 문서의 뒷 부분에서 각 시나리오에 대해 자세히 알아봅니다.

- VM 크기 조정 또는 기존 클라우드 서비스에 VM 또는 역할 인스턴스 추가
- 부분적으로 중지(할당 취소)된 VM 다시 시작
- 완전히 중지(할당 취소)된 VM 다시 시작

할당 오류를 수신하면 여기에 설명해 놓은 시나리오가 오류에 적용되는지 알아봅니다. Azure 플랫폼에서 반환된 할당 오류를 사용하여 해당 시나리오를 식별합니다. 요청이 기존 클러스터에 고정된 경우에는 고정시키는 일부 제약 조건을 제거하여 더 많은 클러스터에 요청을 열고 할당이 성공할 기회를 높입니다.

일반적으로 “요청된 VM 크기가 지원되지 않습니다”라고 오류에 나타나지 않는 한 사용자의 요청을 수용하기 충분한 리소스가 클러스터에 확보되어 있기 때문에 언제나 나중에 다시 시도할 수 있습니다. 요청한 VM 크기가 지원되지 않는 것이 문제라면 아래에서 해결 방법을 참조하세요.

#### 할당 시나리오: VM 크기 조정 또는 기존 가용성 집합에 VM 추가
**오류**

Upgrade\_VMSizeNotSupported* 또는 GeneralError*

**클러스터 고정의 원인**

VM 크기를 조정하거나 기존 가용성 집합에 VM을 추가하는 요청은 기존 가용성 집합을 호스트하는 원래 클러스터에서 시도되어야 합니다. 가용성 집합을 새로 만들면 Azure 플랫폼에서 유휴 리소스가 있거나 사용자가 요청한 VM 크기를 지원하는 또 다른 클러스터를 찾을 수 있습니다.

**해결 방법**

오류가 Upgrade\_VMSizeNotSupported*이면, 다른 VM 크기를 시도합니다. 다른 VM 크기를 사용할 수 없는 경우에는 가용성 집합의 모든 VM을 중지합니다. 그러면 원하는 VM 크기를 지원하는 클러스터에 VM을 할당하는 가상 컴퓨터의 크기를 변경할 수 있습니다.

오류가 GeneralError*이면 리소스 유형(예: 특정한 VM 크기)이 클러스터에서 지원되지만 해당 시점에 클러스터에 유휴 리소스가 없을 가능성이 있습니다. VM이 다른 가용성 집합에 속할 수 있는 경우에는 동일한 지역의 다른 가용성 집합에 새 VM을 만듭니다. 그런 다음 새 VM을 동일한 가상 네트워크에 추가할 수 있습니다.

#### 할당 시나리오: 부분적으로 중지(할당 취소)된 VM 다시 시작
**오류**

GeneralError*

**클러스터 고정의 원인**

일부 할당 취소란 가용성 집합에서 하나 이상을 중지(할당 취소)했지만 모든 VM을 중지한 것은 아니라는 의미입니다. VM을 중지(할당 취소)하면 연결된 리소스가 해제됩니다. 따라서 중지(할당 취소)한 VM을 재시작하는 것은 새로운 할당 요청입니다. 부분적으로 할당 취소된 가용성 집합에서 VM을 다시 시작하는 것은 기존 가용성 집합에 VM을 추가하는 것과 같습니다. 할당 요청은 기존 가용성 집합을 호스트하는 원래 클러스터에서 시도되어야 합니다.

**해결 방법**

첫 번째 VM을 재시작하기 전에 가용성 집합의 모든 VM을 중지합니다. 이렇게 하면 새로운 할당 시도가 실행되고 사용 가능한 용량이 있는 새 클러스터가 선택될 수 있습니다.

#### 할당 시나리오: 완전히 중지(할당 취소)된 VM 다시 시작
**오류**

GeneralError*

**클러스터 고정의 원인**

전체 할당 취소란 가용성 집합의 모든 VM을 중지(할당 취소)했다는 의미입니다. VM 재시작을 위한 할당 요청은 원하는 크기를 지원하는 모든 클러스터를 대상으로 합니다.

**해결 방법**

할당할 새 VM 크기를 선택합니다. 작동하지 않는 경우 나중에 다시 시도하세요.

## 오류 문자열 조회
**New\_VMSizeNotSupported***

“배포 요청 제약 조건으로 인해 배포에 요구되는 VM 크기(또는 VM 크기의 조합)를 프로비전할 수 없습니다. 가능한 경우, 가상 네트워크 바인딩 같은 제약 조건을 해제하고 다른 배포를 포함하지 않는 호스티드 서비스에 배포를 시도하거나 다른 선호도 그룹 또는 선호도 그룹 없이 배포를 시도하거나 다른 지역으로 배포를 시도합니다.”

**New\_General***

“할당하지 못했습니다. 요청에 포함된 제약 조건을 충족할 수 없습니다. 요청된 새로운 서비스 배포가 선호도 그룹에 바인딩되어 있거나 가상 네트워크를 대상으로 하거나 호스티드 서비스에 기존 배포가 있습니다. 이러한 조건이 특정 Azure 리소스에 대한 새로운 배포를 제한합니다. 나중에 다시 시도하거나, VM 크기를 줄이거나 역할 인스턴스의 수를 줄입니다. 가능하다면 앞서 말한 제약 조건을 제거하거나 다른 지역에 배포를 시도합니다.”

**Upgrade\_VMSizeNotSupported***

“배포를 업그레이드할 수 없습니다. 요청된 VM 크기 XXX는 기존 배포를 지원하는 리소스에서 사용할 수 없습니다. 나중에 다시 시도하거나, 다른 VM 크기 또는 적은 수의 역할 인스턴스로 시도하거나 새 선호도 그룹 또는 선호도 그룹 바인딩 없이 빈 호스티드 서비스에 배포를 만듭니다.”

**GeneralError***

“서버에 내부 오류가 발생했습니다. 요청을 다시 시도하세요.” 그렇지 않으면 "서비스에 대한 할당 생성이 실패합니다."

<!---HONumber=AcomDC_0204_2016-->