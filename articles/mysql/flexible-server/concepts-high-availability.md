---
title: Azure Database for MySQL 유연한 서버를 사용 하는 영역 중복 고가용성 개요
description: Azure Database for MySQL 유연한 서버를 사용 하 여 영역 중복 고가용성의 개념에 대해 알아봅니다.
author: mksuni
ms.author: sumuth
ms.service: mysql
ms.topic: conceptual
ms.date: 09/21/2020
ms.openlocfilehash: cd7be998c49a710ee7652cf18c35bed743606ffd
ms.sourcegitcommit: 80034a1819072f45c1772940953fef06d92fefc8
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/03/2020
ms.locfileid: "93241187"
---
# <a name="high-availability-concepts-in-azure-database-for-mysql-flexible-server-preview"></a>Azure Database for MySQL 유연한 서버 (미리 보기)의 고가용성 개념

> [!IMPORTANT] 
> Azure Database for MySQL - 유연한 서버는 현재 공개 미리 보기로 제공됩니다.

유연한 서버 (미리 보기)를 Azure Database for MySQL **영역 중복** 고가용성 옵션을 사용 하 여 자동 장애 조치 (failover)를 통해 고가용성을 구성할 수 있습니다. 영역 중복 구성으로 배포하는 경우 유동 서버는 다른 가용성 영역에서 대기 복제본을 자동으로 프로비저닝하고 관리합니다. 저장소 수준 복제를 사용 하 여 데이터는 장애 조치 (failover) 후 데이터 손실이 발생 하지 않도록 보조 영역의 대기 서버에 **동기식으로 복제** 됩니다. 장애 조치 (failover)는 클라이언트 응용 프로그램에서 완전히 투명 하며 사용자 작업은 필요 하지 않습니다. 대기 서버는 읽기 또는 쓰기 작업에 사용할 수 없지만 빠른 장애 조치 (failover)를 사용 하려면 수동 대기 상태입니다. 장애 조치 (failover) 시간은 일반적으로 60-120 초 범위에 있습니다.

영역 중복 고가용성 구성을 사용 하면 사용자가 시작한 규모 계산 작업 및 기본 하드웨어 및 소프트웨어 오류, 네트워크 오류, 가용성 영역 오류 등의 계획 되지 않은 이벤트 동안 자동 장애 조치 (failover)가 가능 합니다.

:::image type="content" source="./media/concepts-high-availability/1-flexible-server-overview-zone-redundant-ha.png" alt-text="영역 중복 고가용성 보기":::

## <a name="zone-redundancy-architecture"></a>영역 중복성 아키텍처

주 서버는 지역 및 특정 가용성 영역에 배포 됩니다. 고가용성을 선택 하면 계산 계층, 계산 크기, 저장소 크기 및 네트워크 구성을 포함 하 여 주 서버와 구성이 동일한 대기 복제본 서버가 자동으로 배포 됩니다. 오류 상황에서 데이터 손실을 방지 하기 위해 로그 데이터는 대기 복제본에 동기적으로 복제 됩니다. 스냅숏 및 로그 백업 모두 자동 백업은 주 데이터베이스 서버에서 수행 됩니다. 

HA의 상태는 개요 페이지에서 지속적으로 모니터링 되 고 보고 됩니다.

다음과 같은 다양 한 복제 상태가 나열 됩니다.

| **Status** | **설명** |
| :----- | :------ |
| <b>NotEnabled | 영역 중복 HA를 사용 하도록 설정 하지 않았습니다. |
| <b>만들기 대기 | 새 대기 작업을 만드는 중 |
| <b>ReplicatingData | 대기를 만든 후에는 주 서버에서이를 catch 합니다. |
| <b>장애 조치 (failover) | 데이터베이스 서버가 주 서버에서 대기로 장애 조치 (failover) 하는 중입니다. |
| <b>정상 | 영역 중복 HA는 안정 된 상태이 고 정상 상태입니다. |
| <b>RemovingStandby | 사용자 동작에 따라 대기 복제본이 삭제 됩니다.| 

## <a name="advantages"></a>장점

영역 중복 HA 기능을 사용 하는 경우 몇 가지 이점은 다음과 같습니다. 

-   대기 복제본은 vCores, storage, 네트워크 설정 (VNET, 방화벽) 등의 기본 VM 구성으로 정확한 VM 구성에 배포 됩니다.
-   고가용성을 사용 하지 않도록 설정 하 여 대기 복제본을 제거할 수 있습니다.
-   자동 백업은 스냅숏 기반으로, 주 데이터베이스 서버에서 수행 되 고 영역 중복 저장소에 저장 됩니다.
-   장애 조치 (failover) 이벤트가 있는 경우 새 대기 복제본은 원래 주 가용성 영역에 프로 비전 됩니다.
-   클라이언트는 항상 주 데이터베이스 서버에 연결 합니다.
-   데이터베이스 충돌 또는 노드 오류가 발생 하는 경우 다시 시작은 동일한 노드에서 먼저 시도 됩니다. 실패 하면 자동 장애 조치 (failover)가 트리거됩니다.
-   서버를 다시 시작 하 여 정적 서버 매개 변수 변경을 선택 하는 기능

## <a name="steady-state-operations"></a>안정적인 상태 작업

응용 프로그램은 데이터베이스 서버 이름을 사용 하 여 주 서버에 연결 됩니다. 대기 복제본 정보는 직접 액세스를 위해 노출 되지 않습니다. 커밋 및 쓰기는 로그 파일이 주 서버의 디스크와 대기 복제본 모두에 동기 방식으로 유지 된 후에만 응용 프로그램에 승인 됩니다. 이러한 추가 왕복 요구 사항으로 인해 응용 프로그램은 쓰기 및 커밋에 대 한 대기 시간을 높일 수 있습니다. 포털에서 고가용성의 상태를 모니터링할 수 있습니다.

## <a name="failover-process"></a>장애 조치(failover) 프로세스 
비즈니스 연속성을 위해 계획 되거나 계획 되지 않은 이벤트에 대 한 장애 조치 (failover) 프로세스가 필요 합니다. 

### <a name="planned-events"></a>계획 된 이벤트

계획 된 가동 중지 시간 이벤트에는 Azure에서 예약 된 활동 (예: 정기적인 소프트웨어 업데이트, 부 버전 업그레이드 또는 확장 계산 및 크기 조정 저장소 작업)이 포함 됩니다. 이러한 모든 변경 내용은 대기 복제본에 먼저 적용 됩니다. 이 시간 동안 응용 프로그램은 계속 해 서 주 서버에 액세스 합니다. 대기 복제본이 업데이트 되 면 주 서버 연결이 중단 되 고, 장애 조치 (failover)가 트리거되고, DNS 레코드를 업데이트 하 여 대기 복제본을 동일한 데이터베이스 서버 이름을 사용 하는 주 복제본으로 활성화 합니다. 클라이언트 연결의 연결이 끊어지고 다시 연결 하 여 작업을 다시 시작할 수 있습니다. 새 대기 서버가 이전 주 복제본과 동일한 영역에 설정 됩니다. 전체 장애 조치 (failover) 시간은 60-120 s로 예상 됩니다. 

>[!NOTE]
> 계산 크기 조정 작업의 경우 보조 복제본 서버를 확장 한 다음 주 서버를 확장 합니다. 장애 조치 (failover)는 포함 되지 않습니다.

### <a name="failover-process---unplanned-events"></a>장애 조치 (failover) 프로세스-계획 되지 않은 이벤트
계획 되지 않은 서비스 가동 중지 시간에는 계산, 네트워크, 저장소 오류 또는 전원 중단과 같은 인프라 오류로 인해 데이터베이스의 가용성에 영향을 주는 소프트웨어 버그가 포함 됩니다. 데이터베이스를 사용할 수 없는 경우 대기 복제본에 대 한 복제가 중단 되 고 주 데이터베이스가 되도록 대기 복제본이 활성화 됩니다. DNS가 업데이트 되 고 클라이언트가 데이터베이스 서버에 다시 연결 하 여 작업을 다시 시작 합니다. 전반적인 장애 조치 (failover) 시간에는 60-120이 소요 됩니다. 그러나 장애 조치 (failover) 시 주 데이터베이스 서버의 활동 (예: 큰 트랜잭션 및 복구 시간)에 따라 장애 조치 (failover)가 더 오래 걸릴 수 있습니다.

## <a name="schedule-maintenance-window"></a>유지 관리 기간 예약 

유연한 서버는 유지 관리 일정 기능을 제공 하며,이는 패치 또는 부 버전 업그레이드와 같은 Azure 유지 관리 작업을 수행 하는 동안 기본 설정의 하루에 30 분의 기간을 선택할 수 있는 기능입니다. 고가용성으로 구성 된 유연한 서버에서는 먼저 대기 복제본에 대해 이러한 유지 관리 작업이 수행 됩니다. 

## <a name="point-in-time-restore"></a>지정 시간 복원 
유연한 서버가 고가용성으로 데이터를 동기적으로 복제 하는 경우 대기 서버는 주 복제본을 사용 하 여 최신 상태가 됩니다. 주에 대 한 사용자 오류 (예: 실수로 인 한 테이블 삭제 또는 잘못 된 업데이트)는 대기 상태로 정확 하 게 복제 됩니다. 따라서 이러한 논리 오류를 복구 하는 데는 standby를 사용할 수 없습니다. 이러한 논리적 오류에서 복구 하려면 오류가 발생 하기 직전의 시점으로 지정 시간 복원을 수행 해야 합니다. 유연한 서버의 지정 시간 복원 기능을 사용 하 여 고가용성으로 구성 된 데이터베이스를 복원 하면 새 데이터베이스 서버가 사용자 제공 이름으로 새 유연한 서버로 복원 됩니다. 그런 다음 데이터베이스 서버에서 개체를 내보내 프로덕션 데이터베이스 서버로 가져올 수 있습니다. 마찬가지로, 테스트 및 개발 목적으로 데이터베이스 서버를 복제 하거나 다른 용도로 복원 하려는 경우 최신 복원 지점이 나 사용자 지정 복원 지점을 선택할 수 있습니다. 복원 작업은 단일 영역 유연한 서버를 만듭니다.

## <a name="mitigate-downtime"></a>가동 중지 시간 완화 
영역 중복 HA 기능을 사용 하지 않는 경우에도 응용 프로그램의 가동 중지 시간을 완화할 수 있어야 합니다. 예약 된 유지 관리 기간 동안 예약 된 패치, 부 버전 업그레이드, 사용자 시작 작업 등의 서비스 가동 중지 시간 계획을 수행할 수 있습니다. 예약 된 서비스 가동 중지 시간 (예: 예약 된 패치, 부 버전 업그레이드) 또는 사용자가 시작한 작업 (예: 크기 조정 계산 가동 중지 시간)입니다. Azure에서 시작 된 유지 관리 작업의 응용 프로그램 영향을 완화 하기 위해 응용 프로그램에 최소한의 영향을 주는 요일 및 시간에 예약 하도록 선택할 수 있습니다. 

데이터베이스 충돌 또는 서버 오류와 같은 계획 되지 않은 가동 중지 시간 이벤트 중에 영향을 받는 서버가 동일한 영역 내에서 다시 시작 됩니다. 드문 경우 지만 전체 영역이 영향을 받는 경우 지역 내의 다른 영역에 데이터베이스를 복원할 수 있습니다. 

## <a name="things-to-know-with-zone-redundancy"></a>영역 중복성으로 알아야 할 사항 

영역 중복성 고가용성을 사용할 때 유의 해야 할 몇 가지 고려 사항은 다음과 같습니다. 

-   고가용성은 서버를 유연 하 게 만들 때 **만** 설정할 수 있습니다.
-   높은 가용성은 삼 계층 계산 계층에서 지원 되지 않습니다.
-   다른 가용성 영역에 대 한 동기 복제로 인해 주 데이터베이스 서버는 높은 쓰기 및 커밋 대기 시간을 경험할 수 있습니다.
-   대기 복제본은 읽기 전용 쿼리에 사용할 수 없습니다.
-   장애 조치 (failover) 시 주 서버의 활동에 따라 장애 조치 (failover)를 완료 하는 데 최대 60-120 초 이상 걸릴 수 있습니다.
-   주 데이터베이스 서버를 다시 시작 하 여 정적 매개 변수 변경 내용을 선택 하면 대기 복제본도 다시 시작 됩니다.
-   영역 중복 고가용성 서버에 대 한 읽기 복제본 구성은 지원 되지 않습니다.
-   관리 되는 유지 관리 기간 동안에는 고객 시작 관리 작업을 자동으로 구성할 수 없습니다.
-   크기 조정 계산 및 부 버전 업그레이드와 같은 계획 된 이벤트는 주 및 대기 모두에서 동시에 발생 합니다. 


## <a name="next-steps"></a>다음 단계

-   [비즈니스 연속성](./concepts-business-continuity.md) 에 대 한 자세한 정보
-   [영역 중복 고가용성](./concepts-high-availability.md) 에 대해 알아보기
-   [백업 및 복구](./concepts-backup-restore.md) 에 대 한 자세한 정보
