---
title: Azure 개인 링크 서비스는 무엇입니까?
description: Azure 개인 링크 서비스에 대해 자세히 알아보세요.
services: private-link
author: sumeetmittal
ms.service: private-link
ms.topic: conceptual
ms.date: 09/16/2019
ms.author: sumi
ms.openlocfilehash: 2cc6c577abdb3698ef6aca1f1f04d239f09d119c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "79280431"
---
# <a name="what-is-azure-private-link-service"></a>Azure 개인 링크 서비스는 무엇입니까?

Azure Private Link 서비스는 Azure Private Link에서 제공하는 자체 서비스에 대한 참조입니다. Azure 표준 로드 [밸런서](../load-balancer/load-balancer-standard-overview.md) 뒤에서 실행되는 서비스는 개인 링크 액세스를 사용하도록 설정하여 서비스에 대한 소비자가 자체 VNet에서 개인적으로 액세스할 수 있도록 할 수 있습니다. 고객은 VNet 내부에 개인 엔드포인트를 만들어 이 서비스에 매핑할 수 있습니다. 이 문서에서는 서비스 공급자 측과 관련된 개념을 설명합니다. 

## <a name="workflow"></a>워크플로

![개인 링크 서비스 워크플로우](media/private-link-service-overview/private-link-service-workflow.png)

### <a name="create-your-private-link-service"></a>비공개 링크 서비스 만들기

- 가상 네트워크의 표준 로드 밸런서 뒤에서 실행되도록 응용 프로그램을 구성합니다. 응용 프로그램이 이미 표준 로드 밸러터 뒤에 구성되어 있는 경우 이 단계를 건너뛸 수 있습니다.   
- 위의 로드 밸런서를 참조하는 개인 링크 서비스를 만듭니다. 로드 밸러서 선택 프로세스에서 트래픽을 수신할 프런트 엔드 IP 구성을 선택합니다. 개인 링크 서비스에 대한 NAT IP 주소의 서브넷을 선택합니다. 서브넷에서 8개 이상의 NAT IP 주소를 사용할 수 있는 것이 좋습니다. 모든 소비자 트래픽은 이 개인 IP 주소 풀에서 서비스 공급자로 발생하는 것으로 나타납니다. 개인 링크 서비스에 적합한 속성/설정을 선택합니다.    

    > [!NOTE]
    > Azure 개인 링크 서비스는 표준 로드 밸러버에서만 지원됩니다. 
    
### <a name="share-your-service"></a>서비스 공유

개인 링크 서비스를 만든 후 Azure는 서비스에 대해 제공한 이름을 기반으로 "별칭"이라는 전역적으로 고유한 모니커를 생성합니다. 서비스의 별칭 또는 리소스 URI를 오프라인으로 고객과 공유할 수 있습니다. 소비자는 별칭 또는 리소스 URI를 사용하여 개인 링크 연결을 시작할 수 있습니다.
 
### <a name="manage-your-connection-requests"></a>연결 요청 관리

소비자가 연결을 시작하면 서비스 공급자는 연결 요청을 수락하거나 거부할 수 있습니다. 모든 연결 요청은 프라이빗 링크 서비스의 **프라이빗 엔드포인트연결** 속성 아래에 나열됩니다.
 
### <a name="delete-your-service"></a>서비스 삭제

개인 링크 서비스가 더 이상 사용되지 않는 경우 삭제할 수 있습니다. 그러나 서비스를 삭제하기 전에 서비스와 연결된 개인 끝점 연결이 없는지 확인합니다. 모든 연결을 거부하고 서비스를 삭제할 수 있습니다.

## <a name="properties"></a>속성

개인 링크 서비스는 다음 속성을 지정합니다. 

|속성 |설명  |
|---------|---------|
|프로비저닝 상태(프로비저닝상태)  |개인 링크 서비스에 대한 현재 프로비저닝 상태를 나열하는 읽기 전용 속성입니다. 적용 가능한 프로비저닝 상태는 다음과 같습니다. 실패했습니다. 성공했습니다. 업데이트". 프로비저닝 상태가 "성공"되면 개인 링크 서비스를 성공적으로 프로비저닝한 것입니다.        |
|별칭 (별칭)     | 별칭은 서비스에 대한 전 세계적으로 고유한 읽기 전용 문자열입니다. 그것은 당신이 당신의 서비스에 대한 고객 데이터를 마스크하는 동시에 서비스에 대한 공유하기 쉬운 이름을 만드는 데 도움이됩니다. 개인 링크 서비스를 만들 때 Azure는 고객과 공유할 수 있는 서비스에 대한 별칭을 생성합니다. 고객은 이 별칭을 사용하여 서비스에 대한 연결을 요청할 수 있습니다.          |
|가시성(가시성)     | 가시성은 비공개 링크 서비스의 노출 설정을 제어하는 속성입니다. 서비스 공급자는 역할 기반 액세스 제어(RBAC) 권한, 제한된 구독 집합 또는 모든 Azure 구독을 사용하여 서비스에 대한 노출을 구독으로 제한하도록 선택할 수 있습니다.          |
|자동 승인(자동 승인)    |   자동 승인은 개인 링크 서비스에 대한 자동 액세스를 제어합니다. 자동 승인 목록에 지정된 구독은 해당 구독의 개인 끝점에서 연결을 요청하면 자동으로 승인됩니다.          |
|로드 밸론터 프런트 엔드 IP 구성(로드밸런스프론엔드Ip구성)    |    개인 링크 서비스는 표준 로드 밸러서의 프런트 엔드 IP 주소와 연결됩니다. 서비스로 향하는 모든 트래픽은 SLB의 프런트 엔드에 도달합니다. SLB 규칙을 구성하여 이 트래픽을 응용 프로그램이 실행 중인 적절한 백 엔드 풀로 안내할 수 있습니다. 로드 밸래서 프런트 엔드 IP 구성은 NAT IP 구성과 다릅니다.      |
|NAT IP 구성(ipConfigurations)    |    이 속성은 개인 링크 서비스에 대 한 NAT (네트워크 주소 번역) IP 구성을 참조 합니다. NAT IP는 서비스 공급자의 가상 네트워크의 모든 서브넷에서 선택할 수 있습니다. 개인 링크 서비스는 개인 링크 트래픽에서 대상 측 NAT-ing을 수행합니다. 이렇게 하면 소스(소비자 측)와 대상(서비스 공급자) 주소 공간 간에 IP 충돌이 발생하지 않습니다. 대상 측(서비스 공급자 측)에서 NAT IP 주소는 서비스에서 전송되는 모든 패킷에 대해 서비스 및 대상 IP에서 수신한 모든 패킷에 대해 소스 IP로 표시됩니다.       |
|프라이빗 엔드포인트 연결(프라이빗 엔드포인트연결)     |  이 속성은 개인 링크 서비스에 연결하는 개인 끝점을 나열합니다. 여러 개인 끝점이 동일한 개인 링크 서비스에 연결할 수 있으며 서비스 공급자는 개별 개인 끝점에 대한 상태를 제어할 수 있습니다.        |
|TCP 프록시 V2(인에이블프록시프로토콜)     |  이 속성을 사용하면 서비스 공급자가 tcp 프록시 v2를 사용하여 서비스 소비자에 대한 연결 정보를 검색할 수 있습니다. 서비스 공급자는 프록시 프로토콜 v2 헤더를 구문 분석할 수 있도록 수신기 구성을 설정합니다.        |
|||


### <a name="details"></a>세부 정보

- 프라이빗 링크 서비스는 동일한 리전에서 승인된 개인 엔드포인트에서 액세스할 수 있습니다. 프라이빗 엔드포인트는 프라이빗 VPN 또는 ExpressRoute 연결을 사용하여 동일한 가상 네트워크, 지역적으로 피어있는 VNet, 전역피어VNet 및 온프레미스에서 도달할 수 있습니다. 
 
- 개인 링크 서비스를 만들 때 리소스의 수명 주기에 대해 네트워크 인터페이스가 만들어집니다. 이 인터페이스는 고객이 관리할 수 없습니다.
 
- 프라이빗 링크 서비스는 가상 네트워크 및 표준 로드 밸러커와 동일한 지역에 배포되어야 합니다.  
 
- 단일 개인 링크 서비스는 다른 VNet, 구독 및/또는 Active Directory 테넌에 속하는 여러 개인 엔드포인트에서 액세스할 수 있습니다. 연결워크를 통해 연결이 설정됩니다. 
 
- 서로 다른 프런트 엔드 IP 구성을 사용하여 동일한 표준 로드 밸러저에서 여러 개인 링크 서비스를 만들 수 있습니다. 표준 로드 밸러저 및 구독당 만들 수 있는 개인 링크 서비스의 수에는 제한이 있습니다. 자세한 내용은 [Azure 제한을](https://docs.microsoft.com/azure/azure-resource-manager/management/azure-subscription-service-limits#networking-limits)참조하십시오.
 
- 개인 링크 서비스에는 두 개 이상의 NAT IP 구성이 연결되어 있을 수 있습니다. 두 개 이상의 NAT IP 구성을 선택하면 서비스 공급자가 확장할 수 있습니다. 오늘날 서비스 공급자는 개인 링크 서비스당 최대 8개의 NAT IP 주소를 할당할 수 있습니다. 각 NAT IP 주소를 사용하면 TCP 연결에 더 많은 포트를 할당하여 확장할 수 있습니다. 개인 링크 서비스에 여러 NAT IP 주소를 추가한 후에는 NAT IP 주소를 삭제할 수 없습니다. 이는 NAT IP 주소를 삭제하는 동안 활성 연결이 영향을 받지 않도록 하기 위한 것입니다.


## <a name="alias"></a>Alias

**별칭은** 서비스에 대한 전 세계적으로 고유한 이름입니다. 그것은 당신이 당신의 서비스에 대한 고객 데이터를 마스크하는 동시에 서비스에 대한 공유하기 쉬운 이름을 만드는 데 도움이됩니다. 개인 링크 서비스를 만들 때 Azure는 고객과 공유할 수 있는 서비스에 대한 별칭을 생성합니다. 고객은 이 별칭을 사용하여 서비스에 대한 연결을 요청할 수 있습니다.

별칭은 *접두사*: 세 부분으로 구성되어 있습니다. *GUID*. *접미사*

- 접두사는 서비스 이름입니다. 고유한 접두사를 선택할 수 있습니다. "별칭"을 만든 후에는 변경할 수 없으므로 접두사를 적절하게 선택합니다.  
- GUID는 플랫폼에 의해 제공됩니다. 이렇게 하면 이름을 전역적으로 고유하게 만들 수 있습니다. 
- 접미사는 *Azure에*의해 추가됩니다. 

전체 별칭: *접두사*. {GUID}. *지역*.azure.private링크 서비스  

## <a name="control-service-exposure"></a>제어 서비스 노출

개인 링크 서비스는 "가시성" 설정을 통해 서비스 노출을 제어할 수 있는 옵션을 제공합니다. 소유한 다른 VNet에서 사용할 수 있도록 서비스를 비공개로 설정하거나(RBAC 권한만 해당), 신뢰할 수 있는 제한된 구독 집합에 대한 노출을 제한하거나, 모든 Azure 구독이 개인 링크에서 연결을 요청할 수 있도록 공용으로 설정할 수 있습니다. 서비스. 가시성 설정은 소비자가 서비스에 연결할 수 있는지 여부를 결정합니다. 

## <a name="control-service-access"></a>서비스 액세스 제어

개인 링크 서비스에 노출(가시성 설정에 의해 제어됨)을 갖는 소비자는 VNet에 개인 엔드포인트를 만들고 개인 링크 서비스에 대한 연결을 요청할 수 있습니다. 개인 끝점 연결은 개인 링크 서비스 개체의 "보류 중" 상태로 만들어집니다. 서비스 공급자는 연결 요청에 대한 역할을 담당합니다. 연결을 승인하거나 연결을 거부하거나 연결을 삭제할 수 있습니다. 승인된 연결만 개인 링크 서비스로 트래픽을 보낼 수 있습니다.

연결 승인 작업은 개인 링크 서비스의 자동 승인 속성을 사용하여 자동화할 수 있습니다. 자동 승인은 서비스 공급자가 서비스에 대한 자동 액세스를 위해 일련의 구독을 미리 승인하는 기능입니다. 고객은 서비스 공급자가 자동 승인 목록에 추가하려면 구독을 오프라인으로 공유해야 합니다. 자동 승인은 가시성 배열의 하위 집합입니다. 가시성은 노출 설정을 제어하는 반면 자동 승인은 서비스에 대한 승인 설정을 제어합니다. 고객이 자동 승인 목록의 구독에서 연결을 요청하면 연결이 자동으로 승인되고 연결이 설정됩니다. 서비스 공급자는 더 이상 요청을 수동으로 승인할 필요가 없습니다. 반면에 고객이 자동 승인 배열이 아닌 가시성 배열의 구독에서 연결을 요청하는 경우 요청은 서비스 공급자에게 전달되지만 서비스 공급자는 수동으로 연결을 승인해야 합니다.

## <a name="getting-connection-information-using-tcp-proxy-v2"></a>TCP 프록시 v2를 사용하여 연결 정보 얻기

개인 링크 서비스를 사용하는 경우 개인 엔드포인트에서 오는 패킷의 소스 IP 주소는 공급자의 가상 네트워크에서 할당된 NAT IP를 사용하여 서비스 공급자 측에서 NAT(네트워크 주소)로 변환됩니다. 따라서 응용 프로그램은 서비스 소비자의 실제 소스 IP 주소 대신 할당된 NAT IP 주소를 받습니다. 응용 프로그램에 소비자 측의 실제 소스 IP 주소가 필요한 경우 서비스에서 프록시 프로토콜을 사용하도록 설정하고 프록시 프로토콜 헤더에서 정보를 검색할 수 있습니다. 원본 IP 주소 외에도 프록시 프로토콜 헤더는 개인 끝점의 LinkID도 전달합니다. 소스 IP 주소와 LinkID를 조합하면 서비스 공급자가 소비자를 고유하게 식별하는 데 도움이 될 수 있습니다. 프록시 프로토콜에 대한 자세한 내용은 [여기를 방문하십시오.](https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt) 

이 정보는 다음과 같이 사용자 지정 유형 길이 값(TLV) 벡터를 사용하여 인코딩됩니다.

사용자 지정 TLV 세부 정보:

|필드 |길이(옥텟)  |설명  |
|---------|---------|----------|
|Type  |1        |PP2_TYPE_AZURE (0xEE)|
|길이  |2      |값의 길이|
|값  |1     |PP2_SUBTYPE_AZURE_PRIVATEENDPOINT_LINKID (0x01)|
|  |4        |전용 끝점의 LINKID를 나타내는 UINT32(4바이트)입니다. 작은 엔디안 형식으로 인코딩됩니다.|

 > [!NOTE]
 > 서비스 공급자는 개인 링크 서비스에서 프록시 프로토콜을 사용할 때 [사양에](https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt) 따라 프록시 프로토콜 헤더를 구문 분석하도록 표준 로드 밸런서 뒤에 있는 서비스가 구성되었는지 확인해야 합니다. 개인 링크 서비스에서 프록시 프로토콜 설정을 사용하도록 설정했지만 서비스 공급자의 서비스가 헤더를 구문 분석하도록 구성되지 않은 경우 요청이 실패합니다. 마찬가지로 개인 링크 서비스에서 설정이 활성화되지 않은 동안 서비스 공급자의 서비스가 프록시 프로토콜 헤더를 예상하는 경우 요청이 실패합니다. 프록시 프로토콜 설정이 활성화되면 헤더에 클라이언트 정보가 없더라도 호스트에서 백 엔드 가상 머신까지 의 HTTP/TCP 상태 프로브에도 프록시 프로토콜 헤더가 포함됩니다. 

## <a name="limitations"></a>제한 사항

다음은 개인 링크 서비스를 사용할 때 알려진 제한 사항입니다.
- 표준 로드 밸론저에서만 지원 
- IPv4 트래픽만 지원
- TCP 트래픽만 지원

## <a name="next-steps"></a>다음 단계
- [Azure PowerShell을 사용하여 개인 링크 서비스 만들기](create-private-link-service-powershell.md)
- [Azure CLI를 사용하여 개인 링크 서비스 만들기](create-private-link-service-cli.md)
