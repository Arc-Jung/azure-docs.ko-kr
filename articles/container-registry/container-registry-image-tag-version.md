---
title: 이미지 태그 모범 사례
description: Azure 컨테이너 레지스트리에서 이미지를 푸시하고 가져올 때 Docker 컨테이너 이미지에 태그를 지정하고 버전 관리하는 모범 사례
author: stevelasker
ms.topic: article
ms.date: 07/10/2019
ms.author: stevelas
ms.openlocfilehash: b483317960409fe1fbea181706f12375606fe659
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/27/2020
ms.locfileid: "75445744"
---
# <a name="recommendations-for-tagging-and-versioning-container-images"></a>컨테이너 이미지 에 태그 지정 및 버전 지정에 대한 권장 사항

컨테이너 이미지를 컨테이너 레지스트리에 배포한 다음 배포할 때 이미지 태그 지정 및 버전 관리 전략이 필요합니다. 이 문서에서는 컨테이너 수명 주기 동안 각각 맞는 두 가지 방법 및 각 방법에 대해 설명합니다.

* **안정 태그** - 예를 들어 *mycontainerimage:1.0과*같은 주 또는 부 버전을 나타내기 위해 재사용하는 태그입니다.
* **고유 태그** - *mycontainerimage:abc123*와 같은 레지스트리에 푸시하는 각 이미지에 대해 다른 태그입니다.

## <a name="stable-tags"></a>안정적인 태그

**권장 사항**: 안정적인 태그를 사용하여 컨테이너 빌드의 **기본 이미지를** 유지 관리합니다. 이러한 태그는 업데이트를 계속 수신하고 프로덕션 환경에서 불일치를 유발할 수 있으므로 안정적인 태그가 있는 배포는 피하십시오.

*안정적인 태그는* 개발자 또는 빌드 시스템이 업데이트를 계속 받는 특정 태그를 계속 끌어올 수 있습니다. 안정은 내용이 동결된 것을 의미하지 않습니다. 오히려 안정은 해당 버전의 의도에 따라 이미지가 안정적이어야 한다는 것을 의미합니다. "안정적"을 유지하기 위해 보안 패치 또는 프레임워크 업데이트를 적용하는 데 서비스될 수 있습니다.

### <a name="example"></a>예제

프레임워크 팀은 버전 1.0을 제공합니다. 그들은 사소한 업데이트를 포함하여 업데이트를 제공 할 것이라는 것을 알고 있습니다. 주어진 주 및 부 버전에 대한 안정적인 태그를 지원하기 위해 두 세트의 안정적인 태그가 있습니다.

* `:1`– 주요 버전에 대한 안정적인 태그. `1`은 "최신" 또는 "최신" 1.* 버전을 나타냅니다.
* `:1.0`- 버전 1.0에 대한 안정적인 태그로, 개발자가 1.0의 업데이트에 바인딩할 수 있으며 출시 될 때 1.1로 롤포워드되지 않습니다.

또한 팀은 현재 `:latest` 주 버전이 무엇이든 간에 최신 안정 태그를 가리키는 태그를 사용합니다.

기본 이미지 업데이트를 사용할 수 있거나 프레임워크의 모든 유형의 서비스 릴리스를 사용할 수 있는 경우 안정 태그가 있는 이미지가 해당 버전의 최신 릴리스를 나타내는 최신 다이제스트로 업데이트됩니다.

이 경우 주 태그와 부 태그가 모두 지속적으로 서비스되고 있습니다. 기본 이미지 시나리오에서 이를 통해 이미지 소유자는 서비스 이미지를 제공할 수 있습니다.

### <a name="delete-untagged-manifests"></a>태그가 지정되지 않은 매니페스트 삭제

안정적인 태그가 있는 이미지가 업데이트되면 이전에 태그가 지정된 이미지의 태그가 지정되지 않아 분리된 이미지가 생성됩니다. 이전 이미지의 매니페스트 및 고유한 계층 데이터는 레지스트리에 남아 있습니다. 레지스트리 크기를 유지하려면 안정적인 이미지 업데이트로 인해 태그가 지정되지 않은 매니페스트를 주기적으로 삭제할 수 있습니다. 예를 들어 지정된 기간보다 오래된 태그가 지정되지 않은 [매니페스트를 자동으로 제거하거나](container-registry-auto-purge.md) 태그가 지정되지 않은 매니페스트에 대한 [보존 정책을](container-registry-retention-policy.md) 설정합니다.

## <a name="unique-tags"></a>고유 태그

**권장 사항**: **배포,** 특히 여러 노드에서 확장할 수 있는 환경에서 고유한 태그를 사용합니다. 일관된 버전의 구성 요소를 의도적으로 배포할 수 있습니다. 컨테이너가 다시 시작하거나 오케스트레이터가 더 많은 인스턴스를 확장하면 호스트가 실수로 다른 노드와 일치하지 않는 최신 버전을 가져오지 않습니다.

고유한 태그 지정은 레지스트리에 푸시된 모든 이미지에 고유한 태그가 있음을 의미합니다. 태그는 다시 사용되지 않습니다. 다음과 같은 고유한 태그를 생성하기 위해 따를 수 있는 몇 가지 패턴이 있습니다.

* **날짜-시간 스탬프** - 이미지가 빌드된 시기를 명확하게 알 수 있으므로 이 방법은 매우 일반적입니다. 그러나 빌드 시스템과 다시 상관 관계를 맺는 방법은 무엇입니까? 동시에 완료된 빌드를 찾아야 합니까? 어떤 시간대에 있습니까? 모든 빌드 시스템이 UTC로 보정되나요?
* **Git 커밋** - 기본 이미지 업데이트를 지원하기 시작할 때까지 이 접근 방식이 작동합니다. 기본 이미지 업데이트가 발생하면 빌드 시스템이 이전 빌드와 동일한 Git 커밋으로 시작됩니다. 그러나 기본 이미지에는 새 콘텐츠가 있습니다. 일반적으로 Git 커밋은 *세미-안정*태그를 제공합니다.
* **매니페스트 다이제스트** - 컨테이너 레지스트리로 푸시된 각 컨테이너 이미지는 고유한 SHA-256 해시 또는 다이제스트로 식별되는 매니페스트와 연결됩니다. 고유하지만 다이제스트는 길고 읽기 어렵고 빌드 환경과 상관관계가 없습니다.
* **빌드 ID** - 이 옵션은 증분 가능성이 높으며 특정 빌드와 다시 상관 관계를 지정하여 모든 아티팩트와 로그를 찾을 수 있기 때문에 가장 적합할 수 있습니다. 그러나 매니페스트 다이제스트처럼 사람이 읽기어려울 수 있습니다.

  조직에 여러 빌드 시스템이 있는 경우 태그를 빌드 시스템 이름으로 접두사하는 `<build-system>-<build-id>`것은 이 옵션의 변형입니다. 예를 들어 빌드를 API 팀의 Jenkins 빌드 시스템과 웹 팀의 Azure 파이프라인 빌드 시스템과 구분할 수 있습니다.

### <a name="lock-deployed-image-tags"></a>배포된 이미지 태그 잠금

가장 좋은 방법은 배포된 이미지 태그를 `write-enabled` `false`로 설정하여 [잠그는](container-registry-image-lock.md) 것이 좋습니다. 이렇게 하면 실수로 레지스트리에서 이미지를 제거하고 배포를 방해할 수 없습니다. 릴리스 파이프라인에 잠금 단계를 포함할 수 있습니다.

배포된 이미지를 잠그면 Azure 컨테이너 레지스트리 기능을 사용하여 레지스트리에서 배포되지 않은 다른 이미지를 제거하여 레지스트리를 유지할 수 있습니다. 예를 들어 태그가 지정되지 않은 매니페스트 또는 잠금 해제된 이미지를 지정된 기간보다 오래 된 [자동 제거하거나](container-registry-auto-purge.md) 태그가 지정되지 않은 매니페스트에 대한 [보존 정책을](container-registry-retention-policy.md) 설정합니다.

## <a name="next-steps"></a>다음 단계

이 문서의 개념에 대한 자세한 내용은 블로그 게시물 [Docker 태그 지정: 도커 이미지 태그 지정 및 버전 지정에 대한 모범 사례를](https://stevelasker.blog/2018/03/01/docker-tagging-best-practices-for-tagging-and-versioning-docker-images/)참조하십시오.

Azure 컨테이너 레지스트리의 성능 및 비용 효율적인 사용을 최대화하려면 [Azure 컨테이너 레지스트리에 대한 모범 사례를](container-registry-best-practices.md)참조하십시오.

<!-- IMAGES -->


<!-- LINKS - Internal -->

