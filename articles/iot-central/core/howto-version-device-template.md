---
title: Azure IoT Central 앱의 디바이스 템플릿 버전 관리 이해 | Microsoft Docs
description: 새 버전을 만들어 라이브 연결된 디바이스에 영향을 주지 않고 디바이스 템플릿을 반복합니다.
author: sarahhubbard
ms.author: sahubbar
ms.date: 04/24/2020
ms.topic: how-to
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: 772521a8d3181721270d7fe4dbd11b7807c8d90e
ms.sourcegitcommit: b9d4b8ace55818fcb8e3aa58d193c03c7f6aa4f1
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/29/2020
ms.locfileid: "82583662"
---
# <a name="create-a-new-device-template-version"></a>새 디바이스 템플릿 버전 만들기

*이 문서는 솔루션 빌더 및 디바이스 개발자에게 적용됩니다.*

장치 템플릿에는 장치가 IoT Central와 상호 작용 하는 방식을 설명 하는 스키마가 포함 되어 있습니다. 이러한 상호 작용에는 원격 분석, 속성 및 명령이 포함 됩니다. 장치와 IoT Central 응용 프로그램 모두 정보를 교환 하기 위해이 스키마에 대 한 공유 이해를 사용 합니다. 계약을 위반 하지 않고 스키마에 대 한 제한 된 변경만 수행할 수 있으므로 대부분의 스키마 변경에는 새 버전의 장치 템플릿이 필요 합니다. 장치 템플릿 버전 관리를 사용 하면 이전 장치가 이해 하는 스키마 버전을 계속 사용할 수 있지만, 최신 또는 업데이트 된 장치는 이후 스키마 버전을 사용 합니다.

장치 템플릿의 스키마는 DCM (장치 기능 모델) 및 해당 인터페이스에 정의 되어 있습니다. 장치 템플릿에는 클라우드 속성, 표시 사용자 지정 및 보기와 같은 기타 정보가 포함 됩니다. 장치가 IoT Central와 데이터를 교환 하는 방법을 정의 하지 않는 장치 템플릿의 해당 부분을 변경 하는 경우 템플릿의 버전을 지정할 필요가 없습니다.

운영자가 버전 업데이트를 사용할 수 있는지 여부에 관계 없이 장치 템플릿 변경 내용을 게시 해야 합니다. IoT Central는 먼저 템플릿의 버전을 관리 하지 않고 장치 템플릿에 대 한 주요 변경 내용을 게시 하는 것을 중지 합니다.

> [!NOTE]
> 장치 템플릿을 만드는 방법에 대해 자세히 알아보려면 [장치 템플릿 설정 및 관리](howto-set-up-template.md) 를 참조 하세요.

## <a name="versioning-rules"></a>버전 관리 규칙

이 섹션에서는 장치 템플릿에 적용 되는 버전 관리 규칙을 요약 합니다. DCMs와 인터페이스는 모두 버전 번호를 포함 합니다. 다음 코드 조각은 환경 센서 장치에 대 한 DCM을 보여 줍니다. DCM에는 **Deviceinformation** 및 환경 **al센서**의 두 가지 인터페이스가 있습니다. `@id` 필드의 끝에서 버전 번호를 볼 수 있습니다. IoT Central UI에서이 정보를 보려면 장치 템플릿 편집기에서 **Id 보기** 를 선택 합니다.

```json
{
  "@id": "urn:contoso:sample_device:1",
  "@type": "CapabilityModel",
  "implements": [
    {
      "@id": "urn:contoso:sample_device:deviceinfo:1",
      "@type": "InterfaceInstance",
      "name": "deviceinfo",
      "schema": {
        "@id": "urn:azureiot:DeviceManagement:DeviceInformation:1",
        "@type": "Interface",
        "displayName": {
          "en": "Device Information"
        },
        "contents": [...
        ]
      }
    },
    {
      "@id": "urn:contoso:sample_device:sensor:1",
      "@type": "InterfaceInstance",
      "name": "sensor",
      "schema": {
        "@id": "urn:contoso:EnvironmentalSensor:2",
        "@type": "Interface",
        "displayName": {
          "en": "Environmental Sensor"
        },
        "contents": [...
        ]
      }
    }
  ],
  "displayName": {
    "en": "Environment Sensor Capability Model"
  },
  "@context": [
    "http://azureiot.com/v1/contexts/IoTModel.json"
  ]
}
```

* DCM이 게시 된 후에는 새 버전의 장치 템플릿에서도 인터페이스를 제거할 수 없습니다.
* DCM이 게시 된 후에는 새 버전의 장치 템플릿을 만들 때 인터페이스를 추가할 수 있습니다.
* DCM이 게시 된 후에는 새 버전의 장치 템플릿을 만들 때 인터페이스를 최신 버전으로 바꿀 수 있습니다. 예를 들어 센서 v1 장치 템플릿에서 환경 Al센서 v1 인터페이스를 사용 하는 경우 환경 Al센서 v2 인터페이스를 사용 하는 센서 v2 장치 템플릿을 만들 수 있습니다.
* 인터페이스를 게시 한 후에는 새 버전의 장치 템플릿에서도 인터페이스 콘텐츠를 제거할 수 없습니다.
* 인터페이스를 게시 한 후에는 인터페이스 및 장치 템플릿의 새 버전을 만드는 경우 인터페이스의 내용에 항목을 추가할 수 있습니다. 인터페이스에 추가할 수 있는 항목에는 원격 분석, 속성 및 명령이 포함 됩니다.
* 인터페이스를 게시 한 후에는 인터페이스 및 장치 템플릿의 새 버전을 만드는 경우 인터페이스에서 기존 항목에 대 한 비 스키마 변경을 수행할 수 있습니다. 인터페이스 항목의 스키마가 아닌 부분은 표시 이름 및 의미 체계 형식을 포함 합니다. 변경할 수 없는 인터페이스 항목의 스키마 부분은 이름, 기능 유형 및 스키마입니다.

다음 섹션에서는 IoT Central에서 장치 템플릿을 수정 하는 몇 가지 예를 안내 합니다.

## <a name="customize-the-device-template-without-versioning"></a>버전 관리 없이 장치 템플릿 사용자 지정

장치 기능의 특정 요소는 장치 템플릿 및 인터페이스의 버전이 없어도 편집할 수 있습니다. 예를 들어 이러한 필드 중 일부에는 표시 이름, 의미 체계 형식, 최소값, 최대값, 소수 자릿수, 색, 단위, 표시 단위, 주석 및 설명이 포함 됩니다. 다음 사용자 지정 중 하나를 추가 하려면:

1. **장치 템플릿** 페이지로 이동 합니다.
1. 사용자 지정 하려는 장치 템플릿을 선택 합니다.
1. **사용자 지정** 탭을 선택 합니다.
1. 장치 기능 모델에 정의 된 모든 기능이 여기에 나열 됩니다. 장치 템플릿 버전을 사용 하지 않고도 이러한 필드를 모두 편집, 저장 및 사용할 수 있습니다. 편집 하려는 필드가 읽기 전용 이면 장치 템플릿 버전을 변경 하 여 변경 해야 합니다. 편집할 필드를 선택 하 고 새 값을 입력 합니다.
1. **저장**을 클릭합니다. 이제 이러한 값은 장치 템플릿에 처음 저장 되었으며 응용 프로그램 전체에서 사용 되는 모든 항목을 재정의 합니다.

## <a name="version-a-device-template"></a>장치 템플릿 버전

새 버전의 장치 템플릿을 만들면 장치 기능 모델을 편집할 수 있는 템플릿 초안 버전이 생성 됩니다. 게시 된 모든 인터페이스는 개별적으로 버전이 지정 될 때까지 게시 된 상태로 유지 됩니다. 게시 된 인터페이스를 수정 하려면 먼저 새 장치 템플릿 버전을 만듭니다.

사용자 지정 섹션에서 편집할 수 없는 장치 기능 모델의 일부를 편집 하려는 경우에만 장치 템플릿 버전을 지정 합니다.

장치 템플릿 버전을 만들려면:

1. **장치 템플릿** 페이지로 이동 합니다.
1. 버전을 만들려고 하는 장치 템플릿을 선택 합니다.
1. 페이지 위쪽의 **버전** 단추를 클릭 하 고 템플릿에 새 이름을 지정 합니다. IoT Central는 편집할 수 있는 새 이름을 제안 합니다.
1. **만들기**를 클릭합니다.
1. 이제 장치 템플릿이 초안 모드입니다. 인터페이스가 여전히 잠겨 있는 것을 볼 수 있습니다. 수정 하려는 모든 인터페이스 버전을 표시 합니다.

## <a name="version-an-interface"></a>버전 인터페이스

인터페이스 버전 관리에서는 이미 만든 인터페이스 내에서 기능을 추가, 업데이트 및 제거할 수 있습니다.

인터페이스를 버전으로 하려면:

1. **장치 템플릿** 페이지로 이동 합니다.
1. 초안 모드에서 장치 템플릿을 선택 합니다.
1. 버전을 선택 하 고 편집 하려는 게시 된 모드의 인터페이스를 선택 합니다.
1. 인터페이스 페이지 위쪽에서 **버전** 단추를 클릭 합니다.
1. **만들기**를 클릭합니다.
1. 이제 인터페이스가 초안 모드입니다. 기존 사용자 지정 및 보기를 중단 하지 않고 인터페이스에 기능을 추가 하거나 편집할 수 있습니다.

## <a name="migrate-a-device-across-versions"></a>여러 버전에서 장치 마이그레이션

여러 버전의 디바이스 템플릿을 만들 수 있습니다. 시간이 지남에 따라 이러한 장치 템플릿을 사용 하 여 여러 장치를 연결 합니다. 한 버전의 디바이스 템플릿에서 다른 버전으로 디바이스를 마이그레이션할 수 있습니다. 다음 단계는 디바이스를 마이그레이션하는 방법을 설명합니다.

1. **Device Explorer** 페이지로 이동 합니다.
1. 다른 버전으로 마이그레이션할 디바이스를 선택합니다.
1. **마이그레이션**을 선택 합니다.
1. 장치를 마이그레이션하려는 버전 번호가 포함 된 장치 템플릿을 선택 하 고 **마이그레이션**을 선택 합니다.

![디바이스를 마이그레이션하는 방법](media/howto-version-device-template/pick-version.png)

## <a name="next-steps"></a>다음 단계

운영자 또는 솔루션 빌더 인 경우 제안 되는 다음 단계는 장치를 관리 하 [는 방법을](./howto-manage-devices.md)배우는 것입니다.

장치 개발자 인 경우 제안 되는 다음 단계는 [Azure IoT Edge 장치와 Azure IoT Central](./concepts-iot-edge.md)에 대해 읽어 보세요.
