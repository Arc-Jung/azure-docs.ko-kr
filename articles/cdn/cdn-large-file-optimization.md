---
title: "Azure CDN을 통해 대용량 파일 다운로드 최적화"
description: "대용량 파일 다운로드 최적화 자세히 알아보기"
services: cdn
documentationcenter: 
author: smcevoy
manager: erikre
editor: 
ms.assetid: 
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: v-semcev
ms.translationtype: Human Translation
ms.sourcegitcommit: 857267f46f6a2d545fc402ebf3a12f21c62ecd21
ms.openlocfilehash: 27e202b05f86eeee7071f3fae145caeba3d66827
ms.contentlocale: ko-kr
ms.lasthandoff: 06/28/2017

---
# <a name="large-file-download-optimization-via-azure-cdn"></a>Azure CDN을 통해 대용량 파일 다운로드 최적화

인터넷을 통해 전달되는 콘텐츠의 파일 크기가 기능 향상, 그래픽 개선, 풍부한 미디어 콘텐츠 등으로 인해 계속 커지고 있습니다. 이러한 현상은 광대역 침투, 더 크고 저렴한 저장 장치, 고화질 비디오의 확산, 인터넷 연결 장치(IoT) 등 여러 가지 요인을 기반으로 합니다.  이러한 대용량 파일에 대해 더 빠르고 효율적인 배달 메커니즘을 제공하는 것은 원활하고 즐거운 소비자 환경을 보장하는 데 중요합니다. 

대용량 파일 배달에는 몇 가지 내재된 문제가 있습니다. 첫째, 많은 응용 프로그램에서 모든 데이터를 순차적으로 다운로드하지 않을 수 있기 때문에 대용량 파일을 다운로드하는 평균 시간이 상당히 클 수 있습니다. 경우에 따라 응용 프로그램에서 파일의 처음 부분보다 먼저 마지막 부분을 다운로드할 수 있습니다. 따라서 적은 양의 파일만 요청하거나 사용자가 다운로드를 일시 중지하면 다운로드가 실패하거나 CDN이 원본에서 전체 파일을 검색한 후까지 지연될 수 있습니다. 

둘째, 인터넷에서 대용량 파일이 확산되면서 사용자는 사용자와 파일 간의 대기 시간으로 인해 결국 처리량이나 사용자가 콘텐츠를 볼 수 있는 속도가 결정되는 것을 종종 관찰합니다. 또한 네트워크 정체 및 용량 문제도 처리량에 추가로 영향을 주며, 이러한 문제는 서버와 최종 사용자 간에 더 멀어진 거리와 결합되어 패킷 손실이 발생할 수 있는 추가적인 기회를 만들 뿐만 아니라 품질도 저하시킵니다. 제한된 처리량으로 인한 품질 저하와 패킷 손실의 증가는 파일 다운로드가 완료될 때까지 대기 시간의 현저한 증가로 나타날 수 있습니다. 

마지막으로, 많은 대용량 파일의 일부가 배달되지 않습니다. 사용자가 다운로드를 중간에 취소하거나 긴 MP4 비디오의 처음 몇 분만 시청할 수 있습니다. 따라서 많은 소프트웨어 및 미디어 제공 회사는 파일에서 최종 사용자가 요청하는 부분만 제공하는 것이 유용합니다. 이러한 방식으로 요청된 부분만 가장 먼 인터넷 범위까지 효율적으로 배포하면 원본의 송신 트래픽이 줄어 원본 서버의 메모리 및 IO 압력도 줄어듭니다. 

Akamai의 Azure CDN은 규모에 따라 전 세계의 최종 사용자에게 효율적으로 대용량 파일을 배달하고 원본 서버의 부하를 줄이는 동시에 대기 시간을 줄일 수 있는 기능을 제공합니다. 이 기능은 "Standard Akamai" 가격 책정 계층을 사용하여 Azure CDN 프로필에 만들어진 Azure CDN 끝점에서 "Optimized For"(최적화됨) 기능을 통해 사용할 수 있습니다.

## <a name="configuring-cdn-endpoint-to-optimize-delivery-of-large-files"></a>대용량 파일의 배달을 최적화하도록 CDN 끝점 구성

끝점을 만드는 동안 "Optimized For"(최적화됨) 속성 선택에서 "대용량 파일 다운로드" 옵션을 선택하기만 하면 Azure Portal을 통해 대용량 파일의 배달을 최적화하도록 CDN 끝점을 구성할 수 있습니다. REST API나 클라이언트 SDK를 사용할 수도 있습니다. 아래 스크린샷에서는 Azure Portal을 통한 프로세스를 보여 줍니다.

![새 CDN 끝점](./media/cdn-large-file-optimization/01_Adding.png)  
 
*그림 1: CDN 프로필에서 새 CDN 끝점 추가*
 
![LFO 선택됨](./media/cdn-large-file-optimization/02_Creating.png)

*그림 2: 대용량 파일 다운로드 최적화가 선택된 CDN 끝점 만들기*

CDN 끝점을 만든 다음에는 특정 조건에 맞는 모든 파일에 대해 대용량 파일 최적화를 적용합니다. 다음 섹션에서는 이 부분에 대해 자세히 설명합니다.

## <a name="optimizing-for-delivery-of-large-files-with-azure-cdn-from-akamai"></a>Akamai의 Azure CDN을 사용하여 대용량 파일의 배달 최적화

Akamai의 Azure CDN에서는 대용량 파일 최적화 형식 기능을 사용하여 대용량 파일 배달의 속도 및 응답 속도를 향상시키는 네트워크 최적화 및 구성을 설정할 수 있습니다. Akamai의 일반 웹 배달에서는 1.8GB보다 작은 파일만 캐시하고 최대 150GB까지의 파일은 캐시하지 않고 터널링하는 반면 대용량 파일 최적화에서는 파일을 최대 150GB까지 캐시할 수 있습니다.

대용량 파일 최적화는 원본 서버의 작동 방식, 요청된 파일의 형식 및 요청된 파일의 크기와 관련하여 특정 조건을 충족하는 경우에 효과적입니다. 이러한 각 항목에 대해 자세히 살펴보기 전에 최적화의 작동 방식을 간략하게 검토해야 합니다. 

### <a name="object-chunking"></a>개체 청크 

Akamai의 Azure CDN은 대용량 파일이 요청될 때 원본에서 파일의 더 작은 부분을 검색하는 개체 청크라는 기술을 사용합니다. CDN 에지/POP 서버는 최종 사용자로부터 전체 또는 바이트 범위 파일 요청을 수신하면 먼저 파일 형식이 이 최적화에 대해 지원되는 파일 형식 목록에 속하는지와 파일 크기 요구 사항을 충족하는지 여부를 확인합니다. 파일 크기가 10MB보다 큰 경우 CDN 에지 서버는 원본 서버에서 2MB 단위로 파일 요청을 시작합니다. 청크가 CDN 에지에 도착하면 CDN이 다음 청크를 병렬로 '프리페치'하는 동안 해당 청크는 캐시되어 바로 최종 사용자에게 제공됩니다. 이 "프리페치"는 사용자 앞에 한 청크를 유지하고 최종 사용자의 대기 시간을 줄임으로써 더 빨리 콘텐츠를 사용할 수 있도록 합니다. 이 프로세스는 전체 파일이 다운로드(최종 사용자가 전체 파일을 요청한 경우)되거나, 요청한 모든 바이트 범위를 사용(최종 사용자가 바이트 범위를 요청한 경우)할 수 있거나, 클라이언트에서 연결을 종료할 때까지 계속됩니다. 

바이트 범위 요청에 대한 세부 정보는 [RFC 7233](https://tools.ietf.org/html/rfc7233)에서 확인할 수 있습니다.

CDN은 수신되는 모든 청크를 캐시하므로 CDN 캐시에서 전체 파일을 캐시할 필요가 없습니다. 파일 또는 바이트 범위에 대한 후속 요청은 CDN 캐시에서 제공되며 일부 청크가 CDN에서 캐시되지 않는 경우 '프리페치'를 사용하여 원본에서 캐시를 요청합니다. 살펴본 대로 이 최적화에서는 바이트 범위 요청을 지원하는 원본 서버를 사용합니다. _원본 서버에서 바이트 범위 요청을 지원하지 않는 경우 이 최적화가 적용되지 않습니다._ 

### <a name="caching"></a>구성
대용량 파일은 일반 배달과 다른 기본 캐싱 만료 시간을 사용합니다. HTTP 응답 코드에 따라 양수 캐싱과 음수 캐싱을 구분합니다. 원본에서 응답의 Cache-Control 또는 Expires 헤더를 통해 만료 시간을 사용하여 시간을 지정하는 경우 CDN은 항상 해당 값을 적용합니다. 원본에서 지정하지 않은 경우 파일이 이 최적화 형식에 대한 파일 형식 및 파일 크기 조건 목록과 일치하면 CDN은 대용량 파일 최적화에 대한 기본값을 사용합니다. 그러지 않으면 CDN은 일반 웹 배달에 대한 기본값을 사용합니다.

 
|    | 일반 웹 | 대용량 파일 최적화 
--- | --- | --- 
캐싱 - 양수 <br> HTTP 200, 203, 300, <br> 301, 302 및 410 | 7 일 |1일  
캐싱 - 음수 <br> HTTP 204, 305, 404 <br> 및 405 | 없음 | 1초 

### <a name="dealing-with-origin-failure"></a>원본 오류 처리

대용량 파일 최적화 형식에서는 원본 읽기 시간 제한 길이가 일반 웹 배달의 2초에서 2분으로 늘어나 크기가 더 큰 파일의 연결 시간이 너무 빨리 초과되지 않도록 합니다.

일반 웹 배달에서처럼 연결 시간이 초과되면 504 게이트웨이 시간 초과 오류를 클라이언트로 보내기 전에 특정 횟수 만큼 다시 시도합니다. 

### <a name="conditions-for-large-file-optimization"></a>대용량 파일 최적화에 대한 조건

다음 표에서는 대용량 파일 최적화를 위해 충족되어야 하는 조건 집합을 보여 줍니다.

조건 | 값 
--- | --- 
지원되는 파일 형식 | 3g2, 3gp, asf, avi, bz2, dmg, exe, f4v, flv, <br> gz, hdp, iso, jxr, m4v, mkv, mov, mp4, <br> mpeg, mpg, mts, pkg, qt, rm, swf, tar, <br> tgz, wdp, webm, webp, wma, wmv, zip  
최소 파일 크기 | 10MB 
최대 파일 크기 | 150GB 
원본 서버 특성 | 바이트 범위 요청을 지원해야 함 

## <a name="optimizing-for-delivery-of-large-files-with-azure-cdn-from-verizon"></a>Verizon의 Azure CDN을 사용하여 대용량 파일의 배달 최적화

Verizon의 Azure CDN은 파일 크기에 제한 없이 대용량 파일을 배달할 수 있으며 대용량 파일의 배달을 보다 빠르게 하는 다양한 기능이 기본적으로 설정되어 있습니다.

### <a name="complete-cache-fill"></a>전체 캐시 채우기

Verizon의 Azure CDN에는 초기 요청이 중단되거나 손실되는 경우 CDN에서 파일을 캐시로 끌어오는 전체 캐시 채우기라는 기본 기능이 있습니다. 

이 기능은 일반적으로 사용자가 처음부터 끝까지 다운로드하지 않는 대규모 자산(예: 점진적 다운로드 비디오)에 가장 유용합니다. 따라서 이 기능은 기본적으로 Verizon의 Azure CDN에서 사용하도록 설정되며, 기본 동작은 에지 서버에서 원본 서버에 있는 자산의 백그라운드 페치를 시작하도록 하는 것입니다. 그런 다음 자산이 에지 서버의 로컬 캐시에 저장됩니다. 전체 개체가 캐시에 있는 경우 에지는 CDN에 대한 바이트 범위 요청을 캐시된 개체에 대해 수행할 수 있습니다.

기본 전체 캐시 채우기 동작은 Verizon 프리미엄 계층의 규칙 엔진을 통해 해제할 수 있습니다.

### <a name="peer-cache-fill-hotfiling"></a>피어 캐시 채우기 핫파일링(Hotfiling)

Verizon Azure CDN의 기본 기능으로, 정교한 독점 알고리즘에서 대역폭 및 집계 요청과 같은 메트릭을 기반으로 하는 추가 에지 캐싱 서버를 활용하여 매우 자주 사용되는 큰 개체에 대해 클라이언트 요청을 수행할 수 있습니다. 그러면 많은 수의 추가 요청이 고객의 원본 서버로 전송되는 상황을 방지합니다. 

### <a name="conditions-for-large-file-optimization"></a>대용량 파일 최적화에 대한 조건

Verizon에 대한 최적화 기능은 기본적으로 설정되어 있으며 최대 파일 크기에 제한이 없습니다. 

## <a name="additional-considerations"></a>추가 고려 사항

이 최적화 형식을 사용할 때 추가적으로 고려할 몇 가지 측면이 있습니다.
 
### <a name="azure-cdn-from-akamai"></a>Akamai의 Azure CDN

- 청크 프로세스는 원본 서버에 대한 추가 요청을 생성하지만 청크로 인해 CDN의 캐싱 특성이 향상되기 때문에 원본에서 배달된 데이터의 전체 볼륨은 현저하게 작아집니다.
- 파일의 더 작은 부분을 배달하기 때문에 원본에서 메모리 및 IO 압력이 감소되는 이점도 추가됩니다. 
- CDN에서 캐시되는 청크의 경우 콘텐츠가 캐시에서 만료되거나 다른 이유로 인해 캐시에서 제거될 때까지 원본에 대한 추가 요청이 없습니다. 
- 사용자는 CDN에 대해 범위 요청을 수행할 수 있으며 이러한 요청은 일반 파일처럼 처리됩니다. 최적화는 파일 형식이 유효하고 바이트 범위가 10MB에서 150GB 사이인 경우에만 적용됩니다. 요청된 평균 파일 크기가 10MB보다 작은 경우 일반 웹 배달을 대신 사용하는 것이 좋습니다.

### <a name="azure-cdn-from-verizon"></a>Verizon의 Azure CDN

일반 웹 배달 최적화에서 대용량 파일을 배달할 수 있습니다.

