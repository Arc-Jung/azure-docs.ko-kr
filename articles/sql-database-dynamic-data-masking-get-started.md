<properties 
   pageTitle="SQL 데이터베이스 동적 데이터 마스킹 시작" 
   description="SQL 데이터베이스 동적 데이터 마스킹을 시작하는 방법" 
   services="sql-database" 
   documentationCenter="" 
   authors="nadavhelfman" 
   manager="jeffreyg" 
   editor="v-romcal"/>

<tags
   ms.service="sql-database"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="data-services" 
   ms.date="02/24/2015"
   ms.author="nadavh; ronmat; v-romcal; v-stste"/>

# SQL 데이터베이스 동적 데이터 마스킹 시작 

## 개요

SQL 데이터베이스 동적 데이터 마스킹에서는 권한이 없는 사용자에 대해 중요한 데이터를 마스킹해 표시함으로써 데이터 노출을 제한합니다. 동적 데이터 마스킹은 V12 버전 Azure SQL 데이터베이스의 기본, 표준 및 프리미엄 서비스 계층에서 미리 보기로 제공됩니다.

동적 데이터 마스킹을 수행하면 고객이 응용 프로그램 레이어에 대한 영향을 최소화하면서 표시할 중요한 데이터의 양을 지정할 수 있도록 하여 중요한 데이터에 대한 무단 액세스를 방지할 수 있습니다. 동적 데이터 마스킹은 지정된 데이터베이스 필드에 대한 쿼리의 결과 집합에서 중요한 데이터를 숨기는 정책 기반 보안 기능입니다. 이때 데이터베이스의 데이터 자체는 변경되지 않습니다.

예를 들어 콜 센터 지원 담당자는 주민 등록 번호나 신용 카드 번호 중 몇 자리로 발신자를 식별할 수 있지만 이러한 데이터 항목이 지원 담당자에게 완전히 노출되어서는 안 됩니다. 이러한 경우 개발자는 결과 집합에서 주민 등록 번호 또는 신용 카드 번호의 마지막 4자리를 제외한 모든 숫자를 마스킹하도록 각 쿼리 결과에 적용할 마스킹 규칙을 정의할 수 있습니다. 또 다른 예로, 개발자는 적합한 데이터 마스크를 사용하여 PII(개인 식별이 가능한 정보) 데이터를 보호하여 준수 규정을 위반하지 않고 문제 해결을 위해 프로덕션 환경을 쿼리할 수 있습니다.

## SQL 데이터베이스 동적 데이터 마스킹 관련 기본 사항

Azure 관리 포털에서 동적 데이터 마스킹 정책을 설정한 다음 데이터베이스에 액세스하는 응용 프로그램이나 다른 클라이언트에서 사용하는 보안 사용 연결 문자열을 통해 설정을 완료합니다.

### 동적 데이터 마스킹 사용 권한

Azure 데이터베이스 관리자, 서버 관리자 또는 보안 관리자 역할이 동적 데이터 마스킹을 구성할 수 있습니다.

### 동적 데이터 마스킹 정책

* **권한 있는 로그인** - SQL 쿼리 결과에서 마스킹되지 않은 데이터를 가져올 수 있는 로그인 집합입니다.
  
* **마스킹 규칙** - 마스킹하도록 지정되는 필드와 사용할 마스킹 기능을 정의하는 규칙 집합입니다. 데이터베이스 테이블 이름과 열 이름을 사용하거나 별칭 이름을 사용하여 마스킹하도록 지정되는 필드를 정의할 수 있습니다.

* **마스킹 기준** - 원본 또는 대상에서 수행할 수 있습니다. 마스킹은 **테이블** 이름 및 **열** 이름을 확인하여 원본 수준에서 구성할 수도 있고 쿼리에 사용되는 **별칭**을 확인하여 결과 수준에서 구성할 수도 있습니다. 데이터베이스의 데이터 아키텍처를 잘 알고 있는 경우 모든 쿼리 결과가 표시되지 않도록 제한하려면 원본 마스크 규칙을 사용하는 것이 좋습니다. 데이터베이스 데이터 아키텍처를 분석하지 않고 쿼리 결과 표시를 제한하려는 경우 또는 다른 원본의 필드를 지정하려는 경우에는 결과 마스크 규칙을 추가할 수 있습니다.  
  
* **확장된 제한** - 중요한 데이터의 표시를 제한합니다. 이때 일부 응용 프로그램의 기능을 사용하지 못하게 될 수 있습니다.

>[AZURE.TIP] 데이터베이스에 직접 액세스하여 문제 해결을 위해 SQL 쿼리를 실행하는 개발자에 대한 액세스를 제한하려면 **확장된 제한** 옵션을 사용합니다.

* **마스킹 기능** - 각 시나리오에서 데이터 표시를 제어하는 방법 집합입니다.

| 마스킹 기능 | 마스킹 논리 |
|----------|---------------|
| **기본값**  |**지정된 필드의 데이터 형식에 따라 모든 데이터를 마스킹합니다.**<br/><br/>• 문자열 데이터 형식(nchar, ntext, nvarchar)의 필드 크기가 8자 미만이면 XXXXXXXX개 이하의 X를 사용합니다.<br/>• 숫자 데이터 형식(bigint, bit, decimal, int, money, numeric, smallint, smallmoney, tinyint, float, real)의 경우 0 값을 사용합니다.<br/>• 날짜/시간 데이터 형식(date, datetime2, datetime, datetimeoffset, smalldatetime, time)의 경우 현재 시간을 사용합니다.<br/>• SQL 변형의 경우 현재 형식의 기본값이 사용됩니다.<br/>• XML의 경우 <masked/> 문서가 사용됩니다.<br/>• 특수 데이터 형식(타임스탬프 테이블, hierarchyid, GUID, 이진, 이미지, varbinary 공간 형식)의 경우 빈 값을 사용합니다.
| **신용 카드** |**지정된 필드의 마지막 4자리를 표시하고** 신용 카드 형식 접두사로 상수 문자열을 추가하는 마스킹 방법입니다.<br/><br/>XXXX-XXXX-XXXX-1234|
| **주민 등록 번호** |**지정된 필드의 마지막 2자리를 표시하고** 주민 등록 번호 형식 접두사로 상수 문자열을 추가하는 마스킹 방법입니다.<br/><br/>XXX-XX-XX12 |
| **전자 메일** | **전자 메일 주소 형식 접두사로 상수 문자열을 사용하여** 첫 글자와 도메인을 표시하는 마스킹 방법입니다.<br/><br/>aXX@XXXX.com |
| **난수** | **선택한 경계 및 실제 데이터 형식에 따라** 난수를 생성하는 마스킹 방법입니다. 지정된 경계가 같으면 마스킹 기능으로 상수가 사용됩니다.<br/><br/>![Navigation pane][Image1] |
| **사용자 지정 텍스트** | **첫 글자와 마지막 글자를 표시하고 가운데에** 사용자 지정 안쪽 여백 문자열을 추가하는 마스킹 방법입니다.<br/>접두사[안쪽 여백]접미사<br/><br/>![Navigation pane][Image2] |

  
<a name="Anchor1"></a>
### 보안 지원 연결 문자열

동적 데이터 마스킹을 설정할 때 Azure에서는 데이터베이스에 대한 보안 지원 연결 문자열을 제공합니다. 이 연결 문자열을 사용하는 클라이언트에서만 중요한 데이터가 동적 데이터 마스킹 정책에 따라 마스킹됩니다. 응용 프로그램 등의 기존 클라이언트도 새 연결 문자열 형식을 사용하도록 업데이트해야 합니다.

* 원래 연결 문자열 형식: <*서버 이름*>.database.windows.net
* 보안 지원 연결 문자열: <*서버 이름*>.database.**secure**.windows.net

**보안 지원 액세스** 설정을 **옵션**에서 **필수**로 변경할 수도 있습니다. 이렇게 하면 원래 연결 문자열로 데이터베이스에 액세스하는 옵션은 제공되지 않으며 동적 데이터 마스킹 정책은 무시됩니다. 개발 단계의 응용 프로그램이나 SSMS와 같은 특정 클라이언트를 사용하여 동적 데이터 마스킹을 시범적으로 적용해 볼 때는 **옵션**을 선택하고 프로덕션 환경에서는 **필수**를 선택하세요.<br/><br/>

![Navigation pane][Image3]<br/><br/>

## Azure 관리 포털을 사용하여 데이터베이스에 대한 동적 데이터 마스킹 설정

1. [https://portal.azure.com](https://portal.azure.com)에서 Azure 관리 포털을 시작합니다.
	 
2. 마스킹할 중요한 데이터가 포함된 데이터베이스의 구성 블레이드로 이동합니다.
	
3. **동적 데이터 마스킹** 타일을 클릭하여 **동적 데이터 마스킹** 구성 블레이드를 시작합니다.

	* 아래쪽의 **작업** 섹션으로 스크롤한 다음 **동적 데이터 마스킹**을 클릭해도 됩니다.
	 
	![Navigation pane][Image4]<br/><br/>

4. **동적 데이터 마스킹** 구성 블레이드에서 **사용**을 클릭하여 동적 데이터 마스킹 기능을 사용하도록 설정합니다.

	![Navigation pane][Image5]<br/><br/>

5. 마스킹되지 않은 중요한 데이터에 액세스할 수 있어야 하는 권한이 있는 로그인을 입력합니다.
 
	![Navigation pane][Image6]

	>[AZURE.TIP] 응용 프로그램 레이어에서 권한이 있는 응용 프로그램 사용자에 대해 중요한 데이터를 표시할 수 있도록 지정하려면 쿼리에 사용되는 응용 프로그램과 데이터베이스의 SQL 로그인을 추가합니다. 중요한 데이터의 노출을 최소화하려면 이 목록에는 최소한의 로그인만 포함하는 것이 좋습니다.

6. **마스크 추가**를 클릭하여 **마스킹 규칙 추가** 구성 블레이드를 엽니다.
	
7. **마스크 기준**을 선택하여 마스킹을 수행할 위치(원본 또는 대상)를 지정합니다. 마스킹은 **테이블** 이름 및 **열** 이름을 확인하여 원본 수준에서 구성할 수도 있고 쿼리에 사용되는 **별칭**을 확인하여 결과 수준에서 구성할 수도 있습니다. 데이터베이스의 데이터 아키텍처를 잘 알고 있는 경우 모든 쿼리 결과가 표시되지 않도록 제한하려면 원본 마스크 규칙을 사용하는 것이 좋습니다. 데이터베이스 데이터 아키텍처를 분석하지 않고 쿼리 결과 표시를 제한하려는 경우 또는 다른 원본의 필드를 지정하려는 경우에는 결과 마스크 규칙을 추가할 수 있습니다.

8. **테이블** 이름 및 **열** 이름이나 **별칭** 이름을 입력하여 마스킹하도록 지정되는 필드를 정의합니다.

9. 중요한 데이터 마스킹 범주 목록에서 **마스킹 필드 형식**을 선택합니다.

	![Navigation pane][Image7]<br/><br/>		

10. 데이터 마스킹 규칙 블레이드에서 **저장**을 클릭하여 동적 마스킹 정책의 마스킹 규칙 집합을 업데이트합니다.

11. 임시 쿼리를 통해 중요한 데이터 표시를 제한하는 **확장된 제한 사용**을 선택할 수 있습니다.

12. 데이터 마스킹 구성 블레이드에서 **저장**을 클릭하여 신규 또는 업데이트된 마스킹 규칙을 저장합니다.

13. **보안 지원 액세스** 아래에서 **옵션** 또는 **필수**를 클릭합니다. 자세한 내용은 [보안 지원 연결 문자열]를(#Anchor1)참조하세요.

	![Navigation pane][Image8]
	
## 기존 Azure 포털을 사용하여 데이터베이스에 대한 동적 데이터 마스킹 설정

1. [https://manage.windowsazure.com](https://manage.windowsazure.com)에서 기존 Azure 관리 포털을 시작합니다.

2. 마스킹할 데이터베이스를 클릭하고 **감사 및 보안** 탭을 클릭합니다.

3. **동적 데이터 마스킹**에서 **사용**을 클릭하여 동적 데이터 마스킹 기능을 사용하도록 설정합니다.  

4. 마스킹되지 않은 중요한 데이터에 액세스할 수 있어야 하는 권한이 있는 로그인을 입력합니다.

	>[AZURE.TIP] 응용 프로그램 레이어에서 권한이 있는 응용 프로그램 사용자에 대해 중요한 데이터를 표시할 수 있도록 지정하려면 쿼리에 사용되는 응용 프로그램 로그인과 데이터베이스를 추가합니다. 중요한 데이터의 노출을 최소화하려면 이 목록에는 최소한의 로그인만 포함하는 것이 좋습니다.

	![Navigation pane][Image9]

5. 페이지 아래쪽의 메뉴 모음에서 **마스크 추가**를 클릭하여 마스킹 규칙 구성 창을 엽니다.

6. **마스크 기준**을 선택하여 마스킹을 수행할 위치(원본 또는 대상)를 지정합니다. 마스킹은 **테이블** 이름 및 **열** 이름을 확인하여 원본 수준에서 구성할 수도 있고 쿼리에 사용되는 **별칭**을 확인하여 결과 수준에서 구성할 수도 있습니다. 데이터베이스의 데이터 아키텍처를 잘 알고 있는 경우 모든 쿼리 결과가 표시되지 않도록 제한하려면 원본 마스크 규칙을 사용하는 것이 좋습니다. 데이터베이스 데이터 아키텍처를 분석하지 않고 쿼리 결과 표시를 제한하려는 경우 또는 다른 원본의 필드를 지정하려는 경우에는 결과 마스크 규칙을 추가할 수 있습니다.

7. **테이블** 이름 및 **열** 이름이나 **별칭** 이름을 입력하여 마스킹하도록 지정되는 필드를 정의합니다.

8. 중요한 데이터 마스킹 범주 목록에서 **마스킹 기능**을 선택합니다.

	![Navigation pane][Image10] 
 	
9. 데이터 마스킹 규칙 창에서 **업데이트**를 클릭하여 동적 데이터 마스킹 정책의 마스킹 규칙 집합을 업데이트합니다.

10. 임시 쿼리를 통해 중요한 데이터 표시를 제한하는 **확장된 제한 사용**을 선택할 수 있습니다.

11. **저장**을 클릭하여 신규 또는 업데이트된 마스킹 규칙을 저장합니다.

## REST API를 사용하여 데이터베이스에 대한 동적 데이터 마스킹 설정

[Azure SQL 데이터베이스에 대한 작업](https://msdn.microsoft.com/library/dn505719.aspx)을 참조하세요.

[Image1]: ./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png
[Image2]: ./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png
[Image3]: ./media/sql-database-dynamic-data-masking-get-started/3_DDM_Current_Preview.png
[Image4]: ./media/sql-database-dynamic-data-masking-get-started/4_DDM_Activation.png
[Image5]: ./media/sql-database-dynamic-data-masking-get-started/5_DMM_Policy_Tile.png
[Image6]: ./media/sql-database-dynamic-data-masking-get-started/6_DDM_Privileged_Logins.png
[Image7]: ./media/sql-database-dynamic-data-masking-get-started/7_DDM_Add_Masking_Rule.png
[Image8]: ./media/sql-database-dynamic-data-masking-get-started/8_DDM_Security_Enabled_Access.png
[Image9]: ./media/sql-database-dynamic-data-masking-get-started/9_DMM_Policy_Classic_Portal.png
[Image10]: ./media/sql-database-dynamic-data-masking-get-started/10_DDM_Add_Masking_Rule_Classic_Portal.png
<!--HONumber=47-->
