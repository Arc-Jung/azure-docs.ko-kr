<properties 
	pageTitle="자동 크기 조정 및 앱 서비스 환경" 
	description="자동 크기 조정 및 앱 서비스 환경" 
	services="app-service"
	documentationCenter=""
	authors="btardif" 
	manager="wpickett" 
	editor="" 
/>

<tags 
	ms.service="app-service" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="05/18/2016" 
	ms.author="byvinyal"
/>
	
#자동 크기 조정 및 앱 서비스 환경

##소개
**앱 서비스 환경**은 자동 크기 조정을 지원합니다. 메트릭 또는 일정에 따라 개별 작업자 풀을 자동 크기 조정하도록 허용하면 됩니다.
 
![][intro]
 
자동 크기 조정을 사용하면 **앱 서비스 환경**을 예산 및 부하 프로필에 맞게 자동으로 증대 및 축소하여 리소스 사용을 최적화할 수 있습니다.

##작업자 풀 자동 크기 조정 구성 
**작업자 풀**의 설정 탭에서 자동 크기 조정 기능에 액세스할 수 있습니다.
 
![][settings-scale]

이 곳의 인터페이스는 **앱 서비스 계획**을 확장할 때와 동일한 환경이므로 상당히 친숙할 것입니다. 크기 조정 값을 직접 입력할 수 있습니다.
 
![][scale-manual]
 
또는 자동 크기 조정 프로필을 구성합니다.
 
![][scale-profile]
 
자동 크기 조정 프로필은 크기에 대한 제한을 설정하는 데 유용합니다. 이렇게 하면 하한 크기 값(1)을 설정하여 일관된 성능 환경을 유지하고 상한(2)을 설정하여 예측 가능한 지출 한도를 정할 수 있습니다.
 
![][scale-profile2]
 
프로필을 정의한 후에는 메트릭 기반 자동 크기 조정 규칙이 자동 추가되어, 프로필에서 정의한 범위 안에서 **작업자 풀**의 인스턴스 수를 늘이거나 줄입니다.

![][scale-rule]

 **작업자 풀** 또는 **프런트엔드** 메트릭을 사용하여 자동 크기 조정 규칙을 정의할 수 있습니다. 이는 리소스 블레이드 그래프에서 모니터링하거나 그에 대한 알림을 설정할 수 있는 동일한 메트릭입니다.
 
##자동 크기 조정 예
**앱 서비스 환경**의 자동 크기 조정은 시나리오를 살펴보면서 가장 잘 설명할 수 있습니다. 이 문서에서는 자동 크기 조정을 설정할 때 필요한 모든 고려 사항과, ASE에서 호스팅되는 **앱 서비스 환경**의 자동 크기 조정에 반영하게 되는 모든 상호 작용을 살펴봅니다.

###시나리오 소개
Frank는 한 기업의 시스템 관리자로, 자신이 관리하는 워크로드의 일부를 **앱 서비스 환경**으로 마이그레이션했습니다.

**앱 서비스 환경**은 다음과 같이 수동 크기 조정으로 구성되었습니다.
* 프런트 엔드: 3
* 작업자 풀 1: 10
* 작업자 풀 2: 5
* 작업자 풀 3: 5

**작업자 풀 1**은 프로덕션 워크로드에, **작업자 풀 2** 및 **작업자 풀 3**은 QA 및 개발 워크로드에 사용됩니다.

QA 및 개발에 사용되는 **앱 서비스 계획**은 **수동 크기 조정**으로 구성되었지만 프로덕션 **앱 서비스 계획**은 **자동 크기 조정**으로 설정되어 부하 및 트래픽의 변화를 처리합니다.

Frank는 이 응용 프로그램에 매우 익숙하며, 직원들이 근무 중에 사용하는 **LOB 응용 프로그램**이기 때문에 부하 피크 시간은 오전 9시부터 오후 6시까지임을 알고 있습니다. 사용자가 퇴근한 후에는 사용량이 줍니다. 그러나 사용자가 모바일 장치나 가정용 컴퓨터를 사용하여 원격으로 액세스할 수 있기 때문에 어느 정도의 부하는 지속됩니다. 프로덕션 **앱 서비스 계획**은 ㅇ미 다음 규칙을 기준으로 CPU 사용량에 따라 **자동 크기 조정**을 수행하도록 구성되어 있습니다.

![][asp-scale]

|	**자동 크기 조정 프로필 - 주중 - 앱 서비스 계획** |	**자동 크기 조정 프로필 - 주말 - 앱 서비스 계획** |
|	----------------------------------------------------	|	----------------------------------------------------	|
|	**이름:** 주중 프로필 |	**이름:** 주말 프로필 |
|	**크기 조정 기준:** 일정 및 성능 규칙 |	**크기 조정 기준:** 일정 및 성능 규칙 |
|	**프로필:** 주중 |	**프로필:** 주말 |
|	**유형:** 반복 |	**유형:** 반복 |
|	**대상 범위:** 5~20개 인스턴스 |	**대상 범위:** 3~10개 인스턴스 |
|	**요일:** 월요일, 화요일, 수요일, 목요일, 금요일 |	**요일:** 토요일, 일요일 |
|	**시작 시간:** 오전 9시 |	**시작 시간:** 오전 9시 |
|	**표준 시간대:** UTC-08 |	**표준 시간대:** UTC-08 |
| | |
|	**자동 크기 조정 규칙(확장)** |	**자동 크기 조정 규칙(확장)** |
|	**리소스:** 프로덕션(앱 서비스 환경) |	**리소스:** 프로덕션(앱 서비스 환경) |
|	**메트릭:** CPU % |	**메트릭:** CPU % |
|	**작업:** 60% 초과 |	**작업:** 80% 초과 |
|	**기간:** 5분 |	**기간:** 10분 |
|	**집계 시간:** 평균 |	**집계 시간:** 평균 |
|	**작업:** 개수 2씩 증가 |	**작업:** 개수 1씩 증가 |
|	**정지(분):** 15 |	**정지(분):** 20 |
| | |
|	**자동 크기 조정 규칙(축소)** |	**자동 크기 조정 규칙(축소)** |
|	**리소스:** 프로덕션(앱 서비스 환경) |	**리소스:** 프로덕션(앱 서비스 환경) |
|	**메트릭:** CPU % |	**메트릭:** CPU % |
|	**작업:** 30% 미만 |	**작업:** 20% 미만 |
|	**기간:** 10분 |	**기간:** 15분 |
|	**집계 시간:** 평균 |	**집계 시간:** 평균 |
|	**작업:** 개수 1씩 감소 |	**작업:** 개수 1씩 감소 |
|	**정지(분):** 20 |	**정지(분):** 10 |

###앱 서비스 인플레이션 팽창
자동 크기 조정으로 구성된 **앱 서비스 계획**은 시간당 최대 속도에서 작업을 수행합니다. 이 속도는 자동 크기 조정 규칙에서 제공한 값을 기준으로 산출됩니다.

**작업자 풀**의 크기 조정 변경은 순간적으로 적용되는 것이 아니라 다소 시간이 소요되므로 **앱 서비스 환경** **작업자 풀**에서 **앱 서비스 인플레이션 속도**를 이해하고 산출하는 것이 중요합니다.

**앱 서비스 계획** 인플레이션 속도는 다음과 같이 산출됩니다.

![][ASP-Inflation]

프로덕션 **앱 서비스 계획**의 *주중* 프로필에 대한 *자동 크기 조정 - 확장* 규칙을 기준으로, 이 작업은 다음과 같습니다.

![][Equation1]

프로덕션 **앱 서비스 계획**의 *주말* 프로필에 대한 *자동 크기 조정 - 확장* 규칙을 기준으로, 수식은 다음과 같이 산출됩니다.

![][Equation2]

이 값은 축소 작업에 대해서도 산출할 수 있습니다.

프로덕션 **앱 서비스 계획**의 *주중* 프로필에 대한 *자동 크기 조정 - 축소* 규칙을 기준으로, 이 작업은 다음과 같습니다.

![][Equation3]

프로덕션 **앱 서비스 계획**의 *주중* 프로필에 대한 *자동 크기 조정 - 축소* 규칙을 기준으로, 수식은 다음과 같이 산출됩니다.

![][Equation4]

즉, 프로덕션 **앱 서비스 계획**이 주중에는 최대 **8**개 인스턴스/시간 속도로, 주말에는 **4**개 인스턴스/시간의 속도로 확장될 수 있습니다. 또한 주중에는 최대 **4**개 인스턴스/시간의 속도로, 주말에는 최대 **6**개 인스턴스/시간의 속도로 인스턴스를 해제할 수 있습니다.

여러 **앱 서비스 계획**을 **작업자 풀**에서 호스트하는 경우 **총 인플레이션 속도**를 산출해야 하며 **작업자 풀**에서 호스트되는 모든 **앱 서비스 계획**에 대한 인플레이션 속도의 *합계*로 나타낼 수 있습니다.

![][ASP-Total-Inflation]

###앱 서비스 계획 인플레이션 속도를 사용하여 작업자 풀 자동 크기 조정 규칙 정의
자동 크기 조정을 수행하도록 구성된 **앱 서비스 계획**을 호스팅하는 **작업자 풀**은 자동 크기 조정 작업이 필요에 따라 **앱 서비스 계획**을 확장/축소할 수 있게 용량 버퍼를 할당 받아야 합니다. 최소 버퍼 크기는 산출된 **총 앱 서비스 계획 인플레이션 속도**입니다.

**앱 서비스 환경** 크기 조정 작업을 적용하려면 다소 시간이 걸리므로, 이러한 변경은 크기 조정 작업이 진행 중인 동안 발생할 수 있는 추가적인 수요 변화에 대처할 수 있어야 합니다. 이 때문에 산출된 **총 앱 서비스 계획 인플레이션 속도**를 각 자동 크기 조정 작업에 대해 추가된 최소 인스턴스 수로 사용하는 것이 좋습니다.

이 정보를 통해 Frank는 다음 자동 크기 조정 프로필과 규칙을 정의할 수 있습니다.

![][Worker-Pool-Scale]

|	**자동 크기 조정 프로필 – 주중** |	**자동 크기 조정 프로필 – 주말** |
|	----------------------------------------------------	|	--------------------------------------------	|
|	**이름:** 주중 프로필 |	**이름:** 주말 프로필 |
|	**크기 조정 기준:** 일정 및 성능 규칙 |	**크기 조정 기준:** 일정 및 성능 규칙 |
|	**프로필:** 주중 |	**프로필:** 주말 |
|	**유형:** 반복 |	**유형:** 반복 |
|	**대상 범위:** 13~25개 인스턴스 |	**대상 범위:** 6~15개 인스턴스 |
|	**요일:** 월요일, 화요일, 수요일, 목요일, 금요일 |	**요일:** 토요일, 일요일 |
|	**시작 시간:** 오전 7시 |	**시작 시간:** 오전 9시 |
|	**표준 시간대:** UTC-08 |	**표준 시간대:** UTC-08 |
| | |
|	**자동 크기 조정 규칙(확장)** |	**자동 크기 조정 규칙(확장)** |
|	**리소스:** 작업자 풀 1 |	**리소스:** 작업자 풀 1 |
|	**메트릭:** WorkersAvailable |	**메트릭:** WorkersAvailable |
|	**작업:** 8 미만 |	**작업:** 3 미만 |
|	**기간:** 20분 |	**기간:** 30분 |
|	**집계 시간:** 평균 |	**집계 시간:** 평균 |
|	**작업:** 개수 8씩 증가 |	**작업:** 개수 3씩 증가 |
|	**정지(분):** 180 |	**정지(분):** 180 |
| | |
|	**자동 크기 조정 규칙(축소)** |	**자동 크기 조정 규칙(축소)** |
|	**리소스:** 작업자 풀 1 |	**리소스:** 작업자 풀 1 |
|	**메트릭:** WorkersAvailable |	**메트릭:** WorkersAvailable |
|	**작업:** 8 초과 |	**작업:** 3 초과 |
|	**기간:** 20분 |	**기간:** 15분 |
|	**집계 시간:** 평균 |	**집계 시간:** 평균 |
|	**작업:** 개수 2씩 감소 |	**작업:** 개수 3씩 감소 |
|	**정지(분):** 120 |	**정지(분):** 120 |

프로필에서 정의한 대상 범위는 **앱 서비스 계획**에 대한 프로필에서 정의한 최소 인스턴스 수 + 버퍼로 산출됩니다.

최대 범위는 **작업자 풀**에서 호스팅되는 모든 **앱 서비스 계획**에 대한 모든 최대 범위의 합계가 됩니다.

확장 규칙의 증가 수는 확장을 위한 **앱 서비스 계획 인플레이션 속도**에 1배 이상으로 설정되어야 합니다.

수 축소는 축소에 대한 **앱 서비스 계획 인플레이션 속도**의 1/2배 ~ 1배 사이에서 조정할 수 있습니다.

###프런트엔드 풀의 자동 크기 조정
**프런트엔드** 자동 크기 조정 규칙은 **작업자 풀**보다 간단합니다. 여기서 핵심은 측정 기간과 중지 타이머에서 **앱 서비스 계획**의 크기 조정 작업이 일시적으로 일어나지 않는다는 점을 반영하는 것입니다.

이 시나리오에서 Frank는 프런트엔드의 CPU 사용률이 80%에 도달하면 오류 비율이 증가한다는 사실을 알고 있으며 이를 방지하기 위해 다음과 같이 인스턴스를 증대하는 자동 확장 규칙을 설정합니다.
 
![][Front-End-Scale]
  
|	**자동 크기 조정 프로필 – 프런트엔드** |
|	--------------------------------------------	|
|	**이름:** 자동 크기 조정 - 프런트엔드 |
|	**크기 조정 기준:** 일정 및 성능 규칙 |
|	**프로필:** 매일 |
|	**유형:** 반복 |
|	**대상 범위:** 3~10개 인스턴스 |
|	**요일:** 매일 |
|	**시작 시간:** 오전 9시 |
|	**표준 시간대:** UTC-08 |
| |
|	**자동 크기 조정 규칙(확장)** |
|	**리소스:** 프런트엔드 풀 |
|	**메트릭:** CPU % |
|	**작업:** 60% 초과 |
|	**기간:** 20분 |
|	**집계 시간:** 평균 |
|	**작업:** 개수 3씩 증가 |
|	**정지(분):** 120 |
| |
|	**자동 크기 조정 규칙(축소)** |
|	**리소스:** 작업자 풀 1 |
|	**메트릭:** CPU % |
|	**작업:** 30% 미만 |
|	**기간:** 20분 |
|	**집계 시간:** 평균 |
|	**작업:** 개수 3씩 감소 |
|	**정지(분):** 120 |

<!-- IMAGES -->
[intro]: ./media/app-service-environment-auto-scale/introduction.png
[settings-scale]: ./media/app-service-environment-auto-scale/settings-scale.png
[scale-manual]: ./media/app-service-environment-auto-scale/scale-manual.png
[scale-profile]: ./media/app-service-environment-auto-scale/scale-profile.png
[scale-profile2]: ./media/app-service-environment-auto-scale/scale-profile-2.png
[scale-rule]: ./media/app-service-environment-auto-scale/scale-rule.png
[asp-scale]: ./media/app-service-environment-auto-scale/asp-scale.png
[ASP-Inflation]: ./media/app-service-environment-auto-scale/asp-inflation-rate.png
[Equation1]: ./media/app-service-environment-auto-scale/equation1.png
[Equation2]: ./media/app-service-environment-auto-scale/equation2.png
[Equation3]: ./media/app-service-environment-auto-scale/equation3.png
[Equation4]: ./media/app-service-environment-auto-scale/equation4.png
[ASP-Total-Inflation]: ./media/app-service-environment-auto-scale/asp-total-inflation-rate.png
[Worker-Pool-Scale]: ./media/app-service-environment-auto-scale/wp-scale.png
[Front-End-Scale]: ./media/app-service-environment-auto-scale/fe-scale.png

<!---HONumber=AcomDC_0518_2016-->