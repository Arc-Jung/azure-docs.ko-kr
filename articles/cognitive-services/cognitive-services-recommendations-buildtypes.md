<properties
	pageTitle="빠른 시작 가이드: 기계 학습 권장 사항 API | Microsoft Azure"
	description="Azure 기계 학습 권장 사항 - 빠른 시작 가이드"
	services="cognitive-services"
	documentationCenter=""
	authors="luiscabrer"
	manager="paulettm"
	editor="cgronlun"/>

<tags
	ms.service="cognitive-services"
	ms.workload="data-services"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="05/24/2016"
	ms.author="luisca"/>

#  빌드 형식 및 모델 품질 #

<a name="TypeofBuilds"></a>
## 지원되는 빌드 형식 ##

Recommendations API는 현재 두 가지 빌드 형식 *권장 사항* 및 *FBT* 빌드를 지원합니다. 각각은 다양한 알고리즘을 사용하여 빌드되고 각각은 서로 다른 장점이 있습니다. 이 문서에서는 이러한 각 빌드와 생성된 모델의 품질을 비교하기 위한 기술에 대해 설명합니다.

[빠른 시작 가이드](cognitive-services-recommendations-quick-start.md)를 아직 완료하지 않았다면 먼저 완료하는 것이 좋습니다.

<a name="RecommendationBuild"></a>
### 권장 사항 빌드 형식 ###

권장 사항 빌드 형식은 행렬 인수 분해를 사용하여 권장 사항을 제공합니다. 각 항목을 설명하도록 트랜잭션 기반의 [잠재 기능](https://en.wikipedia.org/wiki/Latent_variable) 벡터를 생성한 다음 이러한 잠재 벡터를 사용하여 유사한 항목을 비교합니다.

전자 제품 스토어에서 이루어진 구매를 기반으로 모델을 학습하고 모델에 대한 입력으로 Lumia 650 휴대폰을 제공한다면 Lumia 650 휴대폰을 구입할 가능성이 있는 사용자가 구매할 경향이 있는 항목의 집합을 반환합니다. 항목은 상호 보완적이지 않을 수 있습니다. 이 예제에서는 Lumia 650을 좋아하는 사용자가 다른 휴대폰을 좋아할 수도 있으므로 다른 휴대폰이 반환될 수 있습니다.

권장 사항 빌드에는 매력적인 두 가지 기능이 있습니다.

**권장 사항 빌드는 *콜드 항목* 배치 지원**

중요한 사용 현황이 없는 항목을 콜드 항목이라고 합니다. 예를 들어 이전에 판 적이 없는 휴대폰이 배송된 경우 시스템은 트랜잭션에서 이 제품에 대한 권장 사항을 유추할 수 없습니다. 시스템이 제품 자체에 대한 정보를 배워야 하는 것을 의미합니다.

콜드 항목 배치를 사용하려는 경우 카탈로그에서 각 항목에 대한 기능 정보를 제공해야 합니다. 카탈로그의 처음 몇 줄이 다음과 같이 보일 수 있습니다(키=기능에 대한 값 형식).

>6CX-00001,Surface Pro2, Surface,, Type=Hardware, Storage=128 GB, Memory=4G, Manufacturer=Microsoft

>73H-00013,Wake Xbox 360,Gaming,, Type=Software, Language=English, Rating=Mature

>WAH-0F05,Minecraft Xbox 360,Gaming,, * Type=Software, Language=Spanish, Rating=Youth

다음과 같이 빌드 매개 변수를 설정해야 합니다.

| 빌드 매개 변수 | 참고 사항
|------------------     |-----------
|*useFeaturesInModel* | **true**로 설정합니다. 기능을 사용하여 권장 사항 모델을 개선할 수 있는지 나타냅니다.
|*allowColdItemPlacement* | **true**로 설정합니다. 권장 사항에서 기능 유사성을 통해 콜드 항목을 푸시해야 하는지 나타냅니다.
| *modelingFeatureList* | 권장 사항을 개선하기 위해 권장 사항 빌드에서 사용할 기능 이름의 쉼표로 구분된 목록입니다. 예를 들어 위의 예제의 경우 "Language,Storage"입니다.

**권장 사항 빌드는 사용자 권장 사항 지원**

권장 사항 빌드는 [사용자 권장 사항](https://westus.dev.cognitive.microsoft.com/docs/services/Recommendations.V4.0/operations/56f30d77eda5650db055a3dd)을 지원합니다. 해당 사용자에 대한 개인화된 권장 사항을 트랜잭션 기록을 기반으로 제공할 수 있음을 의미합니다. 사용자 권장 사항의 경우 해당 사용자에 대한 사용자 ID 또는 최근 트랜잭션 기록을 제공할 수 있습니다.

사용자 권장 사항을 적용할 수 있는 한 가지 전형적인 예는 사용자가 시작 페이지에서 로그인하는 경우입니다. 여기에서 특정 사용자에게 적용되는 콘텐츠를 승격할 수 있습니다.

사용자가 체크아웃하려고 하는 경우 권장 사항 빌드 형식을 적용할 수 있습니다. 이 때 사용자가 구매하려고 하는 항목의 목록이 있고 현재 장바구니에 따라 권장 사항을 제공할 수 있습니다.

#### 권장 사항 빌드 매개 변수

| 이름 | 	설명 |	 형식, <br> 유효한 값, <br>(기본값)
|-------|-------------------|------------------
| *NumberOfModelIterations* |	모델에서 수행하는 반복 횟수는 전체 계산 시간과 모델 정확도로 반영됩니다. 숫자가 높을수록 모델의 정확도는 높지만 계산 시간이 더 오래 걸립니다. |	 정수, <br> 10-50 <br>(40)
| *NumberOfModelDimensions* |	차원 수는 모델이 데이터 내에서 찾으려는 '기능' 수와 관련이 있습니다. 차원 수를 늘리면 결과를 더 작은 클러스터로 미세 조정할 수 있습니다. 그러나 차원 수가 너무 많으면 모델이 항목 간의 상관 관계를 찾지 못하게 됩니다. |	정수, <br> 10-40 <br>(20) |
| *ItemCutOffLowerBound* |	모델의 일부에 고려하기 위해 항목도 포함되어야 하는 사용 포인트의 최소 수를 정의합니다. |		정수, <br> 둘 이상<br>(2) |
| *ItemCutOffUpperBound* | 	모델의 일부에 고려하기 위해 항목도 포함되어야 하는 사용 포인트의 최대 수를 정의합니다. | 정수, <br>둘 이상<br>(2147483647) |
|*UserCutOffLowerBound* |	사용자가 모델의 일부에서 고려하기 위해 수행해야 하는 트랜잭션의 최소 수를 정의합니다. |	정수, <br> 둘 이상<br>(2)
| *UserCutOffUpperBound* |	사용자가 모델의 일부에서 고려하기 위해 수행해야 하는 트랜잭션의 최대 수를 정의합니다. |	정수, <br>둘 이상<br>(2147483647)|
| *UseFeaturesInModel* |	기능을 사용하여 권장 사항 모델을 개선할 수 있는지 나타냅니다. | 	 부울<br> 기본값: True
|*ModelingFeatureList* |	권장 사항을 개선하기 위해 권장 사항 빌드에서 사용할 기능 이름의 쉼표로 구분된 목록입니다. 이는 중요한 기능에 따라 달라집니다. |	문자열, 최대 512자
| *AllowColdItemPlacement* |	권장 사항에서 기능 유사성을 통해 콜드 항목을 푸시해야 하는지 나타냅니다. | 부울<br> 기본값: False
| *EnableFeatureCorrelation* | 추론에서 기능을 사용할 수 있는지 나타냅니다. |	부울<br> 기본값: False
| *ReasoningFeatureList* |	추론 문장(예: 권장 사항 설명)에 사용할 기능 이름의 쉼표로 구분된 목록입니다. 이는 고객에게 중요한 기능에 따라 달라집니다. | 문자열, 최대 512자
| *EnableU2I* |	U2I(사용자-항목 권장 사항)라고도 하는 개인 설정된 권장 구성을 사용하도록 설정합니다. | 부울<br> 기본값: True
|*EnableModelingInsights* |	모델링 정보 활용(즉, 전체 자릿수 및 다양성 메트릭)을 수집하기 위해 오프라인 평가를 수행할지 여부를 정의합니다. true로 설정한 경우 데이터의 하위 집합은 모델을 테스트하는 데 사용해야 하기 때문에 학습에 사용되지 않습니다. [오프라인 평가](#OfflineEvaluation)에 대해 자세히 알아보세요. | 부울<br> 기본값: False
| *SplitterStrategy* | 모델링 정보 활용이 *true*로 설정된 경우 평가를 위해 데이터를 분할해야 하는 방법입니다. | 문자열, *RandomSplitter* 또는 *LastEventSplitter* <br>기본값: RandomSplitter


<a name="FBTBuild"></a>
### FBT 빌드 형식 ###

FBT(함께 구입하는 경우가 많은 물품) 빌드는 두 개 또는 세 개의 서로 다른 제품이 공동으로 함께 발생하는 횟수를 계산하는 분석을 수행합니다. 그런 다음 유사성 함수(**co-occurrences**, **Jaccard**, **lift**)에 따라 집합을 정렬합니다.

**Jaccard** 및 **lift**를 공동 발생을 정규화하는 방법으로 생각해 보십시오. 즉, 항목은 실제로 시드 항목과 함께 구입된 경우에만 반환됩니다.

Lumia 650 휴대폰 예제에서 Lumia 650 휴대폰과 동일한 세션에서 휴대폰 X를 구입한 경우에만 휴대폰 X가 반환됩니다. 가능성이 없을 수 있으므로 반환될 Lumia 650에 대한 항목 보완, 예를 들어 화면 보호기 또는 Lumia 650에 대한 전원 어댑터를 예상합니다.

현재 두 항목은 동일한 사용자 ID 및 타임스탬프를 사용하여 트랜잭션에서 발생하는 경우 동일한 세션에서 구입되는 것으로 간주됩니다.

정의에 따라 두 항목은 동일한 트랜잭션 내에서 구매되는 것으로 예상되므로 FBT 빌드는 콜드 항목을 지원하지 않습니다. FBT 빌드가 항목 집합(트리플렛)을 반환할 수 있는 반면 입력으로 단일 시드 항목을 허용하므로 개인화된 권장 사항을 지원하지 않습니다.


#### FBT 빌드 매개 변수

| Name | 	설명 |		형식, <br> 유효한 값, <br>(기본값)
|-------|---------------|-----------------------
| *FbtSupportThreshold* | 모델의 보수적인 정도입니다. 모델링 시 고려할 항목의 공동 발생 횟수입니다. | 정수, <br> 3-50 <br>(6)
| *FbtMaxItemSetSize* | FBT 집합의 항목 수를 제한합니다.| 정수, <br> 2-3 <br>(2)
| *FbtMinimalScore* | 반환된 결과에 포함해야 할 FBT 집합의 최소 점수입니다. 높을수록 좋습니다. | 이중 <br> 0 이상 <br>(0)
| *FbtSimilarityFunction* | 빌드에서 사용할 유사성 함수를 정의합니다. **Lift**는 우연성을 우위에 두고, **co-occurrence**는 예측 가능성을 우위에 두며, **Jaccard**는 이 둘을 적절히 절충합니다. | 문자열, <br> <i>cooccurrence, lift, jaccard</i><br> 기본값: <i>jaccard</i>

<a name="SelectBuild"></a>
## 빌드 평가 및 선택 ##

위의 지침은 권장 사항 빌드 또는 FBT 빌드를 사용해야 할지 여부를 결정하는 데 도움이 될 수 있지만 둘 중 하나를 사용할 수 있는 경우에는 확실한 대답을 제공하지는 않습니다. 또한 FBT 빌드 형식을 사용하려는 것을 알고 있는 경우에도 유사성 함수로 **Jaccard** 또는 **lift**를 사용할지 여부를 결정할 수 있습니다.

두 개의 서로 다른 빌드 중에서 선택하는 가장 좋은 방법은 실제 환경에서 테스트하고(온라인 평가) 서로 다른 빌드에 대한 전환율을 추적하는 것입니다. 전환율은 권장 사항 표시의 실제 구입 수 또는 서로 다른 권장 사항을 표시하는 경우 실제 구매액의 권장 사항 클릭에 따라 측정될 수 있습니다. 비즈니스 목표에 따라 전환율 매트릭을 선택할 수도 있습니다.

경우에 따라 프로덕션에 적용하기 전에 오프라인으로 모델을 평가할 수 있습니다. 오프라인 평가는 온라인 평가에 대한 대체가 아니지만 메트릭으로 제공될 수 있습니다.

<a name="OfflineEvaluation"></a>
## 오프라인 평가  ##

오프라인 평가의 목적은 권장 사항의 정밀도(권장 사항 항목 중 하나를 구입할 사용자 수) 및 다양성(권장되는 항목 수)을 예측하는 것입니다. 정밀도 및 다양성 메트릭 평가의 일부로 시스템은 사용자의 샘플을 찾은 다음 해당 사용자에 대한 트랜잭션을 학습 데이터 집합과 테스트 데이터 집합의 두 그룹으로 분할합니다.

> [AZURE.NOTE] 오프라인 메트릭을 사용하려면 사용 현황 데이터의 타임스탬프가 있어야 합니다. 학습 및 테스트 데이터 집합 간에 사용을 올바르게 분할하는 데 시간 데이터가 필요합니다.

> 또한 오프라인 평가는 작은 사용 파일에 대한 결과를 산출합니다. 완벽한 평가를 위해 테스트 데이터 집합에서 최소 1,000 사용 포인트가 있어야 합니다.

<a name="Precision"></a>
### 정밀도-K ###
다음 표는 정밀도-k 오프라인 평가의 출력을 나타냅니다.

| K | 1 | 2 | 3 | 	4 | 	5
|---|---|---|---|---|---|
|백분율 |	13\.75 |	18\.04 | 21 |	24\.31 |	26\.61
|테스트 중인 사용자 |	10000 |	10000 |	10000 |	10000 |	10000
|간주되는 사용자 |	10000 |	10000 |	10000 |	10000 |	10000
|간주되지 않는 사용자 |	0 |	0 |	0 |	0 |	0

#### K
위의 표에서 *k*는 고객에게 표시되는 권장 사항 수를 나타냅니다. 표는 다음과 같이 읽습니다. "테스트 기간 중 고객에게 하나의 권장 사항만 표시되는 경우 사용자의 13.75만 해당 권장 사항을 구입합니다." 이 문장은 모델이 구입 데이터로 학습되었다고 가정합니다. 읽는 다른 방법은 정밀도-1은 13.75입니다.

더 많은 항목이 고객에게 표시될 수록 권장되는 항목을 구입하는 고객의 가능성이 높아지는 것을 알 수 있습니다. 위의 실험의 경우 5개의 항목이 권장되는 경우 확률은 26.61%의 거의 두 배입니다.

#### 백분율
표시된 *k* 권장 사항 중 하나 이상과 상호 작용하는 사용자의 비율입니다. 백분율은 간주되는 사용자의 총 수에 대해 하나 이상의 권장 사항과 상호 작용하는 사용자 수를 나누어 계산됩니다. 자세한 내용은 간주되는 사용자를 참조하세요.

#### 테스트 중인 사용자
이 행의 데이터는 테스트 데이터 집합에 있는 사용자의 총 수를 나타냅니다.

#### 간주되는 사용자
사용자는 시스템이 학습 데이터 집합을 사용하여 생성된 모델을 기반으로 하는 적어도 *k*개의 항목에서 권장되는 경우에만 간주됩니다.

#### 간주되지 않는 사용자
이 행의 데이터는 간주되지 않는 모든 사용자를 나타냅니다. 적어도 *k*개의 권장되는 항목을 받지 않은 사용자입니다.

간주되지 않는 사용자 = 테스트 중인 사용자 – 간주되는 사용자

<a name="Diversity"></a>
### 다양성 ###
다양성 메트릭은 권장되는 항목의 형식을 측정합니다. 다음 표는 다양성 오프라인 평가의 출력을 나타냅니다.

|버킷 백분위수 |	0-90| 90-99| 99-100
|------------------|--------|-------|---------
|백분율 | 34\.258 | 55\.127| 10\.615


권장되는 총 항목: 100000

권장되는 고유 항목: 954

#### 버킷 백분위수
각 백분위수 버킷은 범위(0에서 100 사이의 범위의 최소/최대값)로 표시됩니다. 100에 가까운 항목이 가장 인기 있는 항목이며 0에 가까운 항목이 가장 인기 없는 항목입니다. 예를 들어 99-100 백분위수 버킷에 대한 백분율 값이 10.6인 경우 권장 사항의 10.6%가 상위 1%의 가장 인기 있는 항목만 반환하는 것을 의미합니다. 백분위수 버킷 최소값이 포함되며 최대값은 100을 제외하고 제외됩니다.
#### 권장되는 고유 항목
권장되는 고유 메트릭은 평가에 대해 반환되는 고유 항목 수를 보여 줍니다.
#### 권장되는 총 항목
권장되는 총 항목 메트릭은 권장되는 항목 수를 보여 줍니다. 일부 항목이 중복될 수 있습니다.

<a name="ImplementingEvaluation"></a>
### 오프라인 평가 메트릭 ###
정밀도 및 다양성 오프라인 메트릭은 사용할 빌드를 선택하는 데 유용할 수 있습니다. 빌드 시 해당 FBT 또는 권장 사항 빌드 매개 변수의 일부로 다음을 수행합니다.

-	*enableModelingInsights* 빌드 매개 변수를 **true**로 설정합니다.
-	필요에 따라 *splitterStrategy*(*RandomSplitter* 또는 *LastEventSplitter* 중 하나)를 선택합니다. *RandomSplitter*는 지정된 *randomSplitterParameters* 테스트 비율 및 임의 시드 값에 따라 학습 및 테스트 집합에서 사용 현황 데이터를 분할합니다. *LastEventSplitter*는 각 사용자에 대한 마지막 트랜잭션에 따라 학습 및 테스트 집합에서 사용 현황 데이터를 분할합니다.

학습에 대한 데이터의 하위 집합만을 사용하는 빌드를 트리거하고 데이터의 나머지는 평가 메트릭을 계산하는 데 사용합니다. 빌드가 완료된 후 평가의 출력을 가져오려면 해당 *modelId* 및 *buildId*를 전달하는 [빌드 메트릭 API 가져오기](https://westus.dev.cognitive.microsoft.com/docs/services/Recommendations.V4.0/operations/577eaa75eda565095421666f)를 호출해야 합니다.

 다음은 동일한 평가에 대한 JSON 출력입니다.


    {
     "Result": {
     "precisionItemRecommend": null,
     "precisionUserRecommend": {
      "precisionMetrics": [
        {
          "k": 1,
          "percentage": 13.75,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        },
        {
          "k": 2,
          "percentage": 18.04,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        },
        {
          "k": 3,
          "percentage": 21.0,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        },
        {
          "k": 4,
          "percentage": 24.31,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        },
        {
          "k": 5,
          "percentage": 26.61,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        }
      ],
      "error": null
    },
    "diversityItemRecommend": null,
    "diversityUserRecommend": {
      "percentileBuckets": [
        {
          "min": 0,
          "max": 90,
          "percentage": 34.258
        },
        {
          "min": 90,
          "max": 99,
          "percentage": 55.127
        },
        {
          "min": 99,
          "max": 100,
          "percentage": 10.615
        }
      ],
      "totalItemsRecommended": 100000,
      "uniqueItemsRecommended": 954,
      "uniqueItemsInTrainSet": null,
      "error": null
      }
     },
    "Id": 1,
    "Exception": null,
    "Status": 5,
    "IsCanceled": false,
    "IsCompleted": true,
    "CreationOptions": 0,
    "AsyncState": null,
    "IsFaulted": false
    }

<!---HONumber=AcomDC_0824_2016-->