---
title: Id 모델
titleSuffix: An Azure Communication Services concept
description: Id 및 액세스 토큰에 대해 알아보기
author: tomaschladek
manager: nmurav
services: azure-communication-services
ms.author: tchladek
ms.date: 10/26/2020
ms.topic: conceptual
ms.service: azure-communication-services
ms.openlocfilehash: 336e708334778e107331f5f393476c4b3dbb98a3
ms.sourcegitcommit: 4bee52a3601b226cfc4e6eac71c1cb3b4b0eafe2
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/11/2020
ms.locfileid: "94507486"
---
# <a name="identity-model"></a>Id 모델

Azure 통신 서비스는 id를 알 수 없는 서비스입니다. 이 디자인에는 다음과 같은 여러 가지 이점이 있습니다.
- Id 관리 시스템에서 기존 id 다시 사용
- 통합 시나리오의 유연성
- Id를 Azure Communication Services 전용으로 유지 합니다.

시스템에서 기존 정보를 복제 하는 대신 비즈니스 사례와 관련 된 매핑 관계를 유지 관리 합니다. 예를 들어 id 1:1, 1: N, N:1, N:M.의 매핑 전화 번호, 사용자, 장치, 응용 프로그램, GUID 등의 외부 식별자는 Azure 통신 Id로 사용할 수 없습니다. Azure Communication Service Id에 대해 생성 된 액세스 토큰은 채팅 또는 호출과 같은 기본 형식에 액세스 하는 데 사용 됩니다. 

## <a name="identity"></a>ID

Id는 Azure Communication Service 관리 라이브러리를 사용 하 여 만듭니다. Id는 대화에서 식별자 역할을 하며 액세스 토큰을 만드는 데 사용 됩니다. 동일한 id가 여러 장치에서 동시에 여러 세션에 참여할 수 있습니다. Id에 여러 활성 액세스 토큰이 동시에 있을 수 있습니다. Id, 리소스 또는 구독을 삭제 하면 모든 액세스 토큰이 무효화 되 고이 id에 대해 저장 된 모든 데이터가 삭제 됩니다. 삭제 된 id는 새 액세스 토큰을 발급할 수 없습니다. 이전에 저장 된 데이터에 액세스 하지 않습니다 (예: 채팅 메시지). 

기본 형식을 사용 하 여 보유 한 id의 수에 따라 요금이 부과 되지 않습니다. Id 수는 제한 하지 않아도 되며, 응용 프로그램의 id를 Azure Communication Services Id에 매핑하는 방법입니다. 매핑의 자유는 개인 정보 보호 측면에서 책임이 있습니다. 응용 프로그램의 사용자를 시스템에서 삭제 하려는 경우 해당 사용자와 연결 된 모든 id를 삭제 해야 합니다.

Azure 통신 서비스는 익명 사용자에 게 특별 한 id를 제공 하지 않습니다. 사용자와 id 간의 매핑을 유지 하지 않으며 id가 익명 인지 여부를 이해 하지 못합니다. 요구 사항에 맞게 개념을 디자인할 수 있습니다. 각 응용 프로그램의 익명 사용자에 대 한 새 id를 만드는 것이 좋습니다. 유효한 액세스 토큰을 소유 하 고 있는 사용자는 id가 삭제 되지 않은 콘텐츠에 대 한 액세스 권한을 얻을 수 있습니다. 예를 들어 사용자가 보낸 채팅 메시지입니다. 액세스는 액세스 토큰의 일부인 범위에만 제한 됩니다. 범위에 대 한 자세한 내용은 *액세스 토큰* 섹션에 나와 있습니다.

### <a name="mapping-of-identities"></a>Id 매핑

Azure 통신 서비스는 IMS의 기능을 복제 하지 않습니다. 고객이 특정 id를 사용 하는 방법은 제공 하지 않습니다. 예를 들어 전화 번호 또는 전자 메일 주소를 사용할 수 있습니다. 대신 응용 프로그램의 id에 할당할 수 있는 고유 식별자를 제공 합니다. Azure 통신 서비스는 사용자의 실제 id를 표시할 수 있는 모든 종류의 정보를 저장 하지 않습니다.

복제 대신 id 도메인의 사용자가 Azure 통신 서비스 Id에 매핑되는 방식을 설계 하는 것이 좋습니다. 1:1, 1: N, N:1 또는 m:n의 모든 종류의 패턴을 따를 수 있습니다. 단일 사용자가 단일 id 또는 여러 id에 매핑되는지 여부를 결정할 수 있습니다. 새 id를 만든 경우 응용 프로그램의 사용자 또는 사용자에 게이 id의 매핑을 저장 하는 것이 좋습니다. Id가 기본 형식의 사용을 위해 액세스 토큰을 요구 하는 경우 응용 프로그램의 사용자 또는 사용자에 대해 id를 알고 있어야 합니다.

사용자 저장소에 관계형 데이터베이스를 사용 하는 경우 매핑 시나리오에 따라 구현이 달라질 수 있습니다. 매핑 1:1 또는 N:1를 사용 하는 시나리오의 경우 테이블에 *CommunicationServicesId* 열을 추가 하 여 Azure Communication Services id를 저장할 수 있습니다. 관계 1: N 또는 N:M의 시나리오에서는 관계형 데이터베이스에 별도의 테이블을 만들 수 있습니다.

## <a name="access-token"></a>액세스 토큰

액세스 토큰은 Azure Communication Service 기본 형식에 액세스 하는 데 사용할 수 있는 JWT 토큰입니다. 발급 된 액세스 토큰에는 무결성 보호가 있으므로 발급 한 후에는 해당 클레임을 변경할 수 없습니다. 즉, id, 만료, 범위 등의 속성을 수동으로 변경 하면 액세스 토큰이 유효 하지 않게 됩니다. 무효화 된 토큰이 있는 기본 형식을 사용 하면 기본에 대 한 액세스가 거부 됩니다. 

액세스 토큰의 속성은 *id, 만료* 및 *범위* 입니다. 액세스 토큰은 항상 24 시간 동안 유효 합니다. 이 시간 후에는 액세스 토큰이 무효화 되 고 기본 형식에 액세스 하는 데 사용할 수 없습니다. Id에는 서버 쪽 서비스에서 새 액세스 토큰을 요청 하는 방법이 있어야 합니다. 매개 변수 *범위* 는 사용할 수 있는 비어 있지 않은 기본 형식 집합을 정의 합니다. Azure 통신 서비스는 액세스 토큰에 대해 다음과 같은 범위를 지원 합니다.

|Name|설명|
|---|---|
|채팅|  채팅에 참여할 수 있는 기능 부여|
|VoIP|  Id와 전화 번호를 호출 하는 기능을 부여 합니다.|


만료 되기 전에 액세스 토큰을 해지 하려면 Azure Communication Service 관리 라이브러리를 사용 하 여이 작업을 수행할 수 있습니다. 토큰 해지는 즉시 발생 하지 않으며 전파 하는 데 최대 15 분이 걸립니다. Id, 리소스 또는 구독을 제거 하면 모든 액세스 토큰이 해지 됩니다. 특정 기능에 액세스 하는 사용자의 기능을 제거 하려는 경우 모든 액세스 토큰을 취소 합니다. 그런 다음 보다 제한 된 범위 집합을 사용 하 여 새 액세스 토큰을 발급 합니다.
Azure 통신 서비스의 액세스 키를 회전 하면 이전 액세스 키로 만든 모든 활성 액세스 토큰이 해지 됩니다. 모든 id는 Azure 통신 서비스에 대 한 액세스 권한을 잃게 되며 새 액세스 토큰을 발급 하는 데 필요 합니다. 

클라이언트의 응용 프로그램이 아닌 서버 쪽 서비스에서 액세스 토큰을 발급 하는 것이 좋습니다. 이에 대 한 이유는를 발급 하는 데 액세스 키 또는 관리 id가 필요 하다는 것입니다. 클라이언트의 응용 프로그램에 액세스 키를 공유 하는 것은 보안상의 이유로 권장 되지 않습니다. 클라이언트 응용 프로그램은 클라이언트를 인증할 수 있는 신뢰할 수 있는 서비스 끝점을 사용 하 고 사용자 대신 액세스 토큰을 발급 해야 합니다. 아키텍처에 대 한 자세한 내용은 [여기](./client-and-server-architecture.md)를 참조 하세요.

백업 저장소에 액세스 토큰을 캐시 하는 경우 암호화를 사용 하는 것이 좋습니다. 액세스 토큰은 중요 한 데이터 이며 보호 되지 않는 경우 악의적인 활동에 사용할 수 있습니다. 액세스 토큰이 있으면 SDK를 초기화 하 고 API에 대 한 액세스 권한을 얻을 수 있습니다. 액세스 가능 API는 액세스 토큰에 포함 된 범위에 따라 제한 됩니다. 필요한 범위 에서만 액세스 토큰을 발급 하는 것이 좋습니다.