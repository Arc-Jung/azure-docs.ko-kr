---
title: 애플리케이션 게이트웨이 구성 요소
description: 이 문서에서는 응용 프로그램 게이트웨이의 다양한 구성 요소에 대한 정보를 제공합니다.
services: application-gateway
author: abshamsft
ms.service: application-gateway
ms.topic: article
ms.date: 02/20/2019
ms.author: absha
ms.openlocfilehash: 90b3c3fd18bc9211c731ccf16dd646a64a4a1116
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/28/2020
ms.locfileid: "80133101"
---
# <a name="application-gateway-components"></a>애플리케이션 게이트웨이 구성 요소

 응용 프로그램 게이트웨이는 클라이언트의 단일 접점 역할을 합니다. Azure VM, 가상 시스템 규모 집합, Azure 앱 서비스 및 온-프레미스/외부 서버를 포함하는 여러 백 엔드 풀에 들어오는 응용 프로그램 트래픽을 배포합니다. 트래픽을 분산하기 위해 응용 프로그램 게이트웨이는 이 문서에서 설명하는 여러 구성 요소를 사용합니다.

![응용 프로그램 게이트웨이에 사용되는 구성 요소](./media/application-gateway-components/application-gateway-components.png)

## <a name="frontend-ip-addresses"></a>프런트 엔드 IP 주소

프런트 엔드 IP 주소는 응용 프로그램 게이트웨이와 연결된 IP 주소입니다. 공용 IP 주소, 개인 IP 주소 또는 둘 다있도록 응용 프로그램 게이트웨이를 구성할 수 있습니다. 응용 프로그램 게이트웨이는 하나의 공용 또는 하나의 개인 IP 주소를 지원합니다. 가상 네트워크 및 공용 IP 주소는 응용 프로그램 게이트웨이와 동일한 위치에 있어야 합니다. 생성된 후 프런트 엔드 IP 주소는 수신기와 연결됩니다.

### <a name="static-versus-dynamic-public-ip-address"></a>정적 대 동적 공용 IP 주소

Azure 응용 프로그램 게이트웨이 V2 SKU는 정적 내부 IP 주소와 정적 공용 IP 주소 또는 정적 공용 IP 주소만 지원하도록 구성할 수 있습니다. 정적 내부 IP 주소만 지원하도록 구성할 수 없습니다.

V1 SKU는 정적 또는 동적 내부 IP 주소와 동적 공용 IP 주소를 지원하도록 구성할 수 있습니다. 응용 프로그램 게이트웨이의 동적 IP 주소는 실행 중인 게이트웨이에서 변경되지 않습니다. 게이트웨이를 중지하거나 시작할 때만 변경할 수 있습니다. 시스템 오류, 업데이트, Azure 호스트 업데이트 등은 변경되지 않습니다. 

응용 프로그램 게이트웨이와 연결된 DNS 이름은 게이트웨이의 수명 주기 동안 변경되지 않습니다. 따라서 CNAME 별칭을 사용하여 응용 프로그램 게이트웨이의 DNS 주소를 가리킬 수 있습니다.

## <a name="listeners"></a>수신기

수신기는 들어오는 연결 요청을 확인하는 논리적 엔터티입니다. 요청과 연결된 프로토콜, 포트, 호스트 이름 및 IP 주소가 수신기 구성과 연결된 동일한 요소와 일치하는 경우 수신기는 요청을 수락합니다.

응용 프로그램 게이트웨이를 사용하기 전에 하나 이상의 수신기를 추가해야 합니다. 응용 프로그램 게이트웨이에 연결된 여러 리스너가 있을 수 있으며 동일한 프로토콜에 사용할 수 있습니다.

수신기가 클라이언트에서 들어오는 요청을 감지하면 응용 프로그램 게이트웨이는 규칙에 구성된 백 엔드 풀의 구성원에게 이러한 요청을 라우팅합니다.

수신기는 다음 포트 및 프로토콜을 지원합니다.

### <a name="ports"></a>포트

포트는 수신기가 클라이언트 요청을 수신하는 위치입니다. v1 SKU의 경우 1에서 65502까지, v2 SKU의 경우 1에서 65199까지의 포트를 구성할 수 있습니다.

### <a name="protocols"></a>프로토콜

응용 프로그램 게이트웨이는 HTTP, HTTPS, HTTP/2 및 WebSocket의 네 가지 프로토콜을 지원합니다.
>[!NOTE]
>Application Gateway 수신기에 연결하는 클라이언트의 경우에만 HTTP/2 프로토콜이 지원됩니다. 백 엔드 서버 풀에 대한 통신은 항상 HTTP/1.1을 초과합니다. 기본적으로 HTTP/2 지원은 사용할 수 없습니다. 활성화하도록 선택할 수 있습니다.

- 수신기 구성에서 HTTP 와 HTTPS 프로토콜 간에 지정합니다.
- [WebSocket 및 HTTP/2 프로토콜에](features.md#websocket-and-http2-traffic) 대한 지원은 기본적으로 제공되며 [WebSocket 지원은](application-gateway-websocket.md) 기본적으로 활성화됩니다. WebSocket 지원을 선택적으로 사용하거나 사용하지 않도록 설정하는 사용자 구성 가능 설정은 없습니다. HTTP 및 HTTPS 수신기모두에서 웹 소켓을 사용합니다.

TLS 종료에 HTTPS 수신기를 사용합니다. HTTPS 수신기는 암호화 및 암호 해독 작업을 응용 프로그램 게이트웨이로 오프로드하므로 웹 서버가 오버헤드로 인한 부담을 주지 않습니다.

### <a name="custom-error-pages"></a>사용자 지정 오류 페이지

응용 프로그램 게이트웨이를 사용하면 기본 오류 페이지를 표시하는 대신 사용자 지정 오류 페이지를 만들 수 있습니다. 사용자 지정 오류 페이지를 사용하여 자체 브랜딩과 레이아웃을 사용할 수 있습니다. 응용 프로그램 게이트웨이는 요청이 백 엔드에 도달할 수 없는 경우 사용자 지정 오류 페이지를 표시합니다.

자세한 내용은 [응용 프로그램 게이트웨이에 대한 사용자 지정 오류 페이지를](custom-error.md)참조하십시오.

### <a name="types-of-listeners"></a>청취자 유형

두 가지 유형의 리스너가 있습니다.

- **기본**. 이러한 유형의 수신기는 응용 프로그램 게이트웨이의 IP 주소에 대한 단일 DNS 매핑이 있는 단일 도메인 사이트를 수신합니다. 이 수신기 구성은 응용 프로그램 게이트웨이 뒤에 있는 단일 사이트를 호스트할 때 필요합니다.

- **다중 사이트**. 이 수신기 구성은 동일한 응용 프로그램 게이트웨이 인스턴스에서 두 개 이상의 웹 응용 프로그램을 구성할 때 필요합니다. 이를 통해 하나의 애플리케이션 게이트웨이에 최대 100개의 웹 사이트를 추가하여 배포에 대한 보다 효율적인 토폴로지 구성을 수행할 수 있습니다. 각 웹 사이트는 고유한 백 엔드 풀로 이동할 수 있습니다. 예를 들어 abc.contoso.com, xyz.contoso.com 및 pqr.contoso.com 세 개의 하위 도메인은 응용 프로그램 게이트웨이의 IP 주소를 가리킵니다. 세 개의 다중 사이트 수신기를 만들고 각 수신기를 각 포트 및 프로토콜 설정에 맞게 구성합니다.

    자세한 내용은 [다중 사이트 호스팅](application-gateway-web-app-overview.md)을 참조하십시오.

수신기를 만든 후 요청 라우팅 규칙과 연결합니다. 이 규칙은 수신기에서 받은 요청을 백 엔드로 라우팅하는 방법을 결정합니다.

응용 프로그램 게이트웨이는 표시된 순서로 리스너를 [처리합니다.](configuration-overview.md#order-of-processing-listeners)

## <a name="request-routing-rules"></a>라우팅 규칙 요청

요청 라우팅 규칙은 수신기에서 트래픽을 라우팅하는 방법을 결정하기 때문에 응용 프로그램 게이트웨이의 핵심 구성 요소입니다. 이 규칙은 수신기, 백 엔드 서버 풀 및 백 엔드 HTTP 설정을 바인딩합니다.

수신기가 요청을 수락하면 요청 라우팅 규칙이 요청을 백 엔드로 전달하거나 다른 곳으로 리디렉션합니다. 요청이 백 엔드로 전달되는 경우 요청 라우팅 규칙은 이를 전달할 백 엔드 서버 풀을 정의합니다. 요청 라우팅 규칙은 요청의 헤더를 다시 작성할지 여부를 결정합니다. 하나의 수신기를 하나의 규칙에 연결할 수 있습니다.

요청 라우팅 규칙에는 두 가지 유형이 있습니다.

- **기본**. 연결된 수신기의 모든 요청(예: blog.contoso.com/*)은 연결된 HTTP 설정을 사용하여 연결된 백 엔드 풀로 전달됩니다.

- **경로 기반**. 이 라우팅 규칙을 사용하면 요청의 URL을 기반으로 연결된 수신기의 요청을 특정 백 엔드 풀로 라우팅할 수 있습니다. 요청의 URL 경로가 경로 기반 규칙의 경로 패턴과 일치하는 경우 규칙은 해당 요청을 라우팅합니다. 경로 패턴을 쿼리 매개 변수가 아닌 URL 경로에만 적용합니다. 수신기 요청의 URL 경로가 경로 기반 규칙과 일치하지 않으면 요청을 기본 백 엔드 풀 및 HTTP 설정으로 라우팅합니다.

자세한 내용은 [URL 기반 라우팅을](url-route-overview.md)참조하십시오.

### <a name="redirection-support"></a>리디렉션 지원

요청 라우팅 규칙을 사용하면 응용 프로그램 게이트웨이에서 트래픽을 리디렉션할 수도 있습니다. 이 메커니즘은 일반 리디렉션 메커니즘이므로 규칙을 사용하여 정의한 모든 포트로 리디렉션할 수 있습니다.

리디렉션 대상을 다른 수신기(HTTPS 리디렉션에 대한 자동 HTTP를 활성화하는 데 도움이 되는) 또는 외부 사이트로 선택할 수 있습니다. 리디렉션을 일시적 또는 영구적이거나 URI 경로 및 쿼리 문자열을 리디렉션된 URL에 추가하도록 선택할 수도 있습니다.

자세한 내용은 [응용 프로그램 게이트웨이의 트래픽 리디렉션을](redirect-overview.md)참조하십시오.

### <a name="rewrite-http-headers"></a>HTTP 헤더 다시 쓰기

요청 라우팅 규칙을 사용하면 요청 및 응답 패킷이 응용 프로그램 게이트웨이를 통해 클라이언트와 백 엔드 풀 간에 이동할 때 HTTP(S) 요청 및 응답 헤더를 추가, 제거 또는 업데이트할 수 있습니다.

헤더는 정적 값 또는 다른 헤더 및 서버 변수로 설정할 수 있습니다. 이렇게 하면 클라이언트 IP 주소 추출, 백 엔드에 대한 중요한 정보 제거, 보안 강화 등과 같은 중요한 사용 사례에 도움이 됩니다.

자세한 내용은 [응용 프로그램 게이트웨이에서 HTTP 헤더 다시 작성을](rewrite-http-headers.md)참조하십시오.

## <a name="http-settings"></a>HTTP 설정

응용 프로그램 게이트웨이는 이 구성 요소에 자세히 설명된 포트 번호, 프로토콜 및 기타 설정을 사용하여 트래픽을 백 엔드 서버(HTTP 설정을 포함하는 요청 라우팅 규칙에 지정)로 라우팅합니다.

HTTP 설정에 사용되는 포트 및 프로토콜은 응용 프로그램 게이트웨이와 백 엔드 서버 간의 트래픽이 암호화되는지(종단 간 TLS 제공) 암호화되지 않았는지 또는 암호화되지 않은지 결정합니다.

이 구성 요소는 다음과 같은 데도 사용됩니다.

- 쿠키 기반 세션 [선호도를](features.md#session-affinity)사용하여 사용자 세션을 동일한 서버에 보관할지 여부를 결정합니다.

- [연결 드레인을](features.md#connection-draining)사용하여 백 엔드 풀 멤버를 정상적으로 제거합니다.

- 사용자 지정 프로브를 연결하여 백 엔드 상태를 모니터링하고, 요청 시간 초과 간격을 설정하고, 요청의 호스트 이름과 경로를 재정의하고, 한 번의 클릭으로 쉽게 앱 서비스 백 엔드에 대한 설정을 지정합니다.

## <a name="backend-pools"></a>백 엔드 풀

백 엔드 풀은 요청을 제공하는 백 엔드 서버에 요청을 라우팅합니다. 백 엔드 풀에는 다음이 포함될 수 있습니다.

- NIC
- 가상 머신 크기 집합
- 공용 IP 주소
- 내부 IP 주소
- FQDN
- 다중 테넌트 백엔드(예: 앱 서비스)

응용 프로그램 게이트웨이 백 엔드 풀 멤버는 가용성 집합에 연결되지 않습니다. 응용 프로그램 게이트웨이는 가상 네트워크 외부의 인스턴스와 통신할 수 있습니다. 따라서 백 엔드 풀의 구성원은 IP 연결이 있는 한 클러스터, 데이터 센터 또는 Azure 외부에 있을 수 있습니다.

내부 IP를 백 엔드 풀 멤버로 사용하는 경우 [가상 네트워크 피어링](../virtual-network/virtual-network-peering-overview.md) 또는 [VPN 게이트웨이를](../vpn-gateway/vpn-gateway-about-vpngateways.md)사용해야 합니다. 가상 네트워크 피어링은 지원되며 다른 가상 네트워크의 트래픽 분산에 유용합니다.

트래픽이 허용되는 경우 응용 프로그램 게이트웨이는 Azure ExpressRoute 또는 VPN 터널로 연결된 경우 온-프레미스 서버와 통신할 수도 있습니다.

요청 유형에 따라 다른 백 엔드 풀을 만들 수 있습니다. 예를 들어 일반 요청에 대해 하나의 백 엔드 풀을 만든 다음 응용 프로그램에 대한 마이크로 서비스에 대한 요청에 대해 다른 백 엔드 풀을 만듭니다.

## <a name="health-probes"></a>상태 프로브

기본적으로 응용 프로그램 게이트웨이는 백 엔드 풀의 모든 리소스의 상태를 모니터링하고 비정상 리소스를 자동으로 제거합니다. 그런 다음 비정상 인스턴스를 모니터링하고 사용할 수 있게 되면 정상 백 엔드 풀에 다시 추가하고 상태 프로브에 응답합니다.

기본 상태 프로브 모니터링 사용 외에도 애플리케이션 프로그의 요구 사항에 맞게 상태 프로브를 사용자 지정할 수도 있습니다. 사용자 지정 프로브를 사용하면 상태 모니터링을 보다 세부적으로 제어할 수 있습니다. 사용자 지정 프로브를 사용하는 경우 프로브 간격, 테스트할 URL 및 경로 및 백 엔드 풀 인스턴스가 비정상으로 표시되기 전에 수락할 실패한 응답 수를 구성할 수 있습니다. 각 백 엔드 풀의 상태를 모니터링하도록 사용자 지정 프로브를 구성하는 것이 좋습니다.

자세한 내용은 [응용 프로그램 게이트웨이의 상태 모니터링을](../application-gateway/application-gateway-probe-overview.md)참조하십시오.

## <a name="next-steps"></a>다음 단계

애플리케이션 게이트웨이를 만듭니다.

* [Azure 포털에서](quick-create-portal.md)
* [Azure PowerShell 사용](quick-create-powershell.md)
* [Azure CLI를 사용하여](quick-create-cli.md)
