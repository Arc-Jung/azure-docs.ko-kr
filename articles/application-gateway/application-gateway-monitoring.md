<properties 
   pageTitle="Azure 리소스 관리자를 사용하여 사용자 지정 프로브에 응용 프로그램 게이트웨이 구성 | Microsoft Azure"
   description="이 페이지에서는 Azure 리소스 관리자 템플릿을 사용하여 응용 프로그램 게이트웨이에 사용자 지정 프로브를 구성하는 지침을 제공합니다."
   documentationCenter="na"
   services="application-gateway"
   authors="joaoma"
   manager="carmonm"
   editor="tysonn"/>
<tags 
   ms.service="application-gateway"
   ms.devlang="na"
   ms.topic="article" 
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services" 
   ms.date="11/24/2015"
   ms.author="joaoma"/>

# 상태 모니터링 및 사용자 지정 프로브 


Azure 응용 프로그램 게이트웨이는 백 엔드 풀의 모든 리소스 상태를 모니터링하고 풀에서 비정상으로 간주한 모든 리소스를 자동으로 제거합니다.

기본 상태 검색 및 사용자 지정 프로브 등 두 가지 형식의 프로브를 사용하여 상태 모니터링을 구성합니다.

## 기본 상태 프로브

응용 프로그램 게이트웨이는 사용자 지정 프로브 구성을 설정하지 않는 경우 기본 상태 프로브를 자동으로 구성합니다. 모니터링 동작은 백 엔드 풀에 대해 구성된 IP 주소 및 응용 프로그램 게이트웨이에 대한 백 엔드 HTTP 설정에 구성된 포트에 대해 HTTP 요청을 수행하여 작동합니다.

예: 포트 80에서 HTTP 네트워크 트래픽을 수신할 백 엔드 서버 A, B, C를 사용하도록 응용 프로그램 게이트웨이를 구성합니다. 기본 상태 모니터링은 정상 HTTP 응답에 대해 3개의 서버를 30초마다 테스트합니다. 정상 HTTP 응답은 [상태 코드](https://msdn.microsoft.com/library/aa287675.aspx) 200에서 399 사이입니다.

서버 A에 대한 기본 프로브 확인이 실패하면 응용 프로그램 게이트웨이가 백 엔드 풀에서 이를 제거하고 네트워크 트래픽이 이 서버로 이동되지 않습니다. 기본 프로브는 서버 A에 대해 30초마다 계속 확인합니다. 서버 A가 기본 상태 프로브에서 하나의 요청에 대해 성공적으로 응답하는 경우 백 엔드 풀에 정상으로 다시 추가되고 트래픽이 이 서버로 다시 이동하기 시작합니다.

기본 프로브는 IP 주소를 사용하여 상태를 확인합니다. URL에 대한 연결을 테스트하여 상태를 확인하려는 경우 사용자 지정 프로브를 사용해야 합니다.


## 사용자 지정 프로브 

사용자 지정 프로브를 통해 상태 모니터링을 보다 세부적으로 제어할 수 있습니다. 사용자 지정 프로브를 사용하는 경우 프로브 간격 확인, 테스트할 URL 및 경로, 백 엔드 풀 인스턴스를 비정상으로 표시하기 전에 허용할 실패 응답 횟수를 구성할 수 있습니다.


사용자 지정 프로브 설정은 다음과 같습니다.

- **프로브 간격** - 프로브 간격 확인을 구성합니다.
- **프로브 시간 제한** - HTTP 요청 확인에 대한 프로브 시간 제한을 정의합니다.
- **비정상 임계값** - 인스턴스가 정상적이지 않다고 플래그를 지정해야 하는 실패한 요청 수를 지정합니다.  
- **호스트 이름 및 경로** - 웹 사이트 또는 웹 팜에 IP 주소에 대해서만 HTTP 응답이 없는 경우 프로브 호스트 이름 및 유효한 정상 HTTP 응답에 대한 경로를 구성해야 합니다. 예: 웹 사이트 http://contoso.com/가 있지만 유효한 HTTP 응답을 생성하지 않습니다. 호스트 이름 및 경로는 유효한 정상 HTTP 응답을 제공하도록 구성되어 웹 서버 인스턴스가 정상 상태인지 유효성을 검사해야 합니다. 이 경우에 프로브 확인을 위해 사용자 지정 프로브를 "http://contoso.com/path/custompath.htm"에 대해 구성하여 성공적으로 HTTP에 응답할 수 있습니다. 



>[AZURE.NOTE] PowerShell을 사용하여 사용자 지정 프로브를 구성할 수 있습니다.

<!---HONumber=AcomDC_0128_2016-->