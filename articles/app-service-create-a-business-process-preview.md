<properties 
	pageTitle="비즈니스 프로세스 만들기" 
	description="비즈니스 프로세스 만들기" 
	authors="stepsic-microsoft-com" 
	manager="dwrede" 
	editor="" 
	services="app-service-logic" 
	documentationCenter=""/>



<tags
	ms.service="app-service-logic"
	ms.workload="web"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="02/24/2015"
	ms.author="stepsic"/>

# 흐름 및 API 앱을 사용하여 비즈니스 프로세스 개발

기본 흐름을 만들었지만 이제 진지하게 흐름 앱을 사용하여 비즈니스 프로세스를 만듭니다. 이 문서에서는 몇 가지 핵심 항목에 대해 설명합니다.

- 조건부 논리(예: 특정 조건을 충족하는 경우에만 동작 실행) 및 루프 추가
- BizTalk API 앱
- 코드 보기를 사용하여 흐름 편집
- 다양한 유형의 트리거

시작하려면 여기를 클릭하여 이미 기본 흐름에서 입력한 구독에 항목을 만듭니다. 이 흐름을 만든 후 트리거 및 동작을 클릭하여 편집합니다.

## 조건부 논리 및 루프 추가

기본 흐름 기능이 제대로 작동하지만 2~3가지 문제가 있는 것을 알 수 있습니다. 첫째, 기본 흐름에서는 키워드에 대한 모든 트윗에 대해서가 아니라 맨 위 트윗에 대해서만 사용자에게 메일을 보냅니다. 항목 목록에 대해 동작을 반복하기 위해 "반복" 속성을 사용할 수 있습니다.

### 반복

반복은 항목 목록을 사용하여 해당 목록의 각 항목에 대해 동작을 실행합니다. 반복을 사용하려면 동작 맨 위에 있는 원형 화살표 아이콘을 클릭합니다. 그러면 텍스트 상자가 열리고 다음을 입력합니다.

    @triggers().outputs.body

기본 흐름과 마찬가지로 트윗 목록이 출력됩니다. 그런 다음 실제로 동작 내의 트윗을 사용하려면 메시지를 다음으로 바꿉니다.

    @repeatItem().message

"repeatItem()"은 목록의 각 요소를 제공하는 함수입니다. 확인 표시를 클릭합니다.

### 조건부

이제 이 흐름은 많은 메일을 생성하므로 여전히 성가십니다. 트윗을 만드는 사람에게 특정 수의 팔로워가 있는 경우에만 메일이 수신될 수 있도록 논리를 더 추가할 수 있습니다. 이렇게 하려면 동작 맨 위에 있는 다이아몬드 아이콘을 클릭합니다. 

텍스트 상자 내부에 다음을 입력합니다.

    @greaterThan(repeatItem().person.followers, 1000)

이는 repeatItem() 함수뿐만 아니라 greaterThan()이라는 새 함수도 보여 줍니다. 이 함수는 두 값을 비교하여 첫 번째 값이 두 번째 값보다 큰 경우에만 동작이 실행되도록 합니다. 팔로워를 가져오는 구문(관심 있는 각 속성에 대해)이 속성 이름 앞에 점을 추가합니다. 조건을 저장하려면 확인 표시를 클릭합니다.

## BizTalk API 앱

Azure에서 사용할 수 있는 API 앱의 범주는 여러 가지가 있습니다. Twitter와 Office 365는 이 시나리오에 사용하기 좋은 커넥터이지만 흐름에 활용할 수 있는, BizTalk에서 제공하는 다양한 API 앱도 있습니다.

오른쪽 창에서 XXXXXX 서비스를 클릭합니다. 그러면 BizTalk에서 제공하는 이 서비스가 디자이너에 추가됩니다.

### 동작 간 데이터 전달

흐름에 둘 이상의 동작을 사용하기 위해서는 동작 간에 데이터를 전달해야 합니다. 이 작업을 수행하는 방법은 actions() 함수를 사용하는 것입니다. 

XXXXXX 동작을 추가한 후 다음을 입력합니다.

    @actions('SendMail').outputs.YYYYYY

그러면 SendMail 동작의 출력에서 YYYYYY 속성이 흐릅니다. 항상 해당 동작의 아이콘 바로 아래에서 동작의 이름을 확인할 수 있습니다. 마찬가지로, 상자의 아래쪽에서 해당 동작의 모든 출력을 확인할 수 있습니다.

## 코드 보기를 사용하여 흐름 편집

디자이너 외에 흐름 정의를 직접 수동으로 편집할 수 있습니다. 이렇게 하려면 명령 모음에서 코드 보기 단추를 클릭합니다. 그러면 방금 편집한 흐름 정의를 보여 주는 전체 편집기가 열립니다.

텍스트 편집기를 사용하면 특정 작업을 더 쉽게 만들 수 있습니다. 예를 들어 동일한 흐름(또는 흐름 간) 내에 원하는 수의 동작을 복사해서 붙여넣을 수 있습니다. 또한 흐름에서 전체 섹션을 쉽게 한 번에 추가하거나 제거할 수 있습니다.

### 매개 변수

또한 코드 보기에서만 노출되는 몇 가지 기능이 있습니다. 이러한 예로는 매개 변수가 있습니다. 매개 변수는 흐름 전체에서 값을 쉽게 다시 사용할 수 있게 해줍니다. 예를 들어 여러 동작에 포함하려는 메일 주소가 있는 경우 메일 주소를 매개 변수로 만들 수 있습니다.

매개 변수를 정의하려면 매개 변수 {} 개체로 이동하여 그 내부에 다음과 같이 추가합니다.
    "emailAddress" : {
	    "type" : "string",
	    "defaultValue" : "me@example.com"
    }

이제 메일 보내기 동작으로 스크롤합니다. 여기서 메일에 대한 입력을 볼 수 있습니다. 메일을 다음으로 바꿉니다.

    @parameters('emailAddress')

매개 변수는 자주 변경하는 값을 끌어오는 좋은 방법입니다.

## 다양한 유형의 트리거

흐름을 시작하는 방법에는 여러 가지가 있으며, 각 방법의 동작은 약간씩 다르므로 시나리오에 적합한 방법을 선택해야 합니다.

### 폴링 트리거

일부 트리거는 간격에 따라 API 앱을 확인합니다. 해당 간격을 정의할 수 있지만 "triggerState"라는 필드도 전달해야 합니다. 트리거 상태는 이전에 확인했을 때 반환한 내용을 알도록 트리거의 호출에 전달하는 정보입니다. 트리거 상태는 일반적으로 문자열이 됩니다.

    @triggers().outputs.body.triggerState

### 콜백 트리거

다른 트리거는 새 요청이 있을 때 흐름을 다시 호출합니다. 이 경우 트리거에 흐름의 콜백 URI를 제공해야 합니다. 이를 가져오려면 흐름으로 이동할 때 설정 화면의 속성 블레이드에서 액세스 끝점을 복사합니다. 

### 수동으로 호출

셋째, 방금 수동으로 실행한 흐름이 있을 수 있습니다. 포털에는 흐름을 시작하기 위해 클릭할 수 있는 실행 단추가 있습니다. 

<!--HONumber=49-->