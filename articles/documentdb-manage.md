<properties title="Manage DocumentDB capacity and performance" pageTitle="DocumentDB 용량 및 성능 관리 | Azure" description="Learn how you can elastically scale DocumentDB to meet the performance and storage needs of your application." metaKeywords="" services="documentdb" solutions="data-management"  authors="bradsev" manager="jhubbard" editor="cgronlun"  videoId="" scriptId="" />

<tags ms.service="documentdb" ms.workload="data-services" ms.tgt_pltfrm="na" ms.devlang="na" ms.topic="article" ms.date="08/20/2014" ms.author="spelluru" />

#DocumentDB 용량 및 성능 관리
DocumentDB는 완전히 관리되고 대규모로 확장 가능한 문서 지향 NoSQL 데이터베이스 서비스입니다.  DocumentDB를 사용하면 가상 컴퓨터를 임대하거나, 소프트웨어를 배포하거나, 데이터베이스를 모니터링하거나, 재해 복구에 대해 걱정할 필요가 없습니다. 세계적 수준의 가용성, 성능 및 데이터 보호를 제공하기 위해 Microsoft 엔지니어가 DocumentDB를 작동하고 지속적으로 모니터링합니다.  

Microsoft Azure 포털을 통해 데이터베이스 계정을 만들어 DocumentDB를 시작할 수 있습니다. DocumentDB는 SSD 지원 저장소 및 처리량의 누적형 CU(용량 단위)로 제공됩니다. 응용 프로그램의 성능 및 저장소 요구를 충족하기 위해 탄력적으로 DocumentDB의 크기를 조정할 수 있습니다. 

각 용량 단위에는 문서 데이터 저장을 위한 탄력적 컬렉션, 프로비전된 문서 저장소 및 초당 요청 단위로 프로비전된 처리량의 할당량이 있습니다. 응용 프로그램의 용량 요구 사항이 변할 경우 데이터베이스 계정에 프로비전된 용량을 확장하거나 축소할 수 있습니다. 데이터베이스 계정 아래에 프로비전된 용량은 계정 내에 존재하거나 만들어진 모든 데이터베이스 및 컬렉션에 사용할 수 있습니다.  

#데이터베이스 계정 및 관리 할당량
Azure 구독자는 DocumentDB 데이터베이스 계정을 하나 이상 프로비전할 수 있습니다. 각 데이터베이스 계정에는 데이터베이스 100개, 사용자 500,000명, 사용 권한 2,000,000개를 비롯한 관리 리소스 할당량이 있습니다.   

#무제한 문서 저장소가 있는 데이터베이스
단일 DocumentDB 데이터베이스에 실제로 무제한 크기의 문서 저장소가 컬렉션으로 분할되어 포함될 수 있습니다. 컬렉션은 포함된 문서에 대한 트랜잭션 도메인을 형성합니다. DocumentDB 데이터베이스는 기본적으로 탄력적이며 SSD 지원 문서 저장소 및 프로비전된 처리량이 몇 GB에서 페타바이트 범위까지 다양합니다. 기존의 RDBMS 데이터베이스와 달리 DocumentDB의 데이터베이스는 단일 컴퓨터로 범위가 지정되지 않습니다.   

DocumentDB를 사용하면 응용 프로그램 확장 요구에 따라 컬렉션, 데이터베이스 또는 둘 다를 더 만들 수 있습니다. 실제로 Microsoft 내의 다양한 자사 응용 프로그램은 각각 테라바이트의 문서 저장소가 있는 컬렉션이 수천 개 포함된 대형 DocumentDB 데이터베이스를 만들어 소비자 배율로 DocumentDB를 사용했습니다. 응용 프로그램의 크기 조정 요구 사항을 충족하기 위해 컬렉션을 추가 또는 제거하여 데이터베이스를 확장하거나 축소할 수 있습니다. 데이터베이스 내에 컬렉션을 개수에 제한 없이 만들 수 있으며 구매한 용량 단위 크기와 제품 가용성이 적용됩니다. 프로비전된 SSD 지원 저장소 및 처리량은 데이터베이스 계정의 데이터베이스 아래 컬렉션에 분산될 수 있습니다. 

#탄력적 컬렉션
각 DocumentDB 데이터베이스에 컬렉션이 하나 이상 포함될 수 있습니다. 컬렉션은 문서 저장소 및 쿼리 실행 범위를 제공합니다. 컬렉션은 포함된 모든 문서에 대한 트랜잭션 도메인이기도 합니다. 컬렉션은 탄력적이며 저장소와 처리량이 확장 및 축소될 수 있습니다. 응용 프로그램의 크기 조정 요구 사항을 충족하기 위해 컬렉션을 개수에 제한 없이 만들 수 있습니다. 컬렉션을 만들려면 먼저 CU(용량 단위)를 하나 이상 구매해야 합니다. 각 용량 단위에 컬렉션 할당량이 포함되며, 계정의 컬렉션 할당량에 도달할 경우 추가 용량 단위를 구매할 수 있습니다.  

>[AZURE.NOTE] 미리 보기 릴리스에서는 컬렉션이 0-10GB 사이에서 확장 및 축소될 수 있습니다. 

#용량 단위로 프로비전된 저장소 및 처리량
SSD 지원 문서 저장소 및 처리량의 누적형 단위를 CU(용량 단위)로 프로비전할 수 있습니다. 읽기 규모, 저장소 및 처리량에 대한 응용 프로그램의 요구를 충족하기 위해 용량 단위를 더 구매하여 탄력적으로 DocumentDB를 확장하고 예측 가능한 성능을 얻을 수 있습니다.  
 
각 CU에 탄력적 컬렉션 3개, 프로비전된 SSD 지원 문서 저장소 10GB, 프로비전된 처리량 2000 RU(요청 단위)가 있습니다. CU과 관련해서 프로비전된 저장소 및 처리량은 만드는 DocumentDB 컬렉션에 분산됩니다.   

#프로비전된 처리량, 요청 단위 및 데이터베이스 작업
단순한 GET 및 PUT 작업을 제공하는 키-값 NoSQL 저장소와 달리 DocumentDB에서는 UDF, 저장 프로시저 및 트리거를 사용한 관계형 및 계층적 쿼리를 포함하여 모두 데이터베이스 컬렉션 내 문서에 대해 작동하는 보다 풍부한 데이터베이스 작업 집합을 사용할 수 있습니다. 각 작업과 관련된 비용은 작업을 완료하는 데 필요한 CPU, IO 및 메모리에 따라 달라집니다.  하드웨어 리소스를 고려하고 관리하는 대신 다양한 데이터베이스 작업을 수행하고 응용 프로그램 요청을 처리하는 데 필요한 리소스의 단일 측정값으로 RU(요청 단위)를 고려할 수 있습니다.   

구매하는 용량 단위 수에 따라 각 데이터베이스 계정에 대해 요청 단위가 프로비전됩니다. 요청 단위 소비는 초당 비율로 평가됩니다. 계정에 프로비전된 요청 단위 비율을 초과하는 응용 프로그램은 비율이 계정에 예약된 수준 아래로 떨어질 때까지 제한됩니다. 응용 프로그램에 더 높은 처리량 수준이 필요한 경우 추가 용량 단위를 구매할 수 있습니다.  

다음 표에는 CU별 사용 가능한 다양한 데이터베이스 작업 및 요청 단위가 나열되어 있습니다. 이 표는 지정된 데이터베이스 작업이 CU와 관련된 프로비전된 처리량을 사용하는 방식을 계획하는 데 도움이 됩니다.  문서 크기는 10개의 고유 속성 값으로 구성된 1KB이고, 기본 일관성 수준은 "세션"으로 설정되며, 모든 문서가 DocumentDB에 의해 자동으로 인덱싱된다고 가정합니다. 

|데이터베이스 작업|CU별 초당 작업 수|
|-------------------|--------------------------------------|
|단일 문서 읽기	|2000
|단일 문서 삽입/바꾸기/삭제	|500
|단일 조건자로 컬렉션 쿼리 및 단일 문서 반환	|1000
|문서 삽입 50개가 포함된 저장 프로시저	|20

표에서 자동으로 인덱싱된 문서에 대한 삽입/바꾸기/삭제 작업에서 사용하는 요청 단위는 대략 문서 읽기의 4배입니다. 위의 표는 참조일 뿐입니다. 실제로는,  

-	문서 크기가 다양할 수 있습니다(및 1KB에 해당하지 않음), 
-	문서의 속성 수가 10개를 초과할 수 있습니다.
-	기본 일관성 수준을 강력, 제한된 부실 또는 최종으로 설정할 수 있습니다.
-	일부 문서만 인덱싱하지 않도록 선택할 수 있습니다. 
-	일부 속성만 인덱싱하고 DocumentDB에서 모든 항목을 자동으로 인덱싱하지 않도록 선택할 수 있습니다.
-	쿼리와 저장 프로시저가 훨씬 더 복잡할 수 있습니다.  

 요청의 x-ms-request-charge 응답 헤더를 검사하여 지정된 요청의 요청 단위를 얻을 수 있습니다.  

#컬렉션 및 프로비전된 처리량
데이터베이스 계정에 프로비전된 처리량은 단일 컬렉션의 최대 처리량 수준(요청 단위)까지 모든 컬렉션에 균일하게 할당됩니다. 예를 들어 단일 용량 단위를 구매하고 단일 컬렉션을 만드는 경우 컬렉션이 CU에 프로비전된 모든 처리량을 사용할 수 있습니다. 추가 컬렉션을 만들면 프로비전된 처리량이 균일하게 할당되어 각 컬렉션이 프로비전된 모든 처리량의 절반씩 받게 됩니다.  

#일관성 수준 및 처리량 선택
기본 일관성 수준 선택은 처리량 및 대기 시간에 영향을 줍니다.  프로그래밍 방식으로 및 Azure 포털을 통해 기본 일관성 수준을 설정할 수 있습니다. 요청 단위로 일관성 수준을 재정의할 수도 있습니다. 기본 일관성 수준은 일정한 읽기/쓰기 및 고유한 쓰기 읽기를 보장하는 세션 일관성 수준입니다. 세션 일관성은 사용자 중심 응용 프로그램에 유용하며 일관성과 성능 절충의 최적 균형을 제공합니다.   

-	세션 및 최종 일관성 수준은 대략 문서 읽기 요청 2000개와 문서 삽입/바꾸기/삭제 500개를 제공합니다.
-	강력 및 제한된 부실 일관성 수준은 대략 문서 읽기 요청 1200개와 문서 삽입/바꾸기/삭제 500개를 제공합니다. 제한된 부실을 사용한 삽입/바꾸기/삭제는 대기 시간이 강력보다 훨씬 더 짧습니다.  

#프로비전된 문서 저장소 및 인덱스 오버헤드
각 CU를 구매할 때마다 계정에 SSD 지원 문서 저장소 10GB가 프로비전됩니다. 10GB의 문서 저장소에는 문서와 인덱스 저장소가 포함됩니다. 기본적으로 DocumentDB 컬렉션은 보조 인덱스나 스키마를 명시적으로 요구하지 않고 모든 문서를 자동으로 인덱싱하도록 구성되어 있습니다. DocumentDB를 사용한 소비자 배율 자사 응용 프로그램의 프로덕션 사용을 기준으로 일반적인 인덱스 오버헤드는 2-20% 사이입니다. DocumentDB에서 사용하는 인덱싱 기술은 속성 값에 관계없이 인덱스 오버헤드가 기본 설정을 사용한 문서 크기의 80%를 초과하지 않도록 합니다.  

기본적으로 모든 문서가 DocumentDB에서 자동으로 인덱싱됩니다. 그러나 인덱스 오버헤드를 미세 조정하려는 경우 문서를 삽입하거나 바꿀 때 특정 문서가 인덱싱되지 않도록 제거할 수 있습니다. 컬렉션 내의 모든 문서를 인덱싱에서 제외하도록 DocumentDB 컬렉션을 구성할 수 있습니다. 또한 JSON 문서의 와일드카드를 사용하여 특정 속성 또는 경로만 선택적으로 인덱싱하도록 DocumentDB 컬렉션을 구성할 수 있습니다.  속성 또는 문서를 제외하면 쓰기 처리량이 향상되어 사용하는 요청 단위 수가 줄어듭니다.   
 
