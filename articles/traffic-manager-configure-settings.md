<properties linkid="" urlDisplayName="" pageTitle="" metaKeywords="" description="" metaCanonical="" services="" documentationCenter="" title="How to Configure Traffic Manager Settings" authors="" solutions="" manager="" editor="" />

트래픽 관리자 설정을 구성하는 방법
==================================

Azure 트래픽 관리자를 사용하여 Azure 호스티드 서비스에 대한 사용자 트래픽 분산을 제어할 수 있습니다.

트래픽 관리자는 회사의 기본 도메인 이름에 대한 DNS 쿼리에 지능형 정책 엔진을 적용하여 작동합니다. 트래픽 관리자 도메인을 가리키도록 회사 소유의 DNS 리소스 레코드를 업데이트합니다. 그러면 해당 도메인에 연결된 트래픽 관리자 정책이 회사의 기본 도메인 이름에 대한 DNS 쿼리를 특정 트래픽 관리자 정책에 포함된 Azure 호스티드 서비스의 IP 주소로 확인합니다. 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/hh744833.aspx)를 참조하십시오.

목차
----

-   [방법: 회사 인터넷 도메인이 트래픽 관리자 도메인을 가리키도록 설정](#howto_point_company)
-   [방법: 정책 테스트](#howto_test)
-   [방법: 일시적으로 정책 및 호스티드 서비스 사용 안 함](#howto_temp_disable)
-   [방법: 정책 편집](#howto_edit_policy)
-   [방법: 일련의 호스티드 서비스에서 동일하게 트래픽 부하 분산](#howto_load_balance)
-   [방법: 장애 조치(Failover) 정책 만들기](#howto_create_failover)
-   [방법: 들어오는 트래픽을 네트워크 성능에 따라 호스티드 서비스로 리디렉션](#howto_direct)

방법: 회사 인터넷 도메인이 트래픽 관리자 도메인을 가리키도록 설정
-----------------------------------------------------------------

회사 도메인 이름이 트래픽 관리자 도메인을 가리키도록 하려면 CNAME을 사용하여 DNS 서버의 DNS 리소스 레코드를 편집합니다.

예를 들어 회사의 기본 도메인인 **www.contoso.com**이 **contoso.trafficmanager.net**이라는 트래픽 관리자 도메인을 가리키도록 하려면 아래와 같이 DNS 리소스 레코드를 업데이트합니다. `www.contoso.com IN CNAME contoso.trafficmanager.net`

이제 *www.contoso.com*으로 전송되는 모든 트래픽이 *contoso.trafficmanager.net*으로 리디렉션됩니다. 모든 트래픽을 트래픽 관리자로 리디렉션할 도메인을 사용 중인지 확인하십시오.

방법: 정책 테스트
-----------------

최상의 정책 테스트 방법은 다수의 클라이언트를 설정한 후 정책의 서비스를 한 번에 하나씩 종료하는 것입니다. 다음은 트래픽 관리자 정책을 테스트하는 데 도움이 되는 팁입니다.

-   변경이 신속하게(예: 30초) 전파되도록 **DNS TTL을 매우 낮게 설정**합니다.

-   테스트하는 정책에서 **Azure 호스티드 서비스의 IP 주소를 확인**합니다. 이 정보는 Azure 관리 포털에서 가져올 수 있습니다. 서비스의 프로덕션 배포를 클릭합니다. 오른쪽의 속성 창에서 마지막 항목은 VIP, 즉 해당 호스티드 서비스의 가상 IP 주소입니다.

    ![호스티드 서비스 IP 위치](./media/traffic-manager-configure-settings/hosted_service_IP_location.png)

    **그림 1** - 호스티드 서비스 IP 위치

-   **DNS 이름을 IP 주소로 확인할 수 있는 도구를 사용**하여 해당 주소를 표시합니다. 회사 도메인 이름이 정책의 호스티드 서비스의 IP 주소로 확인되는지 확인합니다. 트래픽 관리자 정책의 부하 분산 방법과 일치하는 방식으로 확인되어야 합니다. Windows 시스템을 사용 중인 경우 CMD 창에서 nslookup을 사용할 수 있습니다(아래에서 설명함). IP 주소를 확인할 수 있는, 공개적으로 사용 가능한 다른 도구들도 인터넷에서 제공됩니다.

-   *nslookup*을 사용하여 **트래픽 관리자 정책을 확인**합니다.

> **nslookup을 사용하여 트래픽 관리자 정책을 확인하려면**

> 1.  **시작-실행**을 클릭하고 **CMD**를 입력하여 CMD 창을 시작합니다.

> 1.  DNS 확인자 캐시를 플러시하려면 `ipconfig /flushdns`를 입력합니다.

> 1.  `nslookup <your traffic manager domain>` 명령을 입력합니다. 예를 들어 다음 명령은 접두사 *myapp.contoso*가 있는 도메인을 확인합니다. `nslookup myapp.contoso.trafficmanager.net`

> > 일반적인 결과를 다음을 표시합니다.

> > -   이 트래픽 관리자 도메인을 확인하기 위해 액세스하는 DNS 서버의 DNS 이름 및 IP 주소

> > -   명령줄에서 "nslookup" 뒤에 입력한 트래픽 관리자 도메인 이름 및 트래픽 관리자 도메인이 확인하는 IP 주소. 두 번째 IP 주소는 중요 확인 사항입니다. 테스트하는 트래픽 관리자 정책의 호스티드 서비스 중 하나의 VIP와 일치해야 합니다.

> > ![nslookup 명령 예제](./media/traffic-manager-configure-settings/nslookup_command_example.png)

> > **그림 2** - nslookup 명령 예제

-   **아래에 나온 추가 테스트 방법 중 하나를 사용합니다.** 테스트하는 부하 분산의 유형에 적합한 방법을 선택합니다.

### 성능 정책

효율적으로 도메인을 테스트하기 위해 환경의 여러 부분에서 클라이언트가 필요합니다. Azure에서 회사 도메인 이름을 통해 서비스 호출을 시도하는 클라이언트를 만들 수 있습니다. 또는 글로벌 기업인 경우 국가 내의 다른 지역에서 원격으로 클라이언트에 로그인하여 해당 클라이언트에서 테스트할 수 있습니다.

무료 웹 기반 nslookup 및 확인 서비스를 사용할 수 있습니다. 그중 일부에는 다양한 위치에서 DNS 이름을 확인할 수 있는 기능이 있습니다. 예를 들어 nslookup에서 검색해 보십시오. 다른 옵션은 Gomez 또는 Keynote 같은 타사 솔루션을 사용하여 정책이 예상대로 트래픽을 분산하는지 확인하는 것입니다.

### 장애 조치(Failover) 정책

1.  모든 서비스를 실행 상태로 둡니다.

2.  단일 클라이언트를 사용합니다.

3.  ping 또는 유사한 유틸리티를 사용하여 회사 도메인의 DNS 확인을 요청합니다.

4.  가져오는 IP 주소가 기본 호스티드 서비스의 주소인지 확인합니다.

5.  기본 서비스를 종료하거나 트래픽 관리자가 종료되었다고 인식하도록 모니터링 파일을 제거합니다.

6.  2분 이상 기다립니다.

7.  DNS 확인을 요청합니다.

8.  가져오는 IP 주소가 Edit Traffic Manager Policy 대화 상자에 표시되는 서비스 순서에서 두 번째 호스티드 서비스의 주소인지 확인합니다.

9.  두 번째 서비스를 종료한 후 세 번째 서비스를 종료하는 등 프로세스를 반복합니다. 종료할 때마다 DNS 확인이 목록에 있는 다음 서비스의 IP 주소를 반환하는지 확인합니다. 모든 서비스가 종료되면 다시 기본 호스티드 서비스의 IP 주소를 얻게 됩니다.

### 라운드 로빈 정책

1.  모든 서비스를 실행 상태로 둡니다.

2.  단일 클라이언트를 사용합니다.

3.  최상위 도메인의 DNS 확인을 요청합니다.

4.  가져오는 IP 주소가 목록에 있는 주소 중 하나인지 확인합니다.

5.  프로세스를 반복하며 새 IP 주소를 수신하도록 DNS TTL이 만료되도록 합니다. 각 호스티드 서비스에 대해 반환되는 IP 주소가 표시됩니다. 그런 다음 프로세스가 반복됩니다.

방법: 일시적으로 정책 및 호스티드 서비스 사용 안 함
---------------------------------------------------

이전에 만든 트래픽 관리자 정책이 트래픽을 라우팅하지 않도록 해당 정책을 사용하지 않게 설정할 수 있습니다. 트래픽 관리자 정책을 사용하지 않도록 설정하는 경우 해당 정책의 정보는 그대로 유지되며 트래픽 관리자 인터페이스에서 편집할 수 있습니다. 쉽게 정책을 다시 사용하도록 설정할 수 있으며, 라우팅이 다시 시작됩니다.

트래픽 관리자 정책의 일부인 개별 호스티드 서비스를 사용하지 않도록 설정할 수도 있습니다. 이 작업은 호스티드 서비스를 효율적으로 정책의 일부로 두지만, 호스티드 서비스가 포함되지 않은 것처럼 정책이 적용됩니다. 이 작업은 유지 관리 모드이거나 재배포할 예정이며 불안정한 호스티드 서비스를 일시적으로 제거하는 데 매우 유용합니다. 호스티드 서비스가 다시 실행되면 호스티드 서비스를 사용하도록 다시 설정할 수 있습니다.

**참고**  
호스티드 서비스를 사용하지 않도록 설정하는 것은 Azure에서의 배포 상태와 관련이 없습니다. 정상 서비스는 실행 상태를 유지하며 트래픽 관리자에서 사용하지 않도록 설정된 경우에도 트래픽을 수신할 수 있습니다. 또한 한 정책에서 호스티드 서비스를 사용하지 않도록 설정해도 다른 정책에서 해당 상태가 영향을 받지 않습니다.
### 정책을 사용하지 않도록 설정하려면

1.  트래픽 관리자 인터페이스 트리에서 사용하도록 설정된 정책을 선택합니다.

2.  상단 도구 모음에서 **정책 사용 안 함**을 클릭합니다. 이미 사용하지 않도록 설정된 정책을 강조 표시하는 경우 이 단추가 회색으로 표시됩니다.

### 정책을 사용하도록 설정하려면

1.  트래픽 관리자 인터페이스 트리에서 사용하지 않도록 설정된 정책을 선택합니다.

2.  상단 도구 모음에서 **정책 사용**을 클릭합니다. 이미 사용하지 않도록 설정된 정책을 강조 표시하는 경우 이 단추가 회색으로 표시됩니다.

### 호스티드 서비스를 사용하지 않도록 설정하려면

1.  정책에서 사용하도록 설정된 호스티드 서비스를 트래픽 관리자 인터페이스에서 선택합니다. 정책 내에 포함된 호스티드 서비스를 표시하려면 정책을 확장해야 합니다.

2.  상단 도구 모음에서 **Disable Service Policy**를 클릭합니다. 이미 사용하지 않도록 설정된 호스티드 서비스를 강조 표시하는 경우 이 단추가 회색으로 표시됩니다.

3.  정책의 일부인 트래픽 관리자 도메인에 대해 설정된 DNS TTL 시간을 기반으로 트래픽이 호스티드 서비스로 들어가는 것이 중지됩니다. 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/5229dd1c-5a91-4869-8522-bed8597d9cf5#BKMK_Monitoring)에서 "Azure 트래픽 관리자에서 호스티드 서비스 모니터링" 섹션으로 스크롤하여 참조하십시오.

### 호스티드 서비스를 사용하도록 설정하려면

1.  정책에서 사용하지 않도록 설정된 호스티드 서비스를 트래픽 관리자 인터페이스에서 선택합니다. 정책 내에 포함된 호스티드 서비스를 표시하려면 정책을 확장해야 합니다.

2.  상단 도구 모음에서 **Enable Service Policy**를 클릭합니다. 이미 사용하도록 설정된 호스티드 서비스를 강조 표시하는 경우 이 단추가 회색으로 표시됩니다.

3.  정책에서 지정하는 대로 트래픽이 호스티드 서비스로 들어가는 것이 다시 중지됩니다.

방법: 정책 편집
---------------

정책이나 정책의 특정 호스티드 서비스를 일시적으로 해제해야 하는 경우 정책을 변경할 필요 없이 일시적으로 사용하지 않도록 설정할 수 있습니다.

정책을 다른 유형으로 변경하려면 다음 단계를 따르십시오.

1.  **관리 포털에서 트래픽 관리자 영역에 로그인**합니다(<http://manage.windowsazure.com>). 포털 페이지의 왼쪽 아래에 있는 **가상 네트워크**를 클릭한 후 왼쪽 창의 옵션에서 **트래픽 관리자**를 선택합니다.

2.  관리 포털의 트래픽 관리자 화면에서 변경할 **정책을 선택**합니다.

3.  상단 메뉴 모음에서 **"구성"을 클릭**합니다.

4.  **정책을 원하는 대로 변경합니다.** 부하 분산 방법을 변경하는 경우 **Selected hosted services** 목록에 나오는 호스티드 서비스의 순서는 선택한 옵션에 따라 중요할 수도 있고 그렇지 않을 수도 있습니다.

5.  **저장**을 클릭합니다.

방법: 일련의 호스티드 서비스에서 동일하게 트래픽 부하 분산
----------------------------------------------------------

일반적인 부하 분산 패턴은 일련의 동일한 호스티드 서비스를 제공하고 각 서비스에 라운드 로빈 방식으로 트래픽을 전송하는 것입니다. 이 문서에서는 이 유형의 부하 분산을 수행하도록 트래픽 관리자 도메인 및 정책을 설정하는 단계를 간략하게 설명합니다.

트래픽 관리자에서 사용할 수 있는 다른 부하 분산 방법에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/hh744833.aspx)에서 "Azure 트래픽 관리자의 부하 분산 방법" 섹션으로 스크롤하여 참조하십시오.

1.  프로덕션 환경으로 **호스티드 서비스를 배포**합니다. [Azure 호스티드 서비스](http://msdn.microsoft.com/library/gg432967.aspx) 개발 및 배포에 대해 자세히 알아보십시오.

2.  **관리 포털에서 트래픽 관리자 영역에 로그인**합니다(<http://manage.windowsazure.com>). 포털 페이지의 왼쪽 아래에 있는 **가상 네트워크**를 클릭한 후 왼쪽 창의 옵션에서 **트래픽 관리자**를 선택합니다.

3.  **정책을 선택하고 "만들기"를 클릭합니다.** 왼쪽 탐색 트리에서 **Policies** 폴더를 선택하여 상단 도구 모음에서 **만들기**를 사용하도록 설정합니다. **만들기**를 선택합니다. **Create Traffic Manager policy** 대화 상자가 나타납니다.

    ![정책 만들기 단추](./media/traffic-manager-configure-settings/Create_button_for_policies.png)

    **그림 1** - 정책 만들기 단추

4.  **구독을 선택합니다.** 정책 및 도메인은 단일 구독과 연결되어 있습니다.

5.  **라운드 로빈 부하 분산 방법을 선택합니다.** 트래픽 관리자에서 사용할 수 있는 다른 부하 분산 방법에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/hh744833.aspx)에서 "Azure 트래픽 관리자의 부하 분산 방법" 섹션으로 스크롤하여 참조하십시오.

6.  **호스티드 서비스를 찾아 정책에 추가합니다.** 필터 상자를 사용하여 상자에 입력하는 문자열이 포함된 호스티드 서비스를 찾습니다. 상자의 선택을 취소하면 4단계에서 선택한 구독에 대한 프로덕션의 모든 호스티드 서비스가 표시됩니다. 화살표 단추를 사용하여 호스티드 서비스를 정책에 추가합니다. **Selected DNS names** 상자 내의 순서는 이 부하 분산 방법에는 중요하지 않습니다.

7.  **모니터링을 설정합니다.** 모니터링에서는 오프라인 상태인 호스티드 서비스가 전송된 트래픽이 아닌지 확인합니다. 특정 경로 및 파일 이름이 설정되어 있어야 합니다. 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/5229dd1c-5a91-4869-8522-bed8597d9cf5#BKMK_Monitoring)에서 "Azure 트래픽 관리자에서 호스티드 서비스 모니터링" 섹션으로 스크롤하여 참조하십시오.

8.  **트래픽 관리자 도메인 이름을 지정합니다.** 도메인에 고유한 이름을 지정합니다. 도메인의 접두사만 지정할 수 있습니다. DNS TTL(Time to Live)은 기본 시간으로 둡니다. 이 설정의 효과에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/5229dd1c-5a91-4869-8522-bed8597d9cf5#BKMK_Monitoring)에서 "Azure 트래픽 관리자를 사용할 때 호스티드 서비스 및 정책의 모범 사례" 섹션으로 스크롤하여 참조하십시오.

    **Create Traffic Manager policy** 대화 상자는 아래 예와 비슷합니다.

    ![라운드 로빈 부하 분산 방법 대화 상자](./media/traffic-manager-configure-settings/Dialog_box_for_Round_Robin_load_balancing_method.png)

    **그림 2** - 라운드 로빈 부하 분산 방법 대화 상자

9.  **트래픽 관리자 도메인 및 정책을 테스트합니다.** 자세한 내용은 [방법: Azure 트래픽 관리자 정책 테스트](#howto_test)를 참조하십시오.

10. **DNS 서버가 트래픽 관리자 도메인을 가리키도록 합니다.** 트래픽 관리자 도메인이 설정되어 작동하면 회사 도메인이 트래픽 관리자 도메인을 가리키도록 신뢰할 수 있는 DNS 서버의 DNS 레코드를 편집합니다. 예를 들어 다음 명령은 **www.contoso.com**으로 전송되는 모든 트래픽을 트래픽 관리자 도메인인 **contoso.trafficmanager.net**으로 라우팅합니다. `www.contoso.com IN CNAME contoso.trafficmanager.net` 자세한 내용은 [방법: 회사 인터넷 도메인이 트래픽 관리자 도메인을 가리키도록 설정](#howto_point_company)을 참조하십시오.

방법: 장애 조치(Failover) 정책 만들기
-------------------------------------

조직에서 서비스의 안정성을 제공하려는 경우가 많습니다. 이를 위해 기본 서비스가 작동을 중단하는 경우에 대비하여 백업 서비스를 제공합니다. 일반적인 서비스 장애 조치(Failover) 패턴은 일련의 동일한 호스티드 서비스를 제공하고 하나 이상의 백업이 포함된 목록과 함께 기본 서비스에 트래픽을 전송하는 것입니다. 이 문서에서는 이 유형의 장애 조치(Failover) 백업을 수행하도록 트래픽 관리자 정책을 설정하는 단계를 간략하게 설명합니다.

트래픽 관리자에서 사용할 수 있는 다른 부하 분산 방법에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/hh744833.aspx)에서 "Azure 트래픽 관리자의 부하 분산 방법" 섹션으로 스크롤하여 참조하십시오.

1.  프로덕션 환경으로 **호스티드 서비스를 배포**합니다. 호스티드 서비스 개발 및 배포에 대한 자세한 내용은 [Azure 호스티드 서비스](http://msdn.microsoft.com/library/gg432967.aspx)를 참조하십시오.

2.  **관리 포털에서 트래픽 관리자 영역에 로그인**합니다(<http://manage.windowsazure.com>). 포털 페이지의 왼쪽 아래에 있는 **가상 네트워크**를 클릭한 후 왼쪽 창의 옵션에서 **트래픽 관리자**를 선택합니다.

3.  **정책을 선택하고 "만들기"를 클릭합니다.** 왼쪽 탐색 트리에서 **Policies** 폴더를 선택하여 상단 도구 모음에서 **만들기**를 사용하도록 설정합니다. **만들기**를 선택합니다. **Create Traffic Manager policy** 대화 상자가 나타납니다.

    ![정책 만들기 단추](./media/traffic-manager-configure-settings/Create_button_for_policies.png)

    **그림 1** - 정책 만들기 단추

4.  **구독을 선택합니다.** 정책 및 도메인은 단일 구독과 연결되어 있습니다.

5.  **장애 조치(Failover) 정책 부하 분산 방법을 선택합니다.** 트래픽 관리자에서 사용할 수 있는 다른 부하 분산 방법에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/hh744833.aspx)에서 "Azure 트래픽 관리자의 부하 분산 방법" 섹션으로 스크롤하여 참조하십시오.

6.  **호스티드 서비스를 찾아 정책에 추가합니다.** 필터 상자를 사용하여 상자에 입력하는 문자열이 포함된 호스티드 서비스를 찾습니다. 상자의 선택을 취소하면 4단계에서 선택한 구독에 대한 프로덕션의 모든 호스티드 서비스가 표시됩니다. 화살표 단추를 사용하여 호스티드 서비스를 정책에 추가합니다. **장애 조치(Failover)** 부하 분산 방법을 선택하는 경우 선택한 서비스의 순서가 중요합니다. 기본 호스티드 서비스가 맨 위에 있습니다. 위쪽 및 아래쪽 화살표를 사용하여 필요에 따라 순서를 변경합니다.

7.  모니터링에서는 오프라인 상태인 호스티드 서비스가 전송된 트래픽이 아닌지 확인합니다. 호스티드 서비스가 오프라인으로 표시된 경우에도 트래픽은 기본 호스티드 서비스에 전송되기 때문에, 모니터링을 설정하지 않고 장애 조치(Failover) 정책을 사용하면 소용이 없습니다. 호스티드 서비스를 모니터링하려면 특정 경로 및 파일 이름을 지정해야 합니다. 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/5229dd1c-5a91-4869-8522-bed8597d9cf5#BKMK_Monitoring)에서 "Azure 트래픽 관리자에서 호스티드 서비스 모니터링" 섹션으로 스크롤하여 참조하십시오.

8.  **트래픽 관리자 도메인 이름을 지정합니다.** 도메인에 고유한 이름을 지정합니다. 도메인의 접두사만 지정할 수 있습니다. **DNS TTL(Time to Live)**은 기본 시간으로 둡니다. 이 설정의 효과에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/5229dd1c-5a91-4869-8522-bed8597d9cf5#BKMK_Monitoring)에서 "Azure 트래픽 관리자를 사용할 때 호스티드 서비스 및 정책의 모범 사례" 섹션으로 스크롤하여 참조하십시오.

    **Create Traffic Manager policy** 대화 상자는 모양이 아래 예와 비슷합니다.

    ![장애 조치(Failover) 부하 분산 방법 대화 상자](./media/traffic-manager-configure-settings/Dialog_box_for_Failover_load_balancing_method.png)

    **그림 2** - 장애 조치(Failover) 부하 분산 방법 대화 상자

9.  **트래픽 관리자 도메인 및 정책을 테스트합니다.** 자세한 내용은 [방법: Azure 트래픽 관리자 정책 테스트](#howto_test)를 참조하십시오.

10. **DNS 서버가 트래픽 관리자 도메인을 가리키도록 합니다.** 트래픽 관리자 도메인이 설정되어 작동한 후에는 회사 도메인이 트래픽 관리자 도메인을 가리키도록 신뢰할 수 있는 DNS 서버의 DNS 레코드를 편집합니다. 자세한 내용은 [회사 인터넷 도메인이 트래픽 관리자 도메인을 가리키도록 하는 방법](#howto_point_company)을 참조하십시오. 예를 들어 다음 명령은 **www.contoso.com**으로 전송되는 모든 트래픽을 트래픽 관리자 도메인인 **contoso.trafficmanager.net**으로 라우팅합니다. `www.contoso.com IN CNAME contoso.trafficmanager.net`

방법: 들어오는 트래픽을 네트워크 성능에 따라 호스티드 서비스로 리디렉션
-----------------------------------------------------------------------

세계적으로 분산된 여러 데이터에 있는 호스티드 서비스의 부하를 분산하려면 들어오는 트래픽을 가장 가까운 호스티드 서비스로 리디렉션할 수 있습니다. "가장 가까운"이라는 말은 지리적 거리에 직접적으로 해당할 수 있지만 요청 처리 대기 시간이 가장 짧은 위치에 해당할 수도 있습니다. 성능 부하 분산 방법을 사용하면 위치와 대기 시간을 기준으로 분산할 수 있지만 네트워크 구성이나 부하에서 발생하는 실시간 변경 내용은 고려할 수 없습니다. 트래픽 관리자에서 사용할 수 있는 다른 부하 분산 방법에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/hh744833.aspx)에서 "Azure 트래픽 관리자의 부하 분산 방법" 섹션으로 스크롤하여 참조하십시오.

다음 단계에서는 프로세스를 안내합니다.

1.  프로덕션 환경으로 **호스티드 서비스를 배포**합니다. 자세한 내용은 [Azure에 대한 호스티드 서비스 만들기](http://msdn.microsoft.com/ko-kr/library/windowsazure/gg432967.aspx)를 참조하십시오. [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/5229dd1c-5a91-4869-8522-bed8597d9cf5#BKMK_Monitoring)에서 "호스티드 서비스 및 정책의 모범 사례"를 참조하십시오.

2.  **관리 포털에서 트래픽 관리자 영역에 로그인**합니다(<http://manage.windowsazure.com>). 포털 페이지의 왼쪽 아래에 있는 **가상 네트워크**를 클릭한 후 왼쪽 창의 옵션에서 **트래픽 관리자**를 선택합니다.

3.  **정책을 선택하고 "만들기"를 클릭합니다.** 왼쪽 탐색 트리에서 **Policies** 폴더를 선택하여 상단 도구 모음에서 **만들기**를 사용하도록 설정합니다. **만들기**를 선택합니다. **Create Traffic Manager policy** 대화 상자가 나타납니다.

    ![정책 만들기 단추](./media/traffic-manager-configure-settings/Create_button_for_policies.png)

    **그림 1** - 정책 만들기 단추

4.  **구독을 선택합니다.** 정책 및 도메인은 단일 구독과 연결되어 있습니다.

5.  **성능 부하 분산 방법을 선택합니다.** 트래픽 관리자에서 사용할 수 있는 다른 부하 분산 방법에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/hh744833.aspx)에서 "Azure 트래픽 관리자의 부하 분산 방법" 섹션으로 스크롤하여 참조하십시오.

6.  **호스티드 서비스를 찾아 정책에 추가합니다.** 필터 상자를 사용하여 상자에 입력하는 문자열이 포함된 호스티드 서비스를 찾습니다. 상자의 선택을 취소하면 4단계에서 선택한 구독에 대한 프로덕션의 모든 호스티드 서비스가 표시됩니다. 화살표 단추를 사용하여 호스티드 서비스를 정책에 추가합니다. **Selected DNS names** 내의 순서는 이 부하 분산 방법에는 중요하지 않습니다.

7.  **모니터링을 설정합니다.** 모니터링에서는 오프라인 상태인 호스티드 서비스가 전송된 트래픽이 아닌지 확인합니다. 특정 경로 및 파일 이름이 설정되어 있어야 합니다. 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/5229dd1c-5a91-4869-8522-bed8597d9cf5#BKMK_Monitoring)에서 "Azure 트래픽 관리자에서 호스티드 서비스 모니터링" 섹션으로 스크롤하여 참조하십시오.

8.  **트래픽 관리자 도메인 이름을 지정합니다.** 도메인에 고유한 이름을 지정합니다. 도메인의 접두사만 지정할 수 있습니다. **DNS TTL(Time to Live)**은 기본 시간으로 둡니다. 이 설정의 효과에 대한 자세한 내용은 [Azure 트래픽 관리자 개요](http://msdn.microsoft.com/ko-kr/library/windowsazure/5229dd1c-5a91-4869-8522-bed8597d9cf5#BKMK_Monitoring)에서 "Azure 트래픽 관리자를 사용할 때 호스티드 서비스 및 정책의 모범 사례" 섹션으로 스크롤하여 참조하십시오.

    **Create Traffic Manager policy** 대화 상자는 모양이 아래 예와 비슷합니다.

    ![성능 부하 분산 방법 대화 상자](./media/traffic-manager-configure-settings/Dialog_box_for_Performance_load_balancing_method.png)

    **그림 2** - 성능 부하 분산 방법 대화 상자

9.  **트래픽 관리자 도메인 및 정책을 테스트합니다.** 테스트에 대한 자세한 내용은 [방법: Azure 트래픽 관리자 정책 테스트](#howto_test)를 참조하십시오.

10. **DNS 서버가 트래픽 관리자 도메인을 가리키도록 합니다.** 트래픽 관리자 도메인이 설정되어 작동하면 회사 도메인이 트래픽 관리자 도메인을 가리키도록 신뢰할 수 있는 DNS 서버의 DNS 레코드를 편집합니다. 예를 들어 다음 명령은 **www.contoso.com**으로 전송되는 모든 트래픽을 트래픽 관리자 도메인인 **contoso.trafficmanager.net**으로 라우팅합니다. `www.contoso.com IN CNAME contoso.trafficmanager.net` 자세한 내용은 [방법: 회사 인터넷 도메인이 트래픽 관리자 도메인을 가리키도록 설정](#howto_point_company)을 참조하십시오.


