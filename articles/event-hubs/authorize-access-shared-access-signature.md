---
title: Azure 이벤트 허브에서 공유 액세스 서명으로 액세스 권한 부여
description: 이 문서에서는 SAS(공유 액세스 서명)를 사용하여 Azure Event Hubs 리소스에 대한 액세스 권한 부여에 대한 정보를 제공합니다.
services: event-hubs
ms.service: event-hubs
documentationcenter: ''
author: spelluru
ms.topic: conceptual
ms.date: 08/22/2019
ms.author: spelluru
ms.openlocfilehash: bdb1896f8a40c6de21ae76b536bfccec316341cd
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/27/2020
ms.locfileid: "69992797"
---
# <a name="authorizing-access-to-event-hubs-resources-using-shared-access-signatures"></a>공유 액세스 서명을 사용하여 이벤트 허브 리소스에 대한 액세스 권한 부여
공유 액세스 서명(SAS)은 이벤트 허브 네임스페이스의 리소스에 대한 제한된 액세스 권한을 부여하는 방법을 제공합니다. SAS는 권한 부여 규칙에 따라 이벤트 허브 리소스에 대한 액세스를 보호합니다. 이러한 규칙은 네임스페이스 또는 엔터티(이벤트 허브 또는 토픽)에서 구성됩니다. 이 문서에서는 SAS 모델에 대한 개요를 제공하고 SAS 모범 사례를 검토합니다.

## <a name="what-are-shared-access-signatures"></a>공유 액세스 서명이란 무엇입니까?
공유 액세스 서명(SAS)은 권한 부여 규칙에 따라 이벤트 허브 리소스에 대한 위임된 액세스를 제공합니다. 권한 부여 규칙에는 특정 권한과 연결된 이름이 있으며 암호화 키 쌍을 전달합니다. 이벤트 허브 클라이언트 또는 사용자 고유의 코드를 통해 규칙의 이름과 키를 사용하여 SAS 토큰을 생성합니다. 그런 다음 클라이언트는 토큰을 이벤트 허브에 전달하여 요청된 작업에 대한 승인을 증명할 수 있습니다.

SAS는 간단한 토큰을 사용하는 클레임 기반 권한 부여 메커니즘입니다. SAS를 사용하여 키는 연결 중에 전달되지 않습니다. 키는 서비스에 의해 나중에 확인될 수 있는 정보를 암호화하여 서명하는 데 사용됩니다. SAS는 클라이언트가 권한 부여 규칙 이름 및 일치 키를 즉시 소유하는 사용자 이름 및 암호 구성표와 유사하게 사용될 수 있습니다. SAS는 클라이언트가 서명 키를 소유하지 않고 보안 토큰 서비스에서 시간 제한 및 서명된 액세스 토큰을 받는 페더레이션된 보안 모델과 유사하게 사용할 수 있습니다.

> [!NOTE]
> Azure 이벤트 허브는 Azure Active Directory(Azure AD)를 사용하여 이벤트 허브 리소스에 대한 권한을 부여합니다. Azure AD에서 반환되는 OAuth 2.0 토큰을 사용하여 사용자 또는 응용 프로그램에 권한을 부여하면 SAS(공유 액세스 서명)를 통해 뛰어난 보안과 사용 편의성을 제공합니다. Azure AD를 사용하면 코드에 토큰을 저장하고 잠재적인 보안 취약점을 위험에 빠뜨릴 필요가 없습니다.
>
> 가능하면 Azure 이벤트 허브 응용 프로그램과 함께 Azure AD를 사용하는 것이 좋습니다. 자세한 내용은 Azure Active Directory 를 [사용하여 Azure 이벤트 허브 리소스에 대한 액세스 권한 부여를](authorize-access-azure-active-directory.md)참조하세요.

> [!IMPORTANT]
> SAS(공유 액세스 서명) 토큰은 리소스를 보호하는 데 매우 중요합니다. 세분성을 제공하는 동시에 SAS는 고객에게 이벤트 허브 리소스에 대한 액세스 권한을 부여합니다. 공개적으로 공유해서는 안 됩니다. 문제 해결을 위해 필요한 경우 로그 파일의 축소 버전을 사용하거나 로그 파일에서 SAS 토큰(있는 경우)을 삭제하고 스크린샷에 SAS 정보가 포함되어 있지 않은지 확인하십시오.

## <a name="shared-access-authorization-policies"></a>공유 액세스 권한 부여 정책
각 이벤트 허브 네임스페이스 및 각 이벤트 허브 엔터티(이벤트 허브 인스턴스 또는 Kafka 토픽)에는 규칙으로 구성된 공유 액세스 권한 부여 정책이 있습니다. 네임스페이스 수준에서 정책은 개별 정책 구성에 관계 없이 네임스페이스 내부의 모든 엔터티에 적용됩니다.
각각의 권한 부여 정책 규칙의 경우 이름, 범위 및 권한 등, 3가지 정보를 결정합니다. 이름은 해당 범위의 고유한 이름입니다. 범위는 해당 리소스의 URI입니다. 이벤트 허브 네임스페이스의 경우 범위는 `https://<yournamespace>.servicebus.windows.net/`에 대해 정규화된 도메인 이름(FQDN)입니다.

정책 규칙에서 제공하는 권한은 다음의 조합일 수 있습니다.
- **보내기** - 엔터티에 메시지를 보낼 수 있는 권리를 부여합니다.
- **듣기** - 엔티티의 청취 또는 수신권을 부여합니다.
- **관리** - 엔터티 생성 및 삭제를 포함하여 네임스페이스의 토폴로지 관리 권을 부여합니다.

> [!NOTE]
> **관리** 권한에는 **송신** 및 **수신 권한이** 포함됩니다.

네임스페이스 또는 엔터티 정책은 최대 12개의 공유 액세스 권한 부여 규칙을 보유할 수 있으며, 각 규칙에 대한 세 가지 규칙 집합, 기본 권한 및 보내기 및 수신 대기의 조합을 위한 공간을 제공합니다. 이 제한은 SAS 정책 저장소가 사용자 또는 서비스 계정 저장소가 아님을 강조합니다. 응용 프로그램에서 사용자 또는 서비스 ID를 기반으로 Event Hubs 리소스에 대한 액세스 권한을 부여해야 하는 경우 인증 및 액세스 확인 후 SAS 토큰을 발급하는 보안 토큰 서비스를 구현해야 합니다.

권한 부여 규칙에는 **기본 키와** **보조 키가**할당됩니다. 이러한 키는 암호화된 강력한 키입니다. 그들을 잃거나 누출하지 마십시오. Azure 포털에서 항상 사용할 수 있습니다. 생성된 키 중 하나를 사용할 수 있으며 언제든지 다시 생성할 수 있습니다. 정책에서 키를 다시 생성하거나 변경하는 경우 해당 키에 기반한 이전에 발급된 모든 토큰은 즉시 무효화됩니다. 그러나 이러한 토큰에 따라 생성된 진행 중인 연결은 토큰이 만료될 때까지 작업을 계속합니다.

이벤트 허브 네임스페이스를 만들 때 네임스페이스에 대해 **RootManageSharedAccessKey라는** 정책 규칙이 자동으로 만들어집니다. 이 정책에는 전체 네임스페이스에 대한 사용 권한이 **있습니다.** 이 규칙을 관리 루트 계정처럼 처리하고 응용 프로그램에서 사용하지 않는 것이 좋습니다. PowerShell 또는 Azure CLI를 통해 포털의 네임스페이스에 대한 **구성** 탭에서 추가 정책 규칙을 만들 수 있습니다.

## <a name="best-practices-when-using-sas"></a>SAS를 사용하는 경우 모범 사례
애플리케이션에서 공유 액세스 서명을 사용할 경우 다음과 같은 두 가지 잠재적 위험에 대해 잘 알고 있어야 합니다.

- SAS가 유출되면 SAS를 획득한 모든 사용자가 사용할 수 있으며, 이로 인해 이벤트 허브 리소스가 손상될 수 있습니다.
- 클라이언트 응용 프로그램에 제공된 SAS가 만료되고 응용 프로그램이 서비스에서 새 SAS를 검색할 수 없는 경우 응용 프로그램의 기능이 방해받을 수 있습니다.

다음은 공유 액세스 서명을 사용하여 이러한 위험을 완화하는 데 도움이 될 수 있는 권장 사항입니다.

- **필요한 경우 클라이언트가 자동으로 SAS를 갱신하도록 합니다:** 클라이언트는 만료되기 전에 SAS를 갱신해야 하며, SAS를 제공하는 서비스를 사용할 수 없는 경우 재시도할 시간을 허용해야 합니다. 만료 기간 내에 완료될 것으로 예상되는 소수의 즉각적인 단기 작업에 SAS를 사용할 경우 SAS가 갱신되지 않을 것으로 예상되기 때문에 필요하지 않을 수 있습니다. 하지만 클라이언트가 SAS를 통해 일상 요청을 수행하는 경우에는 중간에 만료될 수 있습니다. 중요한 고려 사항은 SAS가 단명해야 할 필요성과 클라이언트가 충분히 일찍 갱신을 요청해야 할 필요성(성공적인 갱신 이전에 만료되기 전에 SAS 만료로 인한 중단을 피하기 위해)의 균형을 맞추는 것입니다.
- **SAS 시작 시간에 주의**: SAS의 시작 시간을 **현재로**설정한 다음 클럭 기울이기(다른 컴퓨터에 따른 현재 시간의 차이)로 인해 처음 몇 분 동안 오류가 간헐적으로 관찰될 수 있습니다. 일반적으로 시작 시간을 최소 15분 이전으로 설정하거나 또는 전혀 설정하지 마십시오. 만료 시간도 일반적으로 동일하게 적용됩니다. 요청 시 최대 15분의 시계를 어느 방향으로든 기울일 수 있습니다. 
- **액세스할 리소스에 대해 구체적으로 설명:** 보안 모범 사례는 사용자에게 필요한 최소 권한을 제공하는 것입니다. 사용자가 단일 엔터티에 대한 읽기 권한만 필요한 경우 해당 엔터티에 대한 읽기 권한만 부여하고 모든 엔터티에 대한 읽기/쓰기/삭제 권한은 부여하지 않습니다. 또한 SAS가 공격자의 손에 덜 강력한 힘을 가지고 있기 때문에 SAS가 손상된 경우 피해를 줄이는 데 도움이 됩니다.
- **항상 SAS를 사용하지 마십시오:** 경우에 따라 이벤트 허브에 대한 특정 작업과 관련된 위험이 SAS의 이점보다 더 중요할 수 있습니다. 이러한 작업의 경우 비즈니스 규칙 유효성 검사, 인증 및 감사 후 이벤트 허브에 기록하는 중간 계층 서비스를 만듭니다.
- **항상 HTTP 사용**: 항상 Https를 사용하여 SAS를 만들거나 배포합니다. SAS가 HTTP를 통해 전달되고 가로채면 중간자 첨부를 수행하는 공격자는 SAS를 읽은 다음 의도한 사용자가 가질 수 있는 것처럼 사용할 수 있으므로 중요한 데이터를 손상시키거나 악의적인 사용자가 데이터 손상을 허용할 수 있습니다.

## <a name="conclusion"></a>결론
공유 액세스 서명은 이벤트 허브 리소스에 제한된 권한을 클라이언트에 제공하는 데 유용합니다. Azure Event Hubs를 사용하는 모든 응용 프로그램에 대한 보안 모델의 중요한 부분입니다. 이 문서에 나열된 모범 사례를 따르는 경우 SAS를 사용하여 응용 프로그램의 보안을 손상시키지 않으면서 리소스에 대한 보다 유연하게 액세스할 수 있습니다.

## <a name="next-steps"></a>다음 단계
다음 관련 문서를 참조하십시오. 

- [Azure Active Directory를 사용하여 응용 프로그램에서 Azure 이벤트 허브에 대한 요청을 인증합니다.](authenticate-application.md)
- [Azure Active Directory를 사용하여 관리되는 ID를 인증하여 이벤트 허브 리소스에 액세스](authenticate-managed-identity.md)
- [공유 액세스 서명을 사용하여 Azure 이벤트 허브에 대한 요청을 인증합니다.](authenticate-shared-access-signature.md)
- [Azure Active Directory를 사용하여 이벤트 허브 리소스에 대한 액세스 권한 부여](authorize-access-azure-active-directory.md)


