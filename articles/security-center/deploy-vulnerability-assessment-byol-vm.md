---
title: Azure Security Center의 BYOL VM 취약성 평가
description: Azure Virtual Machines에 BYOL 취약점 평가 솔루션을 배포 하 여 가상 머신을 보호 하는 데 도움이 되는 Azure Security Center에 대 한 권장 사항을 가져옵니다.
author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 03/17/2021
ms.author: memildin
ms.openlocfilehash: 61c3d6bfc517b5a6979ea8b7a8fe895a1b3aeb44
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/19/2021
ms.locfileid: "104602471"
---
# <a name="deploy-a-bring-your-own-license-byol-vulnerability-assessment-solution"></a>BYOL (사용자 라이선스 보유) 취약점 평가 솔루션 배포

**서버에 대해 Azure Defender** 를 사용 하도록 설정한 경우 [가상 머신에 대 한 통합 취약성 스캐너](./deploy-vulnerability-assessment-vm.md)에 설명 된 대로 Azure Security Center의 기본 제공 취약점 평가 도구를 사용할 수 있습니다. 이 도구는 Azure Defender에 통합 되어 있으며 외부 라이선스가 필요 하지 않습니다. 모든 항목이 Security Center 내에서 원활 하 게 처리 됩니다. 또한 통합 스캐너는 Azure Arc 사용 컴퓨터를 지원 합니다.

또는 [Qualys](https://www.qualys.com/lp/azure) 또는 [Rapid7](https://www.rapid7.com/products/insightvm/)에서 개인적으로 사용이 허가 된 자체 취약점 평가 솔루션을 배포할 수 있습니다. 동일한 구독에 속한 여러 Vm에 이러한 파트너 솔루션 중 하나를 설치할 수 있지만 Azure Arc 사용 컴퓨터에는 설치할 수 없습니다.

## <a name="availability"></a>가용성

|양상|세부 정보|
|----|:----|
|릴리스 상태:|GA(일반 공급)|
|컴퓨터 종류:|![예](./media/icons/yes-icon.png) Azure 가상 머신<br>![아니요](./media/icons/no-icon.png) Azure Arc 지원 머신|
|가격 책정:|Free|
|필요한 역할 및 권한:|**리소스 소유자** 가 스캐너를 배포할 수 있음<br>**보안 읽기 권한자** 는 검색 결과를 볼 수 있습니다.|
|클라우드:|![예](./media/icons/yes-icon.png) 상용 클라우드<br>![아니요](./media/icons/no-icon.png) 국가/소버린(미국 정부, 중국 정부, 기타 정부)|
|||


## <a name="deploy-a-byol-solution-from-the-azure-portal"></a>Azure Portal에서 BYOL 솔루션 배포

BYOL 옵션은 지원 되는 타사 취약성 평가 솔루션을 참조 합니다. 현재 Qualys 및 Rapid7는 모두 지원 되는 공급자입니다.

지원되는 솔루션은 파트너의 관리 플랫폼에 취약성 데이터를 보고합니다. 그러면 파트너의 관리 플랫폼은 취약성 및 상태 모니터링 데이터를 Security Center에 다시 제공합니다. Security Center 대시보드에서 취약 한 Vm을 식별 하 고 보고서에 대 한 Security Center에서 직접 파트너 관리 콘솔로 전환 하 고 자세한 정보를 볼 수 있습니다.

1. [Azure Portal](https://azure.microsoft.com/features/azure-portal/)에서 **Security Center** 를 엽니다.

1. Security Center의 메뉴에서 **권장** 구성 페이지를 엽니다.

1. **가상 컴퓨터에서 취약성 평가 솔루션을 사용 하도록 설정 해야** 하는 권장 사항을 선택 합니다.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png" alt-text="* * 취약점 평가 솔루션의 컴퓨터 그룹은 virtual machines * * 권장 사항 페이지에서 사용 하도록 설정 해야 합니다." lightbox="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png":::

    VM은 다음 그룹 중 하나 이상에 표시됩니다.

    * **정상 리소스** – Security Center는 이러한 vm에서 실행 되는 취약성 평가 솔루션을 검색 했습니다.
    * **비정상 리소스** – 취약점 스캐너 확장을 이러한 vm에 배포할 수 있습니다. 
    * **해당 하지 않는 리소스** – 이러한 vm은 취약점 스캐너 확장을 배포할 수 없습니다.

1. 비정상 컴퓨터 목록에서 취약점 평가 솔루션을 받을 컴퓨터를 선택 하 고 **재구성** 을 선택 합니다.

    >[!IMPORTANT]
    > 구성에 따라이 목록의 하위 집합만 표시 될 수 있습니다. 
    >
    > - 타사 취약성 검사 프로그램이 구성 되지 않은 경우 배포할 기회가 제공 되지 않습니다.
    > - 선택한 Vm이 Azure Defender로 보호 되지 않는 경우 ASC 통합 취약성 스캐너 옵션을 사용할 수 없습니다.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-remediation-options.png" alt-text="권장 사항에 응답할 때 선택 하려는 수정 흐름 유형에 대 한 옵션 * * 취약성 평가 솔루션을 virtual machines * * 권장 사항 페이지에서 사용 하도록 설정 해야 합니다.":::

1. 새 BYOL 구성을 설정 하려면 **새 타사 취약성 검색 프로그램 구성** 을 선택 하 고, 관련 확장을 선택 하 고, **진행** 을 선택 하 고, 공급자의 세부 정보를 다음과 같이 입력 합니다.

    1. **리소스 그룹** 에 **기존 항목 사용** 을 선택합니다. 나중에이 리소스 그룹을 삭제 하는 경우 BYOL 솔루션을 사용할 수 없습니다.
    1. **위치** 에 솔루션의 지리적 위치를 선택합니다.
    1. Qualys의 경우 Qualys에서 제공한 라이선스를 **라이선스 코드** 필드에 입력 합니다.
    1. Rapid7의 경우 **Rapid7 구성 파일** 을 업로드 합니다.
    1. **공개 키** 상자에서 파트너가 제공 하는 공개 키 정보를 입력 합니다.
    1. 이 솔루션의 구독에서 검색 된 모든 Vm에이 취약점 평가 에이전트를 자동으로 설치 하려면 **자동 배포** 를 선택 합니다.
    1. **확인** 을 선택합니다.

1. BYOL 솔루션을 이미 설정한 경우에는 **구성 된 타사 취약점 스캐너 배포** 를 선택 하 고 관련 확장을 선택한 다음 **계속** 을 선택 합니다.

취약점 평가 솔루션이 대상 컴퓨터에 설치 된 후에는 Security Center 검색을 실행 하 여 시스템 및 응용 프로그램의 취약성을 검색 하 고 식별 합니다. 첫 번째 검색을 완료하려면 몇 시간이 걸릴 수 있습니다. 그 후 매시간 실행 됩니다.



## <a name="deploy-a-byol-solution-using-powershell-and-the-rest-api"></a>PowerShell 및 REST API를 사용 하 여 BYOL 솔루션 배포

[Qualys](https://www.qualys.com/lp/azure) 또는 [Rapid7](https://www.rapid7.com/products/insightvm/)에서 개인적으로 사용이 허가 된 자체 취약점 평가 솔루션을 프로그래밍 방식으로 배포 하려면 제공 된 스크립트 [PowerShell > 취약점 솔루션](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution)을 사용 합니다. 이 스크립트는 REST API을 사용 하 여 ASC로 새 보안 솔루션을 만듭니다. 서비스 공급자 (Qualys 또는 Rapid7)에서 제공 하는 라이선스 및 키가 필요 합니다.

> [!IMPORTANT] 
> 라이선스 당 솔루션은 하나만 만들 수 있습니다. 동일한 이름/라이선스/키를 사용 하 여 다른 솔루션을 만들려고 하면 실패 합니다.

### <a name="prerequisites"></a>필수 구성 요소

필수 PowerShell 모듈:

- 설치-모듈 Az
- Install-module Az. security

### <a name="run-the-script"></a>스크립트 실행

스크립트를 실행 하려면 아래 매개 변수에 대 한 관련 정보가 필요 합니다.

| **매개 변수** | **필수** | **참고** |
|----|:----:|----|
|**구독**|✔|분석 하려는 리소스가 포함 된 Azure 구독의 subscriptionID입니다.|
|**ResourceGroupName**|✔|리소스 그룹의 이름입니다. 기본 ("DefaultResourceGroup-xxx")을 포함 하 여 기존 리소스 그룹을 사용 합니다.<br>솔루션은 Azure 리소스가 아니므로 리소스 그룹에 나열 되지 않지만 여전히 연결 되어 있습니다. 나중에 리소스 그룹을 삭제 하면 BYOL 솔루션을 사용할 수 없게 됩니다.|
|**vaSolutionName**|✔|새 솔루션의 이름입니다.|
|**vaType**|✔|Qualys 또는 Rapid7.|
|**licenseCode**|✔|공급 업체에서 제공 하는 라이선스 문자열입니다.|
|**publicKey**|✔|공급 업체에서 공개 키를 제공 했습니다.|
|**업데이트가**|-|이 VA 솔루션에 대해 자동 배포를 사용 (true) 또는 사용 하지 않도록 설정 (false) 합니다. 사용 하도록 설정 하면 구독의 모든 새 VM이 자동으로 솔루션에 연결을 시도 합니다.<br/>(기본값: False)|
||||

구문

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenseCode <License code from vendor> -publicKey <Public Key received from vendor>
```

예 (이 예제에는 유효한 라이선스 정보는 포함 되지 않음):

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenseCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```

## <a name="faq---byol-vulnerability-scanner"></a>FAQ-BYOL 취약성 스캐너

- [Qualys 에이전트를 배포 하는 경우 필요한 통신 설정은 무엇 인가요?](#if-i-deploy-a-qualys-agent-what-communications-settings-are-required)
- [BYOL 솔루션을 구성할 때 리소스 그룹을 지정 해야 하는 이유는 무엇 인가요?](#why-do-i-have-to-specify-a-resource-group-when-configuring-a-byol-solution)


### <a name="if-i-deploy-a-qualys-agent-what-communications-settings-are-required"></a>Qualys 에이전트를 배포 하는 경우 필요한 통신 설정은 무엇 인가요?

Qualys 클라우드 에이전트는 업데이트를 위해 정기적으로 Qualys의 SOC와 통신 하 고 제품 기능에 필요한 다양 한 작업을 수행 하도록 설계 되었습니다. 에이전트가 SOC와 원활 하 게 통신할 수 있도록 하려면 Qualys SOC CIDR 및 Url에 대 한 인바운드 및 아웃 바운드 트래픽을 허용 하도록 네트워크 보안을 구성 합니다.

다양 한 지리적 위치에 여러 Qualys 플랫폼이 있습니다. SOC CIDR 및 Url은 Qualys 구독의 호스트 플랫폼에 따라 달라 집니다. Qualys 호스트 플랫폼을 식별 하려면이 페이지를 사용 https://www.qualys.com/platform-identification/ 합니다.


### <a name="why-do-i-have-to-specify-a-resource-group-when-configuring-a-byol-solution"></a>BYOL 솔루션을 구성할 때 리소스 그룹을 지정 해야 하는 이유는 무엇 인가요?

솔루션을 설정 하는 경우 연결할 리소스 그룹을 선택 해야 합니다. 솔루션은 Azure 리소스가 아니므로 리소스 그룹의 리소스 목록에 포함 되지 않습니다. 그럼에도 불구 하 고 해당 리소스 그룹에 연결 됩니다. 나중에 리소스 그룹을 삭제 하면 BYOL 솔루션을 사용할 수 없게 됩니다.



## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [취약성 평가 솔루션에서 발견 된 내용 수정](remediate-vulnerability-findings-vm.md)


Security Center는 다음에 대한 취약성 분석도 제공합니다.

- SQL 데이터베이스 - [취약성 평가 대시보드에서 취약성 평가 보고서 탐색](defender-for-sql-on-machines-vulnerability-assessment.md#explore-vulnerability-assessment-reports)을 참조하세요.
- 이미지 Azure Container Registry- [컨테이너 레지스트리에 대해 Azure Defender를 사용 하 여 취약성에 대 한 이미지 검색을](defender-for-container-registries-usage.md) 참조 하세요.