<properties
   pageTitle="Azure 가상 네트워크에 지점 및 사이트 간 VPN 연결 구성 | Microsoft Azure"
   description="지점 및 사이트 간 VPN 연결을 만들어 Azure 가상 네트워크에 안전하게 연결합니다. 서비스 관리 (기본) 배포 모델을 사용하여 만든 VNet에 대한 지침입니다."
   services="vpn-gateway"
   documentationCenter="na"
   authors="cherylmc"
   manager="carolz"
   editor=""
   tags="azure-service-management"/>

<tags
   ms.service="vpn-gateway"
   ms.devlang="na"
   ms.topic="hero-article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="01/11/2016"
   ms.author="cherylmc"/>

# VNet에 지점 및 사이트 간 VPN 연결 구성

> [AZURE.SELECTOR]
- [PowerShell - Resource Manager](vpn-gateway-howto-point-to-site-rm-ps.md)
- [PowerShell - Classic](vpn-gateway-point-to-site-create.md)

지점 및 사이트 간 구성을 사용하면 개별적으로 클라이언트 컴퓨터에서 가상 네트워크에 안전한 연결을 만들 수 있습니다. 클라이언트 컴퓨터에서 연결을 시작하여 VPN 연결을 설정합니다. 집 또는 회의와 같은 원격 위치에서 VNet에 연결하려는 경우 또는 몇 명의 클라이언트만 가상 네트워크에 연결해야 하는 경우에 사용할 수 있는 뛰어난 솔루션입니다. 지점 및 사이트 간 연결은 작동하기 위해 VPN 장치 또는 공용 IP 주소가 필요하지 않습니다. 지점 및 사이트 간 연결에 대한 자세한 내용은 [VPN 게이트웨이 FAQ](vpn-gateway-vpn-faq.md#point-to-site-connections) 및 [프레미스 간 연결 정보](vpn-gateway-cross-premises-options.md)를 참조하세요.

이 문서는 **클래식 배포 모드**(서비스 관리)를 사용하여 만든 가상 네트워크에 대한 지점 및 사이트 간 VPN 게이트웨이 연결에 적용됩니다. 리소스 관리자를 사용하여 만든 VNet에 대한 지점 및 사이트 간 연결을 구성하려는 경우 [이 문서](vpn-gateway-howto-point-to-site-rm-ps.md)를 참조하세요.

[AZURE.INCLUDE [vpn-gateway-classic-rm](../../includes/vpn-gateway-classic-rm-include.md)]


## 지점 및 사이트 간 연결 만들기 정보
 
다음 단계는 가상 네트워크에 보안 지점 및 사이트 간 연결을 만드는 단계를 안내합니다. 지점 및 사이트 간 연결을 구성할 때 여러 단계가 필요하긴 하지만 VPN 장치를 구입하거나 구성하지 않고 컴퓨터에서 가상 네트워크까지 보안 연결을 설정하는 것이 좋은 방법입니다.

지점 및 사이트 간 연결에 대한 구성은 3가지 섹션으로 세분화됩니다. **섹션 1**은 가상 네트워크 및 VPN 게이트웨이를 만드는 과정을 안내하고 **섹션 2**는 인증을 위해 사용된 인증서를 만들도록 도와주며 **섹션 3**은 가상 네트워크에 연결하는 데 사용되는 VPN 클라이언트에 대한 단계를 안내합니다. 이러한 각 구성 순서가 중요하므로, 단계를 건너뛰거나 앞으로 이동하지 마세요.

## 섹션 1 - 가상 네트워크 및 VPN 게이트웨이 만들기

지점 및 사이트 간 연결에는 동적 라우팅 게이트웨이를 사용하는 가상 네트워크가 필요합니다. 다음 단계에서 안내하는 프로세스입니다.

1단계 - 가상 네트워크 만들기

2단계 - 동적 라우팅 게이트웨이 만들기

### 가상 네트워크 만들기

1. **Azure 클래식 포털**(Azure 포털이 아님)에 로그인합니다.
1. 화면의 왼쪽 아래에서 **새로 만들기**를 클릭합니다. 탐색 창에서 **네트워크 서비스**를 클릭한 다음 **가상 네트워크**를 클릭합니다. **사용자 지정 만들기**를 클릭하여 구성 마법사를 시작합니다.
1. **가상 네트워크 세부 정보** 페이지에서 다음 정보를 입력한 후 오른쪽 아래에서 다음 화살표를 클릭합니다.
	- **이름**: 가상 네트워크 이름입니다. 예를 들어 "VNetEast"입니다. 이 VNet에 VM 및 PaaS 인스턴스를 배포할 때 참조되는 이름이 됩니다.
	- **위치**: 위치는 리소스(VM)를 배치할 실제 위치(지역)과 직접적인 관련이 있습니다. 예를 들어, 이 가상 네트워크에 배포할 VM이 미국 동부에 물리적으로 있도록 하려면 해당 위치를 선택합니다. 만든 후 가상 네트워크와 연결된 지역을 변경할 수 없습니다.
1. **DNS 서버 및 VPN 연결** 페이지에서 다음 정보를 입력한 후 오른쪽 아래에서 다음 화살표를 클릭합니다.
	- **DNS 서버**: DNS 서버 이름 및 IP 주소를 입력하거나 바로 가기 메뉴에서 이전에 등록된 DNS 서버를 선택합니다. 이 설정은 DNS 서버를 만들지 않으며, 이 설정을 사용하여 이 가상 네트워크에 대한 이름 확인에 사용할 DNS 서버를 지정할 수 있습니다. Azure 기본 이름 확인 서비스를 사용하려는 경우에 이 섹션을 비워둡니다.
	- **지점 대 사이트간 VPN 구성**: 확인란을 선택합니다.
1. **지점 대 사이트간 연결** 페이지에서 연결된 경우 VPN 클라이언트가 IP 주소를 수신하는 IP 주소 범위를 지정합니다. 지정할 수 있는 주소 범위에 대한 몇 가지 규칙이 있습니다. 지정된 범위가 온-프레미스 네트워크에 있는 범위와 겹치지 않는지를 확인하는 것이 매우 중요합니다.
1. 다음 정보를 입력하고 다음 화살표를 클릭합니다.
 - **주소 공간**: 시작 IP 및 CIDR(주소 수)를 포함합니다.
 - **주소 공간 추가**: 네트워크 디자인에 필요한 경우에만 추가합니다.
1. **가상 네트워크 주소 공간** 페이지에서 가상 네트워크에 사용할 주소 범위를 지정합니다. 이 범위의 DIPS(동적 IP 주소)가 해당 가상 네트워크에 배포하는 VM 및 기타 역할 인스턴스에 할당됩니다. 특히 온-프레미스 네트워크에 사용되는 범위와 겹치지 않는 범위를 선택하는 것이 중요합니다. 가상 네트워크에 사용할 온-프레미스 네트워크 주소 공간에서 일정 범위의 IP 주소를 지정하는 네트워크 관리자와 조정하기 위해 필요합니다.
1. 다음 정보를 입력하고 가상 네트워크 만들기를 시작하려면 확인 표시를 클릭합니다.
 - **주소 공간**: 시작 IP 및 개수를 포함하 여 이 가상 네트워크를 사용할 내부 IP 주소 범위를 추가합니다. 특히 온-프레미스 네트워크에 사용되는 범위와 겹치지 않는 범위를 선택하는 것이 중요합니다. 가상 네트워크에 사용할 온-프레미스 네트워크 주소 공간에서 일정 범위의 IP 주소를 지정하는 네트워크 관리자와 조정하기 위해 필요합니다.
 - **서브넷 추가**: 추가 서브넷이 필요하지 않지만 고정 DIPS가 있는 VM에 대한 별도 서브넷을 만들려고 할 수 있습니다. 또는 다른 역할 인스턴스와 별도의 서브넷에 VM을 둘 수 있습니다.
 - **게이트웨이 서브넷 추가**: 게이트웨이 서브넷은 지점 및 사이트 간 VPN에 필요합니다. 게이트웨이 서브넷을 추가하려면 클릭합니다. 게이트웨이 서브넷은 가상 네트워크 게이트웨이에 대해서만 사용됩니다.
1. 가상 네트워크가 만들어지면 Azure 클래식 포털의 네트워크 페이지에 있는 **상태**에 **생성됨**이 나타납니다. 가상 네트워크를 만든 후에 동적 라우팅 게이트웨이를 만들 수 있습니다.

### 동적 라우팅 게이트웨이 만들기

게이트웨이 형식은 동적으로 구성되어야 합니다. 정적 라우팅 게이트웨이는 이 기능을 사용하여 작동하지 않습니다.

1. Azure 클래식 포털의 **네트워크** 페이지에서 방금 만든 가상 네트워크를 클릭하고 **대시보드** 페이지로 이동합니다.
1. **대시보드** 페이지의 아래쪽에 있는 **게이트웨이 만들기**를 클릭합니다. 묻는 메시지 상자가 나타납니다 **"yournetwork" 가상 네트워크에 대한 게이트웨이를 만들려는** 지 묻는 메시지가 표시됩니다. **예**를 클릭하여 게이트웨이 만들기를 시작합니다. 게이트웨이가 생성되려면 15분정도 걸릴 수 있습니다.

## 섹션 2 - 인증서 생성 및 업로드

인증서는 지점 및 사이트 간 VPN에 대한 VPN 클라이언트를 인증하는 데 사용됩니다. 이전에 자체 서명된 인증서를 생성했습니다. 이제 엔터프라이즈 솔루션을 사용하여 생성한 인증서를 사용할 수 있습니다. Azure에 최대 20개의 루트 인증서를 업로드할 수 있습니다.

자체 서명된 인증서를 사용하려는 경우 아래 단계는 프로세스를 안내합니다. 엔터프라이즈 인증서 솔루션을 사용하려는 경우 각 섹션 내에서 단계는 다를 수 있지만 다음을 수행해야 합니다.


1단계 - 루트 인증서 식별 또는 생성.

2단계 - Azure에 루트 인증서 .cer 파일 업로드.

3단계 - 클라이언트 인증서 생성.

4단계 - 클라이언트 인증서 내보내기 및 설치.


### 루트 인증서 식별 또는 생성

엔터프라이즈 인증서 솔루션을 사용하지 않는 경우 자체 서명된 루트 인증서를 생성해야 합니다. 다음 단계는 Windows 8에서 작동합니다. Windows 10에 대한 새 단계를 업데이트하는 과정입니다.

X.509 인증서를 만드는 한 가지 방법은 인증서 작성 도구(makecert.exe)를 사용하는 것입니다. makecert를 사용하려면 무료 제공되는 [Microsoft Visual Studio Express](https://www.visualstudio.com/products/visual-studio-express-vs.aspx)를 다운로드하고 설치합니다.

2. Visual Studio Tools 폴더로 이동하여 관리자로 명령 프롬프트를 시작합니다.
3. 다음 예제의 명령은 컴퓨터의 개인 인증서 저장소에 루트 인증서를 만들어 설치하고 나중에 Azure 클래식 포털에 업로드할 *.cer* 파일도 만듭니다.
4. .cer 파일을 보관할 디렉터리로 변경하고 다음 명령을 실행합니다. 여기서 *RootCertificateName* 은 인증서에서 사용할 이름입니다. 다음 예제를 변경하지 않고 실행하면 결과는 루트 인증서 및 해당 파일 *RootCertificateName.cer* 입니다.

>[AZURE.NOTE] 클라이언트 인증서를 생성할 루트 인증서를 만들었기 때문에 이 인증서를 해당 개인 키와 함께 내보내고 복구 가능한 안전한 위치에 저장할 수 있습니다.

    makecert -sky exchange -r -n "CN=RootCertificateName" -pe -a sha1 -len 2048 -ss My "RootCertificateName.cer"

### Azure 클래식 포털에 루트 인증서 .cer 파일 업로드

각 루트 인증서에 대한 해당.cer 파일을 Azure에 업로드해야 합니다. 최대 20개의 인증서를 업로드할 수 있습니다.

1. 이전 프로시저에서 루트 인증서를 생성했다면, *.cer* 파일도 생성되었습니다. 이제 Azure 클래식 포털에 해당 파일을 업로드합니다. .cer 파일은 루트 인증서의 개인 키를 포함하지 않습니다. 최대 20개의 루트 인증서를 업로드할 수 있습니다.
1. Azure 클래식 포털의 가상 네트워크에 대한 **인증서** 페이지에서 **루트 인증서 업로드**를 클릭합니다.
1. **인증서 업로드** 페이지에서,.cer 루트 인증서를 검색한 다음 확인 표시를 클릭합니다.

### 클라이언트 인증서 생성

다음 단계는 자체 서명된 루트 인증서에서 클라이언트 인증서를 생성합니다. 엔터프라이즈 인증서 솔루션을 사용하는 경우 사용하는 솔루션에 대한 지침을 따릅니다.

1. 자체 서명된 루트 인증서를 만드는 데 사용한 동일한 컴퓨터에서 관리자로 Visual Studio 명령 프롬프트 창을 엽니다.
2. 클라이언트 인증서 파일을 저장하려는 위치로 디렉터리를 변경합니다. *RootCertificateName*은 생성된 자체 서명된 루트 인증서를 말합니다. RootCertificateName을 루트 인증서 이름으로 변경하여 다음 예제를 실행하면 결과는 개인 인증서 저장소의 "ClientCertificateName"이라는 클라이언트 인증서입니다.
3. 다음 명령을 입력합니다.

    makecert.exe -n "CN=ClientCertificateName" -pe -sky exchange -m 96 -ss My -in "RootCertificateName" -is my -a sha1

4. 모든 인증서는 컴퓨터의 개인 인증서 저장소에 저장됩니다. *certmgr* 를 선택하여 확인합니다. 이 절차를 기반으로 필요에 따라 많은 수의 클라이언트 인증서를 생성할 수 있습니다. 가상 네트워크에 연결 하려는 각 컴퓨터에 대해 고유한 클라이언트 인증서를 만드는 것이 좋습니다.

### 클라이언트 인증서 내보내기 및 설치

가상 네트워크에 연결하려는 각 컴퓨터에 클라이언트 인증서를 설치하는 작업은 필수 단계입니다. 다음 단계에서는 클라이언트 인증서의 수동 설치를 안내합니다.

1. 클라이언트 인증서는 가상 네트워크에 연결하려는 각 컴퓨터에 설치되어야 합니다. 여러 클라이언트 인증서를 만든 다음 내보내야 할 수 있음을 의미합니다. 클라이언트 인증서를 내보내려면 *certmgr.msc* 를 사용합니다. 내보낼 클라이언트 인증서를 마우스 오른쪽 단추로 클릭하고 **모든 작업**을 클릭 한 다음 **내보내기**를 클릭합니다.
2. 개인 키로 *클라이언트 인증서* 를 내보냅니다. *.pfx* 파일입니다. 이 인증서에 대해 설정한 암호(키)를 기억 하거나 기록해야 합니다.
3. *.pfx* 파일을 클라이언트 컴퓨터에 복사합니다. 클라이언트 컴퓨터에서 *.pfx* 파일을 두 번 클릭하여 설치합니다. 요청하는 경우 암호를 입력합니다. 설치 위치를 수정하지 마세요.

## 섹션 3 - VPN 클라이언트 구성

가상 네트워크에 연결하려면 VPN 클라이언트 구성해야 합니다. 클라이언트에 연결하기 위해 클라이언트 인증서와 적절한 VPN 클라이언트 구성이 모두 필요합니다.

VPN 클라이언트를 구성하려면 다음을 순서 대로 수행합니다.

1단계 - VPN 클라이언트 구성 패키지 만들기.

2단계 - 클라이언트에 VPN 구성 패키지를 설치하고 연결 시작.

3단계 - 연결 확인.

### VPN 클라이언트 구성 패키지 만들기

1. Azure 클래식 포털의 가상 네트워크에 대한 **대시보드** 페이지에서 오른쪽에 있는 한 눈에 보기 메뉴로 이동하고 가상 네트워크에 연결할 클라이언트를 포함한 VPN 패키지를 클릭합니다.
2. 
다음 클라이언트 운영 체제가 지원됩니다.
 - Windows 7(32비트 및 64비트)
 - Windows Server 2008 R2(64비트 전용)
 - Windows 8(32비트 및 64비트)
 - Windows 8.1(32비트 및 64비트)
 - Windows Server 2012(64비트 전용)
 - Windows Server 2012 R2(64비트 전용)
 - Windows 10

1. 설치하려는 클라이언트 운영 체제에 해당하는 패키지를 선택하여 다운로드합니다.
 - 32비트 클라이언트의 경우 **32비트 클라이언트 VPN 패키지 다운로드** 를 선택합니다.
 - 64비트 클라이언트의 경우 **64비트 클라이언트 VPN 패키지 다운로드** 를 선택합니다.
1. 클라이언트 패키지를 만드는 데 몇 분 정도 걸립니다. 패키지가 완료되면 파일을 다운로드할 수 있습니다. 다운로드한 *.exe* 파일을 로컬 컴퓨터에 안전하게 저장할 수 있습니다.
1. Azure 클래식 포털에서 VPN 클라이언트 패키지를 생성하고 다운로드한 후 가상 네트워크에 연결하려는 클라이언트 컴퓨터에 클라이언트 패키지를 설치할 수 있습니다. 여러 클라이언트 컴퓨터에 VPN 클라이언트 패키지를 설치하려는 경우 각 클라이언트 컴퓨터에 클라이언트 인증서를 설치해야 합니다. VPN 클라이언트 패키지는 Windows에 기본 제공되는 VPN 클라이언트 소프트웨어를 구성할 구성 정보를 포함합니다. 패키지는 추가 소프트웨어를 설치하지 않습니다.

### 클라이언트에 VPN 구성 패키지를 설치하고 연결 시작

1. 가상 네트워크에 연결할 컴퓨터에 구성 파일을 로컬로 복사하고 .exe 파일을 두 번 클릭합니다. 패키지가 설치되어 있다면 VPN 연결을 시작할 수 있습니다.
구성 패키지는 Microsoft에서 서명하지 않습니다. 조직의 서명 서비스를 사용하여 패키지에 서명하거나 [SignTool](http://go.microsoft.com/fwlink/p/?LinkId=699327)을 사용하여 직접 서명합니다. 서명 없이 패키지를 사용해도 괜찮습니다. 그러나 패키지가 서명되지 않은 경우, 패키지를 설치할 때 경고가 표시됩니다.
2. 클라이언트 컴퓨터에서 VPN 연결로 이동 하고 방금 만든 VPN 연결을 찾습니다. 가상 네트워크와 같은 이름입니다. **Connect**를 클릭합니다.
3. 게이트웨이 끝점에 대한 자체 서명된 인증서를 만드는 데 사용되는 팝업 메시지가 나타납니다. **계속**을 클릭하여 상승된 권한을 사용합니다.
4. **연결** 상태 페이지에서 연결을 시작하도록 **연결**을 클릭합니다.
5. **인증서 선택** 화면에서 표시되는 클라이언트 인증서가 연결하는 데 사용할 인증서인지 확인합니다. 그렇지 않은 경우 드롭다운 화살표를 사용하여 올바른 인증서를 선택한 다음 **확인**을 클릭합니다.
6. 이제 가상 네트워크에 연결하고 가상 네트워크에 호스팅된 가상 컴퓨터 및 서비스에 완전히 액세스할 수 있습니다.

### VPN 연결 확인

1. VPN 연결이 활성인지를 확인하려면, 관리자 권한 명령 프롬프트를 열고 *ipconfig/all* 을 실행합니다.
2. 결과를 확인합니다. 받은 IP 주소가 VNet을 만들 때 지정한 지점 및 사이트 간 연결 주소 범위 내의 주소 중 하나인지 확인합니다. 결과는 다음과 같아야 합니다.

예제:



    PPP adapter VNetEast:
		Connection-specific DNS Suffix .:
		Description.....................: VNetEast
		Physical Address................:
		DHCP Enabled....................: No
		Autoconfiguration Enabled.......: Yes
		IPv4 Address....................: 192.168.130.2(Preferred)
		Subnet Mask.....................: 255.255.255.255
		Default Gateway.................:
		NetBIOS over Tcpip..............: Enabled

## 다음 단계

가상 네트워크에 가상 컴퓨터를 추가할 수 있습니다. [사용자 지정 가상 컴퓨터를 만드는 방법](../virtual-machines/virtual-machines-create-custom.md)을 참조하세요.

가상 네트워크에 대한 자세한 내용은 [가상 네트워크 설명서](https://azure.microsoft.com/documentation/services/virtual-network/) 페이지를 참조하세요.

<!---HONumber=AcomDC_0114_2016-->