<properties
   pageTitle="Azure VPN 게이트웨이에서의 BGP 개요| Microsoft Azure"
   description="이 문서는 Azure VPN 게이트웨이와 BGP에 대한 개요를 제공합니다."
   services="vpn-gateway"
   documentationCenter="na"
   authors="yushwang"
   manager="rossort"
   editor=""
   tags=""/>

<tags
   ms.service="vpn-gateway"
   ms.devlang="na"
   ms.topic="get-started-article"
   ms.tgt_pltfrm="na"
   ms.workload="infrastructure-services"
   ms.date="04/26/2016"
   ms.author="yushwang"/>

# Azure VPN 게이트웨이에서의 BGP 개요

이 문서에서는 Azure VPN 게이트웨이에서의 BGP(경계 게이트웨이 프로토콜) 지원에 대한 개요를 제공합니다.

## BGP 정보

BGP는 두 개 이상의 네트워크 간에 라우팅 및 연결 정보를 교환하도록 인터넷에서 일반적으로 사용하는 표준 라우팅 프로토콜입니다. Azure 가상 네트워크에서는 BGP를 통해 Azure VPN 게이트웨이 및 온-프레미스 VPN 장치(BGP 피어 또는 인접이라고 함)는 관련된 게이트웨이 또는 라우터를 거치도록 해당 접두사의 가용성 및 연결 가능성에 대한 정보를 두 게이트웨이에 제공하는 "경로"를 교환할 수 있습니다. BGP 게이트웨이가 하나의 BGP 피어에서 파악한 경로를 다른 모든 BGP 피어로 전파하여 BGP를 통해 여러 네트워크 간에 전송 라우팅을 사용할 수도 있습니다.
 
### BGP를 사용하는 이유

BGP는 선택적 기능으로, Azure 경로 기반 VPN 게이트웨이와 함께 사용할 수 있습니다. 또한 이 기능을 사용하기 전에 온-프레미스 VPN 장치가 BGP를 지원하는지 확인해야 합니다. BGP 없이도 Azure VPN 게이트웨이 및 온-프레미스 VPN 장치를 계속 사용할 수 있습니다. 네트워크와 Azure 간에 BGP를 통한 동적 라우팅을 사용하는 것과 고정 경로(BGP 없음)를 사용하는 것의 *차이*입니다.

BGP에는 다음과 같이 몇 가지 장점과 새로운 기능이 있습니다.

#### 자동 및 유연한 접두사 업데이트 지원

BGP를 사용하면 IPsec S2S VPN 터널을 경유하는 특정 BGP 피어에 최소한의 접두어만 선언하면 됩니다. 온-프레미스 VPN 장치의 BGP 피어 IP 주소에 있는 호스트 접두어(/32)처럼 짧을 수 있습니다. Azure 가상 네트워크에 액세스를 허용하기 위해 Azure에 제시할 온-프레미스 네트워크 접두어를 제어할 수 있습니다.
	
또한 기본 경로(0.0.0.0/0) 같은 일부 VNet 주소 접두어나, 대형 비공개 IP 주소 공간(예: 10.0.0.0/8)을 포함하는 더 큰 접두어를 제시할 수도 있습니다. 그렇지만 접두어는 VNet의 어떤 접두어와도 같을 수 없습니다. VNet 접두어와 동일한 경로는 거부됩니다.

#### BGP를 기준으로 자동 장애 조치가 있는 VNet과 온-프레미스 사이트 간 여러 터널 지원

동일한 위치에서 온-프레미스 VPN 장치와 Azure VNet 간에 여러 연결을 수립할 수 있습니다. 이 기능은 활성-활성 구성의 두 네트워크 간에 여러 터널(경로)을 제공합니다. 한 터널의 연결이 끊기면 BGP를 통해 해당 경로가 제거되고 트래픽이 자동으로 다른 터널로 전달됩니다.
	
다음 다이어그램에서는 이러한 고가용성 설정의 간단한 예제를 보여줍니다.
	
![여러 개의 활성 경로](./media/vpn-gateway-bgp-overview/multiple-active-tunnels.png)

#### 온-프레미스 네트워크와 여러 Azure VNet 간 전송 라우팅 지원

BGP는 직접 또는 간접 연결 여부에 관계없이 서로 다른 네트워크로부터 접두어를 파악하고 전파하기 위해 여러 게이트웨이를 활성화합니다. 따라서 온-프레미스 사이트 간 또는 여러 Azure 가상 네트워크 간의 Azure VPN 게이트웨이를 통한 전송 라우팅이 가능합니다.
	
다음 다이어그램에서는 Microsoft 네트워크 내에서 Azure VPN 게이트웨이를 통해 두 온-프레미스 네트워크 간에 트래픽을 전송할 수 있는 다중 홉 토폴로지의 예를 보여줍니다.

![다중 홉 전송](./media/vpn-gateway-bgp-overview/full-mesh-transit.png)

## BGP FAQ

#### BGP가 모든 Azure VPN 게이트웨이 SKU를 지원하나요?

아니요. BGP는 **표준** 및 **HighPerformance** VPN 게이트웨이에서 지원됩니다. **기본** SKU는 지원되지 않습니다.

#### Azure 정책 기반 VPN 게이트웨이에 BGP를 사용할 수 있나요?

아니요. BGP는 경로 기반 VPN 게이트웨이에서만 지원됩니다.

#### 개인 ASN(자치 시스템 번호)을 사용할 수 있나요?

예. 온-프레미스 네트워크와 Azure 가상 네트워크 모두에 자체 공용 ASN 또는 개인 ASN을 사용할 수 있습니다.

#### 온-프레미스 VPN 네트워크와 Azure VNet에 동일한 ASN을 사용할 수 있나요?

아니요. 온-프레미스 네트워크와 Azure VNet을 함께 BGP에 연결하려면 서로 다른 ASN을 할당해야 합니다. 크로스 프레미스 연결에 대한 BGP 활성화 여부에 관계없이 Azure VPN 게이트웨이에 할당되는 기본 ASN은 65515입니다. VPN 게이트웨이를 만들 때 다른 ASN을 적용하여 이 기본값을 다시 정의하거나, 게이트웨이를 만든 후 ASN을 변경할 수 있습니다. 해당하는 Azure 로컬 네트워크 게이트웨이에 온-프레미스 ASN을 할당해야 합니다.



#### Azure VPN 게이트웨이가 나에게 알리는 주소 접두어는 무엇인가요?

Azure VPN 게이트웨이는 온-프레미스 BGP 장치에 다음 경로를 알립니다.

- VNet 주소 접두어
- Azure VPN 게이트웨이에 연결된 각 로컬 네트워크 게이트웨이의 주소 접두어
- Azure VPN 게이트웨이에 연결된 다른 BGP 피어링 세션에서 확인한 경로(**기본 경로 또는 다른 VNet 접두어와 겹치는 경로 제외**)

#### 내 VNet-VNet 연결에 BPG를 사용할 수 있나요?

예. 크로스 프레미스 연결과 VNet-VNet 연결에 모두 BGP를 사용할 수 있습니다.

#### BGP를 비 BGP 연결과 혼합하여 내 Azure VPN 게이트웨이에 사용할 수 있나요?

예. BGP와 비 BGP 연결을 동일한 Azure VPN 게이트웨이에 혼합 사용할 수 있습니다.

#### Azure VPN 게이트웨이가 BGP 전송 라우팅을 지원하나요?

예, BGP 전송 라우팅이 지원됩니다. 단 Azure VPN 게이트웨이가 기본 경로를 타 BGP 피어에 알리지 **않는다**는 점이 다릅니다. 여러 Azure VPN 게이트웨이 간 전송 라우팅을 활성화하려면 모든 중간 VNet-VNet 연결에서 BGP를 활성화해야 합니다.

#### Azure VPN 게이트웨이와 내 온-프레미스 네트워크 간에 여러 터널이 있을 수 있나요?

예. Azure VPN 게이트웨이와 내 온-프레미스 네트워크 간에 여러 S2S VPN 터널을 구축할 수 있습니다. 이러한 모든 터널은 Azure VPN 게이트웨이에 대한 총 처널 수에 대해 산출됩니다. 예를 들어, Azure VPN 게이트웨이와 온-프레미스 네트워크 중 하나 사이에 2개의 중복 터널이 구성되어 있는 경우 총 Azure VPN 게이트웨이 할당량 중 2개의 터널을 사용하는 것입니다(표준 10, HighPerformance 30).

#### 두 Azure VNet과 BGP와 간에 여러 터널이 있을 수 있나요?

아니요. 한 쌍의 가상 네트워크 사이에는 중복 구성 터널이 지원되지 않습니다.

#### Azure VPN 게이트웨이는 BGP 피어 IP에 어떤 주소를 사용하나요?

Azure VPN 게이트웨이는 가상 네트워크에 대해 정의된 게이트웨이 서브넷 범위로부터 단일 IP 주소를 할당합니다. 기본적으로 이 값은 범위 마지막에서 두 번째의 값입니다. 예를 들어 게이트웨이 서브넷이 10.12.255.0.0/27이고 범위가 10.42.255.0.0 ~ 10.42.255.31이라면 Azure VPN 게이트웨이의 BGP 피어 IP 주소는 10.12.255.30입니다. Azure VPN 게이트웨이 정보를 열거할 때 이 정보를 확인할 수 있습니다.

#### VPN 장치에서 BGP 피어 IP 주소에 대 한 요구 사항은 무엇인가요?

사용자의 온-프레미스 BGP 피어 주소는 VPN 장치의 공용 IP 주소와 **같을 수 없습니다**. VPN 장치에서 BGP 피어 IP에 다른 IP 주소를 사용합니다. 장치에서 루프백 인터페이스에 할당한 주소가 될 수 있습니다. 위치를 나타내는 해당 로컬 네트워크 게이트웨이에서 이 주소를 지정합니다.

#### BGP를 사용할 때 로컬 네트워크 게이트웨이에 대해 내 주소 접두어로 무엇을 지정해야 하나요?

Azure 로컬 네트워크 게이트웨이는 온-프레미스 네트워크에 대해 초기 주소 접두어를 지정합니다. BGP를 사용할 때는 BGP 피어 IP 주소의 호스트 접두어(/32 접두어)를 온-프레미스 네트워크의 주소 공간으로 할당해야 합니다. BGP 피어 IP가 10.52.255.254라면 이 온-프레미스 네트워크를 나타내는 로컬 네트워크 게이트웨이의 localNetworkAddressSpace로 "10.52.255.254/32"를 지정해야 합니다. 이것은 Azure VPN 게이트웨이가 S2S VPN 터널을 통해 BGP 세션을 수립하도록 하기 위한 것입니다.

#### BGP 피어링 세션에 대해 온-프레미스 VPN 장치에 무엇을 추가해야 하나요?

IPsec S2S VPN 터널을 가리키는 VPN 장치에서 Azure BGP 피어 IP 주소의 호스트 경로를 추가해야 합니다. 예를 들어, Azure VPN 피어 IP가 "10.12.255.30"이라면 VPN 장치에서 일치하는 IPsec 터널 인터페이스의 nexthop 인터페이스와 "10.12.255.30"에 대한 호스트 경로를 추가해야 합니다.

## 다음 단계

크로스 프레미스 및 VNet-VNet 연결에 대해 BGP를 구성하는 단계는 [Azure VPN 게이트웨이에서 BGP 시작하기](./vpn-gateway-bgp-resource-manager-ps.md)를 참조하세요.

<!---HONumber=AcomDC_0427_2016-->