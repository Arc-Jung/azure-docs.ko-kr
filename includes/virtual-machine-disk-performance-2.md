---
title: 포함 파일
description: 포함 파일
services: virtual-machines
author: albecker1
ms.service: virtual-machines
ms.topic: include
ms.date: 10/12/2020
ms.author: albecker1
ms.custom: include file
ms.openlocfilehash: 82b4c127f983f3133326bf7fb538e40713ef9655
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/17/2021
ms.locfileid: "100580389"
---
![D s v 3 사양을 표시 하는 차트입니다.](media/vm-disk-performance/dsv3-documentation.jpg)

- 최대 *캐시 되지 않은* 디스크 처리량은 가상 머신에서 처리할 수 있는 기본 저장소 최대 한도입니다.
- 호스트 캐싱을 사용 하도록 설정 하는 경우 *캐시* 된 최대 저장소 처리량 제한은 별도의 제한입니다.

호스트 캐싱은 저장소를 신속 하 게 작성 하거나 읽을 수 있는 VM에 더 가깝게 배치 하는 방식으로 작동 합니다. 호스트 캐싱에 대해 VM에서 사용할 수 있는 저장소 크기는 설명서에 있습니다. 예를 들어 Standard_D8s_v3가 200 GiB 캐시 저장소와 함께 제공 되는 것을 볼 수 있습니다.

가상 컴퓨터를 만들고 디스크를 연결할 때 호스트 캐싱을 사용 하도록 설정할 수 있습니다. 또한 기존 VM의 디스크에서 호스트 캐싱을 설정 및 해제할 수 있습니다.

![호스트 캐싱을 보여 주는 스크린샷](media/vm-disk-performance/host-caching.jpg)

각 디스크에 대 한 워크 로드 요구 사항에 맞게 호스트 캐싱을 조정할 수 있습니다. 호스트 캐싱을 다음과 같이 설정할 수 있습니다.

- **읽기 전용**: 읽기 작업만 수행 하는 작업의 경우
- **읽기/쓰기**: 읽기 및 쓰기 작업의 균형을 유지 하는 작업의 경우

워크 로드가 이러한 패턴 중 하나를 따르지 않는 경우 호스트 캐싱을 사용 하지 않는 것이 좋습니다.

다른 호스트 캐시 설정의 몇 가지 예를 실행 하 여 데이터 흐름 및 성능에 미치는 영향을 살펴보겠습니다. 이 첫 번째 예제에서는 호스트 캐싱 설정이 **읽기 전용** 으로 설정 된 경우 IO 요청에서 발생 하는 상황을 살펴보겠습니다.

**설치**

- Standard_D8s_v3
  - 캐시 된 IOPS: 16000
  - 캐시 되지 않은 IOPS: 12800
- P30 데이터 디스크
  - IOPS: 5000
  - 호스트 캐싱: **읽기** 전용

읽기를 수행 하 고 원하는 데이터를 캐시에서 사용할 수 있는 경우 캐시에서 요청 된 데이터를 반환 합니다. 디스크에서 읽을 필요가 없습니다. 이 읽기는 VM의 캐시 된 제한에 계산 됩니다.

![읽기 호스트 캐싱 읽기 적중을 보여 주는 다이어그램입니다.](media/vm-disk-performance/host-caching-read-hit.jpg)

읽기를 수행 하 고 원하는 데이터를 캐시에서 사용할 수 *없는* 경우 읽기 요청이 디스크로 릴레이 됩니다. 그런 다음 디스크는 캐시와 VM 모두에이를 표시 합니다. 이 읽기는 VM의 캐시 되지 않은 제한과 VM의 캐시 된 제한에 대해 계산 됩니다.

![읽기 호스트 캐싱 읽기 누락을 보여 주는 다이어그램입니다.](media/vm-disk-performance/host-caching-read-miss.jpg)

쓰기를 수행 하는 경우 완료 된 것으로 간주 되기 전에 쓰기를 캐시와 디스크 모두에 써야 합니다. 이 쓰기는 VM의 캐시 되지 않은 제한 및 VM의 캐시 된 제한에 계산 됩니다.

![읽기 호스트 캐싱 쓰기를 보여 주는 다이어그램입니다.](media/vm-disk-performance/host-caching-write.jpg)

그런 다음 호스트 캐시 설정이 **읽기/쓰기로** 설정 된 경우 IO 요청에서 발생 하는 상황을 살펴보겠습니다.

**설치**

- Standard_D8s_v3
  - 캐시 된 IOPS: 16000
  - 캐시 되지 않은 IOPS: 12800
- P30 데이터 디스크
  - IOPS: 5000
  - 호스트 캐싱: **읽기/쓰기**

읽기는 읽기 전용 방식과 동일 하 게 처리 됩니다. 쓰기는 읽기/쓰기 캐싱과는 다릅니다. 호스트 캐싱을 사용 하 여 쓰기를 **읽기/쓰기로** 설정한 경우 완료 된 것으로 간주 되도록 쓰기 전용을 호스트 캐시에 써야 합니다. 그런 다음 쓰기는 디스크에 백그라운드 프로세스로 지연 기록 됩니다. 즉, 캐시에 기록 될 때 쓰기가 캐시 된 IO에 계산 됩니다. 디스크에 지연 기록 되 면 캐시 되지 않은 IO로 계산 됩니다.

![읽기/쓰기 호스트 캐싱 쓰기를 보여 주는 다이어그램](media/vm-disk-performance/host-caching-read-write.jpg)

Standard_D8s_v3 가상 컴퓨터를 계속 살펴보겠습니다. 이 시간을 제외 하 고 디스크에서 호스트 캐싱을 사용 하도록 설정 합니다. 또한 이제 VM의 IOPS 제한이 16000 IOPS입니다. 5000 IOPS를 처리할 수 있는 세 개의 기본 P30 디스크가 VM에 연결 되어 있습니다.

**설치**

- Standard_D8s_v3
  - 캐시 된 IOPS: 16000
  - 캐시 되지 않은 IOPS: 12800
- P30 OS 디스크
  - IOPS: 5000
  - 호스트 캐싱: **읽기/쓰기**
- 2 개의 P30 데이터 디스크 × 2
  - IOPS: 5000
  - 호스트 캐싱: **읽기/쓰기**

![호스트 캐싱 예제를 보여 주는 다이어그램](media/vm-disk-performance/host-caching-example-without-remote.jpg)

응용 프로그램이 캐싱이 설정 된 Standard_D8s_v3 가상 컴퓨터를 사용 합니다. 15000 IOPS에 대 한 요청을 만듭니다. 요청은 연결 된 각 기본 디스크에 5000 IOPS로 구분 됩니다. 성능 50, 발생 하지 않습니다.

## <a name="combined-uncached-and-cached-limits"></a>결합 된 캐시 되지 않은 및 캐시 된 제한

가상 컴퓨터의 캐시 된 한도는 캐시 되지 않은 제한과는 별개입니다. 즉, 다른 디스크에서 호스트 캐싱을 사용 하도록 설정 하지 않고 VM에 연결 된 디스크에서 호스트 캐싱을 사용 하도록 설정할 수 있습니다. 이 구성을 통해 가상 머신은 캐시 된 한도의 총 저장소 IO와 캐시 되지 않은 제한을 더한 값을 얻을 수 있습니다.

이러한 한도를 함께 사용 하는 방법을 이해 하는 데 도움이 되는 예제를 살펴보겠습니다. Standard_D8s_v3 가상 컴퓨터 및 프리미엄 디스크 연결 구성을 계속 합니다.

**설치**

- Standard_D8s_v3
  - 캐시 된 IOPS: 16000
  - 캐시 되지 않은 IOPS: 12800
- P30 OS 디스크
  - IOPS: 5000
  - 호스트 캐싱: **읽기/쓰기**
- 2 개의 P30 데이터 디스크 × 2
  - IOPS: 5000
  - 호스트 캐싱: **읽기/쓰기**
- 2 개의 P30 데이터 디스크 × 2
  - IOPS: 5000
  - 호스트 캐싱: **사용 안 함**

![원격 저장소를 사용 하는 호스트 캐싱 예제를 보여 주는 다이어그램](media/vm-disk-performance/host-caching-example-with-remote.jpg)

이 경우 Standard_D8s_v3 가상 머신에서 실행 되는 응용 프로그램은 25000 IOPS를 요청 합니다. 요청은 연결 된 각 디스크에 5000 IOPS로 구분 됩니다. 세 개의 디스크가 호스트 캐싱을 사용 하 고 두 개의 디스크가 호스트 캐싱을 사용 하지 않습니다.

- 호스트 캐싱을 사용 하는 3 개의 디스크가 캐시 된 제한 (16000) 내에 있으므로 해당 요청이 성공적으로 완료 됩니다. 저장소 성능 50, 발생 하지 않습니다.
- 호스트 캐싱을 사용 하지 않는 두 개의 디스크가 12800의 캐시 되지 않은 제한 내에 있기 때문에 해당 요청도 성공적으로 완료 됩니다. 50, 발생 하지 않습니다.

