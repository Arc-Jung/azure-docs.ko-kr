<properties  writer="kathydav" editor="tysonn" manager="jeffreyg" />

# 가상 컴퓨터의 가용성 관리

사용자 응용 프로그램의 가용성을 유지하기 위해 복수의 가상 컴퓨터를 사용하여 중복성을 제공하는 것을 강력히 권장합니다. 중복성을 제공하려면 하나 이상의 가상 컴퓨터가 같은 기능이나 역할을 수행하도록 구성해야 하며, 이러한 중복성은 서비스 수준을 보장하기 위해 필요합니다. 종속성도 고려해야 합니다. 예를 들어 가상 컴퓨터 "IIS1"이 가상 컴퓨터 "SQL1"에서 제공하는 서비스에 의존하는 경우 가상 컴퓨터  SQL2"에서 "SQL1"에 중복성을 제공한다면 서비스 중단을 피할 수 있습니다. 서비스 수준 계약에 대한 자세한 정보는 [서비스 수준 계약][1]에 있는 "클라우드 서비스, 가상 컴퓨터 및 가상 네트워크" 섹션을 참조하십시오.

이 접근 방식을 사용하면 로컬 네트워크나 로컬 디스크 하드웨어 오류가 발생하거나 플랫폼에 필요한 계획된 가동 중지 시에도 응용 프로그램을 계속 사용할 수 있도록 보장할 수 있습니다.

여러 가상 컴퓨터를 사용하는 응용 프로그램의 가용성은 가상 컴퓨터를 가용성 집합에 추가하는 방식으로 관리합니다. 가용성 집합은 장애 도메인이나 업데이트 도메인에 직접 관계됩니다. Azure에 있는 장애 도메인은 서버 랙의 네트워크 스위치나 전원 장치와 같은 단일 지점에서 비롯한 오류를 방지하기 위해 정의됩니다. 사실상 장애 도메인 문제는 물리적인 서버의 부족 문제와 거의 같다고 볼 수 있습니다. 여러 가상 컴퓨터가 클라우드 서비스에 연결되었을 때 가용성 집합은 가상 컴퓨터를 다른 장애 도메인에 배치합니다. 다음 다이어그램은 각각 두 대의 가상 컴퓨터가 포함된 두 가지 가용성 집합의 예시를 보여 줍니다.

![업데이트 도메인](./media/manage-vm-availability/UpdateDomains.png)

Azure는 응용 프로그램 인스턴스를 호스트하는 운영 체제를 정기적으로 업데이트합니다. 업데이트를 적용할 때는 가상 컴퓨터의 시스템이 종료됩니다. 업데이트 도메인은 모든 가상 컴퓨터가 동시에 업데이트되는 것을 방지하기 위해 사용됩니다. 가용성 집합에 여러 가상 컴퓨터를 할당하는 경우 Azure는 가상 컴퓨터를 서로 다른 업데이트 도메인에 할당합니다. 위 다이어그램은 IIS(인터넷 정보 서비스)를 실행하면서 별도의 업데이트 도메인에 있는 두 가상 컴퓨터와 SQL Server를 실행하면서 별도의 업데이트 도메인에 있는 두 가상 컴퓨터에 대한 예시를 보여 줍니다.

가용성 집합과 부하 분산 끝점을 함께 사용하면 응용 프로그램이 상시 가용한 상태로 유지하고 효과적으로 실행할 수 있습니다. 부하 분산 끝점 사용에 대한 자세한 정보는 [부하 분산 가상 컴퓨터](../load-balance-virtual-machines)를 참조하십시오.

이 작업에는 다음 단계가 포함됩니다.

* [1단계: 가상 컴퓨터와 가용성 집합 만들기](#createset)
* [2단계: 만들기 과정에서 가상 컴퓨터를 클라우드 서비스에 추가하고 가용성 집합에 할당](#addmachine)
* [3단계: (옵션) 이전에 만든 가상 컴퓨터를 위한 가용성 집합 만들기](#previousmachine)
* [4단계: (옵션) 이전에 만든 가상 컴퓨터를 가용성 집합에 추가](#existingset)

## <a id="createset"> </a>1단계: 가상 컴퓨터와 가용성 집합 만들기

가상 컴퓨터를 포함하는 가용성 집합을 만들려면 먼저 첫 가상 컴퓨터와 가용성 집합을 동시에 만들고, 나중에 다른 가상 컴퓨터를 만들 때 이 가용성 집합에 추가할 수 있습니다. 가상 컴퓨터를 만들고 가용성 집합을 만든 후 모든 가상 컴퓨터를 가용성 집합에 추가하는 과정을 차례로 진행할 수도 있습니다.

**가상 컴퓨터와 가용성 집합을 만드는 방법**

1.  아직 로그인하지 않은 경우 Azure 관리 포털에 로그인합니다.

2.  명령 모음에서 **New**를 클릭합니다.
    
    ![가상 컴퓨터를 만듭니다.](./media/manage-vm-availability/Create.png)

3.  **Virtual Machine**을 클릭한 후 **From Gallery**를 클릭합니다.
    
    **Select the virtual machine operating system** 대화 상자가 나타납니다.

4.  **Platform Images** 목록에서 이미지를 선택한 후 화살표를 클릭하여 계속 진행합니다.
    
    **Virtual machine configuration** 대화 상자가 나타납니다.

5.  **Virtual Machine Name**에서 가상 컴퓨터에 사용할 이름을 입력합니다.

6.  **New User Name**에서 서버 관리에 사용하려는 관리자 계정의 이름을 입력합니다.

7.  **New Password**에서 관리자 계정에 대한 강력한 암호를 입력합니다. **Confirm Password**에 바로 전에 입력한 암호를 다시 입력합니다.

8.  **Size**에서 가상 컴퓨터에 사용할 크기를 선택합니다. 선택하는 크기는 응용 프로그램에 필요한 코어 수에 따라 달라집니다.

9.  화살표를 클릭하여 계속합니다.
    
    **Virtual machine mode** 대화 상자가 나타납니다.

10. **Stand-alone virtual machine**를 선택합니다.

11. **DNS Name**에 해당 컴퓨터용으로 만든 클라우드 서비스 이름을 입력합니다. 이름에는 3~24자의 영소문자와 숫자를 포함할 수 있습니다.

12. **Storage Account**에서 .VHD 파일이 저장된 위치를 선택하거나 자동으로 생성된 저장소 계정을 선택할 수 있습니다. 영역당 하나의 저장소 계정만 자동으로 만들어집니다. 이 설정으로 만든 다른 모든 가상 컴퓨터는 이 저장소 계정에 있습니다. 20개의 저장소 계정으로 제한됩니다.

13. **Region/Affinity Group/Virtual Network**에서 가상 컴퓨터를 포함할 지역, 선호도 그룹 또는 가상 네트워크를 선택합니다. 선호도 그룹에 대한 자세한 내용은 [가상 네트워크의 선호도 그룹 정보][2]를 참조하십시오.

14. 화살표를 클릭하여 계속합니다.
    
    **Virtual machine options** 대화 상자가 나타납니다.

15. **Availability Set**에서 **Create availability set**를 선택합니다.

16. **Availability Set Name**에 가용성 집합의 이름을 입력합니다.

17. 화살표를 클릭하여 가상 컴퓨터와 가용성 집합을 만듭니다.
    
    새 가상 컴퓨터의 대시보드에서 **Configure**를 클릭하면 가상 컴퓨터가 새 가용성 집합의 구성원임을 확인할 수 있습니다.

## <a id="addmachine"> </a>2단계: 만들기 과정에서 가상 컴퓨터를 클라우드 서비스에 추가하고 가용성 집합에 할당

이전 단계에서는 가상 컴퓨터와 가용성 집합 동시에 만드는 방법을 설명했습니다. 이제는 새 가상 컴퓨터를 만들어서 클라우드 서비스에 연결한 후 앞에서 만든 가용성 집합에 추가할 수 있습니다.

**새 가상 컴퓨터에 연결하고 가용성 집합에 추가하는 방법**

1.  아직 로그인하지 않은 경우 Azure 관리 포털에 로그인합니다.

2.  명령 모음에서 **New**를 클릭합니다.
    
    ![가상 컴퓨터를 만듭니다.](./media/manage-vm-availability/Create.png)

3.  **Virtual Machine**을 클릭한 후 **From Gallery**를 클릭합니다.
    
    ![갤러리에서 만들기](./media/manage-vm-availability/CreateNew.png)
    
    **Select the virtual machine operating system** 대화 상자가 나타납니다. 이제 이미지 갤러리에서 이미지를 선택할 수 있습니다.

4.  **Platform Images**를 클릭하여 사용하려는 플랫폼 이미지를 선택한 후 화살표를 클릭하여 계속합니다.
    
    **Virtual machine configuration** 대화 상자가 나타납니다.

5.  **Virtual Machine Name**에서 가상 컴퓨터에 사용할 이름을 입력합니다.

6.  **New User Name**에서 서버 관리에 사용하려는 관리자 계정의 이름을 입력합니다.

7.  **New Password**에서 가상 컴퓨터의 관리자 계정에 대한 강력한 암호를 입력합니다. **Confirm Password**에 암호를 다시 입력합니다.

8.  **Size**에서 가상 컴퓨터에 사용할 크기를 선택합니다. 선택하는 크기는 응용 프로그램에 필요한 코어 수에 따라 달라집니다.

9.  Linux 운영 체제를 실행하는 가상 컴퓨터의 경우 SSH 키를 사용하여 컴퓨터 보안을 설정하도록 선택할 수 있습니다.

10. 화살표를 클릭하여 계속합니다.
    
    **Virtual machine mode** 대화 상자가 나타납니다.

11. **Connect to existing Virtual Machine**을 선택하여 가용성 집합에서 첫 번째 가상 컴퓨터와
    연결할 새 가상 컴퓨터를 만듭니다. 가용성 집합에 있는 가상 컴퓨터를 포함하는 클라우드 서비스를 선택합니다.

12. **Storage Account**에서 VHD 파일이 저장된 저장소 계정을 선택합니다.

13. **Region/Affinity Group/Virtual Network**에서 가상 컴퓨터를 포함할 영역을 선택합니다.

14. 화살표를 클릭하여 계속합니다.
    
    **Virtual machine options** 대화 상자가 나타납니다.

15. 첫 번째 가상 컴퓨터를 만들 때 같이 만든 가용성 집합을 선택합니다.

16. 확인 표시를 클릭하여 연결된 가상 컴퓨터를 만들고 가용성 집합에 추가합니다.
    
    새 가상 컴퓨터의 대시보드에서 **Configure**를 클릭하면 가상 컴퓨터가 새 가용성 집합의 구성원임을 확인할 수 있습니다.

## <a id="previousmachine"> </a>3단계: (옵션) 이전에 만든 가상 컴퓨터를 위한 가용성 집합 만들기

가용성 집합을 먼저 만든 다음 가상 컴퓨터를 만들어 추가할 수도 있습니다. 가상 컴퓨터를 만들고 난 후 가상 컴퓨터의 크기와 가용성 집합에 구성원으로 등록할지 여부를 구성할 수 있습니다.

**새 가용성 집합을 만드는 방법**

1.  아직 로그인하지 않은 경우 Azure 관리 포털에 로그인합니다.

2.  **Virtual Machines**를 클릭하고 구성하려는 가상 컴퓨터를 선택합니다.

3.  **Configure**를 클릭합니다.

4.  **Availability Set** 섹션에서 **Create Availability Set**를 선택한 후 가용성 집합 이름을 입력합니다.

5.  **Save**를 클릭합니다.
    
    **참고:** 가용성 집합의 구성원 등록을 마치기 위해 가상 컴퓨터가 다시 시작될 수 있습니다.

## <a id="existingset"> </a>4단계: (옵션) 이전에 만든 가상 컴퓨터를 가용성 집합에 추가

앞서 만든 가용성 집합에 기존 가상 컴퓨터를 쉽게 추가할 수 있습니다. 가상 컴퓨터를 가용성 집합에 추가하려면 해당 가용성 집합에 속한 다른 가상 컴퓨터들과 동일한 클라우드 서비스에 연결되어 있어야 합니다. 가상 컴퓨터 간의 연결에 관한 자세한 정보는 [동일한 클라우드 서비스에 있는 가상 컴퓨터 연결하는 방법](../virtual-machines-connect-cloud-service)을 참조하십시오.

**기존 가상 컴퓨터를 가용성 집합에 추가하는 방법**

1.  아직 로그인하지 않은 경우 Azure 관리 포털에 로그인합니다.

2.  **Virtual Machines**를 클릭한 후 가용성 집합에 추가하려는 가상 컴퓨터를 선택합니다.

3.  **Configure**를 클릭합니다.

4.  **Availability Set** 섹션에서 앞서 만든 가용성 집합을 선택합니다.

5.  **Save**를 클릭합니다.
    
    **참고:** 가용성 집합의 구성원 등록을 마치기 위해 가상 컴퓨터가 다시 시작될 수 있습니다.

<!-- LINKS -->



[1]: http://www.windowsazure.com/en-us/support/legal/sla/
[2]: http://msdn.microsoft.com/library/windowsazure/jj156085.aspx