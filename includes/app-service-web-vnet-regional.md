---
author: ccompy
ms.service: app-service-web
ms.topic: include
ms.date: 02/27/2020
ms.author: ccompy
ms.openlocfilehash: c731e2a7d4da1a66aabb50b335d526fbb6a0a302
ms.sourcegitcommit: bc792d0525d83f00d2329bea054ac45b2495315d
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78671508"
---
지역 VNet 통합을 사용 하면 앱이 다음에 액세스할 수 있습니다.

* 와 통합 하는 동일한 지역에 있는 VNet의 리소스 
* Vnet의 리소스는 동일한 지역에 있는 VNet에 피어 링 합니다.
* 서비스 끝점 보안 서비스
* Express 경로 연결에서 리소스
* 연결 된 VNet의 리소스
* Express 경로 연결을 포함 하는 피어 링 연결 간 리소스
* 전용 끝점 

동일한 지역에서 Vnet와 VNet 통합을 사용 하는 경우 다음과 같은 Azure 네트워킹 기능을 사용할 수 있습니다.

* NSGs (네트워크 보안 그룹)-통합 서브넷에 배치 된 네트워크 보안 그룹을 사용 하 여 아웃 바운드 트래픽을 차단할 수 있습니다. 인바운드 규칙은 적용 되지 않습니다. VNet 통합을 사용 하 여 앱에 대 한 인바운드 액세스를 제공할 수 없기 때문입니다.
* UDRs (경로 테이블)-통합 서브넷에 경로 테이블을 추가 하 여 원하는 위치에 아웃 바운드 트래픽을 보낼 수 있습니다. 

기본적으로 앱은 RFC1918 트래픽만 VNet으로 라우팅합니다. 모든 아웃 바운드 트래픽을 VNet으로 라우팅하려면 앱 설정 WEBSITE_VNET_ROUTE_ALL 앱에 적용 합니다. 앱 설정을 구성 하려면:

1. 앱 포털에서 구성 UI로 이동 합니다. **새 응용 프로그램 설정** 선택
1. 이름 필드에 **WEBSITE_VNET_ROUTE_ALL** 를 입력 하 고 값 필드에 **1** 을 입력 합니다.

   ![응용 프로그램 설정 제공][4]

1. **확인**을 선택합니다.
1. **저장**을 선택합니다.

모든 아웃 바운드 트래픽을 VNet으로 라우팅하는 경우 통합 서브넷에 적용 되는 NSGs 및 UDRs가 적용 됩니다. 모든 아웃 바운드 트래픽을 VNet으로 라우팅하는 경우 다른 곳에서 트래픽을 보내는 경로를 제공 하지 않으면 아웃 바운드 주소는 앱 속성에 나열 된 아웃 바운드 주소가 됩니다. 

동일한 지역에서 Vnet와 VNet 통합을 사용 하는 경우 몇 가지 제한 사항이 있습니다.

* 전역 피어 링 연결에서 리소스에 연결할 수 없습니다.
* 이 기능은 PremiumV2 App Service 계획을 지 원하는 최신 App Service 배율 단위 에서만 사용할 수 있습니다.
* 통합 서브넷은 하나의 App Service 계획 에서만 사용할 수 있습니다.
* 이 기능은 App Service Environment에 있는 격리 된 계획 앱에서 사용할 수 없습니다.
* 이 기능을 사용 하려면 리소스 관리자 VNet에서 32 주소 이상인/27의 사용 하지 않는 서브넷이 필요 합니다.
* 앱과 VNet은 동일한 지역에 있어야 합니다.
* VNet은 통합된 앱을 사용하여 삭제할 수 없습니다. VNet을 삭제 하기 전에 통합을 제거 합니다. 
* 앱과 동일한 구독에 있는 Vnet와만 통합할 수 있습니다.
* App Service 계획 마다 하나의 지역 VNet 통합만 사용할 수 있습니다. 동일한 App Service 계획의 여러 앱에서 동일한 VNet을 사용할 수 있습니다. 
* 지역 VNet 통합을 사용 하는 앱이 있는 경우 앱 또는 계획의 구독을 변경할 수 없습니다.

각 계획 인스턴스에는 하나의 주소가 사용 됩니다. 앱을 5 개의 인스턴스로 크기를 조정 하면 5 개의 주소가 사용 됩니다. 할당 후에는 서브넷 크기를 변경할 수 없으므로 앱이 도달할 수 있는 모든 규모를 수용할 수 있을 정도로 큰 서브넷을 사용 해야 합니다. 64 주소를 포함 하는/26은 권장 크기입니다. /26 64 주소는 30 개의 인스턴스가 있는 프리미엄 요금제를 수용 합니다. 계획의 크기를 조정 하거나 축소 하는 경우 짧은 시간 동안 두 번의 주소가 필요 합니다. 

다른 계획의 앱에서 다른 계획의 앱에 의해 이미 연결 된 VNet에 연결 하려는 경우 기존 VNet 통합에 사용 되는 서브넷과 다른 서브넷을 선택 해야 합니다.  

이 기능은 Linux 용 미리 보기 상태입니다. 기능의 Linux 형식은 RFC 1918 주소 (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16)를 호출 하는 것만 지원 합니다.

### <a name="web--function-app-for-containers"></a>컨테이너에 대 한 웹/함수 앱

기본 제공 이미지를 사용 하 여 Linux에서 앱을 호스트 하는 경우에는 추가 변경 없이 지역 VNet 통합이 작동 합니다. 컨테이너에 웹/함수 앱를 사용 하는 경우 VNet 통합을 사용 하기 위해 docker 이미지를 수정 해야 합니다. Docker 이미지에서 하드 코드 된 포트 번호를 사용 하는 대신 포트 환경 변수를 주 웹 서버의 수신 대기 포트로 사용 합니다. 포트 환경 변수는 컨테이너 시작 시 플랫폼에서 자동으로 설정 됩니다. SSH를 사용 하는 경우 지역 VNet 통합을 사용 하는 경우 SSH_PORT 환경 변수에 지정 된 포트 번호를 수신 하도록 SSH 디먼을 구성 해야 합니다.  Linux에서 게이트웨이를 요구 하는 VNet 통합은 지원 되지 않습니다. 

### <a name="service-endpoints"></a>서비스 엔드포인트

지역 VNet 통합을 사용 하면 서비스 끝점을 사용할 수 있습니다.  앱에서 서비스 끝점을 사용 하려면 지역 VNet 통합을 사용 하 여 선택한 VNet에 연결한 다음 통합에 사용한 서브넷에서 서비스 끝점을 구성 합니다. 

### <a name="network-security-groups"></a>네트워크 보안 그룹

네트워크 보안 그룹을 사용 하면 VNet의 리소스에 대 한 인바운드 및 아웃 바운드 트래픽을 차단할 수 있습니다. 지역 VNet 통합을 사용 하는 앱은 [네트워크 보안 그룹][VNETnsg] 을 사용 하 여 VNet 또는 인터넷의 리소스에 대 한 아웃 바운드 트래픽을 차단할 수 있습니다. 공용 주소에 대 한 트래픽을 차단 하려면 응용 프로그램 설정 WEBSITE_VNET_ROUTE_ALL 1로 설정 해야 합니다. VNet 통합은 앱의 아웃 바운드 트래픽에만 영향을 주므로 NSG의 인바운드 규칙은 앱에 적용 되지 않습니다. 앱에 대 한 인바운드 트래픽을 제어 하려면 액세스 제한 기능을 사용 합니다. 통합 서브넷에 적용 되는 NSG는 통합 서브넷에 적용 된 경로에 관계 없이 적용 됩니다. WEBSITE_VNET_ROUTE_ALL 1로 설정 되 고 통합 서브넷의 공용 주소 트래픽에 영향을 주는 경로가 없는 경우 모든 아웃 바운드 트래픽은 통합 서브넷에 할당 된 NSGs에 계속 적용 됩니다. WEBSITE_VNET_ROUTE_ALL를 설정 하지 않은 경우 NSGs는 RFC1918 트래픽에만 적용 됩니다.

### <a name="routes"></a>경로

경로 테이블을 사용 하면 앱의 아웃 바운드 트래픽을 원하는 위치로 라우팅할 수 있습니다. 기본적으로 경로 테이블은 RFC1918 대상 트래픽에만 영향을 줍니다.  WEBSITE_VNET_ROUTE_ALL를 1로 설정 하면 모든 아웃 바운드 호출에 영향을 미칩니다. 통합 서브넷에 설정 된 경로는 인바운드 앱 요청에 대 한 회신에 영향을 주지 않습니다. 일반적인 대상에는 방화벽 장치나 게이트웨이가 포함 될 수 있습니다. 모든 아웃 바운드 트래픽을 온-프레미스로 라우팅하는 경우 경로 테이블을 사용 하 여 모든 아웃 바운드 트래픽을 Express 경로 게이트웨이로 보낼 수 있습니다. 게이트웨이로 트래픽을 라우팅하는 경우에는 응답을 다시 보내도록 외부 네트워크에서 경로를 설정 해야 합니다.

BGP (Border Gateway Protocol) 경로만 앱 트래픽에 영향을 줍니다. Express 경로 게이트웨이와 같은 항목에서 BGP 경로를 사용할 경우 앱 아웃 바운드 트래픽이 영향을 받습니다. 기본적으로 BGP 경로는 RFC1918 대상 트래픽에만 영향을 줍니다. WEBSITE_VNET_ROUTE_ALL 1로 설정 된 경우 모든 아웃 바운드 트래픽은 BGP 경로의 영향을 받을 수 있습니다. 


<!--Image references-->
[4]: ../includes/media/web-sites-integrate-with-vnet/vnetint-appsetting.png

<!--Links-->
[VNETnsg]: https://docs.microsoft.com/azure/virtual-network/security-overview/