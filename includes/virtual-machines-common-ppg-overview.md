---
title: 파일 포함
description: 포함 파일
services: virtual-machines
author: cynthn
ms.service: virtual-machines
ms.topic: include
ms.date: 10/30/2019
ms.author: zivr
ms.custom: include file
ms.openlocfilehash: fb2eb2d237a1245627bbdb6f4f2eacbb9966a2c6
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/28/2020
ms.locfileid: "81422123"
---
Vm을 단일 지역에 배치 하면 인스턴스 간의 물리적인 거리가 줄어듭니다. 단일 가용성 영역에 배치 하는 경우에도 물리적으로 긴밀 하 게 통합 됩니다. 그러나 Azure 공간이 증가 함에 따라 단일 가용성 영역은 여러 물리적 데이터 센터에 걸쳐 있을 수 있으며이로 인해 응용 프로그램에 영향을 주는 네트워크 대기 시간이 발생할 수 있습니다. 

가능한 한 가까운 시간 내에 Vm을 가져오기 위해 가장 낮은 대기 시간을 달성 하려면 근접 배치 그룹 내에 배포 해야 합니다.

근접 배치 그룹은 Azure 계산 리소스가 물리적으로 서로 가까운 위치에 있는지 확인 하는 데 사용 되는 논리적 그룹화입니다. 근접 배치 그룹은 낮은 대기 시간을 요구 하는 작업에 유용 합니다.


- 독립 실행형 Vm 간의 짧은 대기 시간.
- 단일 가용성 집합 또는 가상 머신 확장 집합의 Vm 간에 짧은 대기 시간 
- 독립 실행형 Vm, 여러 가용성 집합의 Vm 또는 여러 확장 집합 간의 짧은 대기 시간 단일 배치 그룹에 여러 계산 리소스를 포함 하 여 다중 계층 응용 프로그램을 함께 만들 수 있습니다. 
- 서로 다른 하드웨어 유형을 사용 하는 여러 응용 프로그램 계층 간의 짧은 대기 시간 예를 들어 가용성 집합에서 M 시리즈를 사용 하 여 백 엔드를 실행 하 고 단일 근접 배치 그룹의 확장 집합에서 D 시리즈 인스턴스의 프런트 엔드를 실행 합니다.


![근접 배치 그룹에 대 한 그래픽](./media/virtual-machines-common-ppg/ppg.png)

## <a name="using-proximity-placement-groups"></a>근접 배치 그룹 사용 

근접 배치 그룹은 Azure의 새로운 리소스 종류입니다. 다른 리소스와 함께 사용 하기 전에 만들어야 합니다. 만든 후에는 가상 머신, 가용성 집합 또는 가상 머신 확장 집합에 사용할 수 있습니다. 근접 배치 그룹 ID를 제공 하는 계산 리소스를 만들 때 근접 배치 그룹을 지정 합니다. 

기존 리소스를 근접 배치 그룹으로 이동할 수도 있습니다. 리소스를 근접 배치 그룹으로 이동할 때 먼저 자산을 중지 (할당 취소) 하 여 해당 지역에서 다른 데이터 센터로 잠재적으로 다시 배포 되므로 공동 위치 제약 조건을 충족 해야 합니다. 

가용성 집합 및 가상 머신 확장 집합의 경우 개별 가상 머신 대신 리소스 수준에서 근접 배치 그룹을 설정 해야 합니다. 

근접 배치 그룹은 고정 메커니즘이 아닌 공동 배치 제약 조건입니다. 첫 번째 리소스의 배포를 사용 하 여 특정 데이터 센터에 고정 됩니다. 근접 배치 그룹을 사용 하는 모든 리소스를 중지 (할당 취소) 하거나 삭제 한 후에는 더 이상 고정 되지 않습니다. 따라서 여러 VM 시리즈를 포함 하는 근접 배치 그룹을 사용 하는 경우 가능 하면 템플릿에서 선행 하는 모든 유형을 지정 하는 것이 중요 합니다. 그렇지 않으면 배포 시퀀스를 수행 하 여 성공적인 배포에 대 한 기회가 향상 됩니다. 배포에 실패 하는 경우 배포 하는 첫 번째 크기로 실패 한 VM 크기를 사용 하 여 배포를 다시 시작 합니다.

## <a name="what-to-expect-when-using-proximity-placement-groups"></a>근접 배치 그룹을 사용할 때 필요한 사항 
근접 배치 그룹은 동일한 데이터 센터에 공동 배치를 제공 합니다. 그러나 근접 배치 그룹은 추가 배포 제약 조건을 나타내므로 할당 실패가 발생할 수 있습니다. 근접 배치 그룹을 사용 하는 경우 할당 오류를 볼 수 있는 몇 가지 사용 사례가 있습니다.

- 근접 배치 그룹의 첫 번째 가상 컴퓨터에 대 한 요청을 하면 데이터 센터가 자동으로 선택 됩니다. 경우에 따라 다른 가상 컴퓨터 SKU에 대 한 두 번째 요청이 해당 데이터 센터에 존재 하지 않는 경우 실패할 수 있습니다. 이 경우 **OverconstrainedAllocationRequest** 오류가 반환 됩니다. 이를 방지 하려면 Sku를 배포 하는 순서를 변경 하거나 단일 ARM 템플릿을 사용 하 여 두 리소스를 배포 하는 순서를 변경 합니다.
-   VM 인스턴스를 추가 하 고 제거 하는 탄력적 작업의 경우 배포에 근접 배치 그룹 제약 조건을 적용 하면 요청을 충족 하지 못하여 **AllocationFailure** 오류가 발생할 수 있습니다. 
- 필요에 따라 Vm을 중지 (할당 취소) 하 고 시작 하는 것은 탄력성를 달성할 수 있는 또 다른 방법입니다. VM을 중지 (할당 취소) 한 후에는 용량을 유지 하지 않으므로 다시 시작 하면 **AllocationFailure** 오류가 발생할 수 있습니다.


## <a name="best-practices"></a>모범 사례 
- 대기 시간이 가장 짧은 경우 근접 배치 그룹을 가속 네트워킹과 함께 사용 합니다. 자세한 내용은 [가속화 된 네트워킹을 사용 하 여 Linux 가상 머신 만들기](https://docs.microsoft.com/azure/virtual-network/create-vm-accelerated-networking-cli?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) 또는 [가속화 된 네트워킹을 사용 하 여 Windows 가상 머신](/azure/virtual-network/create-vm-accelerated-networking-powershell?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)만들기를 참조 하세요.
- 모든 VM 크기를 단일 템플릿으로 배포 합니다. 필요한 모든 VM Sku 및 크기를 지원 하지 않는 하드웨어를 사용 하지 않도록 하려면 모든 응용 프로그램 계층을 단일 템플릿에 포함 하 여 모든 응용 프로그램을 동시에 배포 해야 합니다.
- PowerShell, CLI 또는 SDK를 사용 하 여 배포를 스크립팅 하는 경우 할당 오류가 `OverconstrainedAllocationRequest`발생할 수 있습니다. 이 경우 모든 기존 Vm을 중지/할당 취소 하 고 실패 한 VM SKU/크기로 시작 하도록 배포 스크립트의 시퀀스를 변경 해야 합니다. 
- Vm을 삭제 한 기존 배치 그룹을 다시 사용 하는 경우 Vm을 추가 하기 전에 삭제가 완전히 완료 될 때까지 기다립니다.
- 대기 시간이 첫 번째 우선 순위의 경우 근접 배치 그룹에 Vm을 배치 하 고 전체 솔루션을 가용성 영역에 배치 합니다. 그러나 복원 력이 가장 중요 한 경우에는 여러 가용성 영역에 인스턴스를 분산 시킵니다 (단일 근접 배치 그룹은 영역을 확장할 수 없음).
